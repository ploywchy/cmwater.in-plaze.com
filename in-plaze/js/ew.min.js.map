{"version":3,"sources":["dist/js/ew.js"],"names":["$","_interopDefaultLegacy","e","default","$__default","jQuery","commonjsGlobal","globalThis","window","global","self","basedir","module","regenerator","runtime","exports","undefined$1","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","GenStateSuspendedStart","method","arg","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","GenStateSuspendedYield","makeInvokeMethod","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","constructor","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","toString","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","path","require","base","commonjsRequire","_createForOfIteratorHelperLoose","o","allowArrayLike","it","Array","isArray","minLen","_arrayLikeToArray","n","from","test","_unsupportedIterableToArray","bind","arr","len","arr2","Blob","FormData","normalizeValue","_ref","filename","File","lastModified","ensureArgs","args","expected","normalizeArgs","String","undefined","each","cb","global$1","_FormData","_send","XMLHttpRequest","send","_fetch","Request","fetch","_sendBeacon","navigator","sendBeacon","stringTag","a","b","d","c","blob","t","Date","defineProperties","lastModifiedDate","FormDataPolyfill","form","_data","elements","elm","disabled","files","file","append","options","opt","selected","checked","replace","normalizeLinefeeds","_proto","arguments","_normalizeArgs$apply","apply","map","delete","entries","_iterator","_step","_context","t0","t1","callback","thisArg","_step2","_iterator2","_step2$value","get","getAll","has","_iterator3","_step3","_step3$value","_context2","set","_iterator4","_step4","_step4$value","_context3","_step5","fd","_iterator5","_step5$value","_step6","boundary","Math","random","chunks","_iterator6","_step6$value","setRequestHeader","toLowerCase","_hasContentType","data","_fetch2","input","init","body","url","Validators","userLevelId","el","ew","checkInteger","language","phrase","parseInt","userLevelName","id","elId","document","getElementById","trim","level","sameText","includes","required","fieldName","_$el$data","$el","$p","closest","substr","css","hasValue","fileRequired","elFn","mismatchPassword","startsWith","elPwd","between","x","z","val","passwordStrength","isMaskedPassword","hasClass","username","raw","match","RegExp","escapeRegExChars","INVALID_USERNAME_CHARACTERS","password","ENCRYPTED_PASSWORD","INVALID_PASSWORD_CHARACTERS","email","getValue","checkEmail","emails","cnt","checkEmails","datetime","dateFormat","phraseId","newSubStr","DATE_SEPARATOR","checkShortDate","checkDate","checkShortEuroDate","checkEuroDate","checkShortUSDate","checkUSDate","checkDateDef","DATE_FORMAT","time","checkTime","float","checkNumber","range","min","max","checkRange","integer","phone","checkPhone","zip","checkZip","creditCard","checkCreditCard","ssn","checkSsn","guid","checkGuid","regex","pattern","checkByRegEx","custom","_len","_key","concat","captcha","recaptcha","_grecaptcha","grecaptcha","getResponse","dataset","_defineProperties","target","props","descriptor","createClass","Constructor","protoProps","staticProps","assertThisInitialized","ReferenceError","inheritsLoose","subClass","superClass","asyncGeneratorStep","gen","_next","_throw","asyncToGenerator","FormBase","pageId","_initiated","$element","htmlForm","initSearchPanel","modified","validateRequired","validate","emptyRow","multiPage","autoSuggests","lists","disableForm","getForm","find","prop","addClass","enableForm","$form","removeClass","appendHidden","$dp","attr","ar","serializeArray","appendTo","canSubmit","updateTextArea","$dps","dp","j","$els","not","submit","_callee","action","f","trigger","isBoolean","isObject","_x","_x2","getList","compileTemplates","_i","_lists","list","template","isString","templates","is","getElement","getElements","selector","updateLists","rowindex","isNumber","confirm","querySelector","removeSpinner","fixId","multiple","split","prefix","endsWith","_ref2","join","actions","promises","_i2","_Object$entries","_Object$entries$_i","_id","parents","parentFields","parent","ajax","pvalues","getOptionValues","updateOptions","setTimeout","shift","AJAX_DELAY","all","source","console","log","createAutoSuggest","settings","assign","limit","AUTO_SUGGEST_MAX_ENTRIES","autoSuggestSettings","AutoSuggest","initEditors","filter","ed","active","save","destroyEditor","destroy","onError","msg","initUpload","index","later","upload","setupFilters","filters","filterList","$sf","toggleClass","$df","$delete","$save","saveFilters","SEARCH_FILTER_OPTION","localStorage","setItem","JSON","stringify","$body","currentPage","dataType","success","always","off","on","prompt","sanitize","prevAll","remove","$submenu","splice","insertBefore","TOKEN_NAME_KEY","TOKEN_NAME","ANTIFORGERY_TOKEN_KEY","ANTIFORGERY_TOKEN","IS_LOGGEDIN","IS_SYS_ADMIN","CURRENT_USER_NAME","item","getItem","parseJson","grep","show","hide","isSearch","hasFormData","collapse","text","render","loadjs","ready","$tab","getAttribute","$panel","$container","width","CONFIRM_CANCEL","href","location","forms","add","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","_objectSpread","getOwnPropertyDescriptors","_createForOfIteratorHelperLoose$1","_arrayLikeToArray$1","_unsupportedIterableToArray$1","Field","fldvar","validators","invalid","validator","addValidator","addError","_this$_error","_error","clearErrors","clearValidators","_element","shouldValidate","updateFeedback","errorMessage","html","setInvalid","focus","setFocus","_checkbox","_this$_element","_this$_element$id","ownKeys$1","_objectSpread$1","_createForOfIteratorHelperLoose$2","_arrayLikeToArray$2","_unsupportedIterableToArray$2","Form","_FormBase","_this","addField","fields","getField","addFields","field","addCustomError","makeVisible","element","gotoPageByElement","$pane","click","validateFields","rowIndex","row","_Object$values","_i3","_Object$values2","AjaxLookup","elementId","formElement","m","pf","debounce","recordCount","formatResult","isAutoSuggest","jsRenderHelpers","displayValue","generateRequest","page","LANGUAGE_ID","getUserParams","arp","MULTIPLE_OPTION_SEPARATOR","getUrl","query","start","params","URLSearchParams","q","rnd","getApiUrl","API_LOOKUP_ACTION","prepare","transform","results","totalRecordCount","records","_isAutoSuggest","SelectionListOption","emptyObj","typeahead","timer","$input","minWidth","maxHeight","highlight","hint","minLength","delay","display","forceSelection","forceSelect","setValue","v","findIndex","option","lf","syncResults","asyncResults","cancel","count","menu","$node","more","ta","datasets","_append","scrollTop","$lastSuggestion","outerHeight","isOpen","empty","$item","getActiveSelectable","close","tpl","$more","one","preventDefault","stopPropagation","$menu","$dataset","max-height","overflow-y","Forms","_forms","ids","_createForOfIteratorHelperLoose$3","_arrayLikeToArray$3","_unsupportedIterableToArray$3","ownKeys$2","_objectSpread$2","_fixLayoutHeightTimer","currentUrl","URL","$document","_removeSpinner","initIcons","tooltip","container","IS_MOBILE","placement","sanitizeFn","initPasswordOptions","pStrength","MIN_PASSWORD_STRENGTH","$this","changeBackground","backgrounds","passwordValidFrom","onPasswordStrengthChanged","strength","percentage","$pst","$pb","outerWidth","pct","pGenerator","passwordLength","GENERATE_PASSWORD_LENGTH","uppercase","GENERATE_PASSWORD_UPPERCASE","lowercase","GENERATE_PASSWORD_LOWERCASE","numbers","GENERATE_PASSWORD_NUMBER","specialChars","GENERATE_PASSWORD_SPECIALCHARS","onPasswordGenerated","pwd","triggerHandler","PATH_BASE","API_URL","qs","route","encodeURIComponent","sanitizeUrl","search","searchParams","initExportLinks","fileDownload","initMultiSelectCheckboxes","$cbs","_update","isHtml","Swal","fire","sweetAlertSettings","showConfirmButton","allowOutsideClick","allowEscapeKey","willOpen","showLoading","cache","xhrFields","responseType","textStatus","jqXHR","createObjectURL","createElement","getResponseHeader","style","download","appendChild","objectUrl","revokeObjectURL","fail","errorThrown","_Swal$getActions","hideLoading","update","getActions","classList","showValidationMessage","lazyLoad","LAZY_LOAD","src","initLightboxes","USE_COLORBOX","lightboxSettings","title","current","previous","xhrError","imgError","colorbox","rel","initPdfObjects","EMBED_PDF","PDFObjectOptions","PDFObject","embed","fallbackLink","initTooltips","popover","parse","isFunction","_prompt","confirmButtonText","showCancelButton","cancelButtonText","inputValidator","toast","toastOptions","Toasts","position","toUpperCase","substring","children","first","showToast","class","autohide","autoHideSuccessMessage","autoHideSuccessMessageDelay","$f","parentId","change","isUndefined","childFields","promise","els","getId","names","$elf","typ","elf","_updateOptions","autoFillTargetFields","autoFill","fo","frmo","$obj","clearOptions","addOpt","valid","newOption","selectOption","_updateSibling","lookupOptions","ds","isModalLookup","root","convertToBool","_export","sel","fobj","keySelected","_alert","serialize","end","isHiddenTextArea","isHidden","selectAll","setColor","$row","$tbl","ROWTYPE_ADD","ROWTYPE_EDIT","clearSelected","tbl","rows","r","$r","clearDelete","$tr","siblings","addBack","clickDelete","setupTable","force","$rows","tBodies","mouseOver","mouseOut","$target","cells","last","div","parentsUntil","RESPONSIVE_TABLE_CLASS","rowSpan","clientHeight","offsetHeight","attach","edit","sw","setupGrid","grid","$grid","USE_OVERLAY_SCROLLBARS","overlayScrollbars","overlayScrollbarsOptions","table","getAncestorBy","node","parentNode","nodeType","contains","o1","o2","lookup","getOptionTexts","lo","hasAttribute","removeAll","valueSeparator","sep","df","isValue","optionHtml","OPTION_HTML_TEMPLATE","optionsHtml","MAX_OPTION_COUNT","frm","df1","df2","df3","df4","innerHTML","selectedIndex","vals","_opts","_opt","isAutoSelect","_opts2","_ajaxStop","lastPageSubmit","executeScript","matches","matchAll","addScript","stripScript","_ar2","scr","removeScript","getContent","getOptions","modalDialogHide","$dlg","removeData","$bd","ewjtable","className","reload","dest_array","destEl","v0","pid","post","$tt","trig","dir","CSS_FLIP","content","wd","$tip","getTipElement","object_value","checkDateEx","format","arDT","re","sYear","sMonth","sDay","exec","wrksep","arD","unformatYear","checkDay","yr","UNFORMAT_YEAR","checkYear","checkMonth","maxDay","ts","THOUSANDS_SEP","DECIMAL_POINT","stringToFloat","parseFloat","str","min_value","max_value","isNull","TIME_SEPARATOR","showMessage","_arg$target","doc","swal","win","p","$div","$alert","$heading","detach","$content","w","$toast","floor","redirect","newUrl","ajaxSend","event","jqxhr","apiUrl","isApi","allowed","hostname","API_JWT_TOKEN","IS_WINDOWS_AUTHENTICATION","API_JWT_AUTHORIZATION_HEADER","ajaxStart","addSpinner","ajaxStop","ajaxError","functions","createSelect","opts","selectId","select2","amd","Utils","ResultsList","InfiniteScroll","HidePlaceholder","SelectOnClose","selectOptions","resultsAdapter","dropdown","columns","customOption","Decorate","Select2CustomOption","decorated","$results","displayMessage","escapeMarkup","clear","$message","message","sort","cols","$option","attrs","role","aria-selected","Element","msMatchesSelector","webkitMatchesSelector","_resultId","setAttribute","StoreData","getSelect2CustomOptionClass","iconClass","templateResult","HTMLOptionElement","placeholder","selectOnClose","term","processResults","pagination","$select","_$$","minimumResultsForSearch","Infinity","setSessionTimer","timeoutTime","keepAliveTimer","counter","useKeepAlive","SESSION_KEEP_ALIVE_INTERVAL","IS_AUTOLOGIN","keepAlive","API_SESSION_ACTION","token","resetTimer","SESSION_TIMEOUT_COUNTDOWN","SESSION_TIMEOUT","timeout","timerInterval","timerProgressBar","setInterval","sec","timeleft","round","getTimerLeft","textContent","onClose","clearInterval","setTimer","dismiss","DismissReason","TIMEOUT_URL","keepAliveInterval","updateDropdownPosition","select","_positionDropdown","_resizeDropdown","searchOperatorChanged","parm","$fld","$fld2","hasY","$cond","hasCond","$and","opr","$opr2","opr2","isBetween","isNullOpr","isNullOpr2","hideOpr2","hideX","hideY","setSearchType","applyTemplate","divId","tmplId","classId","exportType","export","enabled","replaceWith","_document$getElementB","querySelectorAll","subtmpl","rowspan","childNodes","views","hasTag","jsRenderAttributes","scripts","tmpl","$meta","PDF_STYLESHEET_FILENAME","PROJECT_STYLESHEET_FILENAME","responseText","customexport","param","toggleGroup","idx","valueChanged","infix","fld","bool","nelm","oelm","fnelm","setLanguage","submitAction","srcElement","currentForm","isPost","isMultiple","_success","_submit","k","removeSpaces","alert","clearError","jquery","shiftKey","ctrlKey","confirmDelete","selectAllKey","updateSelected","clickMultiCheckbox","$cb","addGridRow","$tpl","$lastrow","clone","suffix","$elkeycnt","keycnt","data-rowindex","attributes","after","scrollHeight","deleteGridRow","rowidx","keycntname","_delete","$keyact","htmlEncode","sameString","_val","_val2","addOptionDialogShow","addOptionDialog","_submitSuccess","_results","lnk","objName","API_OBJECT_NAME","modal","linkField","dfs","displayFields","ffs","filterFields","pfs","lfv","ff","txt","$lu","nv","arOpt","obj2","ar2","_results2","_results$error","description","_results3","failureMessage","_fail","status","statusText","btn","$btn","API_ADD_ACTION","filterFieldVars","nodeName","modalDialogShow","modalDialog","showing","size","_caption","$lnk","caption","_button","_always","handleResult","pathname","_current","view","warningMessage","successMessage","_result$error","_result$error2","footer","cf","ct","modalLookupShow","modalLookupDialog","_timer","$search","oid","_format","setAutoSuggest","txts","useText","srch","arLinkValue","linkValue","paging","pageSize","pageSizes","pageSizeChangeArea","pageList","selecting","selectingCheckboxes","multiselect","listAction","postData","jtParams","recperpage","messages","serverCommunicationError","loadingMessage","spinnerClass","noDataAvailable","pagingInfo","pageSizeChangeLabel","gotoPageLabel","recordsLoaded","selectedRows","selectionChanged","indexOf","toggle","LOOKUP_DELAY","sv","importDialogShow","importDialog","$data","$progress","classname","$msg","hideMessage","showProgress","pc","updateProgress","tcnt","totalCount","importProgress","API_PROGRESS_ACTION","API_FILE_TOKEN_NAME","importComplete","fileResults","fileResult","scnt","successCount","fcnt","failCount","showLog","failList","ecnt","importFail","formData","session","SESSION_ID","importUploadOptions","acceptFileTypes","IMPORT_FILE_ALLOWED_EXT","fileupload","API_UPLOAD_ACTION","autoUpload","singleFileUploads","maxFileSize","maxNumberOfFiles","minFileSize","beforeSend","importfiles","ok","filetoken","API_ACTION_NAME","xhr","importFiles","processfail","progressall","loaded","total","uploadProgress","hdr","emailDialogShow","emailDialog","MAX_EMAIL_RECIPIENT","exportid","exportWithCharts","showDrillDown","arUrl","pos","height","ypos","offset","top","pageY","xpos","left","pageX","drillDownCharts","cht","dispose","_convert","response","API_LIST_ACTION","API_VIEW_ACTION","API_DELETE_ACTION","responseJSON","toggleSearchOperator","stringToDate","creditcard_string","tempdigit","doubledigit","checkdigit","email_cnt","arEmails","nid","readonly","$ft","$fn","$fa","$fs","$exts","$maxsize","$maxfilecount","$label","label","_confirmDelete","_downloadTemplate","_uploadTemplate","uploadUrl","API_JQUERY_UPLOAD_ACTION","exts","maxsize","maxfilecount","multipart","loadImageFileTypes","loadVideoFileTypes","loadAudioFileTypes","filesContainer","uploadTemplateId","downloadTemplateId","uploadTemplate","downloadTemplate","previewMaxWidth","UPLOAD_THUMBNAIL_WIDTH","previewMaxHeight","UPLOAD_THUMBNAIL_HEIGHT","dropZone","pasteZone","MULTIPLE_UPLOAD_SEPARATOR","originalEvent","fid","_data$files","l","_data$files2","_data$result","_data$result$files","_data$files3","Event","parseNumber","config","regexBits","separator","thousandsSeparator","decimalSeparator","decimal","isFinite","formatNumber","decIndex","newOutput","isNeg","output","decPlaces","decimalPlaces","decSep","thouSep","toFixed","lastIndexOf","parseDate","makeArray","def","timesep","moment","formatDate","initPage","$tables","initGridPanel","renderJsTemplates","initForms","adminlte","Treeview","_jQueryInterface","$window","IS_SCREEN_SM_MIN","$rpt","mh","USE_JAVASCRIPT_MESSAGE","togglePassword","currentTarget","$i","exportId","exportUrl","now","exp","exportCharts","charts","toBase64Image","chart_engine","stream_type","stream","parameters","API_EXPORT_CHART_ACTION","fixLayoutHeight","layout","addEventHandlers","tblVar","events","fldVar","matchMedia","MOBILE_DETECT","MobileDetect","userAgent","mobile","IS_IE","version","MultiPage","formid","formID","pageIndex","maxPageIndex","minPageIndex","pageIndexes","$pages","$collapses","isTab","isCollapse","hideDisabledButton","hideInactivePages","lockTabs","hideTabs","showPagerTop","showPagerBottom","pagerTemplate","_show","_properties","before","pageShow","gotoPage","$page","eq","gotoPageByIndex","gotoPageByElementId","togglePage","$tabs","googleMaps","google","maps","setCenter","$bodies","$document$1","debugMode","DEBUG","hash","animate","zIndex","extend","isDate","when","periodic","interval","clearTimeout","rec","_this$data","visible","_this$data2","toNumber","toDate","toJsDate","_toggle","$currentTarget","treeviewMenu","isText","tagName","stopImmediatePropagation"],"mappings":"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","sourcesContent":["/*!\n * JavaScript for PHPMaker v2021.0.14\n * Copyright (c) e.World Technology Limited. All rights reserved.\n */\n(function ($) {\n  'use strict';\n\n  function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\n  var $__default = /*#__PURE__*/_interopDefaultLegacy($);\n\n  var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n  function createCommonjsModule(fn, basedir, module) {\n  \treturn module = {\n  \t  path: basedir,\n  \t  exports: {},\n  \t  require: function (path, base) {\n        return commonjsRequire(path, (base === undefined || base === null) ? module.path : base);\n      }\n  \t}, fn(module, module.exports), module.exports;\n  }\n\n  function commonjsRequire () {\n  \tthrow new Error('Dynamic requires are not currently supported by @rollup/plugin-commonjs');\n  }\n\n  var runtime_1 = createCommonjsModule(function (module) {\r\n  /**\r\n   * Copyright (c) 2014-present, Facebook, Inc.\r\n   *\r\n   * This source code is licensed under the MIT license found in the\r\n   * LICENSE file in the root directory of this source tree.\r\n   */\r\n\r\n  var runtime = (function (exports) {\r\n\r\n    var Op = Object.prototype;\r\n    var hasOwn = Op.hasOwnProperty;\r\n    var undefined$1; // More compressible than void 0.\r\n    var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\r\n    var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\r\n    var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\r\n    var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\r\n\r\n    function define(obj, key, value) {\r\n      Object.defineProperty(obj, key, {\r\n        value: value,\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true\r\n      });\r\n      return obj[key];\r\n    }\r\n    try {\r\n      // IE 8 has a broken Object.defineProperty that only works on DOM objects.\r\n      define({}, \"\");\r\n    } catch (err) {\r\n      define = function(obj, key, value) {\r\n        return obj[key] = value;\r\n      };\r\n    }\r\n\r\n    function wrap(innerFn, outerFn, self, tryLocsList) {\r\n      // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\r\n      var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\r\n      var generator = Object.create(protoGenerator.prototype);\r\n      var context = new Context(tryLocsList || []);\r\n\r\n      // The ._invoke method unifies the implementations of the .next,\r\n      // .throw, and .return methods.\r\n      generator._invoke = makeInvokeMethod(innerFn, self, context);\r\n\r\n      return generator;\r\n    }\r\n    exports.wrap = wrap;\r\n\r\n    // Try/catch helper to minimize deoptimizations. Returns a completion\r\n    // record like context.tryEntries[i].completion. This interface could\r\n    // have been (and was previously) designed to take a closure to be\r\n    // invoked without arguments, but in all the cases we care about we\r\n    // already have an existing method we want to call, so there's no need\r\n    // to create a new function object. We can even get away with assuming\r\n    // the method takes exactly one argument, since that happens to be true\r\n    // in every case, so we don't have to touch the arguments object. The\r\n    // only additional allocation required is the completion record, which\r\n    // has a stable shape and so hopefully should be cheap to allocate.\r\n    function tryCatch(fn, obj, arg) {\r\n      try {\r\n        return { type: \"normal\", arg: fn.call(obj, arg) };\r\n      } catch (err) {\r\n        return { type: \"throw\", arg: err };\r\n      }\r\n    }\r\n\r\n    var GenStateSuspendedStart = \"suspendedStart\";\r\n    var GenStateSuspendedYield = \"suspendedYield\";\r\n    var GenStateExecuting = \"executing\";\r\n    var GenStateCompleted = \"completed\";\r\n\r\n    // Returning this object from the innerFn has the same effect as\r\n    // breaking out of the dispatch switch statement.\r\n    var ContinueSentinel = {};\r\n\r\n    // Dummy constructor functions that we use as the .constructor and\r\n    // .constructor.prototype properties for functions that return Generator\r\n    // objects. For full spec compliance, you may wish to configure your\r\n    // minifier not to mangle the names of these two functions.\r\n    function Generator() {}\r\n    function GeneratorFunction() {}\r\n    function GeneratorFunctionPrototype() {}\r\n\r\n    // This is a polyfill for %IteratorPrototype% for environments that\r\n    // don't natively support it.\r\n    var IteratorPrototype = {};\r\n    IteratorPrototype[iteratorSymbol] = function () {\r\n      return this;\r\n    };\r\n\r\n    var getProto = Object.getPrototypeOf;\r\n    var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\r\n    if (NativeIteratorPrototype &&\r\n        NativeIteratorPrototype !== Op &&\r\n        hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\r\n      // This environment has a native %IteratorPrototype%; use it instead\r\n      // of the polyfill.\r\n      IteratorPrototype = NativeIteratorPrototype;\r\n    }\r\n\r\n    var Gp = GeneratorFunctionPrototype.prototype =\r\n      Generator.prototype = Object.create(IteratorPrototype);\r\n    GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\r\n    GeneratorFunctionPrototype.constructor = GeneratorFunction;\r\n    GeneratorFunction.displayName = define(\r\n      GeneratorFunctionPrototype,\r\n      toStringTagSymbol,\r\n      \"GeneratorFunction\"\r\n    );\r\n\r\n    // Helper for defining the .next, .throw, and .return methods of the\r\n    // Iterator interface in terms of a single ._invoke method.\r\n    function defineIteratorMethods(prototype) {\r\n      [\"next\", \"throw\", \"return\"].forEach(function(method) {\r\n        define(prototype, method, function(arg) {\r\n          return this._invoke(method, arg);\r\n        });\r\n      });\r\n    }\r\n\r\n    exports.isGeneratorFunction = function(genFun) {\r\n      var ctor = typeof genFun === \"function\" && genFun.constructor;\r\n      return ctor\r\n        ? ctor === GeneratorFunction ||\r\n          // For the native GeneratorFunction constructor, the best we can\r\n          // do is to check its .name property.\r\n          (ctor.displayName || ctor.name) === \"GeneratorFunction\"\r\n        : false;\r\n    };\r\n\r\n    exports.mark = function(genFun) {\r\n      if (Object.setPrototypeOf) {\r\n        Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\r\n      } else {\r\n        genFun.__proto__ = GeneratorFunctionPrototype;\r\n        define(genFun, toStringTagSymbol, \"GeneratorFunction\");\r\n      }\r\n      genFun.prototype = Object.create(Gp);\r\n      return genFun;\r\n    };\r\n\r\n    // Within the body of any async function, `await x` is transformed to\r\n    // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\r\n    // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\r\n    // meant to be awaited.\r\n    exports.awrap = function(arg) {\r\n      return { __await: arg };\r\n    };\r\n\r\n    function AsyncIterator(generator, PromiseImpl) {\r\n      function invoke(method, arg, resolve, reject) {\r\n        var record = tryCatch(generator[method], generator, arg);\r\n        if (record.type === \"throw\") {\r\n          reject(record.arg);\r\n        } else {\r\n          var result = record.arg;\r\n          var value = result.value;\r\n          if (value &&\r\n              typeof value === \"object\" &&\r\n              hasOwn.call(value, \"__await\")) {\r\n            return PromiseImpl.resolve(value.__await).then(function(value) {\r\n              invoke(\"next\", value, resolve, reject);\r\n            }, function(err) {\r\n              invoke(\"throw\", err, resolve, reject);\r\n            });\r\n          }\r\n\r\n          return PromiseImpl.resolve(value).then(function(unwrapped) {\r\n            // When a yielded Promise is resolved, its final value becomes\r\n            // the .value of the Promise<{value,done}> result for the\r\n            // current iteration.\r\n            result.value = unwrapped;\r\n            resolve(result);\r\n          }, function(error) {\r\n            // If a rejected Promise was yielded, throw the rejection back\r\n            // into the async generator function so it can be handled there.\r\n            return invoke(\"throw\", error, resolve, reject);\r\n          });\r\n        }\r\n      }\r\n\r\n      var previousPromise;\r\n\r\n      function enqueue(method, arg) {\r\n        function callInvokeWithMethodAndArg() {\r\n          return new PromiseImpl(function(resolve, reject) {\r\n            invoke(method, arg, resolve, reject);\r\n          });\r\n        }\r\n\r\n        return previousPromise =\r\n          // If enqueue has been called before, then we want to wait until\r\n          // all previous Promises have been resolved before calling invoke,\r\n          // so that results are always delivered in the correct order. If\r\n          // enqueue has not been called before, then it is important to\r\n          // call invoke immediately, without waiting on a callback to fire,\r\n          // so that the async generator function has the opportunity to do\r\n          // any necessary setup in a predictable way. This predictability\r\n          // is why the Promise constructor synchronously invokes its\r\n          // executor callback, and why async functions synchronously\r\n          // execute code before the first await. Since we implement simple\r\n          // async functions in terms of async generators, it is especially\r\n          // important to get this right, even though it requires care.\r\n          previousPromise ? previousPromise.then(\r\n            callInvokeWithMethodAndArg,\r\n            // Avoid propagating failures to Promises returned by later\r\n            // invocations of the iterator.\r\n            callInvokeWithMethodAndArg\r\n          ) : callInvokeWithMethodAndArg();\r\n      }\r\n\r\n      // Define the unified helper method that is used to implement .next,\r\n      // .throw, and .return (see defineIteratorMethods).\r\n      this._invoke = enqueue;\r\n    }\r\n\r\n    defineIteratorMethods(AsyncIterator.prototype);\r\n    AsyncIterator.prototype[asyncIteratorSymbol] = function () {\r\n      return this;\r\n    };\r\n    exports.AsyncIterator = AsyncIterator;\r\n\r\n    // Note that simple async functions are implemented on top of\r\n    // AsyncIterator objects; they just return a Promise for the value of\r\n    // the final result produced by the iterator.\r\n    exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\r\n      if (PromiseImpl === void 0) PromiseImpl = Promise;\r\n\r\n      var iter = new AsyncIterator(\r\n        wrap(innerFn, outerFn, self, tryLocsList),\r\n        PromiseImpl\r\n      );\r\n\r\n      return exports.isGeneratorFunction(outerFn)\r\n        ? iter // If outerFn is a generator, return the full iterator.\r\n        : iter.next().then(function(result) {\r\n            return result.done ? result.value : iter.next();\r\n          });\r\n    };\r\n\r\n    function makeInvokeMethod(innerFn, self, context) {\r\n      var state = GenStateSuspendedStart;\r\n\r\n      return function invoke(method, arg) {\r\n        if (state === GenStateExecuting) {\r\n          throw new Error(\"Generator is already running\");\r\n        }\r\n\r\n        if (state === GenStateCompleted) {\r\n          if (method === \"throw\") {\r\n            throw arg;\r\n          }\r\n\r\n          // Be forgiving, per 25.3.3.3.3 of the spec:\r\n          // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\r\n          return doneResult();\r\n        }\r\n\r\n        context.method = method;\r\n        context.arg = arg;\r\n\r\n        while (true) {\r\n          var delegate = context.delegate;\r\n          if (delegate) {\r\n            var delegateResult = maybeInvokeDelegate(delegate, context);\r\n            if (delegateResult) {\r\n              if (delegateResult === ContinueSentinel) continue;\r\n              return delegateResult;\r\n            }\r\n          }\r\n\r\n          if (context.method === \"next\") {\r\n            // Setting context._sent for legacy support of Babel's\r\n            // function.sent implementation.\r\n            context.sent = context._sent = context.arg;\r\n\r\n          } else if (context.method === \"throw\") {\r\n            if (state === GenStateSuspendedStart) {\r\n              state = GenStateCompleted;\r\n              throw context.arg;\r\n            }\r\n\r\n            context.dispatchException(context.arg);\r\n\r\n          } else if (context.method === \"return\") {\r\n            context.abrupt(\"return\", context.arg);\r\n          }\r\n\r\n          state = GenStateExecuting;\r\n\r\n          var record = tryCatch(innerFn, self, context);\r\n          if (record.type === \"normal\") {\r\n            // If an exception is thrown from innerFn, we leave state ===\r\n            // GenStateExecuting and loop back for another invocation.\r\n            state = context.done\r\n              ? GenStateCompleted\r\n              : GenStateSuspendedYield;\r\n\r\n            if (record.arg === ContinueSentinel) {\r\n              continue;\r\n            }\r\n\r\n            return {\r\n              value: record.arg,\r\n              done: context.done\r\n            };\r\n\r\n          } else if (record.type === \"throw\") {\r\n            state = GenStateCompleted;\r\n            // Dispatch the exception by looping back around to the\r\n            // context.dispatchException(context.arg) call above.\r\n            context.method = \"throw\";\r\n            context.arg = record.arg;\r\n          }\r\n        }\r\n      };\r\n    }\r\n\r\n    // Call delegate.iterator[context.method](context.arg) and handle the\r\n    // result, either by returning a { value, done } result from the\r\n    // delegate iterator, or by modifying context.method and context.arg,\r\n    // setting context.delegate to null, and returning the ContinueSentinel.\r\n    function maybeInvokeDelegate(delegate, context) {\r\n      var method = delegate.iterator[context.method];\r\n      if (method === undefined$1) {\r\n        // A .throw or .return when the delegate iterator has no .throw\r\n        // method always terminates the yield* loop.\r\n        context.delegate = null;\r\n\r\n        if (context.method === \"throw\") {\r\n          // Note: [\"return\"] must be used for ES3 parsing compatibility.\r\n          if (delegate.iterator[\"return\"]) {\r\n            // If the delegate iterator has a return method, give it a\r\n            // chance to clean up.\r\n            context.method = \"return\";\r\n            context.arg = undefined$1;\r\n            maybeInvokeDelegate(delegate, context);\r\n\r\n            if (context.method === \"throw\") {\r\n              // If maybeInvokeDelegate(context) changed context.method from\r\n              // \"return\" to \"throw\", let that override the TypeError below.\r\n              return ContinueSentinel;\r\n            }\r\n          }\r\n\r\n          context.method = \"throw\";\r\n          context.arg = new TypeError(\r\n            \"The iterator does not provide a 'throw' method\");\r\n        }\r\n\r\n        return ContinueSentinel;\r\n      }\r\n\r\n      var record = tryCatch(method, delegate.iterator, context.arg);\r\n\r\n      if (record.type === \"throw\") {\r\n        context.method = \"throw\";\r\n        context.arg = record.arg;\r\n        context.delegate = null;\r\n        return ContinueSentinel;\r\n      }\r\n\r\n      var info = record.arg;\r\n\r\n      if (! info) {\r\n        context.method = \"throw\";\r\n        context.arg = new TypeError(\"iterator result is not an object\");\r\n        context.delegate = null;\r\n        return ContinueSentinel;\r\n      }\r\n\r\n      if (info.done) {\r\n        // Assign the result of the finished delegate to the temporary\r\n        // variable specified by delegate.resultName (see delegateYield).\r\n        context[delegate.resultName] = info.value;\r\n\r\n        // Resume execution at the desired location (see delegateYield).\r\n        context.next = delegate.nextLoc;\r\n\r\n        // If context.method was \"throw\" but the delegate handled the\r\n        // exception, let the outer generator proceed normally. If\r\n        // context.method was \"next\", forget context.arg since it has been\r\n        // \"consumed\" by the delegate iterator. If context.method was\r\n        // \"return\", allow the original .return call to continue in the\r\n        // outer generator.\r\n        if (context.method !== \"return\") {\r\n          context.method = \"next\";\r\n          context.arg = undefined$1;\r\n        }\r\n\r\n      } else {\r\n        // Re-yield the result returned by the delegate method.\r\n        return info;\r\n      }\r\n\r\n      // The delegate iterator is finished, so forget it and continue with\r\n      // the outer generator.\r\n      context.delegate = null;\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    // Define Generator.prototype.{next,throw,return} in terms of the\r\n    // unified ._invoke helper method.\r\n    defineIteratorMethods(Gp);\r\n\r\n    define(Gp, toStringTagSymbol, \"Generator\");\r\n\r\n    // A Generator should always return itself as the iterator object when the\r\n    // @@iterator function is called on it. Some browsers' implementations of the\r\n    // iterator prototype chain incorrectly implement this, causing the Generator\r\n    // object to not be returned from this call. This ensures that doesn't happen.\r\n    // See https://github.com/facebook/regenerator/issues/274 for more details.\r\n    Gp[iteratorSymbol] = function() {\r\n      return this;\r\n    };\r\n\r\n    Gp.toString = function() {\r\n      return \"[object Generator]\";\r\n    };\r\n\r\n    function pushTryEntry(locs) {\r\n      var entry = { tryLoc: locs[0] };\r\n\r\n      if (1 in locs) {\r\n        entry.catchLoc = locs[1];\r\n      }\r\n\r\n      if (2 in locs) {\r\n        entry.finallyLoc = locs[2];\r\n        entry.afterLoc = locs[3];\r\n      }\r\n\r\n      this.tryEntries.push(entry);\r\n    }\r\n\r\n    function resetTryEntry(entry) {\r\n      var record = entry.completion || {};\r\n      record.type = \"normal\";\r\n      delete record.arg;\r\n      entry.completion = record;\r\n    }\r\n\r\n    function Context(tryLocsList) {\r\n      // The root entry object (effectively a try statement without a catch\r\n      // or a finally block) gives us a place to store values thrown from\r\n      // locations where there is no enclosing try statement.\r\n      this.tryEntries = [{ tryLoc: \"root\" }];\r\n      tryLocsList.forEach(pushTryEntry, this);\r\n      this.reset(true);\r\n    }\r\n\r\n    exports.keys = function(object) {\r\n      var keys = [];\r\n      for (var key in object) {\r\n        keys.push(key);\r\n      }\r\n      keys.reverse();\r\n\r\n      // Rather than returning an object with a next method, we keep\r\n      // things simple and return the next function itself.\r\n      return function next() {\r\n        while (keys.length) {\r\n          var key = keys.pop();\r\n          if (key in object) {\r\n            next.value = key;\r\n            next.done = false;\r\n            return next;\r\n          }\r\n        }\r\n\r\n        // To avoid creating an additional object, we just hang the .value\r\n        // and .done properties off the next function object itself. This\r\n        // also ensures that the minifier will not anonymize the function.\r\n        next.done = true;\r\n        return next;\r\n      };\r\n    };\r\n\r\n    function values(iterable) {\r\n      if (iterable) {\r\n        var iteratorMethod = iterable[iteratorSymbol];\r\n        if (iteratorMethod) {\r\n          return iteratorMethod.call(iterable);\r\n        }\r\n\r\n        if (typeof iterable.next === \"function\") {\r\n          return iterable;\r\n        }\r\n\r\n        if (!isNaN(iterable.length)) {\r\n          var i = -1, next = function next() {\r\n            while (++i < iterable.length) {\r\n              if (hasOwn.call(iterable, i)) {\r\n                next.value = iterable[i];\r\n                next.done = false;\r\n                return next;\r\n              }\r\n            }\r\n\r\n            next.value = undefined$1;\r\n            next.done = true;\r\n\r\n            return next;\r\n          };\r\n\r\n          return next.next = next;\r\n        }\r\n      }\r\n\r\n      // Return an iterator with no values.\r\n      return { next: doneResult };\r\n    }\r\n    exports.values = values;\r\n\r\n    function doneResult() {\r\n      return { value: undefined$1, done: true };\r\n    }\r\n\r\n    Context.prototype = {\r\n      constructor: Context,\r\n\r\n      reset: function(skipTempReset) {\r\n        this.prev = 0;\r\n        this.next = 0;\r\n        // Resetting context._sent for legacy support of Babel's\r\n        // function.sent implementation.\r\n        this.sent = this._sent = undefined$1;\r\n        this.done = false;\r\n        this.delegate = null;\r\n\r\n        this.method = \"next\";\r\n        this.arg = undefined$1;\r\n\r\n        this.tryEntries.forEach(resetTryEntry);\r\n\r\n        if (!skipTempReset) {\r\n          for (var name in this) {\r\n            // Not sure about the optimal order of these conditions:\r\n            if (name.charAt(0) === \"t\" &&\r\n                hasOwn.call(this, name) &&\r\n                !isNaN(+name.slice(1))) {\r\n              this[name] = undefined$1;\r\n            }\r\n          }\r\n        }\r\n      },\r\n\r\n      stop: function() {\r\n        this.done = true;\r\n\r\n        var rootEntry = this.tryEntries[0];\r\n        var rootRecord = rootEntry.completion;\r\n        if (rootRecord.type === \"throw\") {\r\n          throw rootRecord.arg;\r\n        }\r\n\r\n        return this.rval;\r\n      },\r\n\r\n      dispatchException: function(exception) {\r\n        if (this.done) {\r\n          throw exception;\r\n        }\r\n\r\n        var context = this;\r\n        function handle(loc, caught) {\r\n          record.type = \"throw\";\r\n          record.arg = exception;\r\n          context.next = loc;\r\n\r\n          if (caught) {\r\n            // If the dispatched exception was caught by a catch block,\r\n            // then let that catch block handle the exception normally.\r\n            context.method = \"next\";\r\n            context.arg = undefined$1;\r\n          }\r\n\r\n          return !! caught;\r\n        }\r\n\r\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n          var entry = this.tryEntries[i];\r\n          var record = entry.completion;\r\n\r\n          if (entry.tryLoc === \"root\") {\r\n            // Exception thrown outside of any try block that could handle\r\n            // it, so set the completion value of the entire function to\r\n            // throw the exception.\r\n            return handle(\"end\");\r\n          }\r\n\r\n          if (entry.tryLoc <= this.prev) {\r\n            var hasCatch = hasOwn.call(entry, \"catchLoc\");\r\n            var hasFinally = hasOwn.call(entry, \"finallyLoc\");\r\n\r\n            if (hasCatch && hasFinally) {\r\n              if (this.prev < entry.catchLoc) {\r\n                return handle(entry.catchLoc, true);\r\n              } else if (this.prev < entry.finallyLoc) {\r\n                return handle(entry.finallyLoc);\r\n              }\r\n\r\n            } else if (hasCatch) {\r\n              if (this.prev < entry.catchLoc) {\r\n                return handle(entry.catchLoc, true);\r\n              }\r\n\r\n            } else if (hasFinally) {\r\n              if (this.prev < entry.finallyLoc) {\r\n                return handle(entry.finallyLoc);\r\n              }\r\n\r\n            } else {\r\n              throw new Error(\"try statement without catch or finally\");\r\n            }\r\n          }\r\n        }\r\n      },\r\n\r\n      abrupt: function(type, arg) {\r\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n          var entry = this.tryEntries[i];\r\n          if (entry.tryLoc <= this.prev &&\r\n              hasOwn.call(entry, \"finallyLoc\") &&\r\n              this.prev < entry.finallyLoc) {\r\n            var finallyEntry = entry;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (finallyEntry &&\r\n            (type === \"break\" ||\r\n             type === \"continue\") &&\r\n            finallyEntry.tryLoc <= arg &&\r\n            arg <= finallyEntry.finallyLoc) {\r\n          // Ignore the finally entry if control is not jumping to a\r\n          // location outside the try/catch block.\r\n          finallyEntry = null;\r\n        }\r\n\r\n        var record = finallyEntry ? finallyEntry.completion : {};\r\n        record.type = type;\r\n        record.arg = arg;\r\n\r\n        if (finallyEntry) {\r\n          this.method = \"next\";\r\n          this.next = finallyEntry.finallyLoc;\r\n          return ContinueSentinel;\r\n        }\r\n\r\n        return this.complete(record);\r\n      },\r\n\r\n      complete: function(record, afterLoc) {\r\n        if (record.type === \"throw\") {\r\n          throw record.arg;\r\n        }\r\n\r\n        if (record.type === \"break\" ||\r\n            record.type === \"continue\") {\r\n          this.next = record.arg;\r\n        } else if (record.type === \"return\") {\r\n          this.rval = this.arg = record.arg;\r\n          this.method = \"return\";\r\n          this.next = \"end\";\r\n        } else if (record.type === \"normal\" && afterLoc) {\r\n          this.next = afterLoc;\r\n        }\r\n\r\n        return ContinueSentinel;\r\n      },\r\n\r\n      finish: function(finallyLoc) {\r\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n          var entry = this.tryEntries[i];\r\n          if (entry.finallyLoc === finallyLoc) {\r\n            this.complete(entry.completion, entry.afterLoc);\r\n            resetTryEntry(entry);\r\n            return ContinueSentinel;\r\n          }\r\n        }\r\n      },\r\n\r\n      \"catch\": function(tryLoc) {\r\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n          var entry = this.tryEntries[i];\r\n          if (entry.tryLoc === tryLoc) {\r\n            var record = entry.completion;\r\n            if (record.type === \"throw\") {\r\n              var thrown = record.arg;\r\n              resetTryEntry(entry);\r\n            }\r\n            return thrown;\r\n          }\r\n        }\r\n\r\n        // The context.catch method must only be called with a location\r\n        // argument that corresponds to a known catch block.\r\n        throw new Error(\"illegal catch attempt\");\r\n      },\r\n\r\n      delegateYield: function(iterable, resultName, nextLoc) {\r\n        this.delegate = {\r\n          iterator: values(iterable),\r\n          resultName: resultName,\r\n          nextLoc: nextLoc\r\n        };\r\n\r\n        if (this.method === \"next\") {\r\n          // Deliberately forget the last sent value so that we don't\r\n          // accidentally pass it on to the delegate.\r\n          this.arg = undefined$1;\r\n        }\r\n\r\n        return ContinueSentinel;\r\n      }\r\n    };\r\n\r\n    // Regardless of whether this script is executing as a CommonJS module\r\n    // or not, return the runtime object so that we can declare the variable\r\n    // regeneratorRuntime in the outer scope, which allows this module to be\r\n    // injected easily by `bin/regenerator --include-runtime script.js`.\r\n    return exports;\r\n\r\n  }(\r\n    // If this script is executing as a CommonJS module, use module.exports\r\n    // as the regeneratorRuntime namespace. Otherwise create a new empty\r\n    // object. Either way, the resulting object will be used to initialize\r\n    // the regeneratorRuntime variable at the top of this file.\r\n     module.exports \r\n  ));\r\n\r\n  try {\r\n    regeneratorRuntime = runtime;\r\n  } catch (accidentalStrictMode) {\r\n    // This module should not be running in strict mode, so the above\r\n    // assignment should always work unless something is misconfigured. Just\r\n    // in case runtime.js accidentally runs in strict mode, we can escape\r\n    // strict mode using a global Function call. This could conceivably fail\r\n    // if a Content Security Policy forbids using Function, but in that case\r\n    // the proper solution is to fix the accidental strict mode problem. If\r\n    // you've misconfigured your bundler to force strict mode and applied a\r\n    // CSP to forbid Function, and you're not willing to fix either of those\r\n    // problems, please detail your unique predicament in a GitHub issue.\r\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\r\n  }\r\n  });\n\n  var regenerator = runtime_1;\n\n  function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } it = o[Symbol.iterator](); return it.next.bind(it); }\r\n\r\n  function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\n\r\n  function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n  /* global FormData self Blob File */\r\n\r\n  /* eslint-disable no-inner-declarations */\r\n\r\n  if (typeof Blob !== 'undefined' && (typeof FormData === 'undefined' || !FormData.prototype.keys)) {\r\n    var normalizeValue = function normalizeValue(_ref) {\r\n      var value = _ref[0],\r\n          filename = _ref[1];\r\n\r\n      if (value instanceof Blob) {\r\n        // Should always returns a new File instance\r\n        // console.assert(fd.get(x) !== fd.get(x))\r\n        value = new File([value], filename, {\r\n          type: value.type,\r\n          lastModified: value.lastModified\r\n        });\r\n      }\r\n\r\n      return value;\r\n    };\r\n\r\n    var ensureArgs = function ensureArgs(args, expected) {\r\n      if (args.length < expected) {\r\n        throw new TypeError(expected + \" argument required, but only \" + args.length + \" present.\");\r\n      }\r\n    };\r\n\r\n    var normalizeArgs = function normalizeArgs(name, value, filename) {\r\n      return value instanceof Blob // normalize name and filename if adding an attachment\r\n      ? [String(name), value, filename !== undefined ? filename + '' // Cast filename to string if 3th arg isn't undefined\r\n      : typeof value.name === 'string' // if name prop exist\r\n      ? value.name // Use File.name\r\n      : 'blob'] // otherwise fallback to Blob\r\n      // If no attachment, just cast the args to strings\r\n      : [String(name), String(value)];\r\n    }; // normalize linefeeds for textareas\r\n    // https://html.spec.whatwg.org/multipage/form-elements.html#textarea-line-break-normalisation-transformation\r\n\r\n    var normalizeLinefeeds = function normalizeLinefeeds(value) {\r\n      return value.replace(/\\r\\n/g, '\\n').replace(/\\n/g, '\\r\\n');\r\n    };\r\n\r\n    var each = function each(arr, cb) {\r\n      for (var i = 0; i < arr.length; i++) {\r\n        cb(arr[i]);\r\n      }\r\n    };\r\n    /**\r\n     * @implements {Iterable}\r\n     */\r\n\r\n    var global$1 = typeof window === 'object' ? window : typeof self === 'object' ? self : commonjsGlobal; // keep a reference to native implementation\r\n\r\n    var _FormData = global$1.FormData; // To be monkey patched\r\n\r\n    var _send = global$1.XMLHttpRequest && global$1.XMLHttpRequest.prototype.send;\r\n\r\n    var _fetch = global$1.Request && global$1.fetch;\r\n\r\n    var _sendBeacon = global$1.navigator && global$1.navigator.sendBeacon; // Unable to patch Request constructor correctly\r\n    // const _Request = global.Request\r\n    // only way is to use ES6 class extend\r\n    // https://github.com/babel/babel/issues/1966\r\n\r\n    var stringTag = global$1.Symbol && Symbol.toStringTag; // Add missing stringTags to blob and files\r\n\r\n    if (stringTag) {\r\n      if (!Blob.prototype[stringTag]) {\r\n        Blob.prototype[stringTag] = 'Blob';\r\n      }\r\n\r\n      if ('File' in global$1 && !File.prototype[stringTag]) {\r\n        File.prototype[stringTag] = 'File';\r\n      }\r\n    } // Fix so you can construct your own File\r\n\r\n    try {\r\n      new File([], ''); // eslint-disable-line\r\n    } catch (a) {\r\n      global$1.File = function File(b, d, c) {\r\n        var blob = new Blob(b, c);\r\n        var t = c && void 0 !== c.lastModified ? new Date(c.lastModified) : new Date();\r\n        Object.defineProperties(blob, {\r\n          name: {\r\n            value: d\r\n          },\r\n          lastModifiedDate: {\r\n            value: t\r\n          },\r\n          lastModified: {\r\n            value: +t\r\n          },\r\n          toString: {\r\n            value: function value() {\r\n              return '[object File]';\r\n            }\r\n          }\r\n        });\r\n\r\n        if (stringTag) {\r\n          Object.defineProperty(blob, stringTag, {\r\n            value: 'File'\r\n          });\r\n        }\r\n\r\n        return blob;\r\n      };\r\n    }\r\n\r\n    var FormDataPolyfill = /*#__PURE__*/function () {\r\n      /**\r\n       * FormData class\r\n       *\r\n       * @param {HTMLElement=} form\r\n       */\r\n      function FormDataPolyfill(form) {\r\n        this._data = Object.create(null);\r\n        if (!form) return this;\r\n        var self = this;\r\n        each(form.elements, function (elm) {\r\n          if (!elm.name || elm.disabled || elm.type === 'submit' || elm.type === 'button') return;\r\n\r\n          if (elm.type === 'file') {\r\n            var files = elm.files && elm.files.length ? elm.files : [new File([], '', {\r\n              type: 'application/octet-stream'\r\n            })]; // #78\r\n\r\n            each(files, function (file) {\r\n              self.append(elm.name, file);\r\n            });\r\n          } else if (elm.type === 'select-multiple' || elm.type === 'select-one') {\r\n            each(elm.options, function (opt) {\r\n              !opt.disabled && opt.selected && self.append(elm.name, opt.value);\r\n            });\r\n          } else if (elm.type === 'checkbox' || elm.type === 'radio') {\r\n            if (elm.checked) self.append(elm.name, elm.value);\r\n          } else {\r\n            var value = elm.type === 'textarea' ? normalizeLinefeeds(elm.value) : elm.value;\r\n            self.append(elm.name, value);\r\n          }\r\n        });\r\n      }\r\n      /**\r\n       * Append a field\r\n       *\r\n       * @param   {string}           name      field name\r\n       * @param   {string|Blob|File} value     string / blob / file\r\n       * @param   {string=}          filename  filename to use with blob\r\n       * @return  {undefined}\r\n       */\r\n\r\n      var _proto = FormDataPolyfill.prototype;\r\n\r\n      _proto.append = function append(name, value, filename) {\r\n        ensureArgs(arguments, 2);\r\n\r\n        var _normalizeArgs$apply = normalizeArgs.apply(null, arguments);\r\n\r\n        name = _normalizeArgs$apply[0];\r\n        value = _normalizeArgs$apply[1];\r\n        filename = _normalizeArgs$apply[2];\r\n        var map = this._data;\r\n        if (!map[name]) map[name] = [];\r\n        map[name].push([value, filename]);\r\n      }\r\n      /**\r\n       * Delete all fields values given name\r\n       *\r\n       * @param   {string}  name  Field name\r\n       * @return  {undefined}\r\n       */\r\n      ;\r\n\r\n      _proto.delete = function _delete(name) {\r\n        ensureArgs(arguments, 1);\r\n        delete this._data[String(name)];\r\n      }\r\n      /**\r\n       * Iterate over all fields as [name, value]\r\n       *\r\n       * @return {Iterator}\r\n       */\r\n      ;\r\n\r\n      _proto.entries =\r\n      /*#__PURE__*/\r\n      regenerator.mark(function entries() {\r\n        var map, name, _iterator, _step, value;\r\n\r\n        return regenerator.wrap(function entries$(_context) {\r\n          while (1) {\r\n            switch (_context.prev = _context.next) {\r\n              case 0:\r\n                map = this._data;\r\n                _context.t0 = regenerator.keys(map);\r\n\r\n              case 2:\r\n                if ((_context.t1 = _context.t0()).done) {\r\n                  _context.next = 13;\r\n                  break;\r\n                }\r\n\r\n                name = _context.t1.value;\r\n                _iterator = _createForOfIteratorHelperLoose(map[name]);\r\n\r\n              case 5:\r\n                if ((_step = _iterator()).done) {\r\n                  _context.next = 11;\r\n                  break;\r\n                }\r\n\r\n                value = _step.value;\r\n                _context.next = 9;\r\n                return [name, normalizeValue(value)];\r\n\r\n              case 9:\r\n                _context.next = 5;\r\n                break;\r\n\r\n              case 11:\r\n                _context.next = 2;\r\n                break;\r\n\r\n              case 13:\r\n              case \"end\":\r\n                return _context.stop();\r\n            }\r\n          }\r\n        }, entries, this);\r\n      })\r\n      /**\r\n       * Iterate over all fields\r\n       *\r\n       * @param   {Function}  callback  Executed for each item with parameters (value, name, thisArg)\r\n       * @param   {Object=}   thisArg   `this` context for callback function\r\n       * @return  {undefined}\r\n       */\r\n      ;\r\n\r\n      _proto.forEach = function forEach(callback, thisArg) {\r\n        ensureArgs(arguments, 1);\r\n\r\n        for (var _iterator2 = _createForOfIteratorHelperLoose(this), _step2; !(_step2 = _iterator2()).done;) {\r\n          var _step2$value = _step2.value,\r\n              name = _step2$value[0],\r\n              value = _step2$value[1];\r\n          callback.call(thisArg, value, name, this);\r\n        }\r\n      }\r\n      /**\r\n       * Return first field value given name\r\n       * or null if non existen\r\n       *\r\n       * @param   {string}  name      Field name\r\n       * @return  {string|File|null}  value Fields value\r\n       */\r\n      ;\r\n\r\n      _proto.get = function get(name) {\r\n        ensureArgs(arguments, 1);\r\n        var map = this._data;\r\n        name = String(name);\r\n        return map[name] ? normalizeValue(map[name][0]) : null;\r\n      }\r\n      /**\r\n       * Return all fields values given name\r\n       *\r\n       * @param   {string}  name  Fields name\r\n       * @return  {Array}         [{String|File}]\r\n       */\r\n      ;\r\n\r\n      _proto.getAll = function getAll(name) {\r\n        ensureArgs(arguments, 1);\r\n        return (this._data[String(name)] || []).map(normalizeValue);\r\n      }\r\n      /**\r\n       * Check for field name existence\r\n       *\r\n       * @param   {string}   name  Field name\r\n       * @return  {boolean}\r\n       */\r\n      ;\r\n\r\n      _proto.has = function has(name) {\r\n        ensureArgs(arguments, 1);\r\n        return String(name) in this._data;\r\n      }\r\n      /**\r\n       * Iterate over all fields name\r\n       *\r\n       * @return {Iterator}\r\n       */\r\n      ;\r\n\r\n      _proto.keys =\r\n      /*#__PURE__*/\r\n      regenerator.mark(function keys() {\r\n        var _iterator3, _step3, _step3$value, name;\r\n\r\n        return regenerator.wrap(function keys$(_context2) {\r\n          while (1) {\r\n            switch (_context2.prev = _context2.next) {\r\n              case 0:\r\n                _iterator3 = _createForOfIteratorHelperLoose(this);\r\n\r\n              case 1:\r\n                if ((_step3 = _iterator3()).done) {\r\n                  _context2.next = 7;\r\n                  break;\r\n                }\r\n\r\n                _step3$value = _step3.value, name = _step3$value[0];\r\n                _context2.next = 5;\r\n                return name;\r\n\r\n              case 5:\r\n                _context2.next = 1;\r\n                break;\r\n\r\n              case 7:\r\n              case \"end\":\r\n                return _context2.stop();\r\n            }\r\n          }\r\n        }, keys, this);\r\n      })\r\n      /**\r\n       * Overwrite all values given name\r\n       *\r\n       * @param   {string}    name      Filed name\r\n       * @param   {string}    value     Field value\r\n       * @param   {string=}   filename  Filename (optional)\r\n       * @return  {undefined}\r\n       */\r\n      ;\r\n\r\n      _proto.set = function set(name, value, filename) {\r\n        ensureArgs(arguments, 2);\r\n        var args = normalizeArgs.apply(null, arguments);\r\n        this._data[args[0]] = [[args[1], args[2]]];\r\n      }\r\n      /**\r\n       * Iterate over all fields\r\n       *\r\n       * @return {Iterator}\r\n       */\r\n      ;\r\n\r\n      _proto.values =\r\n      /*#__PURE__*/\r\n      regenerator.mark(function values() {\r\n        var _iterator4, _step4, _step4$value, value;\r\n\r\n        return regenerator.wrap(function values$(_context3) {\r\n          while (1) {\r\n            switch (_context3.prev = _context3.next) {\r\n              case 0:\r\n                _iterator4 = _createForOfIteratorHelperLoose(this);\r\n\r\n              case 1:\r\n                if ((_step4 = _iterator4()).done) {\r\n                  _context3.next = 7;\r\n                  break;\r\n                }\r\n\r\n                _step4$value = _step4.value, value = _step4$value[1];\r\n                _context3.next = 5;\r\n                return value;\r\n\r\n              case 5:\r\n                _context3.next = 1;\r\n                break;\r\n\r\n              case 7:\r\n              case \"end\":\r\n                return _context3.stop();\r\n            }\r\n          }\r\n        }, values, this);\r\n      })\r\n      /**\r\n       * Return a native (perhaps degraded) FormData with only a `append` method\r\n       * Can throw if it's not supported\r\n       *\r\n       * @return {FormData}\r\n       */\r\n      ;\r\n\r\n      _proto['_asNative'] = function _asNative() {\r\n        var fd = new _FormData();\r\n\r\n        for (var _iterator5 = _createForOfIteratorHelperLoose(this), _step5; !(_step5 = _iterator5()).done;) {\r\n          var _step5$value = _step5.value,\r\n              name = _step5$value[0],\r\n              value = _step5$value[1];\r\n          fd.append(name, value);\r\n        }\r\n\r\n        return fd;\r\n      }\r\n      /**\r\n       * [_blob description]\r\n       *\r\n       * @return {Blob} [description]\r\n       */\r\n      ;\r\n\r\n      _proto['_blob'] = function _blob() {\r\n        var boundary = '----formdata-polyfill-' + Math.random();\r\n        var chunks = [];\r\n\r\n        for (var _iterator6 = _createForOfIteratorHelperLoose(this), _step6; !(_step6 = _iterator6()).done;) {\r\n          var _step6$value = _step6.value,\r\n              name = _step6$value[0],\r\n              value = _step6$value[1];\r\n          chunks.push(\"--\" + boundary + \"\\r\\n\");\r\n\r\n          if (value instanceof Blob) {\r\n            chunks.push(\"Content-Disposition: form-data; name=\\\"\" + name + \"\\\"; filename=\\\"\" + value.name + \"\\\"\\r\\n\", \"Content-Type: \" + (value.type || 'application/octet-stream') + \"\\r\\n\\r\\n\", value, '\\r\\n');\r\n          } else {\r\n            chunks.push(\"Content-Disposition: form-data; name=\\\"\" + name + \"\\\"\\r\\n\\r\\n\" + value + \"\\r\\n\");\r\n          }\r\n        }\r\n\r\n        chunks.push(\"--\" + boundary + \"--\");\r\n        return new Blob(chunks, {\r\n          type: 'multipart/form-data; boundary=' + boundary\r\n        });\r\n      }\r\n      /**\r\n       * The class itself is iterable\r\n       * alias for formdata.entries()\r\n       *\r\n       * @return  {Iterator}\r\n       */\r\n      ;\r\n\r\n      _proto[Symbol.iterator] = function () {\r\n        return this.entries();\r\n      }\r\n      /**\r\n       * Create the default string description.\r\n       *\r\n       * @return  {string} [object FormData]\r\n       */\r\n      ;\r\n\r\n      _proto.toString = function toString() {\r\n        return '[object FormData]';\r\n      };\r\n\r\n      return FormDataPolyfill;\r\n    }();\r\n\r\n    if (stringTag) {\r\n      /**\r\n       * Create the default string description.\r\n       * It is accessed internally by the Object.prototype.toString().\r\n       */\r\n      FormDataPolyfill.prototype[stringTag] = 'FormData';\r\n    } // Patch xhr's send method to call _blob transparently\r\n\r\n    if (_send) {\r\n      var setRequestHeader = global$1.XMLHttpRequest.prototype.setRequestHeader;\r\n      /**\r\n       * @param {string} name\r\n       * @param {string} value\r\n       * @returns {undefined}\r\n       * @see https://xhr.spec.whatwg.org/#dom-xmlhttprequest-setrequestheader\r\n       */\r\n\r\n      global$1.XMLHttpRequest.prototype.setRequestHeader = function (name, value) {\r\n        setRequestHeader.call(this, name, value);\r\n        if (name.toLowerCase() === 'content-type') this._hasContentType = true;\r\n      };\r\n      /**\r\n       * @param {ArrayBuffer|ArrayBufferView|Blob|Document|FormData|string=} data\r\n       * @return {undefined}\r\n       * @see https://xhr.spec.whatwg.org/#the-send()-method\r\n       */\r\n\r\n      global$1.XMLHttpRequest.prototype.send = function (data) {\r\n        // need to patch send b/c old IE don't send blob's type (#44)\r\n        if (data instanceof FormDataPolyfill) {\r\n          var blob = data['_blob']();\r\n          if (!this._hasContentType) this.setRequestHeader('Content-Type', blob.type);\r\n\r\n          _send.call(this, blob);\r\n        } else {\r\n          _send.call(this, data);\r\n        }\r\n      };\r\n    } // Patch fetch's function to call _blob transparently\r\n\r\n    if (_fetch) {\r\n      var _fetch2 = global$1.fetch;\r\n\r\n      global$1.fetch = function (input, init) {\r\n        if (init && init.body && init.body instanceof FormDataPolyfill) {\r\n          init.body = init.body['_blob']();\r\n        }\r\n\r\n        return _fetch2.call(this, input, init);\r\n      };\r\n    } // Patch navigator.sendBeacon to use native FormData\r\n\r\n    if (_sendBeacon) {\r\n      global$1.navigator.sendBeacon = function (url, data) {\r\n        if (data instanceof FormDataPolyfill) {\r\n          data = data['_asNative']();\r\n        }\r\n\r\n        return _sendBeacon.call(this, url, data);\r\n      };\r\n    }\r\n\r\n    global$1['FormData'] = FormDataPolyfill;\r\n  }\n\n  function MultiPage(formid) {\r\n    var self = this;\r\n    this.$form = null;\r\n    this.formID = formid;\r\n    this.pageIndex = 1;\r\n    this.maxPageIndex = 0;\r\n    this.minPageIndex = 0;\r\n    this.pageIndexes = [];\r\n    this.$pages = null;\r\n    this.$collapses = null;\r\n    this.isTab = false; // Is tabs\r\n\r\n    this.isCollapse = false; // Is collapses (accordion)\r\n\r\n    this.lastPageSubmit = false; // Enable submit button for the last page only\r\n\r\n    this.hideDisabledButton = false; // Hide disabled submit button\r\n\r\n    this.hideInactivePages = false; // Hide inactive pages\r\n\r\n    this.lockTabs = false; // Set inactive tabs as disabled\r\n\r\n    this.hideTabs = false; // Hide all tabs\r\n\r\n    this.showPagerTop = false; // Show pager at top\r\n\r\n    this.showPagerBottom = false; // Show pager at bottom\r\n\r\n    this.pagerTemplate = '<nav><ul class=\"pagination\"><li class=\"page-item previous ew-prev\"><a href=\"#\" class=\"page-link\"><span class=\"icon-prev\"></span> {Prev}</a></li><li class=\"page-item next ew-next\"><a href=\"#\" class=\"page-link\">{Next} <span class=\"icon-next\"></span></a></li></ul></nav>'; // Pager template\r\n    // \"show\" handler (for disabled tabs)\r\n\r\n    var _show = function _show(e) {\r\n      e.preventDefault();\r\n    }; // Set properties\r\n\r\n    var _properties = [\"lastPageSubmit\", \"hideDisabledButton\", \"hideInactivePages\", \"lockTabs\", \"hideTabs\", \"showPagerTop\", \"showPagerBottom\", \"pagerTemplate\"];\r\n\r\n    this.set = function () {\r\n      if (arguments.length == 1 && $__default['default'].isObject(arguments[0])) {\r\n        var obj = arguments[0];\r\n\r\n        for (var i in obj) {\r\n          var p = i[0].toLowerCase() + i.substr(1); // Camel case\r\n\r\n          if (_properties.includes(p)) this[p] = obj[i];\r\n        }\r\n      }\r\n    }; // DOM loaded\r\n\r\n    this.init = function () {\r\n      var tpl = this.pagerTemplate.replace(/\\{prev\\}/i, ew.language.phrase(\"Prev\")).replace(/\\{next\\}/i, ew.language.phrase(\"Next\"));\r\n\r\n      if (this.isTab) {\r\n        if (this.showPagerTop) this.$pages.closest(\".tabbable, .ew-nav-tabs\").before(tpl);\r\n        if (this.showPagerBottom) this.$pages.closest(\".tabbable, .ew-nav-tabs\").after(tpl);\r\n        this.$form.find(\".ew-prev\").click(function (e) {\r\n          self.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent().prev(\":has([data-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\").find(\"[data-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n          return false;\r\n        });\r\n        this.$form.find(\".ew-next\").click(function (e) {\r\n          self.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent().next(\":has([data-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\").find(\"[data-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n          return false;\r\n        });\r\n        if (this.hideTabs) this.$form.find(\".ew-multi-page > .tabbable > .nav-tabs, .ew-multi-page > .ew-nav-tabs > .nav-tabs\").hide();\r\n      } else if (this.isCollapse) {\r\n        if (this.showPagerTop) this.$collapses.closest(\".ew-accordion\").before(tpl);\r\n        if (this.showPagerBottom) this.$collapses.closest(\".ew-accordion\").after(tpl);\r\n        this.$form.find(\".ew-prev\").click(function (e) {\r\n          self.$pages.closest(\".card\").filter(\":has(.collapse.show)\").prev(\":has([data-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\").toggleClass(\"disabled d-none\", false).find(\"[data-toggle=collapse]\").click();\r\n          return false;\r\n        });\r\n        this.$form.find(\".ew-next\").click(function (e) {\r\n          self.$pages.closest(\".card\").filter(\":has(.collapse.show)\").next(\":has([data-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\").toggleClass(\"disabled d-none\", false).find(\"[data-toggle=collapse]\").click();\r\n          return false;\r\n        });\r\n      }\r\n\r\n      this.pageShow();\r\n    }; // Page show\r\n\r\n    this.pageShow = function () {\r\n      if (this.isTab) {\r\n        if (this.lockTabs) this.$pages.on(\"show.bs.tab\", _show);\r\n        this.$pages.each(function () {\r\n          var $this = $__default['default'](this);\r\n          if (self.hideInactivePages) $this.toggleClass(\"d-none\", !$this.hasClass(\"active\"));\r\n          if (self.lockTabs) $this.toggleClass(\"disabled\", !$this.hasClass(\"active\"));\r\n        });\r\n      } else if (this.isCollapse) {\r\n        this.$pages.closest(\".card\").each(function () {\r\n          var $this = $__default['default'](this);\r\n          if (self.hideInactivePages) $this.toggleClass(\"d-none\", !$this.find(\".collapse.show\")[0]);\r\n        });\r\n      }\r\n\r\n      var disabled = this.lastPageSubmit && this.pageIndex != this.maxPageIndex;\r\n      var $btn = this.$form.closest(\".content, .modal-content\").find(\"#btn-action, button.ew-submit\").prop(\"disabled\", disabled).toggle(!this.hideDisabledButton || !disabled);\r\n      $__default['default'](\".ew-captcha\").toggle($btn.is(\":visible:not(:disabled)\")); // Re-captcha uses class \"disabled\", not \"disabled\" property.\r\n\r\n      disabled = this.pageIndex <= this.minPageIndex;\r\n      this.$form.find(\".ew-prev\").toggleClass(\"disabled\", disabled);\r\n      disabled = this.pageIndex >= this.maxPageIndex;\r\n      this.$form.find(\".ew-next\").toggleClass(\"disabled\", disabled);\r\n    }; // Go to page by index\r\n\r\n    this.gotoPage = function (i) {\r\n      if (i <= 0 || i < this.minPageIndex || i > this.maxPageIndex) return;\r\n\r\n      if (this.pageIndex != i) {\r\n        var $page = this.$pages.eq(i - 1);\r\n\r\n        if (this.isTab) {\r\n          if ($page.is(\":not(.d-none):not(.disabled)\")) $page.click();else $page.parent().next(\":has([data-toggle=tab]):not(.d-none):not(.disabled)\").find(\"[data-toggle=tab]\").toggleClass(\"disabled\", false).click();\r\n        } else if (this.isCollapse) {\r\n          var $p = $page.closest(\".card\");\r\n          if ($p.is(\":not(.d-none)\")) $page.click();else $p.next(\":has([data-toggle=collapse]):not(.d-none)\").find(\"[data-toggle=collapse]\").click();\r\n        }\r\n\r\n        this.pageIndex = i;\r\n      }\r\n    };\r\n\r\n    this.gotoPageByIndex = this.gotoPage; // Go to page by element\r\n\r\n    this.gotoPageByElement = function (el) {\r\n      this.gotoPage(parseInt($__default['default'](el).data(\"page\"), 10) || -1);\r\n    }; // Go to page by element's id or name or data-field attribute\r\n\r\n    this.gotoPageByElementId = function (id) {\r\n      var $el = this.$form.find(\"[data-page]\").filter(\"[id='\" + id + \"'],[name='\" + id + \"'],[data-field='\" + id + \"']\");\r\n      this.gotoPageByElement($el);\r\n    }; // Toggle page\r\n\r\n    this.togglePage = function (i, show) {\r\n      if (this.isTab) {\r\n        this.$pages.eq(i - 1).toggleClass(\"d-none\", !show);\r\n      } else if (this.isCollapse) {\r\n        this.$pages.eq(i - 1).closest(\".card\").toggle(\"d-none\", !show);\r\n      }\r\n    }; // Render\r\n\r\n    this.render = function () {\r\n      this.$form = $__default['default'](\"#\" + formid);\r\n      this.pageIndexes = this.$form.find(\"[data-page]\").map(function () {\r\n        var index = parseInt($__default['default'](this).data(\"page\"), 10);\r\n        return index > 0 ? index : null;\r\n      }).get();\r\n      this.pageIndexes.sort(function (a, b) {\r\n        return a - b;\r\n      });\r\n      this.minPageIndex = this.pageIndexes[0];\r\n      this.maxPageIndex = this.pageIndexes[this.pageIndexes.length - 1];\r\n      var $tabs = this.$form.find(\"[data-toggle=tab]\");\r\n\r\n      if ($tabs[0]) {\r\n        this.$pages = $tabs;\r\n        this.isTab = true;\r\n        $tabs.on(\"shown.bs.tab\", function (e) {\r\n          self.pageIndex = $tabs.index(e.target) + 1;\r\n          self.pageShow();\r\n          $__default['default']($__default['default'](this).attr(\"href\")).find(\".ew-google-map\").each(function () {\r\n            var m = ew.googleMaps[this.id];\r\n\r\n            if (m && m[\"map\"]) {\r\n              google.maps.event.trigger(m[\"map\"], \"resize\");\r\n              m[\"map\"].setCenter(m[\"latlng\"]);\r\n            }\r\n          });\r\n        });\r\n        this.pageIndex = $tabs.index($tabs.parent(\".active\")) + 1;\r\n      } else {\r\n        this.$collapses = this.$form.find(\"[data-toggle=collapse]\");\r\n\r\n        if (this.$collapses[0]) {\r\n          this.$pages = this.$collapses;\r\n          this.isCollapse = true;\r\n          var $bodies = this.$collapses.closest(\".card-header\").next();\r\n          $bodies.on(\"shown.bs.collapse\", function (e) {\r\n            self.pageIndex = $bodies.index(e.target) + 1;\r\n            self.pageShow();\r\n            $__default['default'](this).find(\".ew-google-map\").each(function () {\r\n              var m = ew.googleMaps[this.id];\r\n\r\n              if (m && m[\"map\"]) {\r\n                google.maps.event.trigger(m[\"map\"], \"resize\");\r\n                m[\"map\"].setCenter(m[\"latlng\"]);\r\n              }\r\n            });\r\n          });\r\n          this.pageIndex = $bodies.index($bodies.hasClass(\"show\")) + 1;\r\n        }\r\n      }\r\n\r\n      $__default['default'](function () {\r\n        self.init();\r\n      });\r\n    };\r\n  }\n\n  /**\r\n   * User level ID validator\r\n   */\r\n\r\n  function userLevelId(el) {\r\n    if (el && !ew.checkInteger(el.value)) return {\r\n      userLevelId: ew.language.phrase(\"UserLevelIDInteger\")\r\n    };\r\n    var level = parseInt(el.value, 10);\r\n    if (level < 1) return {\r\n      userLevelId: ew.language.phrase(\"UserLevelIDIncorrect\")\r\n    };\r\n    return false;\r\n  }\r\n  /**\r\n   * User level name validator\r\n   * @param {string} id User ID Field input element ID\r\n   */\r\n\r\n  function userLevelName(id) {\r\n    return function (el) {\r\n      var elId = document.getElementById(\"x_\" + id);\r\n\r\n      if (elId && el) {\r\n        var name = el.value.trim(),\r\n            level = parseInt(elId.value.trim(), 10);\r\n\r\n        if (level === 0 && !ew.sameText(name, \"Default\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelDefaultName\")\r\n          };\r\n        } else if (level === -1 && !ew.sameText(name, \"Administrator\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelAdministratorName\")\r\n          };\r\n        } else if (level === -2 && !ew.sameText(name, \"Anonymous\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelAnonymousName\")\r\n          };\r\n        } else if (level > 0 && [\"anonymous\", \"administrator\", \"default\"].includes(name.toLowerCase())) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelNameIncorrect\")\r\n          };\r\n        }\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Required validator\r\n   */\r\n\r\n  function required(fieldName) {\r\n    return function (el) {\r\n      var _$el$data;\r\n\r\n      var $el = $__default['default'](el),\r\n          $p = $el.closest(\"#r_\" + ((_$el$data = $el.data(\"field\")) === null || _$el$data === void 0 ? void 0 : _$el$data.substr(2))); // Find the row\r\n\r\n      if (!$p[0]) $p = $el.closest(\"[id^=el]\"); // Find the span\r\n\r\n      if ($p.css(\"display\") == \"none\") {\r\n        // Hidden by .visible()\r\n        return false;\r\n      }\r\n\r\n      if (el && !ew.hasValue(el)) {\r\n        return {\r\n          required: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * File required validator\r\n   */\r\n\r\n  function fileRequired(fieldName) {\r\n    return function (el) {\r\n      var elFn = document.getElementById(\"fn_\" + el.id);\r\n\r\n      if (elFn && !ew.hasValue(elFn)) {\r\n        return {\r\n          fileRequired: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Mismatch password validator\r\n   */\r\n\r\n  function mismatchPassword(el) {\r\n    var id;\r\n    if (el.id.startsWith(\"c_\")) // Confirm Password field in Register page\r\n      id = el.id.replace(/^c_/, \"x_\");else if (el.id == \"cpwd\") // Change Password page\r\n      id = \"npwd\";\r\n    var elPwd = document.getElementById(id);\r\n\r\n    if (el.value !== elPwd.value) {\r\n      return {\r\n        mismatchPassword: ew.language.phrase(\"MismatchPassword\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Between validator\r\n   */\r\n\r\n  function between(el) {\r\n    var x, z;\r\n\r\n    if (el.id.startsWith(\"y_\")) {\r\n      x = document.getElementById(el.id.replace(/^y_/, \"x_\"));\r\n      z = document.getElementById(el.id.replace(/^y_/, \"z_\"));\r\n    }\r\n\r\n    if (ew.hasValue(x) && $__default['default'](z).val() == \"BETWEEN\" && !ew.hasValue(el)) {\r\n      return {\r\n        between: ew.language.phrase(\"EnterValue2\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Password strength validator\r\n   */\r\n\r\n  function passwordStrength(el) {\r\n    var $el = $__default['default'](el);\r\n\r\n    if (!ew.isMaskedPassword(el) && $el.hasClass(\"ew-password-strength\") && !$el.data(\"validated\")) {\r\n      return {\r\n        passwordStrength: ew.language.phrase(\"PasswordTooSimple\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * User name validator\r\n   */\r\n\r\n  function username(raw) {\r\n    return function (el) {\r\n      if (!raw && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_USERNAME_CHARACTERS) + ']'))) return {\r\n        username: ew.language.phrase(\"InvalidUsernameChars\")\r\n      };\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Password validator\r\n   */\r\n\r\n  function password(raw) {\r\n    return function (el) {\r\n      if (!raw && !ew.ENCRYPTED_PASSWORD && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_PASSWORD_CHARACTERS) + ']'))) return {\r\n        password: ew.language.phrase(\"InvalidPasswordChars\")\r\n      };\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Email validator\r\n   */\r\n\r\n  function email(el) {\r\n    var value = ew.getValue(el);\r\n\r\n    if (!ew.checkEmail(value)) {\r\n      return {\r\n        email: ew.language.phrase(\"IncorrectEmail\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Emails validator\r\n   */\r\n\r\n  function emails(cnt, err) {\r\n    return function (el) {\r\n      var value = ew.getValue(el);\r\n\r\n      if (!ew.checkEmails(value, cnt)) {\r\n        return {\r\n          email: err\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * DateTime validator\r\n   * @param {number} dateFormat DateTime format ID\r\n   */\r\n\r\n  function datetime(dateFormat) {\r\n    return function (el) {\r\n      var fn,\r\n          phraseId,\r\n          value = ew.getValue(el),\r\n          newSubStr = ew.DATE_SEPARATOR;\r\n\r\n      if ([12, 15, 115].includes(dateFormat)) {\r\n        fn = ew.checkShortDate;\r\n        phraseId = \"IncorrectShortDateYMD\";\r\n      } else if ([5, 9, 109].includes(dateFormat)) {\r\n        fn = ew.checkDate;\r\n        phraseId = \"IncorrectDateYMD\";\r\n      } else if ([14, 17, 117].includes(dateFormat)) {\r\n        fn = ew.checkShortEuroDate;\r\n        phraseId = \"IncorrectShortDateDMY\";\r\n      } else if ([7, 11, 111].includes(dateFormat)) {\r\n        fn = ew.checkEuroDate;\r\n        phraseId = \"IncorrectDateDMY\";\r\n      } else if ([13, 16, 116].includes(dateFormat)) {\r\n        fn = ew.checkShortUSDate;\r\n        phraseId = \"IncorrectShortDateMDY\";\r\n      } else if ([6, 10, 110].includes(dateFormat)) {\r\n        fn = ew.checkUSDate;\r\n        phraseId = \"IncorrectDateMDY\";\r\n      } else {\r\n        // Default date format\r\n        fn = ew.checkDateDef;\r\n        phraseId = \"IncorrectDate\";\r\n        newSubStr = ew.DATE_FORMAT;\r\n      }\r\n\r\n      if (fn && !fn(value)) {\r\n        return {\r\n          datetime: ew.language.phrase(phraseId).replace(/%s/g, newSubStr)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Time validator\r\n   */\r\n\r\n  function time(el) {\r\n    var value = ew.getValue(el);\r\n\r\n    if (!ew.checkTime(value)) {\r\n      return {\r\n        time: ew.language.phrase(\"IncorrectTime\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Float validator\r\n   */\r\n\r\n  function float(el) {\r\n    var value = ew.getValue(el);\r\n\r\n    if (!ew.checkNumber(value)) {\r\n      return {\r\n        time: ew.language.phrase(\"IncorrectFloat\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Range validator\r\n   * @param {number} min Min value\r\n   * @param {number} max Max value\r\n   */\r\n\r\n  function range(min, max) {\r\n    return function (el) {\r\n      var value = ew.getValue(el);\r\n\r\n      if (!ew.checkRange(value, min, max)) {\r\n        return {\r\n          range: ew.language.phrase(\"IncorrectRange\").replace(\"%1\", min).replace(\"%2\", max)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Integer validator\r\n   */\r\n\r\n  function integer(el) {\r\n    var value = ew.getValue(el);\r\n\r\n    if (!ew.checkInteger(value)) {\r\n      return {\r\n        integer: ew.language.phrase(\"IncorrectInteger\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * US phone validator\r\n   */\r\n\r\n  function phone(el) {\r\n    var value = ew.getValue(el);\r\n\r\n    if (!ew.checkPhone(value)) {\r\n      return {\r\n        phone: ew.language.phrase(\"IncorrectPhone\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * US ZIP validator\r\n   */\r\n\r\n  function zip(el) {\r\n    var value = ew.getValue(el);\r\n\r\n    if (!ew.checkZip(value)) {\r\n      return {\r\n        zip: ew.language.phrase(\"IncorrectZip\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Credit card validator\r\n   */\r\n\r\n  function creditCard(el) {\r\n    var value = ew.getValue(el);\r\n\r\n    if (!ew.checkCreditCard(value)) {\r\n      return {\r\n        creditCard: ew.language.phrase(\"IncorrectCreditCard\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * US SSN validator\r\n   */\r\n\r\n  function ssn(el) {\r\n    var value = ew.getValue(el);\r\n\r\n    if (!ew.checkSsn(value)) {\r\n      return {\r\n        ssn: ew.language.phrase(\"IncorrectSSN\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * GUID validator\r\n   */\r\n\r\n  function guid(el) {\r\n    var value = ew.getValue(el);\r\n\r\n    if (!ew.checkGuid(value)) {\r\n      return {\r\n        guid: ew.language.phrase(\"IncorrectGUID\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Regular expression validator\r\n   * @param {string} pattern Regular expression pattern\r\n   */\r\n\r\n  function regex(pattern) {\r\n    return function (el) {\r\n      var value = ew.getValue(el);\r\n\r\n      if (!ew.checkByRegEx(value, pattern)) {\r\n        return {\r\n          regex: ew.language.phrase(\"IncorrectField\")\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n    * Custom validator\r\n    * @param {*} fn Function(value, ...args)\r\n    * @param  {...any} args Additional arguments for the function\r\n    */\r\n\r\n  function custom(fn) {\r\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n      args[_key - 1] = arguments[_key];\r\n    }\r\n\r\n    return function (el) {\r\n      if (typeof fn == \"function\") {\r\n        var value = ew.getValue(el);\r\n        if (fn.apply(void 0, [value].concat(args))) return {\r\n          custom: ew.language.phrase(\"IncorrectField\")\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Captcha validator\r\n   */\r\n\r\n  function captcha(el) {\r\n    if (el && !ew.hasValue(el)) {\r\n      return {\r\n        captcha: ew.language.phrase(\"EnterValidateCode\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * reCaptcha validator\r\n   * @param {number} id reCaptcha ID\r\n   */\r\n\r\n  function recaptcha(el) {\r\n    var _grecaptcha;\r\n\r\n    if (el && !ew.hasValue(el) && ((_grecaptcha = grecaptcha) === null || _grecaptcha === void 0 ? void 0 : _grecaptcha.getResponse(el.dataset.id)) === \"\") {\r\n      return {\r\n        recaptcha: ew.language.phrase(\"ClickReCaptcha\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\n\n  var Validators = {\n    __proto__: null,\n    userLevelId: userLevelId,\n    userLevelName: userLevelName,\n    required: required,\n    fileRequired: fileRequired,\n    mismatchPassword: mismatchPassword,\n    between: between,\n    passwordStrength: passwordStrength,\n    username: username,\n    password: password,\n    email: email,\n    emails: emails,\n    datetime: datetime,\n    time: time,\n    float: float,\n    range: range,\n    integer: integer,\n    phone: phone,\n    zip: zip,\n    creditCard: creditCard,\n    ssn: ssn,\n    guid: guid,\n    regex: regex,\n    custom: custom,\n    captcha: captcha,\n    recaptcha: recaptcha\n  };\n\n  function _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n      var descriptor = props[i];\r\n      descriptor.enumerable = descriptor.enumerable || false;\r\n      descriptor.configurable = true;\r\n      if (\"value\" in descriptor) descriptor.writable = true;\r\n      Object.defineProperty(target, descriptor.key, descriptor);\r\n    }\r\n  }\r\n\r\n  function _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\r\n    if (staticProps) _defineProperties(Constructor, staticProps);\r\n    return Constructor;\r\n  }\r\n\r\n  var createClass = _createClass;\n\n  function _assertThisInitialized(self) {\r\n    if (self === void 0) {\r\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\r\n    }\r\n\r\n    return self;\r\n  }\r\n\r\n  var assertThisInitialized = _assertThisInitialized;\n\n  function _inheritsLoose(subClass, superClass) {\r\n    subClass.prototype = Object.create(superClass.prototype);\r\n    subClass.prototype.constructor = subClass;\r\n    subClass.__proto__ = superClass;\r\n  }\r\n\r\n  var inheritsLoose = _inheritsLoose;\n\n  function _defineProperty(obj, key, value) {\r\n    if (key in obj) {\r\n      Object.defineProperty(obj, key, {\r\n        value: value,\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true\r\n      });\r\n    } else {\r\n      obj[key] = value;\r\n    }\r\n\r\n    return obj;\r\n  }\r\n\r\n  var defineProperty = _defineProperty;\n\n  function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\r\n    try {\r\n      var info = gen[key](arg);\r\n      var value = info.value;\r\n    } catch (error) {\r\n      reject(error);\r\n      return;\r\n    }\r\n\r\n    if (info.done) {\r\n      resolve(value);\r\n    } else {\r\n      Promise.resolve(value).then(_next, _throw);\r\n    }\r\n  }\r\n\r\n  function _asyncToGenerator(fn) {\r\n    return function () {\r\n      var self = this,\r\n          args = arguments;\r\n      return new Promise(function (resolve, reject) {\r\n        var gen = fn.apply(self, args);\r\n\r\n        function _next(value) {\r\n          asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\r\n        }\r\n\r\n        function _throw(err) {\r\n          asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\r\n        }\r\n\r\n        _next(undefined);\r\n      });\r\n    };\r\n  }\r\n\r\n  var asyncToGenerator = _asyncToGenerator;\n\n  function FormBase(id, pageId) {\r\n    var self = this;\r\n    this._initiated = false;\r\n    this.id = id; // Same ID as the form\r\n\r\n    this.pageId = pageId;\r\n    this.$element = null; // jQuery object of the form or div\r\n\r\n    this.htmlForm = null; // HTML form element\r\n\r\n    this.initSearchPanel = false; // Expanded by default\r\n\r\n    this.modified = false;\r\n    this.validateRequired = true;\r\n    this.validate = null;\r\n    this.emptyRow = null; // Check empty row\r\n\r\n    this.multiPage = null; // Multi-page\r\n\r\n    this.autoSuggests = {}; // AutoSuggests\r\n\r\n    this.lists = {}; // Dynamic selection lists\r\n    // Disable form\r\n\r\n    this.disableForm = function () {\r\n      var form = this.getForm();\r\n      $__default['default'](form).find(\":submit:not(.dropdown-toggle)\").prop(\"disabled\", true).addClass(\"disabled\");\r\n    }; // Enable form\r\n\r\n    this.enableForm = function () {\r\n      var form = this.getForm(),\r\n          $form = $__default['default'](form);\r\n      $form.find(\".ew-disabled-element\").removeClass(\"ew-disabled-element\").prop(\"disabled\", false);\r\n      $form.find(\".ew-enabled-element\").removeClass(\"ew-enabled-element\").prop(\"disabled\", true);\r\n      $form.find(\":submit:not(.dropdown-toggle)\").prop(\"disabled\", false).removeClass(\"disabled\");\r\n    }; // Append hidden element with form name\r\n\r\n    this.appendHidden = function (el) {\r\n      var form = this.getForm(),\r\n          $form = $__default['default'](form),\r\n          $dp = $__default['default'](el).closest(\".ew-form\"),\r\n          name = $dp.attr(\"id\") + \"$\" + el.name;\r\n      if ($form.find(\"input:hidden[name='\" + name + \"']\")[0]) // Already appended\r\n        return;\r\n      var ar = $dp.find('[name=\"' + el.name + '\"]').serializeArray();\r\n\r\n      if (ar.length) {\r\n        ar.forEach(function (o, i) {\r\n          $__default['default']('<input type=\"hidden\" name=\"' + name + '\">').val(o.value).appendTo($form);\r\n        });\r\n      } else {\r\n        $__default['default']('<input type=\"hidden\" name=\"' + name + '\">').val(\"\").appendTo($form);\r\n      }\r\n    }; // Can submit\r\n\r\n    this.canSubmit = function () {\r\n      var form = this.getForm(),\r\n          $form = $__default['default'](form);\r\n      this.disableForm();\r\n      this.updateTextArea();\r\n\r\n      if (!this.validate || this.validate() && !$form.find(\".is-invalid\")[0]) {\r\n        $form.find(\"input[name^=sv_], input[name^=p_], .ew-template input\") // Do not submit these values\r\n        .prop(\"disabled\", true).addClass(\"ew-disabled-element\");\r\n        $form.find(\"[data-readonly=1][disabled]\").prop(\"disabled\", false).addClass(\"ew-enabled-element\"); // Submit readonly values\r\n\r\n        var $dps = $__default['default']($form.find(\"input[name='detailpage']\").map(function (i, el) {\r\n          return $form.find(\"#\" + el.value).get();\r\n        }));\r\n\r\n        if ($dps.length > 1) {\r\n          // Multiple Master/Detail, check element names\r\n          $dps.each(function (i, dp) {\r\n            $__default['default'](dp).find(\":input\").each(function (j, el) {\r\n              if (/^(fn_)?(x|o)\\d*_/.test(el.name)) {\r\n                var $els = $dps.not(dp).find(\":input[name='\" + el.name + \"']\");\r\n\r\n                if ($els.length) {\r\n                  // Elements with same name found\r\n                  self.appendHidden(el); // Append element with form name\r\n\r\n                  $els.each(function () {\r\n                    self.appendHidden(this); // Append elements with same name and form name\r\n                  });\r\n                }\r\n              }\r\n            });\r\n          });\r\n        }\r\n\r\n        return true;\r\n      } else {\r\n        this.enableForm();\r\n      }\r\n\r\n      return false;\r\n    }; // Submit\r\n\r\n    this.submit = /*#__PURE__*/function () {\r\n      var _ref = asyncToGenerator( /*#__PURE__*/regenerator.mark(function _callee(e, action) {\r\n        var form, args, result;\r\n        return regenerator.wrap(function _callee$(_context) {\r\n          while (1) {\r\n            switch (_context.prev = _context.next) {\r\n              case 0:\r\n                form = this.getForm();\r\n\r\n                if (!this.canSubmit()) {\r\n                  _context.next = 11;\r\n                  break;\r\n                }\r\n\r\n                if (action) form.action = action;\r\n                args = {\r\n                  f: this,\r\n                  form: form,\r\n                  result: true\r\n                };\r\n                $__default['default'](form).trigger(\"beforesubmit\", [args]);\r\n                _context.next = 7;\r\n                return args.result;\r\n\r\n              case 7:\r\n                result = _context.sent;\r\n                // Support Promise\r\n                if ($__default['default'].isBoolean(result) && result || $__default['default'].isObject(result) && result.value) // Support Swal.fire()\r\n                  form.submit();\r\n                _context.next = 12;\r\n                break;\r\n\r\n              case 11:\r\n                this.enableForm();\r\n\r\n              case 12:\r\n              case \"end\":\r\n                return _context.stop();\r\n            }\r\n          }\r\n        }, _callee, this);\r\n      }));\r\n\r\n      return function (_x, _x2) {\r\n        return _ref.apply(this, arguments);\r\n      };\r\n    }(); // Get dynamic selection list by element name or id\r\n\r\n    this.getList = function (name) {\r\n      name = name.replace(/^(sv_)?[xy](\\d*|\\$rowindex\\$)_|\\[\\]$/g, \"\"); // Remove element name prefix/suffix\r\n\r\n      return this.lists[name];\r\n    }; // Compile templates\r\n\r\n    this.compileTemplates = function () {\r\n      var lists = Object.values(this.lists);\r\n\r\n      for (var _i = 0, _lists = lists; _i < _lists.length; _i++) {\r\n        var list = _lists[_i];\r\n        if (list.template && $__default['default'].isString(list.template)) list.template = $__default['default'].templates(list.template);\r\n      }\r\n    }; // Get the HTML form element\r\n\r\n    this.getForm = function () {\r\n      if (!this.htmlForm) {\r\n        this.$element = $__default['default'](\"#\" + this.id);\r\n\r\n        if (this.$element.is(\"form\")) {\r\n          // HTML form\r\n          this.htmlForm = this.$element[0];\r\n        } else if (this.$element.is(\"div\")) {\r\n          // HTML div => Grid page\r\n          this.htmlForm = this.$element.closest(\"form\")[0];\r\n        }\r\n      }\r\n\r\n      return this.htmlForm;\r\n    }; // Get form element as single element\r\n\r\n    this.getElement = function (name) {\r\n      if (!this.$element) this.$element = $__default['default'](\"#\" + this.id);\r\n      return name ? ew.getElement(name, this.$element) : this.$element[0];\r\n    }; // Get form element(s) as single element or array of radio/checkbox\r\n\r\n    this.getElements = function (name) {\r\n      if (!this.$element) this.$element = $__default['default'](\"#\" + this.id);\r\n      var selector = \"[name='\" + name + \"']\";\r\n      selector = \"input\" + selector + \",select\" + selector + \",textarea\" + selector + \",button\" + selector;\r\n      var $els = this.$element.find(selector);\r\n      return $els.length == 0 ? null : $els.length == 1 && $els.is(\":not([type=checkbox]):not([type=radio])\") ? $els[0] : $els.get();\r\n    }; // Update selection lists\r\n    // @param {(null|undefined|number)*} rowindex Row index\r\n\r\n    this.updateLists = function (rowindex) {\r\n      if (rowindex === null) // rowindex == $rowindex$ == null\r\n        return;\r\n      if (!$__default['default'].isNumber(rowindex) && this.pageId == \"grid\") return;\r\n      var form = this.getForm(),\r\n          // Set up $element and htmlForm\r\n      confirm = form.querySelector(\"input#confirm\");\r\n\r\n      if (confirm && confirm.value == \"confirm\") {\r\n        // Confirm page\r\n        ew.removeSpinner();\r\n        return;\r\n      }\r\n\r\n      var fixId = function fixId(id, multiple) {\r\n        var t = \"\",\r\n            i = rowindex,\r\n            ar = id.split(\" \");\r\n\r\n        if (ar.length > 1) {\r\n          t = ar[0];\r\n          i = \"\";\r\n          id = ar[1];\r\n        }\r\n\r\n        var prefix = $__default['default'].isNumber(i) ? \"x\" + i + \"_\" : \"x_\"; // Add row index\r\n\r\n        if (id.startsWith(\"x_\")) // Field element name\r\n          id = id.replace(/^x_/, prefix);else // Field var\r\n          id = prefix + id;\r\n        if (multiple && !id.endsWith(\"[]\")) // Add [] if select-multiple\r\n          id += \"[]\";\r\n        return t ? t + \" \" + id : id;\r\n      };\r\n\r\n      var selector = Object.entries(this.lists).map(function (_ref2) {\r\n        var id = _ref2[0],\r\n            list = _ref2[1];\r\n        return \"[name='\" + fixId(id, list.multiple) + \"']\";\r\n      }).join();\r\n\r\n      if (!selector || !form.querySelector(selector)) {\r\n        // Lists not found\r\n        ew.removeSpinner();\r\n        return;\r\n      }\r\n\r\n      var actions = [],\r\n          promises = [];\r\n      this.compileTemplates(); // For grid where updateList() called before init()\r\n\r\n      for (var _i2 = 0, _Object$entries = Object.entries(this.lists); _i2 < _Object$entries.length; _i2++) {\r\n        var _Object$entries$_i = _Object$entries[_i2],\r\n            _id = _Object$entries$_i[0],\r\n            list = _Object$entries$_i[1];\r\n        var parents = list.parentFields.slice().map(function (parent) {\r\n          return fixId(parent);\r\n        }),\r\n            // Clone and fix index\r\n        ajax = list.ajax;\r\n        _id = fixId(_id, list.multiple);\r\n\r\n        if ($__default['default'].isBoolean(ajax)) {\r\n          // Ajax\r\n          var pvalues = parents.map(function (parent) {\r\n            return ew.getOptionValues(parent, form);\r\n          }); // Save the initial values of the parent lists\r\n\r\n          actions.push([_id, pvalues, ajax, false]);\r\n        } else {\r\n          // Non-Ajax\r\n          ew.updateOptions.call(this, _id, parents, null, false);\r\n        }\r\n      } // Update the Ajax lists\r\n\r\n      for (var i = 0; i < actions.length; i++) {\r\n        promises.push(new Promise(function (resolve, reject) {\r\n          setTimeout(function () {\r\n            resolve(ew.updateOptions.apply(self, actions.shift()));\r\n          }, ew.AJAX_DELAY * i); // Delay a little in case of large number of lists\r\n        }));\r\n      }\r\n\r\n      Promise.all(promises).then(function () {\r\n        $__default['default'](document).trigger(\"updatedone\", [{\r\n          source: self,\r\n          target: form\r\n        }]);\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n      });\r\n    }; // Create AutoSuggest\r\n\r\n    this.createAutoSuggest = function (settings) {\r\n      var options = Object.assign({\r\n        limit: ew.AUTO_SUGGEST_MAX_ENTRIES,\r\n        form: this\r\n      }, ew.autoSuggestSettings, settings); // Global settings + field specific settings\r\n\r\n      self.autoSuggests[settings.id] = new ew.AutoSuggest(options);\r\n    }; // Init editors\r\n\r\n    this.initEditors = function () {\r\n      var form = this.getForm();\r\n      $__default['default'](form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $__default['default'](el).data(\"editor\");\r\n        if (ed && !ed.active && !ed.name.includes(\"$rowindex$\")) ed.create();\r\n      });\r\n    }; // Update textareas\r\n\r\n    this.updateTextArea = function (name) {\r\n      var form = this.getForm();\r\n      $__default['default'](form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $__default['default'](el).data(\"editor\");\r\n        if (!ed || name && ed.name != name) return true; // Continue\r\n\r\n        ed.save();\r\n        if (name) return false; // Break\r\n      });\r\n    }; // Destroy editor(s)\r\n\r\n    this.destroyEditor = function (name) {\r\n      var form = this.getForm();\r\n      $__default['default'](form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $__default['default'](el).data(\"editor\");\r\n        if (!ed || name && ed.name != name) return true; // Continue\r\n\r\n        ed.destroy();\r\n        if (name) return false; // Break\r\n      });\r\n    }; // Show error message\r\n\r\n    this.onError = function (el, msg) {\r\n      return ew.onError(this, el, msg);\r\n    }; // Init file upload\r\n\r\n    this.initUpload = function () {\r\n      var form = this.getForm();\r\n      $__default['default'](form.elements).filter(\"input:file:not([name*='$rowindex$'],[id='importfiles'])\").each(function (index) {\r\n        $__default['default'].later(ew.AJAX_DELAY * index, null, ew.upload, this); // Delay a little in case of large number of upload fields\r\n      });\r\n    }; // Set up filters\r\n\r\n    this.setupFilters = function (e, filters) {\r\n      var id = this.id,\r\n          data = this.filterList ? this.filterList.data : null,\r\n          $sf = $__default['default'](\".ew-save-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !data),\r\n          $df = $__default['default'](\".ew-delete-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !filters.length).toggleClass(\"dropdown-toggle\", !!filters.length),\r\n          $delete = $df.parent(\"li\").toggleClass(\"dropdown-submenu dropdown-hover\", !!filters.length).toggleClass(\"disabled\", !filters.length),\r\n          $save = $sf.parent(\"li\").toggleClass(\"disabled\", !data),\r\n          $btn = $__default['default'](e.target);\r\n\r\n      var saveFilters = function saveFilters(id, filters) {\r\n        if (ew.SEARCH_FILTER_OPTION == \"Client\") {\r\n          window.localStorage.setItem(id + \"_filters\", JSON.stringify(filters));\r\n        } else if (ew.SEARCH_FILTER_OPTION == \"Server\") {\r\n          var $body = $__default['default'](\"body\");\r\n          $body.css(\"cursor\", \"wait\");\r\n          $__default['default'].ajax(ew.currentPage(), {\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            data: {\r\n              \"ajax\": \"savefilters\",\r\n              \"filters\": JSON.stringify(filters)\r\n            }\r\n          }).done(function (result) {\r\n            if (result[0] && result[0].success) self.filterList.filters = filters; // Save filters\r\n          }).always(function () {\r\n            $body.css(\"cursor\", \"default\");\r\n          });\r\n        }\r\n      };\r\n\r\n      $save.off(\"click.ew\").on(\"click.ew\", function (e) {\r\n        // Save filter\r\n        if ($save.hasClass(\"disabled\")) return false;\r\n        ew.prompt(ew.language.phrase(\"EnterFilterName\"), function (name) {\r\n          name = ew.sanitize(name);\r\n\r\n          if (name) {\r\n            filters.push([name, data]);\r\n            saveFilters(id, filters);\r\n          }\r\n        }, true);\r\n      }).prevAll().remove();\r\n      $df.next(\"ul.dropdown-menu\").remove();\r\n\r\n      if (filters.length) {\r\n        var $submenu = $__default['default'](\"<ul class='dropdown-menu'></ul>\");\r\n\r\n        for (var i in filters) {\r\n          if (!Array.isArray(filters[i])) continue;\r\n          $__default['default']('<li><a class=\"dropdown-item\" data-index=\"' + i + '\" href=\"#\" onclick=\"return false;\">' + filters[i][0] + '</a></li>').on(\"click\", function (e) {\r\n            // Delete\r\n            var i = $__default['default'](this).find(\"a[data-index]\").data(\"index\");\r\n            ew.prompt(ew.language.phrase(\"DeleteFilterConfirm\").replace(\"%s\", filters[i][0]), function (result) {\r\n              if (result) {\r\n                filters.splice(i, 1);\r\n                saveFilters(id, filters);\r\n              }\r\n            });\r\n          }).appendTo($submenu);\r\n          $__default['default']('<li><a class=\"dropdown-item ew-filter-list\" data-index=\"' + i + '\" href=\"#\" onclick=\"return false;\">' + filters[i][0] + '</a></li>').insertBefore($save).on(\"click\", function (e) {\r\n            var i = $__default['default'](this).find(\"a[data-index]\").data(\"index\");\r\n            $__default['default'](\"<form>\").attr({\r\n              method: \"post\",\r\n              action: ew.currentPage()\r\n            }).append($__default['default'](\"<input type='hidden'>\").attr({\r\n              name: \"cmd\",\r\n              value: \"resetfilter\"\r\n            }), $__default['default'](\"<input type='hidden'>\").attr({\r\n              name: ew.TOKEN_NAME_KEY,\r\n              value: ew.TOKEN_NAME\r\n            }), // PHP\r\n            $__default['default'](\"<input type='hidden'>\").attr({\r\n              name: ew.ANTIFORGERY_TOKEN_KEY,\r\n              value: ew.ANTIFORGERY_TOKEN\r\n            }), // PHP\r\n            $__default['default'](\"<input type='hidden'>\").attr({\r\n              name: \"filter\",\r\n              value: JSON.stringify(filters[i][1])\r\n            })).appendTo(\"body\").trigger(\"submit\");\r\n          });\r\n        }\r\n\r\n        $__default['default'](\"<li class='dropdown-divider'></li>\").insertBefore($save);\r\n        $delete.append($submenu);\r\n      }\r\n    }; // Init form\r\n\r\n    this.init = function () {\r\n      if (this._initiated) return; // Filters button\r\n\r\n      if (ew.SEARCH_FILTER_OPTION == \"Client\" && window.localStorage || ew.SEARCH_FILTER_OPTION == \"Server\" && ew.IS_LOGGEDIN && !ew.IS_SYS_ADMIN && ew.CURRENT_USER_NAME != \"\") {\r\n        $__default['default'](\".ew-filter-option.\" + this.id + \" .ew-btn-dropdown\").on(\"show.bs.dropdown\", function (e) {\r\n          var filters = [];\r\n\r\n          if (ew.SEARCH_FILTER_OPTION == \"Client\") {\r\n            var item = window.localStorage.getItem(self.id + \"_filters\");\r\n            if (item) filters = ew.parseJson(item) || [];\r\n          } else if (ew.SEARCH_FILTER_OPTION == \"Server\") filters = self.filterList && self.filterList.filters ? self.filterList.filters : [];\r\n\r\n          var ar = $__default['default'].grep(filters, function (val) {\r\n            if (Array.isArray(val) && val.length == 2) return val;\r\n          });\r\n          self.setupFilters(e, ar);\r\n        });\r\n        $__default['default'](\".ew-filter-option\").show();\r\n      } else {\r\n        $__default['default'](\".ew-filter-option\").hide();\r\n      } // Check form\r\n\r\n      var form = this.getForm(),\r\n          $form = $__default['default'](form);\r\n      if (!form) return; // Compile templates\r\n\r\n      this.compileTemplates(); // Check if Search panel\r\n\r\n      var isSearch = /s(ea)?rch$/.test(this.id); // Search panel\r\n\r\n      if (isSearch && this.initSearchPanel && !ew.hasFormData(form)) $__default['default'](\"#\" + this.id + \"-search-panel\").removeClass(\"show\"); // Search panel toggle\r\n\r\n      $__default['default'](\".ew-search-toggle[data-form=\" + this.id + \"]\").on(\"click.bs.button\", function () {\r\n        $__default['default'](\"#\" + $__default['default'](this).data(\"form\") + \"-search-panel\").collapse(\"toggle\");\r\n      }); // Hide search operator column\r\n\r\n      if (!$__default['default'](\".ew-table .ew-search-operator\").text().trim()) $__default['default'](\".ew-table .ew-search-operator\").parent(\"td\").hide(); // Highlight button\r\n\r\n      if (isSearch) {\r\n        $__default['default'](\".ew-highlight[data-form=\" + this.id + \"]\").on(\"click.bs.button\", function () {\r\n          $__default['default'](\"span.\" + $__default['default'](this).data(\"name\")).toggleClass(\"ew-highlight-search\");\r\n        });\r\n      } // Search operators\r\n\r\n      if (isSearch) {\r\n        // Search form\r\n        $form.find(\"select[id^=z_]\").each(function () {\r\n          var $this = $__default['default'](this).trigger(\"change\");\r\n          if ($this.val() != \"BETWEEN\") $form.find(\"#w_\" + this.id.substr(2)).trigger(\"change\");\r\n        });\r\n      } // Multi-page\r\n\r\n      if (this.multiPage) this.multiPage.render(); // HTML editors\r\n\r\n      loadjs.ready([\"editor\"], this.initEditors.bind(this)); // Dynamic selection lists\r\n\r\n      this.updateLists(); // Init file upload\r\n\r\n      this.initUpload(); // Submit/Cancel\r\n\r\n      if (this.$element.is(\"form\")) {\r\n        // Not Grid page\r\n        // Detail pages\r\n        this.$element.find(\".ew-detail-pages .ew-nav-tabs a[data-toggle=tab]\").on(\"shown.bs.tab\", function (e) {\r\n          var $tab = $__default['default'](e.target.getAttribute(\"href\")),\r\n              $panel = $tab.find(\".table-responsive.ew-grid-middle-panel\"),\r\n              $container = $tab.closest(\".container-fluid\");\r\n          if ($panel.width() >= $container.width()) $panel.width($container.width() + \"px\");else $panel.width(\"auto\");\r\n        });\r\n        $form.on(\"submit\", function (e) {\r\n          // Bind submit event\r\n          self.submit(e);\r\n          return false; // Disable normal submission\r\n        });\r\n        $form.find(\"[data-field], .ew-priv\").on(\"change\", function () {\r\n          if (ew.CONFIRM_CANCEL) self.modified = true;\r\n        });\r\n        $form.find(\"#btn-cancel[data-href]\").on(\"click\", function () {\r\n          // Cancel\r\n          self.updateTextArea();\r\n          var href = $__default['default'](this).data(\"href\");\r\n\r\n          if (self.modified && ew.hasFormData(form)) {\r\n            ew.prompt(ew.language.phrase(\"ConfirmCancel\"), function (result) {\r\n              if (result) {\r\n                $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\r\n\r\n                window.location = href;\r\n              }\r\n            });\r\n          } else {\r\n            $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\r\n\r\n            window.location = href;\r\n          }\r\n        });\r\n      }\r\n\r\n      this._initiated = true; // Store form object as data\r\n\r\n      this.$element.data(\"form\", this);\r\n    }; // Add to the global forms object\r\n\r\n    ew.forms.add(this);\r\n  }\n\n  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\r\n\r\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\r\n\r\n  function _createForOfIteratorHelperLoose$1(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray$1(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } it = o[Symbol.iterator](); return it.next.bind(it); }\r\n\r\n  function _unsupportedIterableToArray$1(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray$1(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$1(o, minLen); }\r\n\r\n  function _arrayLikeToArray$1(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\n  /**\r\n   * Class Field\r\n   */\r\n  var Field = /*#__PURE__*/function () {\r\n    /**\r\n     * Constructor\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Function[]|Function} validators Validators\r\n     * @param {bool} invalid Initial valid status (e.g. server side)\r\n     */\r\n    function Field(fldvar, validators, invalid) {\r\n      defineProperty(this, \"name\", \"\");\r\n\r\n      defineProperty(this, \"validators\", []);\r\n\r\n      defineProperty(this, \"_validate\", true);\r\n\r\n      this.name = fldvar;\r\n\r\n      if (Array.isArray(validators)) {\r\n        for (var _iterator = _createForOfIteratorHelperLoose$1(validators), _step; !(_step = _iterator()).done;) {\r\n          var validator = _step.value;\r\n          this.addValidator(validator);\r\n        }\r\n      } else if (typeof validators === \"function\") {\r\n        this.addValidator(validators);\r\n      }\r\n\r\n      this.invalid = invalid;\r\n    }\r\n    /**\r\n     * Add validator\r\n     * @param {Function} validator Validator function\r\n     */\r\n\r\n    var _proto = Field.prototype;\r\n\r\n    _proto.addValidator = function addValidator(validator) {\r\n      if (typeof validator === \"function\") this.validators.push(validator);\r\n    }\r\n    /**\r\n     * Get error\r\n     * @returns {Object}\r\n     */\r\n    ;\r\n\r\n    /**\r\n     * Add error\r\n     * @param {Object} err Error\r\n     */\r\n    _proto.addError = function addError(err) {\r\n      if (err) {\r\n        var _this$_error;\r\n\r\n        var error = (_this$_error = this._error) !== null && _this$_error !== void 0 ? _this$_error : {};\r\n        this._error = _objectSpread(_objectSpread({}, error), err);\r\n        this.invalid = true;\r\n      }\r\n    }\r\n    /**\r\n     * Clear all errors\r\n     */\r\n    ;\r\n\r\n    _proto.clearErrors = function clearErrors() {\r\n      this._error = null;\r\n      this.invalid = false;\r\n    }\r\n    /**\r\n     * Clear all validators\r\n     */\r\n    ;\r\n\r\n    _proto.clearValidators = function clearValidators() {\r\n      this.validators = [];\r\n    }\r\n    /**\r\n     * Get error message\r\n     * @returns {string} HTML\r\n     */\r\n    ;\r\n\r\n    /**\r\n     * Validate field value\r\n     * @returns {boolean}\r\n     */\r\n    _proto.validate = function validate() {\r\n      var result = true;\r\n      this.clearErrors(); // Reset error\r\n\r\n      if (this._element && this.shouldValidate) {\r\n        if (Array.isArray(this.validators)) {\r\n          for (var _iterator2 = _createForOfIteratorHelperLoose$1(this.validators), _step2; !(_step2 = _iterator2()).done;) {\r\n            var validator = _step2.value;\r\n            var err = validator(this._element);\r\n\r\n            if (err !== false) {\r\n              this.addError(err);\r\n              result = false;\r\n            }\r\n          }\r\n\r\n          this.updateFeedback();\r\n        }\r\n      }\r\n\r\n      return result;\r\n    }\r\n    /**\r\n     * Update the error message to feedback element\r\n     */\r\n    ;\r\n\r\n    _proto.updateFeedback = function updateFeedback() {\r\n      var err = this.errorMessage;\r\n\r\n      if (this._element && err) {\r\n        jQuery(this._element).closest(\"[id^=el_], .form-group\").find(\".invalid-feedback\").html(err);\r\n        ew.setInvalid(this._element);\r\n      }\r\n    }\r\n    /**\r\n     * Set focus\r\n     */\r\n    ;\r\n\r\n    _proto.focus = function focus() {\r\n      if (this._element) ew.setFocus(this._element);\r\n    };\r\n\r\n    createClass(Field, [{\r\n      key: \"error\",\r\n      get: function get() {\r\n        return this._error;\r\n      }\r\n    }, {\r\n      key: \"errorMessage\",\r\n      get: function get() {\r\n        if (this._error) {\r\n          return Array.from(Object.values(this._error)).join(\"<br>\");\r\n        }\r\n\r\n        return \"\";\r\n      }\r\n      /**\r\n       * Check if the field should be validated\r\n       */\r\n\r\n    }, {\r\n      key: \"shouldValidate\",\r\n      get: function get() {\r\n        return !this._checkbox || this._checkbox.checked;\r\n      }\r\n      /**\r\n       * Set form element\r\n       */\r\n\r\n    }, {\r\n      key: \"element\",\r\n      set: function set(el) {\r\n        var _this$_element, _this$_element$id;\r\n\r\n        this._element = el;\r\n        this._checkbox = (_this$_element = this._element) !== null && _this$_element !== void 0 && (_this$_element$id = _this$_element.id) !== null && _this$_element$id !== void 0 && _this$_element$id.match(/^[xy]_/) ? document.getElementById(this._element.id.replace(/^[xy]_/, \"u_\")) : null; // Find the checkbox for the field in Update page\r\n      }\r\n      /**\r\n       * Get form element\r\n       * @returns {HTMLElement|HTMLElement[]}\r\n       */\r\n      ,\r\n      get: function get() {\r\n        return this._element;\r\n      }\r\n      /**\r\n       * Get field value from form element\r\n       * @returns {string|Array}\r\n       */\r\n\r\n    }, {\r\n      key: \"value\",\r\n      get: function get() {\r\n        return this._element ? ew.getValue(this._element) : \"\";\r\n      }\r\n    }]);\r\n\r\n    return Field;\r\n  }();\n\n  function ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\r\n\r\n  function _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$1(Object(source), true).forEach(function (key) { defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\r\n\r\n  function _createForOfIteratorHelperLoose$2(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray$2(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } it = o[Symbol.iterator](); return it.next.bind(it); }\r\n\r\n  function _unsupportedIterableToArray$2(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray$2(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$2(o, minLen); }\r\n\r\n  function _arrayLikeToArray$2(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n  /**\r\n   * Class Form\r\n   */\r\n\r\n  var Form = /*#__PURE__*/function (_FormBase) {\r\n    inheritsLoose(Form, _FormBase);\r\n\r\n    /**\r\n     * Constructor\r\n     * @param {string} id Form ID\r\n     * @param {string} pageId Page ID\r\n     */\r\n    function Form(id, pageId) {\r\n      var _this;\r\n\r\n      _this = _FormBase.call(this, id, pageId) || this;\r\n\r\n      defineProperty(assertThisInitialized(_this), \"row\", {});\r\n\r\n      defineProperty(assertThisInitialized(_this), \"fields\", {});\r\n\r\n      return _this;\r\n    }\r\n    /**\r\n     * Add field\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Function[]} validators Validators\r\n     * @param {bool} invalid Invalid\r\n     */\r\n\r\n    var _proto = Form.prototype;\r\n\r\n    _proto.addField = function addField(fldvar, validators, invalid) {\r\n      if (!(fldvar in this.fields)) this.fields[fldvar] = new Field(fldvar, validators, invalid);\r\n    }\r\n    /**\r\n     * Get field\r\n     * @param {string} fldvar Field variable name\r\n     * @returns Field\r\n     */\r\n    ;\r\n\r\n    _proto.getField = function getField(fldvar) {\r\n      return this.fields[fldvar];\r\n    }\r\n    /**\r\n     * Add fields by field definitions\r\n     * @param {Array} fields\r\n     */\r\n    ;\r\n\r\n    _proto.addFields = function addFields(fields) {\r\n      if (Array.isArray(fields)) {\r\n        for (var _iterator = _createForOfIteratorHelperLoose$2(fields), _step; !(_step = _iterator()).done;) {\r\n          var field = _step.value;\r\n\r\n          if (Array.isArray(field)) {\r\n            this.addField.apply(this, field);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Add error\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Object} err Error\r\n     */\r\n    ;\r\n\r\n    _proto.addError = function addError(fldvar, err) {\r\n      if (err) {\r\n        var _this$_error;\r\n\r\n        this._error = (_this$_error = this._error) !== null && _this$_error !== void 0 ? _this$_error : {};\r\n        this._error[fldvar] = err;\r\n      }\r\n    }\r\n    /**\r\n     * Add custom error\r\n     * @param {string} fldvar Field variable name\r\n     * @param {string} msg Error message\r\n     */\r\n    ;\r\n\r\n    _proto.addCustomError = function addCustomError(fldvar, msg) {\r\n      if (fldvar in this.fields) {\r\n        var field = this.fields[fldvar],\r\n            err = {\r\n          custom: msg\r\n        };\r\n        field.addError(err);\r\n        field.updateFeedback();\r\n        this.addError(fldvar, err);\r\n      }\r\n\r\n      return false;\r\n    }\r\n    /**\r\n     * Get error\r\n     */\r\n    ;\r\n\r\n    /**\r\n     * Set focus to the first field with error\r\n     */\r\n    _proto.focus = function focus() {\r\n      for (var _i = 0, _Object$entries = Object.entries(this.fields); _i < _Object$entries.length; _i++) {\r\n        var _Object$entries$_i = _Object$entries[_i],\r\n            fldvar = _Object$entries$_i[0],\r\n            field = _Object$entries$_i[1];\r\n\r\n        if (field.invalid || this._error && this._error[fldvar]) {\r\n          field.focus();\r\n          this.makeVisible(field.element);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Make the form visible\r\n     * @param {HTMLElement} el Focused element\r\n     */\r\n    ;\r\n\r\n    _proto.makeVisible = function makeVisible(el) {\r\n      if (this.multiPage) {\r\n        // Multi-page\r\n        this.multiPage.gotoPageByElement(el);\r\n      } else if (this.$element.is(\"div\")) {\r\n        // Multiple Master/Detail\r\n        var $pane = this.$element.closest(\".tab-pane\");\r\n        if ($pane[0] && !$pane.hasClass(\"active\")) $pane.closest(\".tabbable, .ew-nav-tabs\").find(\"a[data-toggle=tab][href='#\" + $pane.attr(\"id\") + \"']\").click();\r\n      }\r\n    }\r\n    /**\r\n     * Validate all fields of the specified row\r\n     * @param {number} rowIndex Row index\r\n     */\r\n    ;\r\n\r\n    _proto.validateFields = function validateFields(rowIndex) {\r\n      this.rowIndex = rowIndex !== null && rowIndex !== void 0 ? rowIndex : \"\";\r\n      this.row = {};\r\n      this._error = null; // Reset\r\n\r\n      var result = true;\r\n\r\n      for (var _i2 = 0, _Object$values = Object.values(this.fields); _i2 < _Object$values.length; _i2++) {\r\n        var field = _Object$values[_i2];\r\n        field.element = this.getElements(\"x\" + this.rowIndex + \"_\" + field.name); // Set element\r\n\r\n        if (!field.element) field.element = this.getElements(\"x\" + this.rowIndex + \"_\" + field.name + \"[]\"); // Field with []\r\n\r\n        if (!field.element) field.element = this.getElements(field.name); // Field by name directly (e.g. email form)\r\n\r\n        this.row[field.name] = field.value; // Get field value\r\n\r\n        if (field.element && !field.validate()) {\r\n          // Invalid field value\r\n          this.addError(field.name, field.error);\r\n          result = false;\r\n        }\r\n      } // Save the field values of the row\r\n\r\n      if (!this.value) {\r\n        this.value = _objectSpread$1({}, this.row);\r\n      } else {\r\n        if (!Array.isArray(this.value)) this.value = [this.value];\r\n        var index = parseInt(rowIndex, 10) || 0;\r\n        index = index > 1 ? index - 1 : 0;\r\n        this.value[index] = _objectSpread$1({}, this.row);\r\n      }\r\n\r\n      this.focus();\r\n      return result;\r\n    }\r\n    /**\r\n     * Set invalid fields of the specified row\r\n     * @param {number} rowIndex Row index\r\n     */\r\n    ;\r\n\r\n    _proto.setInvalid = function setInvalid(rowIndex) {\r\n      this.rowIndex = rowIndex !== null && rowIndex !== void 0 ? rowIndex : \"\";\r\n\r\n      for (var _i3 = 0, _Object$values2 = Object.values(this.fields); _i3 < _Object$values2.length; _i3++) {\r\n        var field = _Object$values2[_i3];\r\n        if (!field.invalid) continue;\r\n        field.element = this.getElements(\"x\" + this.rowIndex + \"_\" + field.name); // Set element\r\n\r\n        if (!field.element) field.element = this.getElements(\"x\" + this.rowIndex + \"_\" + field.name + \"[]\"); // Fields with []\r\n\r\n        if (!field.element) field.element = this.getElements(field.name); // Fields without prefix (e.g. email form)\r\n\r\n        ew.setInvalid(field.element);\r\n      }\r\n    };\r\n\r\n    createClass(Form, [{\r\n      key: \"error\",\r\n      get: function get() {\r\n        return this._error;\r\n      }\r\n    }]);\r\n\r\n    return Form;\r\n  }(FormBase);\n\n  var AjaxLookup = /*#__PURE__*/function () {\r\n    /**\r\n     * Constructor\r\n     * @param {Object} settings Settings\r\n     * @param {string} settings.id - Input element ID\r\n     * @param {string|Form} settings.form - Form of the input element\r\n     * @param {Number} settings.limit - Options per page\r\n     * @param {Object} settings.data - Data submitted by Ajax\r\n     */\r\n    function AjaxLookup(settings) {\r\n      defineProperty(this, \"_isAutoSuggest\", null);\r\n\r\n      this.elementId = settings.id; // Id\r\n\r\n      this.form = settings.form; // Form\r\n\r\n      if ($__default['default'].isString(this.form)) // Form is string => Form id\r\n        this.form = ew.forms.get(this.form);\r\n      this.element = this.form.getElement(this.elementId); // Actual HTML element\r\n\r\n      this.formElement = this.form.getElement(); // HTML form or DIV\r\n\r\n      this.list = this.form.getList(this.elementId);\r\n      var m = this.elementId.match(/^[xy](\\d*|\\$rowindex\\$)_/),\r\n          rowindex = m ? m[1] : \"\";\r\n      this.parentFields = this.list.parentFields.slice() // Clone\r\n      .map(function (pf) {\r\n        return pf.split(\" \").length == 1 ? pf.replace(/^x_/, \"x\" + rowindex + \"_\") : pf;\r\n      }); // Parent field in the same table, add row index\r\n\r\n      this.limit = settings.limit;\r\n      this.debounce = settings.debounce;\r\n      this.data = settings.data;\r\n      this.recordCount = 0;\r\n    }\r\n    /**\r\n     * Is AutoSuggest\r\n     */\r\n\r\n    var _proto = AjaxLookup.prototype;\r\n\r\n    /**\r\n     * Format display value\r\n     * @param {Array} opt Option\r\n     */\r\n    _proto.formatResult = function formatResult(opt) {\r\n      if (this.list.template && !this.isAutoSuggest) {\r\n        return this.list.template.render(opt, ew.jsRenderHelpers);\r\n      } else {\r\n        return ew.displayValue(opt, this.element) || opt[0];\r\n      }\r\n    }\r\n    /**\r\n     * Generate request\r\n     */\r\n    ;\r\n\r\n    _proto.generateRequest = function generateRequest() {\r\n      var _this = this;\r\n\r\n      var data = Object.assign({}, this.data, {\r\n        name: this.element.name,\r\n        page: this.list.page,\r\n        field: this.list.field,\r\n        ajax: \"autosuggest\",\r\n        language: ew.LANGUAGE_ID\r\n      }, ew.getUserParams(\"#p_\" + this.elementId, this.formElement));\r\n\r\n      if (this.parentFields.length > 0) {\r\n        this.parentFields.forEach(function (pf, i) {\r\n          var arp = ew.getOptionValues(pf, _this.formElement);\r\n          data[\"v\" + (i + 1)] = arp.join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n        });\r\n      }\r\n\r\n      return data;\r\n    }\r\n    /**\r\n     * Get URL\r\n     */\r\n    ;\r\n\r\n    _proto.getUrl = function getUrl(query, start) {\r\n      var params = new URLSearchParams({\r\n        q: query,\r\n        n: this.limit,\r\n        rnd: ew.random(),\r\n        start: $__default['default'].isNumber(start) ? start : -1\r\n      });\r\n      return ew.getApiUrl(ew.API_LOOKUP_ACTION, params.toString());\r\n    }\r\n    /**\r\n     * Prepare URL and data for sending request\r\n     * @param {string} query Search term\r\n     * @param {Number} start Start page\r\n     */\r\n    ;\r\n\r\n    _proto.prepare = function prepare(query, start) {\r\n      return {\r\n        url: this.getUrl(query, start),\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: this.generateRequest()\r\n      };\r\n    }\r\n    /**\r\n     * Transform options (virtual)\r\n     * @param {Object[]} data Data from server\r\n     */\r\n    ;\r\n\r\n    _proto.transform = function transform(data) {\r\n      var results = [];\r\n\r\n      if (data && data.result == \"OK\") {\r\n        this.recordCount = data.totalRecordCount;\r\n        results = data.records;\r\n      }\r\n\r\n      return results;\r\n    };\r\n\r\n    createClass(AjaxLookup, [{\r\n      key: \"isAutoSuggest\",\r\n      get: function get() {\r\n        if (this._isAutoSuggest === null) this._isAutoSuggest = ew.isAutoSuggest(this.element);\r\n        return this._isAutoSuggest;\r\n      }\r\n    }]);\r\n\r\n    return AjaxLookup;\r\n  }();\n\n  /**\r\n   * Class selection list option\r\n   */\r\n  var SelectionListOption =\r\n  /**\r\n   * Constructor\r\n   */\r\n  function SelectionListOption(value, text, selected) {\r\n    this.value = String(value);\r\n    this.text = String(text);\r\n    this.selected = !!selected;\r\n  };\n\n  function AutoSuggest(settings) {\r\n    AjaxLookup.call(this, settings); // Extends AjaxLookup\r\n\r\n    var emptyObj = {\r\n      typeahead: {}\r\n    }; // Empty Auto-Suggest object\r\n\r\n    if (this.elementId.includes(\"$rowindex$\")) return emptyObj;\r\n    this.input = this.form.getElement(\"sv_\" + this.elementId); // User input\r\n\r\n    if (!this.input) return emptyObj;\r\n    var self = this,\r\n        $input = $__default['default'](this.input),\r\n        $element = $__default['default'](this.element),\r\n        timer; // Properties\r\n\r\n    this.minWidth = settings.minWidth;\r\n    this.maxHeight = settings.maxHeight;\r\n    this.highlight = settings.highlight;\r\n    this.hint = settings.hint;\r\n    this.minLength = settings.minLength;\r\n    this.templates = Object.assign({}, settings.templates); // Clone\r\n\r\n    this.trigger = settings.trigger; // For loading more results\r\n\r\n    this.delay = settings.delay; // For loading more results\r\n\r\n    this.debounce = settings.debounce;\r\n    this.display = settings.display || \"text\";\r\n    this.forceSelection = settings.forceSelect;\r\n    this.$input = $input;\r\n    this.$element = $element; // Save initial option\r\n\r\n    if ($input.val() && $element.val()) this.element.add($element.val(), $input.val(), true); // Set the selected item to the actual field\r\n\r\n    this.setValue = function (v) {\r\n      v = v || $input.val();\r\n      var index = this.element.options.findIndex(function (option) {\r\n        return option.text == v;\r\n      });\r\n\r\n      if (index < 0) {\r\n        // Not found in results\r\n        if (this.forceSelection && v) {\r\n          // Force selection and query not empty => error\r\n          $input.typeahead(\"val\", \"\").attr(\"placeholder\", ew.language.phrase(\"ValueNotExist\")).addClass(\"is-invalid\");\r\n          $element.val(\"\").trigger(\"change\");\r\n          return;\r\n        }\r\n      } else {\r\n        // Found in results\r\n        this.element.options[index].selected = true;\r\n        if (!/s(ea)?rch$/.test(this.formElement.id) || this.forceSelection) // Force selection or not search form\r\n          v = this.element.options[index].value; // Replace the display value by Link Field value\r\n      }\r\n\r\n      if (v !== $element.attr(\"value\")) $element.attr(\"value\", v).trigger(\"change\"); // Set value to the actual field\r\n    }; // Transform suggestion\r\n\r\n    this.transform = function (data) {\r\n      var results = AjaxLookup.prototype.transform.call(this, data);\r\n      this.element.options = results.map(function (item) {\r\n        return new SelectionListOption(item.lf || item[0], self.formatResult(item));\r\n      });\r\n      return this.element.options;\r\n    }; // Get suggestions by Ajax\r\n\r\n    this.source = function (query, syncResults, asyncResults) {\r\n      if (timer) timer.cancel();\r\n      timer = $__default['default'].later(self.debounce, null, function () {\r\n        self.recordCount = 0; // Reset\r\n\r\n        var settings = self.prepare(query);\r\n        $__default['default'].ajax(settings).done(function (data) {\r\n          asyncResults(self.transform(data));\r\n        });\r\n      });\r\n    }; // Get current suggestion count\r\n\r\n    this.count = function () {\r\n      return self.typeahead.menu.$node.find(\".tt-suggestion.tt-selectable\").length;\r\n    }; // Get more suggestions by Ajax\r\n\r\n    this.more = function () {\r\n      var $body = $__default['default'](\"body\");\r\n      $body.css(\"cursor\", \"wait\");\r\n      var ta = self.typeahead,\r\n          query = ta.menu.query,\r\n          dataset = ta.menu.datasets[0];\r\n      var start = self.count();\r\n      var settings = self.prepare(query, start);\r\n      $__default['default'].ajax(settings).done(function (data) {\r\n        data = self.transform(data);\r\n\r\n        dataset._append(query, data);\r\n\r\n        ta.menu.$node.find(\".tt-dataset\").scrollTop(dataset.$lastSuggestion.outerHeight() * start);\r\n      }).always(function () {\r\n        $body.css(\"cursor\", \"default\");\r\n      });\r\n    }; // Add events\r\n\r\n    $input.on(\"typeahead:select\", function (e, d) {\r\n      self.setValue(d[self.display]);\r\n    }).on(\"change\", function (e) {\r\n      var ta = $input.data(\"tt-typeahead\");\r\n\r\n      if (ta && ta.isOpen() && !ta.menu.empty()) {\r\n        var $item = ta.menu.getActiveSelectable();\r\n\r\n        if ($item) {\r\n          // A suggestion is highlighted\r\n          var i = $item.index(),\r\n              val = self.element.options[i].text;\r\n          $input.typeahead(\"val\", val);\r\n        }\r\n      }\r\n\r\n      self.setValue();\r\n    }).on(\"blur\", function (e) {\r\n      // \"change\" fires before blur\r\n      var ta = $input.data(\"tt-typeahead\");\r\n      if (ta && ta.isOpen()) ta.menu.close();\r\n    }).on(\"focus\", function (e) {\r\n      $input.attr(\"placeholder\", $input.data(\"placeholder\")).removeClass(\"is-invalid\");\r\n    }); // Option template (\"suggestion\" template)\r\n\r\n    var tpl = self.list.template || self.templates[\"suggestion\"];\r\n    if (tpl && $__default['default'].isString(tpl)) tpl = $__default['default'].templates(tpl);\r\n    if (tpl) self.templates[\"suggestion\"] = tpl.render.bind(tpl); // Save\r\n\r\n    $element.data(\"autosuggest\", this); // Create Typeahead\r\n\r\n    $__default['default'](function () {\r\n      // Typeahead options and dataset\r\n      var options = {\r\n        highlight: self.highlight,\r\n        minLength: self.minLength,\r\n        hint: self.hint,\r\n        trigger: self.trigger,\r\n        delay: self.delay\r\n      };\r\n      var dataset = {\r\n        name: self.form.id + \"-\" + self.elementId,\r\n        source: self.source,\r\n        templates: self.templates,\r\n        display: self.display,\r\n        limit: self.limit,\r\n        async: true\r\n      };\r\n      var args = [options, dataset]; // Trigger \"typeahead\" event\r\n\r\n      $element.trigger(\"typeahead\", [args]);\r\n      self.limit = dataset.limit; // Create Typeahead\r\n\r\n      $input.typeahead.apply($input, args);\r\n      $input.on(\"typeahead:rendered\", function () {\r\n        var $node = self.typeahead.menu.$node;\r\n        var $more = $node.find(\".tt-more\").html(ew.language.phrase(\"More\"));\r\n\r\n        if (arguments.length > 1 && // Arguments: event, suggestion, suggestion, ...\r\n        self.recordCount > self.count()) {\r\n          $more.one(options.trigger, function (e) {\r\n            setTimeout(function () {\r\n              self.more();\r\n            }, options.delay);\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n          });\r\n        } else {\r\n          $more.hide();\r\n        }\r\n      });\r\n      $input.off(\"blur.tt\");\r\n      self.typeahead = $input.data(\"tt-typeahead\");\r\n      var $menu = self.typeahead.menu.$node.css(\"z-index\", 1000);\r\n      if (self.minWidth) $menu.css(\"min-width\", self.minWidth);\r\n      var $dataset = $menu.find(\".tt-dataset\");\r\n      var maxHeight = self.maxHeight || (parseInt($dataset.css(\"line-height\"), 10) + 6) * (dataset.limit + 1); // Match .tt-suggestion padding\r\n\r\n      $dataset.css({\r\n        \"max-height\": maxHeight,\r\n        \"overflow-y\": \"auto\"\r\n      });\r\n    });\r\n  }\r\n\r\n  AutoSuggest.prototype = Object.create(AjaxLookup.prototype);\n\n  /**\r\n   * Class Forms\r\n   */\r\n\r\n  var Forms = /*#__PURE__*/function () {\r\n    function Forms() {\r\n      defineProperty(this, \"_forms\", {});\r\n    }\r\n\r\n    var _proto = Forms.prototype;\r\n\r\n    /**\r\n     * Get form by element or id\r\n     * @param {HTMLElement|string} el Element or id\r\n     */\r\n    _proto.get = function get(el) {\r\n      var id = $__default['default'].isString(el) ? el : ew.getForm(el).id;\r\n      return this._forms[id];\r\n    }\r\n    /**\r\n     * Add form\r\n     * @param {Form} f Form\r\n     */\r\n    ;\r\n\r\n    _proto.add = function add(f) {\r\n      this._forms[f.id] = f;\r\n    }\r\n    /**\r\n     * Get all ids\r\n     * @returns {string[]}\r\n     */\r\n    ;\r\n\r\n    _proto.ids = function ids() {\r\n      return Object.keys(this._forms);\r\n    };\r\n\r\n    return Forms;\r\n  }();\n\n  /**\r\n   * Select2 decorator for results adapter\r\n   */\r\n\r\n  function getSelect2CustomOptionClass (Utils) {\r\n    var Select2CustomOption = /*#__PURE__*/function () {\r\n      function Select2CustomOption() {}\r\n\r\n      var _proto = Select2CustomOption.prototype;\r\n\r\n      _proto.render = function render(decorated) {\r\n        var $results = $__default['default']('<div class=\"select2-results__options ' + this.options.get('containerClass') + '\" role=\"listbox\"></div>'); //***\r\n\r\n        if (this.options.get('multiple')) {\r\n          $results.attr('aria-multiselectable', 'true');\r\n        }\r\n\r\n        this.$results = $results;\r\n        return $results;\r\n      };\r\n\r\n      _proto.displayMessage = function displayMessage(decorated, params) {\r\n        var escapeMarkup = this.options.get('escapeMarkup');\r\n        this.clear();\r\n        this.hideLoading();\r\n        var $message = $__default['default']('<div role=\"alert\" aria-live=\"assertive\"' + ' class=\"select2-results__option\"></div>'); //***\r\n\r\n        if (params.message.includes(\"<\") && params.message.includes(\">\")) {\r\n          // HTML //***\r\n          $message.append(params.message);\r\n        } else {\r\n          var message = this.options.get('translations').get(params.message);\r\n          $message.append(escapeMarkup(message(params.args)));\r\n        }\r\n\r\n        $message[0].className += ' select2-results__message';\r\n        this.$results.append($message);\r\n      };\r\n\r\n      _proto.append = function append(decorated, data) {\r\n        var _this = this;\r\n\r\n        this.hideLoading();\r\n\r\n        if (data.results == null || data.results.length === 0) {\r\n          if (this.$results.children().length === 0) {\r\n            if (this.$element.data(\"updating\")) {\r\n              this.trigger('results:message', {\r\n                message: '<div class=\"spinner-border spinner-border-sm text-primary ew-select-spinner\" role=\"status\"><span class=\"sr-only\">' + ew.language.phrase('Loading') + '</span></div> ' + ew.language.phrase('Loading')\r\n              });\r\n              this.$element.one(\"updatedone\", function () {\r\n                return _this.$element.select2(\"close\").select2(\"open\");\r\n              });\r\n            } else {\r\n              this.trigger('results:message', {\r\n                message: 'noResults'\r\n              });\r\n            }\r\n          }\r\n\r\n          return;\r\n        }\r\n\r\n        data.results = this.sort(data.results); //***\r\n\r\n        var cols = this.options.get('columns'),\r\n            len = data.results.length,\r\n            $row = this.$results.find(\".\" + this.options.get('rowClass')).last();\r\n\r\n        for (var d = 0; d < data.results.length; d++) {\r\n          var item = data.results[d];\r\n          var $option = this.option(item);\r\n\r\n          if (!$row.length || $row.children().length == cols) {\r\n            // Add new row\r\n            $row = $__default['default']('<div class=\"' + this.options.get('rowClass') + '\"></div>');\r\n            this.$results.append($row);\r\n          }\r\n\r\n          $row.append($option);\r\n\r\n          if (d == len - 1) {\r\n            // Last\r\n            var cnt = cols - $row.children().length;\r\n\r\n            for (var i = 0; i < cnt; i++) {\r\n              $row.append('<div class=\"' + this.options.get('colClass') + '\"></div>');\r\n            }\r\n          }\r\n        }\r\n      };\r\n\r\n      _proto.option = function option(decorated, data) {\r\n        // var option = document.createElement('li');\r\n        var option = document.createElement('div'); //***\r\n\r\n        option.className = 'select2-results__option ' + this.options.get('cellClass'); //***\r\n\r\n        var attrs = {\r\n          'role': 'option',\r\n          'aria-selected': 'false'\r\n        };\r\n        var matches = window.Element.prototype.matches || window.Element.prototype.msMatchesSelector || window.Element.prototype.webkitMatchesSelector;\r\n\r\n        if (data.element != null && matches.call(data.element, ':disabled') || data.element == null && data.disabled) {\r\n          delete attrs['aria-selected'];\r\n          attrs['aria-disabled'] = 'true';\r\n        }\r\n\r\n        if (data.id == null) {\r\n          delete attrs['aria-selected'];\r\n        }\r\n\r\n        if (data._resultId != null) {\r\n          option.id = data._resultId;\r\n        }\r\n\r\n        if (data.title) {\r\n          option.title = data.title;\r\n        } // if (data.children) { //***\r\n        //   attrs.role = 'group';\r\n        //   attrs['aria-label'] = data.text;\r\n        //   delete attrs['aria-selected'];\r\n        // }\r\n\r\n        for (var attr in attrs) {\r\n          var val = attrs[attr];\r\n          option.setAttribute(attr, val);\r\n        } // if (data.children) { //***\r\n        //   var $option = $(option);\r\n        //   var label = document.createElement('strong');\r\n        //   label.className = 'select2-results__group';\r\n        //   var $label = $(label);\r\n        //   this.template(data, label);\r\n        //   var $children = [];\r\n        //   for (var c = 0; c < data.children.length; c++) {\r\n        //     var child = data.children[c];\r\n        //     var $child = this.option(child);\r\n        //     $children.push($child);\r\n        //   }\r\n        //   var $childrenContainer = $('<ul></ul>', {\r\n        //     'class': 'select2-results__options select2-results__options--nested'\r\n        //   });\r\n        //   $childrenContainer.append($children);\r\n        //   $option.append(label);\r\n        //   $option.append($childrenContainer);\r\n        // } else {\r\n\r\n        this.template(data, option); // }\r\n\r\n        Utils.StoreData(option, 'data', data);\r\n        return option;\r\n      };\r\n\r\n      return Select2CustomOption;\r\n    }();\r\n\r\n    return Select2CustomOption;\r\n  }\n\n  function _createForOfIteratorHelperLoose$3(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray$3(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } it = o[Symbol.iterator](); return it.next.bind(it); }\r\n\r\n  function _unsupportedIterableToArray$3(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray$3(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$3(o, minLen); }\r\n\r\n  function _arrayLikeToArray$3(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\n  function ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\r\n\r\n  function _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$2(Object(source), true).forEach(function (key) { defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\r\n  var currentUrl = new URL(window.location);\r\n  var forms = new Forms();\r\n  var $document = $__default['default'](document),\r\n      $body = $__default['default'](\"body\"); // Remove spinner (immediately)\r\n\r\n  var _removeSpinner = ew.removeSpinner; // Remove spinner\r\n\r\n  function removeSpinner() {\r\n    var timer = $body.data(\"_spinner\");\r\n    if (timer) timer.cancel();\r\n    timer = $__default['default'].later(500, null, function () {\r\n      if ($document.data(\"_ajax\") !== true) {\r\n        // Ajax not running\r\n        _removeSpinner();\r\n\r\n        $__default['default'](\"form.ew-form\").each(function () {\r\n          var frm = forms.get(this.id);\r\n\r\n          if (frm) {\r\n            frm.focus();\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    });\r\n    $body.data(\"_spinner\", timer);\r\n  } // Create select2\r\n\r\n  function createSelect(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n\r\n    $__default['default'].fn.select2.amd.require([\"select2/utils\", \"select2/results\", \"select2/dropdown/infiniteScroll\", \"select2/dropdown/hidePlaceholder\", \"select2/dropdown/selectOnClose\"], function (opts) {\r\n      return function (Utils, ResultsList, InfiniteScroll, HidePlaceholder, SelectOnClose) {\r\n        var options = Object.assign({}, ew.selectOptions, opts);\r\n\r\n        if (options.resultsAdapter == null) {\r\n          options.resultsAdapter = ResultsList;\r\n\r\n          if (options.dropdown && options.columns && options.customOption) {\r\n            options.resultsAdapter = Utils.Decorate(options.resultsAdapter, getSelect2CustomOptionClass(Utils));\r\n\r\n            if (options.iconClass && options.multiple && !options.templateResult) {\r\n              options.templateResult = function (result) {\r\n                return '<label class=\"' + options.iconClass + ' ew-dropdown-label\">' + result.text + '</label>';\r\n              };\r\n            }\r\n          }\r\n\r\n          if (!options.templateResult) {\r\n            // Override Select2 default\r\n            options.templateResult = function (result) {\r\n              return (result.element instanceof HTMLOptionElement ? result.element.innerHTML : \"\") || result.text;\r\n            };\r\n          }\r\n\r\n          if (options.ajax != null) {\r\n            options.resultsAdapter = Utils.Decorate(options.resultsAdapter, InfiniteScroll);\r\n          }\r\n\r\n          if (options.placeholder != null) {\r\n            options.resultsAdapter = Utils.Decorate(options.resultsAdapter, HidePlaceholder);\r\n          }\r\n\r\n          if (options.selectOnClose) {\r\n            options.resultsAdapter = Utils.Decorate(options.resultsAdapter, SelectOnClose);\r\n          }\r\n        }\r\n\r\n        if ($__default['default'].isObject(options.ajax)) {\r\n          var lookup = new ew.AjaxLookup(options.ajax);\r\n          options.ajax = {\r\n            url: function url(params) {\r\n              var start = params.page ? (params.page - 1) * (settings.limit || ew.AUTO_SUGGEST_MAX_ENTRIES) : -1;\r\n              return lookup.getUrl(params.term, start);\r\n            },\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            data: lookup.generateRequest.bind(lookup),\r\n            delay: options.debounce,\r\n            processResults: function processResults(data) {\r\n              return {\r\n                results: lookup.transform(data).map(function (item) {\r\n                  return {\r\n                    id: item.lf,\r\n                    text: lookup.formatResult({\r\n                      lf: item.lf,\r\n                      df: item.df,\r\n                      df2: item.df2,\r\n                      df3: item.df3,\r\n                      df4: item.df4\r\n                    })\r\n                  };\r\n                }),\r\n                pagination: {\r\n                  more: data.length < lookup.recordCount\r\n                }\r\n              };\r\n            }\r\n          };\r\n        }\r\n\r\n        var $select = $__default['default'](\"select[data-select2-id='\" + options.selectId + \"']\").select2(options);\r\n        $select.on(\"select2:open\", function () {\r\n          var _$$;\r\n\r\n          (_$$ = $__default['default'](\".select2-container--open .select2-search__field\")[0]) === null || _$$ === void 0 ? void 0 : _$$.focus();\r\n        });\r\n\r\n        if (options.multiple && options.minimumResultsForSearch === Infinity) {\r\n          $select.on(\"select2:opening select2:closing\", function () {\r\n            $__default['default'](\".select2-container--open .select2-search__field\").prop(\"disabled\", true);\r\n          });\r\n        }\r\n      };\r\n    }(options));\r\n  } // Init icon tooltip\r\n\r\n  function initIcons(e) {\r\n    var el = e && e.target ? e.target : document;\r\n    $__default['default'](el).find(\".ew-icon\").closest(\"a, button\").add(\".ew-tooltip\").tooltip({\r\n      container: \"body\",\r\n      trigger: ew.IS_MOBILE ? \"manual\" : \"hover\",\r\n      placement: \"bottom\",\r\n      sanitizeFn: ew.sanitizeFn\r\n    });\r\n  } // Init password options\r\n\r\n  function initPasswordOptions(e) {\r\n    var el = e && e.target ? e.target : document;\r\n\r\n    if ($__default['default'].fn.pStrength && typeof ew.MIN_PASSWORD_STRENGTH != \"undefined\") {\r\n      $__default['default'](el).find(\".ew-password-strength\").each(function () {\r\n        var $this = $__default['default'](this);\r\n        if (!$this.data(\"pStrength\")) $this.pStrength({\r\n          \"changeBackground\": false,\r\n          \"backgrounds\": [],\r\n          \"passwordValidFrom\": ew.MIN_PASSWORD_STRENGTH,\r\n          \"onPasswordStrengthChanged\": function onPasswordStrengthChanged(strength, percentage) {\r\n            var $this = $__default['default'](this),\r\n                $pst = $__default['default'](\"[id='\" + $this.attr(\"data-password-strength\") + \"']\"),\r\n                // Do not use #\r\n            $pb = $pst.find(\".progress-bar\");\r\n            $pst.width($this.outerWidth());\r\n\r\n            if ($this.val() && !ew.isMaskedPassword(this)) {\r\n              var pct = percentage + \"%\";\r\n\r\n              if (percentage < 25) {\r\n                $pb.addClass(\"bg-danger\").removeClass(\"bg-warning bg-info bg-success\");\r\n              } else if (percentage < 50) {\r\n                $pb.addClass(\"bg-warning\").removeClass(\"bg-danger bg-info bg-success\");\r\n              } else if (percentage < 75) {\r\n                $pb.addClass(\"bg-info\").removeClass(\"bg-danger bg-warning bg-success\");\r\n              } else {\r\n                $pb.addClass(\"bg-success\").removeClass(\"bg-danger bg-warning bg-info\");\r\n              }\r\n\r\n              $pb.css(\"width\", pct);\r\n              if (percentage > 25) pct = ew.language.phrase(\"PasswordStrength\").replace(\"%p\", pct);\r\n              $pb.html(pct);\r\n              $pst.removeClass(\"d-none\").show();\r\n              $this.data(\"validated\", percentage >= ew.MIN_PASSWORD_STRENGTH);\r\n            } else {\r\n              $pst.addClass(\"d-none\").hide();\r\n              $this.data(\"validated\", null);\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    if ($__default['default'].fn.pGenerator) {\r\n      $__default['default'](el).find(\".ew-password-generator\").each(function () {\r\n        var $this = $__default['default'](this);\r\n        if (!$this.data(\"pGenerator\")) $this.pGenerator({\r\n          \"passwordLength\": ew.GENERATE_PASSWORD_LENGTH,\r\n          \"uppercase\": ew.GENERATE_PASSWORD_UPPERCASE,\r\n          \"lowercase\": ew.GENERATE_PASSWORD_LOWERCASE,\r\n          \"numbers\": ew.GENERATE_PASSWORD_NUMBER,\r\n          \"specialChars\": ew.GENERATE_PASSWORD_SPECIALCHARS,\r\n          \"onPasswordGenerated\": function onPasswordGenerated(pwd) {\r\n            var $this = $__default['default'](this);\r\n            $__default['default'](\"#\" + $this.attr(\"data-password-field\")).val(pwd).trigger(\"change\").trigger(\"focus\").triggerHandler(\"click\"); // Trigger click to remove \"is-invalid\" class (Do not use $this.data)\r\n\r\n            $__default['default'](\"#\" + $this.attr(\"data-password-confirm\")).val(pwd);\r\n            $__default['default'](\"#\" + $this.attr(\"data-password-strength\")).addClass(\"d-none\").hide();\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Get API action URL\r\n   * @param {string|string[]} action Route as string or array, e.g. \"foo\", [\"foo\", \"1\"]\r\n   * @param {string|string[]|object} query Search params, e.g. \"foo=1&bar=2\", [[\"foo\", \"1\"], [\"bar\", \"2\"]], {\"foo\": \"1\", \"bar\": \"2\"}\r\n   */\r\n\r\n  function getApiUrl(action, query) {\r\n    var url = ew.PATH_BASE + ew.API_URL,\r\n        params = new URLSearchParams(query),\r\n        qs = params.toString();\r\n\r\n    if ($__default['default'].isString(action)) {\r\n      // Route as string\r\n      url += action ? action : \"\";\r\n    } else if (Array.isArray(action)) {\r\n      // Route as array\r\n      var route = action.map(function (v) {\r\n        return encodeURIComponent(v);\r\n      }).join(\"/\");\r\n      url += route ? route : \"\";\r\n    }\r\n\r\n    return url + (qs ? \"?\" + qs : \"\");\r\n  } // Sanitize URL\r\n\r\n  function sanitizeUrl(url) {\r\n    var ar = url.split(\"?\"),\r\n        search = ar[1];\r\n\r\n    if (search) {\r\n      var searchParams = new URLSearchParams(search);\r\n      searchParams.forEach(function (value, key) {\r\n        return searchParams.set(key, ew.sanitize(value));\r\n      });\r\n      search = searchParams.toString();\r\n    }\r\n\r\n    return ar[0] + (search ? \"?\" + search : \"\");\r\n  } // Set session timer\r\n\r\n  function setSessionTimer() {\r\n    var timeoutTime,\r\n        timer,\r\n        keepAliveTimer,\r\n        counter,\r\n        useKeepAlive = ew.SESSION_KEEP_ALIVE_INTERVAL > 0 || ew.IS_LOGGEDIN && ew.IS_AUTOLOGIN; // Keep alive\r\n\r\n    var keepAlive = function keepAlive() {\r\n      $__default['default'].get(getApiUrl(ew.API_SESSION_ACTION), {\r\n        \"rnd\": random()\r\n      }, function (token) {\r\n        if (token && $__default['default'].isObject(token)) {\r\n          // PHP\r\n          ew.TOKEN_NAME = token[ew.TOKEN_NAME_KEY];\r\n          ew.ANTIFORGERY_TOKEN = token[ew.ANTIFORGERY_TOKEN_KEY];\r\n          if (token[\"JWT\"]) ew.API_JWT_TOKEN = token[\"JWT\"];\r\n        }\r\n      });\r\n    }; // Reset timer\r\n\r\n    var resetTimer = function resetTimer() {\r\n      counter = ew.SESSION_TIMEOUT_COUNTDOWN;\r\n      timeoutTime = ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN;\r\n\r\n      if (timeoutTime < 0) {\r\n        // Timeout now\r\n        timeoutTime = 0;\r\n        counter = ew.SESSION_TIMEOUT;\r\n      }\r\n\r\n      if (timer) timer.cancel(); // Clear timer\r\n    }; // Timeout\r\n\r\n    var timeout = function timeout() {\r\n      if (keepAliveTimer) keepAliveTimer.cancel(); // Stop keep alive\r\n\r\n      if (counter > 0) {\r\n        var timerInterval;\r\n        var message = '<p class=\"text-danger\">' + ew.language.phrase(\"SessionWillExpire\") + '</p>';\r\n\r\n        if (message.includes(\"%m\") && message.includes(\"%s\")) {\r\n          message = message.replace(\"%m\", '<span class=\"ew-session-counter-minute\">' + Math.floor(counter / 60) + '</span>');\r\n          message = message.replace(\"%s\", '<span class=\"ew-session-counter-second\">' + counter % 60 + '</span>');\r\n        } else if (message.includes(\"%s\")) {\r\n          message = message.replace(\"%s\", '<span class=\"ew-session-counter-second\">' + counter + '</span>');\r\n        }\r\n\r\n        Swal.fire(_objectSpread$2(_objectSpread$2({}, ew.sweetAlertSettings), {}, {\r\n          html: message,\r\n          showConfirmButton: true,\r\n          confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n          timer: counter * 1000,\r\n          timerProgressBar: true,\r\n          allowOutsideClick: false,\r\n          allowEscapeKey: false,\r\n          willOpen: function willOpen() {\r\n            timerInterval = setInterval(function () {\r\n              var content = Swal.getContent(),\r\n                  min = content.querySelector(\".ew-session-counter-minute\"),\r\n                  sec = content.querySelector(\".ew-session-counter-second\"),\r\n                  timeleft = Math.round(Swal.getTimerLeft() / 1000);\r\n\r\n              if (min && sec) {\r\n                min.textContent = Math.floor(timeleft / 60);\r\n                sec.textContent = timeleft % 60;\r\n              } else if (sec) {\r\n                sec.textContent = timeleft;\r\n              }\r\n            }, 1000);\r\n          },\r\n          onClose: function onClose() {\r\n            clearInterval(timerInterval);\r\n          }\r\n        })).then(function (result) {\r\n          if (result.value) {\r\n            // OK button pressed\r\n            keepAlive();\r\n            if (!useKeepAlive && ew.SESSION_TIMEOUT > 0) setTimer();\r\n          } else if (result.dismiss === Swal.DismissReason.timer) {\r\n            // Timeout\r\n            resetTimer();\r\n            window.location = sanitizeUrl(ew.TIMEOUT_URL + \"?expired=1\");\r\n          }\r\n        });\r\n      }\r\n    }; // Set timer\r\n\r\n    var setTimer = function setTimer() {\r\n      resetTimer(); // Reset timer first\r\n\r\n      timer = $__default['default'].later(timeoutTime * 1000, null, timeout);\r\n    };\r\n\r\n    if (useKeepAlive) {\r\n      // Keep alive\r\n      var keepAliveInterval = ew.SESSION_KEEP_ALIVE_INTERVAL > 0 ? ew.SESSION_KEEP_ALIVE_INTERVAL : ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN;\r\n      if (keepAliveInterval <= 0) keepAliveInterval = 60;\r\n      keepAliveTimer = $__default['default'].later(keepAliveInterval * 1000, null, keepAlive, null, true); // Periodic\r\n    } else {\r\n      if (ew.SESSION_TIMEOUT > 0) // Set session timeout\r\n        setTimer();\r\n    }\r\n  } // Init export links\r\n\r\n  function initExportLinks(e) {\r\n    var el = e && e.target ? e.target : document;\r\n    $__default['default'](el).find(\".ew-export-link[href]:not(.ew-email):not(.ew-print):not(.ew-xml)\").on(\"click\", function (e) {\r\n      var href = $__default['default'](this).attr(\"href\");\r\n      if (href && href != \"#\") fileDownload(href);\r\n      e.preventDefault();\r\n    });\r\n  } // Init multi-select checkboxes\r\n\r\n  function initMultiSelectCheckboxes(e) {\r\n    var el = e && e.target ? e.target : document,\r\n        $el = $__default['default'](el),\r\n        $cbs = $el.find(\"input[type=checkbox].ew-multi-select\");\r\n\r\n    var _update = function _update(id) {\r\n      var $els = $cbs.filter(\"[name^='\" + id + \"_']\"),\r\n          cnt = $els.length,\r\n          len = $els.filter(\":checked\").length;\r\n      $els.closest(\"form\").find(\"input[type=checkbox]#\" + id).prop(\"checked\", len == cnt).prop(\"indeterminate\", len != cnt && len != 0);\r\n    };\r\n\r\n    $cbs.on(\"click\", function (e) {\r\n      _update(this.name.split(\"_\")[0]);\r\n    });\r\n    $el.find(\"input[type=checkbox].ew-priv:not(.ew-multi-select)\").each(function () {\r\n      _update(this.id); // Init\r\n\r\n    });\r\n  } // Download file\r\n\r\n  function fileDownload(href, data) {\r\n    var isHtml = href.includes(\"export=html\");\r\n    return Swal.fire(_objectSpread$2(_objectSpread$2({}, ew.sweetAlertSettings), {}, {\r\n      showConfirmButton: false,\r\n      html: \"<p>\" + ew.language.phrase(\"Exporting\") + \"</p>\",\r\n      allowOutsideClick: false,\r\n      allowEscapeKey: false,\r\n      willOpen: function willOpen() {\r\n        Swal.showLoading(), $__default['default'].ajax({\r\n          url: href,\r\n          type: data ? \"POST\" : \"GET\",\r\n          cache: false,\r\n          data: data || null,\r\n          xhrFields: {\r\n            responseType: isHtml ? \"text\" : \"blob\"\r\n          }\r\n        }).done(function (data, textStatus, jqXHR) {\r\n          var url = URL.createObjectURL(isHtml ? new Blob([data], {\r\n            type: \"text/html\"\r\n          }) : data),\r\n              a = document.createElement(\"a\"),\r\n              cd = jqXHR.getResponseHeader(\"Content-Disposition\"),\r\n              m = cd.match(/\\bfilename=((['\"])(.+)\\2|([^;]+))/i);\r\n          a.style.display = \"none\";\r\n          a.href = url;\r\n          if (m) a.download = m[3] || m[4];\r\n          document.body.appendChild(a);\r\n          a.click();\r\n          $document.trigger(\"export\", [{\r\n            \"type\": \"done\",\r\n            \"url\": href,\r\n            \"objectUrl\": url\r\n          }]);\r\n          URL.revokeObjectURL(url);\r\n          Swal.close();\r\n        }).fail(function (jqXHR, textStatus, errorThrown) {\r\n          var _Swal$getActions;\r\n\r\n          Swal.hideLoading();\r\n          Swal.update({\r\n            showConfirmButton: true\r\n          });\r\n          (_Swal$getActions = Swal.getActions()) === null || _Swal$getActions === void 0 ? void 0 : _Swal$getActions.classList.add(\"d-flex\");\r\n          Swal.showValidationMessage(\"<div class='text-danger'>\" + (errorThrown || ew.language.phrase(\"FailedToExport\")) + \"</div>\");\r\n          $document.trigger(\"export\", [{\r\n            \"type\": \"fail\",\r\n            \"url\": href\r\n          }]);\r\n        }).always(function () {\r\n          $document.trigger(\"export\", [{\r\n            \"type\": \"always\",\r\n            \"url\": href\r\n          }]);\r\n        });\r\n      }\r\n    }));\r\n  } // Lazy load images\r\n\r\n  function lazyLoad(e) {\r\n    if (!ew.LAZY_LOAD) return;\r\n    var el = e && e.target ? e.target : document;\r\n    $__default['default'](el).find(\"img.ew-lazy\").each(function () {\r\n      this.src = this.dataset.src;\r\n    });\r\n    $document.trigger(\"lazyload\"); // All images loaded\r\n  } // Update select2 dropdown position\r\n\r\n  function updateDropdownPosition() {\r\n    var select = $__default['default'](\".select2-container--open\").prev(\".ew-select\").data(\"select2\");\r\n\r\n    if (select) {\r\n      select.dropdown._positionDropdown();\r\n\r\n      select.dropdown._resizeDropdown();\r\n    }\r\n  } // Colorboxes\r\n\r\n  function initLightboxes(e) {\r\n    if (!ew.USE_COLORBOX) return;\r\n    var el = e && e.target ? e.target : document;\r\n    var settings = Object.assign({}, ew.lightboxSettings, {\r\n      title: ew.language.phrase(\"LightboxTitle\"),\r\n      current: ew.language.phrase(\"LightboxCurrent\"),\r\n      previous: ew.language.phrase(\"LightboxPrevious\"),\r\n      next: ew.language.phrase(\"LightboxNext\"),\r\n      close: ew.language.phrase(\"LightboxClose\"),\r\n      xhrError: ew.language.phrase(\"LightboxXhrError\"),\r\n      imgError: ew.language.phrase(\"LightboxImgError\")\r\n    });\r\n    $__default['default'](el).find(\".ew-lightbox\").each(function () {\r\n      var $this = $__default['default'](this);\r\n      $this.colorbox(Object.assign({\r\n        rel: $this.data(\"rel\")\r\n      }, settings));\r\n    });\r\n  } // PDFObjects\r\n\r\n  function initPdfObjects(e) {\r\n    if (!ew.EMBED_PDF) return;\r\n    var el = e && e.target ? e.target : document,\r\n        options = Object.assign({}, ew.PDFObjectOptions);\r\n    $__default['default'](el).find(\".ew-pdfobject\").not(\":has(.pdfobject)\").each(function () {\r\n      // Not already embedded\r\n      var $this = $__default['default'](this),\r\n          url = $this.data(\"url\"),\r\n          html = $this.html();\r\n      if (url) PDFObject.embed(url, this, Object.assign(options, {\r\n        fallbackLink: html\r\n      }));\r\n    });\r\n  } // Tooltips and popovers\r\n\r\n  function initTooltips(e) {\r\n    var el = e && e.target ? e.target : document,\r\n        $el = $__default['default'](el);\r\n    $el.find(\"input[data-toggle=tooltip],textarea[data-toggle=tooltip],select[data-toggle=tooltip]\").each(function () {\r\n      var $this = $__default['default'](this);\r\n      $this.tooltip(Object.assign({\r\n        html: true,\r\n        placement: \"bottom\",\r\n        sanitizeFn: ew.sanitizeFn\r\n      }, $this.data()));\r\n    });\r\n    $el.find(\"a.ew-tooltip-link\").each(tooltip); // Init tooltips\r\n\r\n    $el.find(\".ew-tooltip\").tooltip({\r\n      placement: \"bottom\",\r\n      sanitizeFn: ew.sanitizeFn\r\n    });\r\n    $el.find(\".ew-popover\").popover({\r\n      sanitizeFn: ew.sanitizeFn\r\n    });\r\n  } // Parse JSON\r\n\r\n  function parseJson(data) {\r\n    if ($__default['default'].isString(data)) {\r\n      try {\r\n        return JSON.parse(data);\r\n      } catch (e) {\r\n        return undefined;\r\n      }\r\n    }\r\n\r\n    return data;\r\n  } // Change search operator\r\n\r\n  function searchOperatorChanged(el) {\r\n    var $el = $__default['default'](el),\r\n        $p = $el.closest(\"[id^=r_], [id^=xsc_]\"),\r\n        parm = el.id.substr(2),\r\n        $fld = $p.find(\".ew-search-field\"),\r\n        $fld2 = $p.find(\".ew-search-field2\"),\r\n        $y = $fld2.find(\"[name='y_\" + parm + \"'], [name='y_\" + parm + \"[]']\"),\r\n        hasY = $y.length,\r\n        $cond = $p.find(\".ew-search-cond\"),\r\n        hasCond = $cond.length,\r\n        // Has condition and operator 2\r\n    $and = $p.find(\".ew-search-and\"),\r\n        $opr = $p.find(\".ew-search-operator\"),\r\n        opr = $opr.find(\"[name='z_\" + parm + \"']\").val(),\r\n        $opr2 = $p.find(\".ew-search-operator2\"),\r\n        opr2 = $opr2.find(\"[name='w_\" + parm + \"']\").val(),\r\n        isBetween = opr == \"BETWEEN\",\r\n        // Can only be operator 1\r\n    isNullOpr = [\"IS NULL\", \"IS NOT NULL\"].includes(opr),\r\n        isNullOpr2 = [\"IS NULL\", \"IS NOT NULL\"].includes(opr2),\r\n        hideOpr2 = !hasY || isBetween,\r\n        hideX = isNullOpr,\r\n        hideY = !isBetween && (!hasCond || isNullOpr2);\r\n    $cond.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $and.toggleClass(\"d-none\", !isBetween);\r\n    $opr2.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $fld.toggleClass(\"d-none\", hideX).find(\":input\").prop(\"disabled\", hideX);\r\n    $fld2.toggleClass(\"d-none\", hideY).find(\":input\").prop(\"disabled\", hideY);\r\n  } // Init forms\r\n\r\n  function initForms(e) {\r\n    var el = e && e.target ? e.target : document,\r\n        $el = $__default['default'](el),\r\n        ids = ew.forms.ids();\r\n\r\n    for (var _iterator = _createForOfIteratorHelperLoose$3(ids), _step; !(_step = _iterator()).done;) {\r\n      var id = _step.value;\r\n      if ($el.find(\"#\" + id)) forms.get(id).init();\r\n    }\r\n  } // Is function\r\n\r\n  function isFunction(x) {\r\n    return typeof x === \"function\";\r\n  } // Prompt/Confirm/Alert\r\n\r\n  function _prompt(text, cb, input, validator) {\r\n    if (input) {\r\n      // Prompt\r\n      return Swal.fire(_objectSpread$2(_objectSpread$2({}, ew.sweetAlertSettings), {}, {\r\n        html: text,\r\n        input: \"text\",\r\n        confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n        showCancelButton: isFunction(cb),\r\n        cancelButtonText: ew.language.phrase(\"CancelBtn\"),\r\n        inputValidator: validator || function (value) {\r\n          if (!value) return ew.language.phrase(\"EnterValue\");\r\n        }\r\n      })).then(function (result) {\r\n        if (isFunction(cb)) cb(result.value);\r\n      });\r\n    } else {\r\n      // Confirm or Alert\r\n      return Swal.fire(_objectSpread$2(_objectSpread$2({}, ew.sweetAlertSettings), {}, {\r\n        html: \"<div>\" + text + \"</div>\",\r\n        confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n        showCancelButton: isFunction(cb),\r\n        cancelButtonText: ew.language.phrase(\"CancelBtn\")\r\n      })).then(function (result) {\r\n        if (isFunction(cb)) cb(result.value);\r\n      });\r\n    }\r\n  }\r\n\r\n  function toast(options) {\r\n    options = Object.assign({}, ew.toastOptions, options);\r\n    $document.Toasts(\"create\", options);\r\n    var position = options.position,\r\n        $container = $__default['default'](\"#toastsContainer\" + position[0].toUpperCase() + position.substring(1));\r\n    return $container.children().first();\r\n  }\r\n  /**\r\n   * Show toast\r\n   *\r\n   * @param {string} msg - Message\r\n   * @param {string} type - CSS class: \"muted|primary|success|info|warning|danger\"\r\n   */\r\n\r\n  function showToast(msg, type) {\r\n    type = type || \"danger\";\r\n    return toast({\r\n      class: \"ew-toast bg-\" + type,\r\n      title: ew.language.phrase(type),\r\n      body: msg,\r\n      autohide: type == \"success\" ? ew.autoHideSuccessMessage : false,\r\n      // Autohide for success message\r\n      delay: type == \"success\" ? ew.autoHideSuccessMessageDelay : 500\r\n    });\r\n  } // Get form.ew-form or div.ew-form HTML element\r\n\r\n  function getForm(el) {\r\n    if (el instanceof Form) return el.$element[0];\r\n    var $el = $__default['default'](el),\r\n        $f = $el.closest(\".ew-form\");\r\n    if (!$f[0]) // Element not inside form\r\n      $f = $el.closest(\".ew-grid, .ew-multi-column-grid\").find(\".ew-form\").not(\".ew-pager-form\");\r\n    return $f[0];\r\n  } // Check form data\r\n\r\n  function hasFormData(form) {\r\n    var selector = \"[name^=x_],[name^=y_],[name^=z_],[name^=w_],[name=psearch]\",\r\n        els = $__default['default'](form).find(selector).filter(\":enabled\").get();\r\n\r\n    for (var i = 0, len = els.length; i < len; i++) {\r\n      var el = els[i];\r\n\r\n      if (/^(z|w)_/.test(el.name)) {\r\n        if (/^IS/.test($__default['default'](el).val())) return true;\r\n      } else if (el.type == \"checkbox\" || el.type == \"radio\") {\r\n        if (el.checked) return true;\r\n      } else if (el.type == \"select-one\" || el.type == \"select-multiple\") {\r\n        if (!!$__default['default'](el).val()) return true;\r\n      } else if (el.type == \"text\" || el.type == \"hidden\" || el.type == \"textarea\") {\r\n        if (el.value) return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  } // Set search type\r\n\r\n  function setSearchType(el, val) {\r\n    var $this = $__default['default'](el),\r\n        $form = $this.closest(\"form\"),\r\n        text = \"\";\r\n    $form.find(\"input[name=psearchtype]\").val(val || \"\");\r\n\r\n    if (val == \"=\") {\r\n      text = ew.language.phrase(\"QuickSearchExactShort\");\r\n    } else if (val == \"AND\") {\r\n      text = ew.language.phrase(\"QuickSearchAllShort\");\r\n    } else if (val == \"OR\") {\r\n      text = ew.language.phrase(\"QuickSearchAnyShort\");\r\n    } else {\r\n      text = ew.language.phrase(\"QuickSearchAutoShort\");\r\n    }\r\n\r\n    $form.find(\"#searchtype\").html(text + (text ? \"&nbsp;\" : \"\"));\r\n    $this.closest(\"ul\").find(\"li\").removeClass(\"active\");\r\n    $this.closest(\"li\").addClass(\"active\");\r\n    return false;\r\n  }\r\n  /**\r\n   * Update a dynamic selection list\r\n   *\r\n   * @param {(HTMLElement|HTMLElement[]|string|string[])} obj - Target HTML element(s) or the ID of the element(s)\r\n   * @param {(string[]|array[])} parentId - Parent field element names or data\r\n   * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n   * @param {boolean} change - Trigger onchange event\r\n   * @returns\r\n   */\r\n\r\n  function updateOptions(obj, parentId, async, change) {\r\n    var f = this.$element ? this.$element[0] : this.form ? this.form : null; // Get form/div element from this\r\n\r\n    if (!f) return;\r\n    var frm = this.htmlForm ? this : forms.get(f.id); // Get Form object\r\n\r\n    if (!frm) return;\r\n    if (this.form && $__default['default'].isUndefined(obj)) // Target unspecified\r\n      obj = forms.get(this).getList(this.name).childFields.slice(); // Clone\r\n    else if ($__default['default'].isString(obj)) obj = getElements(obj, f);\r\n    if (!obj || Array.isArray(obj) && obj.length == 0) return;\r\n    var self = this,\r\n        promise = Promise.resolve();\r\n\r\n    if (Array.isArray(obj) && $__default['default'].isString(obj[0])) {\r\n      // Array of id (onchange/onclick event)\r\n      var els = [];\r\n\r\n      for (var i = 0, len = obj.length; i < len; i++) {\r\n        var ar = obj[i].split(\" \");\r\n\r\n        if (ar.length == 1 && self.form) {\r\n          // Parent/Child fields in the same table\r\n          var m = getId(self, false).match(/^([xy]\\d*_)/);\r\n          if (m) obj[i] = obj[i].replace(/^([xy]\\d*_)/, m[1]);\r\n        }\r\n\r\n        var el = getElements(obj[i], f),\r\n            names = [];\r\n        els.push(el);\r\n\r\n        if (ar.length == 2 && Array.isArray(el)) {\r\n          // Check if id is \"tblvar fldvar\" and multiple inputs\r\n          var $el = $__default['default'](el);\r\n          $el.each(function () {\r\n            if (!names.includes(this.name)) {\r\n              names.push(this.name);\r\n              var $elf = $el.filter(\"[name='\" + this.name + \"']\"),\r\n                  typ = $elf.attr(\"type\"),\r\n                  elf = [\"radio\", \"checkbox\"].includes(typ) ? $elf.get() : $elf[0];\r\n              promise = promise.then(_updateOptions.bind(self, elf, parentId, async, change));\r\n            }\r\n          });\r\n        } else {\r\n          promise = promise.then(_updateOptions.bind(self, el, parentId, async, change));\r\n        }\r\n      }\r\n\r\n      obj = els;\r\n      var list = forms.get(self).getList(self.name);\r\n      if (list && Array.isArray(list.autoFillTargetFields) && list.autoFillTargetFields[0]) // AutoFill\r\n        promise = promise.then(autoFill.bind(null, self));\r\n    } else {\r\n      promise = promise.then(_updateOptions.bind(self, obj, parentId, async, change));\r\n    }\r\n\r\n    return promise.then(function () {\r\n      $document.trigger(\"updatedone\", [{\r\n        source: self,\r\n        target: obj\r\n      }]); // Document \"updatedone\" event fired after all the target elements are updated\r\n    });\r\n  }\r\n  /**\r\n   * Update a dynamic selection list\r\n   *\r\n   * @param {(HTMLElement|HTMLElement[]} obj - Target HTML element(s) or the ID of the element(s)\r\n   * @param {(string[]|array[])} parentId - Parent field element names or data\r\n   * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n   * @param {boolean} change - Trigger onchange event\r\n   * @returns Promise\r\n   */\r\n\r\n  function _updateOptions(obj, parentId, async, change) {\r\n    var id = getId(obj, false);\r\n    if (!id) return;\r\n    var fo = getForm(obj); // Get form/div element from obj\r\n\r\n    if (!fo || !fo.id) return;\r\n    var frmo = forms.get(fo.id);\r\n    if (!frmo) return;\r\n    var self = this,\r\n        args = Array.from(arguments),\r\n        ar = getOptionValues(obj),\r\n        m = id.match(/^([xy])(\\d*)_/),\r\n        prefix = m ? m[1] : \"\",\r\n        rowindex = m ? m[2] : \"\",\r\n        arp = [],\r\n        list = frmo.getList(id),\r\n        $obj = $__default['default'](obj).data(\"updating\", true);\r\n    if ($obj.data(\"hidden\")) // Skip data-hidden field, e.g. detail key\r\n      return;\r\n\r\n    if ($__default['default'].isUndefined(parentId)) {\r\n      // Parent IDs not specified, use default\r\n      parentId = list.parentFields.slice(); // Clone\r\n\r\n      if (rowindex != \"\") {\r\n        for (var i = 0, len = parentId.length; i < len; i++) {\r\n          var arr = parentId[i].split(\" \");\r\n          if (arr.length == 1) // Parent field in the same table, add row index\r\n            parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n        }\r\n      }\r\n    }\r\n\r\n    if (Array.isArray(parentId) && parentId.length > 0) {\r\n      if (Array.isArray(parentId[0])) {\r\n        // Array of array => data\r\n        arp = parentId;\r\n      } else if ($__default['default'].isString(parentId[0])) {\r\n        // Array of string => Parent IDs\r\n        for (var i = 0, len = parentId.length; i < len; i++) {\r\n          arp.push(getOptionValues(parentId[i], fo));\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!isAutoSuggest(obj)) // Do not clear Auto-Suggest\r\n      clearOptions(obj);\r\n\r\n    var addOpt = function addOpt(results) {\r\n      var name = getId(obj);\r\n      results.forEach(function (result) {\r\n        var args = {\r\n          \"data\": result,\r\n          \"parents\": arp,\r\n          \"valid\": true,\r\n          \"name\": name,\r\n          \"form\": fo\r\n        };\r\n        $document.trigger(\"addoption\", [args]);\r\n        if (args.valid) newOption(obj, result, fo);\r\n      });\r\n      if (obj.list) obj.render();\r\n      selectOption(obj, ar);\r\n\r\n      if (change !== false) {\r\n        if (!obj.options && obj.length) $obj.first().triggerHandler(\"click\");else $obj.first().trigger(\"change\");\r\n      }\r\n    };\r\n\r\n    if ($__default['default'].isUndefined(async)) // Async not specified, use default\r\n      async = list.ajax;\r\n\r\n    var _updateSibling = function _updateSibling() {\r\n      // Update the y_* element\r\n      if (/(s(ea)?rch|summary|crosstab)$/.test(fo.id) && prefix == \"x\") {\r\n        // Search form\r\n        args[0] = id.replace(/^x_/, \"y_\");\r\n        updateOptions.apply(self, args); // args[0] is string, use updateOptions()\r\n      }\r\n    };\r\n\r\n    if (!$__default['default'].isBoolean(async) || Array.isArray(list.lookupOptions) && list.lookupOptions.length > 0) {\r\n      // Non-Ajax or Options loaded\r\n      var ds = list.lookupOptions;\r\n      addOpt(ds);\r\n\r\n      _updateSibling();\r\n\r\n      return ds;\r\n    } else {\r\n      // Ajax\r\n      var name = getId(obj),\r\n          data = Object.assign({\r\n        page: list.page,\r\n        field: list.field,\r\n        ajax: \"updateoption\",\r\n        language: ew.LANGUAGE_ID,\r\n        name: name // Name of the target element\r\n\r\n      }, getUserParams(\"#p_\" + id, fo)); // Add user parameters\r\n\r\n      if (isAutoSuggest(obj) && self.htmlForm) // Auto-Suggest (init form or auto-fill)\r\n        data[\"v0\"] = ar[0] || random(); // Filter by the current value\r\n      else if (obj.options && ![\"select-one\", \"select-multiple\"].includes(obj.type) || isModalLookup(obj)) // Lookup\r\n          data[\"v0\"] = ar[0] ? obj.multiple ? ar.join(ew.MULTIPLE_OPTION_SEPARATOR) : ar[0] : random(); // Filter by the current value\r\n\r\n      for (var i = 0, cnt = arp.length; i < cnt; i++) {\r\n        // Filter by parent fields\r\n        data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n      }\r\n\r\n      return $__default['default'].ajax(getApiUrl(ew.API_LOOKUP_ACTION), {\r\n        \"type\": \"POST\",\r\n        \"dataType\": \"json\",\r\n        \"data\": data,\r\n        \"async\": async\r\n      }).done(function (result) {\r\n        var ds = result.records || [];\r\n        addOpt(ds);\r\n\r\n        _updateSibling();\r\n\r\n        $obj.first().trigger(\"updated\", [Object.assign({}, result, {\r\n          target: obj\r\n        })]); // Object \"updatedone\" event fired after the object is updated\r\n\r\n        return ds;\r\n      }).always(function () {\r\n        return $obj.data(\"updating\", false);\r\n      });\r\n    }\r\n  } // Get user parameters from id\r\n\r\n  function getUserParams(id, root) {\r\n    var id = id.replace(/\\[\\]$/, \"\"),\r\n        o = {};\r\n    var root = !$__default['default'].isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    var $els = root ? $__default['default'](root).find(id) : $__default['default'](id);\r\n    var val = $els.val();\r\n\r\n    if (val) {\r\n      var params = new URLSearchParams(val);\r\n      params.forEach(function (value, key) {\r\n        o[key] = value;\r\n      });\r\n    }\r\n\r\n    return o;\r\n  } // Apply client side template to a DIV\r\n\r\n  function applyTemplate(divId, tmplId, classId, exportType, data) {\r\n    // Note: classId = fileName\r\n    var args = {\r\n      \"data\": data || {},\r\n      \"id\": divId,\r\n      \"template\": tmplId,\r\n      \"class\": classId,\r\n      \"export\": exportType,\r\n      \"enabled\": true\r\n    };\r\n    $document.trigger(\"rendertemplate\", [args]);\r\n\r\n    if (args.enabled) {\r\n      if (document.body.replaceWith) {\r\n        var _document$getElementB;\r\n\r\n        // Not IE\r\n        var template = (_document$getElementB = document.getElementById(tmplId)) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.content;\r\n        if (!template) return;\r\n        template.querySelectorAll(\".ew-slot\").forEach(function (el) {\r\n          var subtmpl = document.getElementById(el.name || el.id);\r\n\r\n          if (subtmpl && subtmpl.content) {\r\n            if (el.dataset.rowspan > 1) Array.prototype.slice.call(subtmpl.content.childNodes).forEach(function (node) {\r\n              return node.rowSpan = el.dataset.rowspan;\r\n            });\r\n            el.replaceWith(subtmpl.content);\r\n          } else {\r\n            el.remove();\r\n          }\r\n        });\r\n\r\n        if ($__default['default'].views) {\r\n          var textContent = template.textContent,\r\n              hasTag = textContent.includes(\"{{\") && textContent.includes(\"}}\");\r\n\r\n          if (!hasTag) {\r\n            var selector = ew.jsRenderAttributes.map(function (attr) {\r\n              return \"[\" + attr + \"*='{{'][\" + attr + \"*='}}']\";\r\n            }).join(\",\");\r\n            hasTag = template.querySelector(selector);\r\n          }\r\n\r\n          if (hasTag) {\r\n            // Includes JsRender template\r\n            var scripts = Array.prototype.slice.call(template.querySelectorAll(\"script\")); // Extract scripts\r\n\r\n            scripts.forEach(function (item) {\r\n              return item.remove();\r\n            });\r\n            var div = document.createElement(\"div\");\r\n            div.appendChild(template);\r\n            var html = div.innerHTML,\r\n                tmpl = $__default['default'].templates(html);\r\n            document.getElementById(divId).innerHTML = tmpl.render(args.data, ew.jsRenderHelpers);\r\n            scripts.forEach(function (item) {\r\n              return document.body.appendChild(item);\r\n            }); // Add scripts\r\n          } else {\r\n            document.getElementById(divId).appendChild(template);\r\n          }\r\n        } else {\r\n          document.getElementById(divId).appendChild(template);\r\n        }\r\n      } else {\r\n        // IE\r\n        _alert(ew.language.phrase(\"UnsupportedBrowser\") || \"Your browser is not supported by this page.\");\r\n      }\r\n    }\r\n\r\n    if (exportType && exportType != \"print\") {\r\n      // Export custom\r\n      $__default['default'](function () {\r\n        var $meta = $__default['default'](\"meta[http-equiv='Content-Type']\"),\r\n            html = \"<html><head>\",\r\n            $div = $__default['default'](\"#\" + divId);\r\n        if ($div.children(0).is(\"div[id^=ct_]\")) // Remove first div tag\r\n          $div = $div.children(0);\r\n        if ($meta[0]) html += \"<meta http-equiv='Content-Type' content='\" + $meta.attr(\"content\") + \"'>\";\r\n\r\n        if (exportType == \"pdf\") {\r\n          html += \"<link rel='stylesheet' href='\" + ew.PDF_STYLESHEET_FILENAME + \"'>\";\r\n        } else {\r\n          html += \"<style>\" + $__default['default'].ajax({\r\n            async: false,\r\n            type: \"GET\",\r\n            url: ew.PROJECT_STYLESHEET_FILENAME\r\n          }).responseText + \"</style>\";\r\n        }\r\n\r\n        html += \"</\" + \"head><body>\";\r\n        $__default['default'](\".ew-chart-top\").each(function () {\r\n          html += $__default['default'](this).html();\r\n        });\r\n        html += $div.html();\r\n        $__default['default'](\".ew-chart-bottom\").each(function () {\r\n          html += $__default['default'](this).html();\r\n        });\r\n        html += \"</body></html>\";\r\n        var url = currentPage(),\r\n            data = {\r\n          \"customexport\": exportType,\r\n          \"data\": html,\r\n          \"filename\": args.class\r\n        };\r\n        data[ew.TOKEN_NAME] = ew.ANTIFORGERY_TOKEN;\r\n\r\n        if (exportType == \"email\") {\r\n          var str = currentUrl.searchParams.toString() + \"&\" + $__default['default'].param(data); // Add data\r\n\r\n          $__default['default'].post(url, str, function (result) {\r\n            showMessage(result);\r\n          });\r\n        } else {\r\n          fileDownload(url, data);\r\n        }\r\n\r\n        window.parent.jQuery(\"body\").css(\"cursor\", \"default\"); // Use window.parent in case in iframe\r\n      });\r\n    }\r\n  } // Toggle group\r\n\r\n  function toggleGroup(el) {\r\n    var $el = $__default['default'](el),\r\n        $tr = $el.closest(\"tr\"),\r\n        selector = \"tr\",\r\n        level;\r\n\r\n    for (var i = 1; i <= 6; i++) {\r\n      var idx = i == 1 ? \"\" : \"-\" + i;\r\n      var data = $tr.data(\"group\" + idx);\r\n\r\n      if ($__default['default'].isValue(data)) {\r\n        level = i;\r\n        if (data != \"\") selector += \"[data-group\" + idx + \"='\" + String(data).replace(/'/g, \"\\\\'\") + \"']\";\r\n      }\r\n    }\r\n\r\n    if ($el.hasClass(\"icon-collapse\")) {\r\n      // Hide\r\n      $__default['default'](selector).slice(1).addClass(\"ew-rpt-grp-hide-\" + level);\r\n      $el.toggleClass(\"icon-expand icon-collapse\");\r\n    } else {\r\n      $__default['default'](selector).slice(1).removeClass(\"ew-rpt-grp-hide-\" + level);\r\n      $el.toggleClass(\"icon-expand icon-collapse\");\r\n    }\r\n  } // Check if boolean value is true\r\n\r\n  function convertToBool(value) {\r\n    return value && [\"1\", \"y\", \"t\", \"true\"].includes(value.toLowerCase());\r\n  } // Check if element value changed\r\n\r\n  function valueChanged(fobj, infix, fld, bool) {\r\n    var nelm = getElements(\"x\" + infix + \"_\" + fld, fobj);\r\n    var oelm = getElement(\"o\" + infix + \"_\" + fld, fobj); // Hidden element\r\n\r\n    var fnelm = getElement(\"fn_x\" + infix + \"_\" + fld, fobj); // Hidden element\r\n\r\n    if ((nelm === null || nelm === void 0 ? void 0 : nelm.type) == \"hidden\" && !oelm) // For example, detail key\r\n      return false;\r\n    if (!oelm && (!nelm || Array.isArray(nelm) && nelm.length == 0)) return false;\r\n\r\n    var getValue = function getValue(obj) {\r\n      return getOptionValues(obj).join();\r\n    };\r\n\r\n    if (oelm && nelm) {\r\n      if (bool) {\r\n        if (convertToBool(getValue(oelm)) === convertToBool(getValue(nelm))) return false;\r\n      } else {\r\n        var oldvalue = getValue(oelm);\r\n        var newvalue = fnelm ? getValue(fnelm) : getValue(nelm);\r\n        if (oldvalue == newvalue) return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  } // Set language\r\n\r\n  function setLanguage(el) {\r\n    var $el = $__default['default'](el),\r\n        val = $el.val() || $el.data(\"language\");\r\n    if (!val) return;\r\n    currentUrl.searchParams.set(\"language\", val);\r\n    window.location = sanitizeUrl(currentUrl.toString());\r\n  }\r\n  /**\r\n   * Submit action\r\n   *\r\n   * @param {Event} e\r\n   * @param {Object} args - Arguments\r\n   * @param {HTMLElement} args.f - HTML form (default is the form of the source element)\r\n   * @param {string} args.url - URL to which the request is sent (default is current page)\r\n   * @param {Object} args.key - Key as object (for single record only)\r\n   * @param {string} args.msg - Confirm message\r\n   * @param {string} args.action - Custom action name\r\n   * @param {string} args.select - \"single\"|\"s\" (single record) or \"multiple\"|\"m\" (multiple records, default)\r\n   * @param {string} args.method - \"ajax\"|\"a\" (Ajax by HTTP POST) or \"post\"|\"p\" (HTTP POST, default)\r\n   * @param {Object} args.data - Object of user data that is sent to the server\r\n   * @param {string|callback|Object} success - Function to be called if the request succeeds, or settings for jQuery.ajax() (for Ajax only)\r\n   * @returns\r\n   */\r\n\r\n  function submitAction(e, args) {\r\n    var el = e.target || e.srcElement,\r\n        $el = $__default['default'](el),\r\n        f = args.f || $el.closest(\"form\")[0] || currentForm,\r\n        $f = $__default['default'](f),\r\n        key = args.key,\r\n        action = args.action,\r\n        url = args.url || currentPage(),\r\n        msg = args.msg,\r\n        data = args.data,\r\n        success = args.success,\r\n        isPost = !args.method || sameText(args.method[0], \"p\"),\r\n        isMultiple = !args.select && !args.key || args.select && sameText(args.select[0], \"m\");\r\n    if (isMultiple && !$f[0]) return false;\r\n\r\n    if (isMultiple && !keySelected($f[0])) {\r\n      _prompt(\"<p class=\\\"text-danger\\\">\" + ew.language.phrase(\"NoRecordSelected\") + \"</p>\");\r\n\r\n      return false;\r\n    }\r\n\r\n    var _success = function _success(result) {\r\n      showMessage(result);\r\n    };\r\n\r\n    var _submit = function _submit() {\r\n      if (isPost) {\r\n        // Post back\r\n        if (action) // Action\r\n          $__default['default'](\"<input>\").attr({\r\n            type: \"hidden\",\r\n            name: \"useraction\",\r\n            value: action\r\n          }).appendTo($f);\r\n\r\n        if ($__default['default'].isObject(data)) {\r\n          // User data\r\n          for (var k in data) {\r\n            var $input = $f.find(\"input[type=hidden][name='\" + k + \"']\");\r\n            if ($input[0]) $input.val(data[k]);else $__default['default'](\"<input>\").attr({\r\n              type: \"hidden\",\r\n              name: k,\r\n              value: data[k]\r\n            }).appendTo($f);\r\n          }\r\n        }\r\n\r\n        if (!isMultiple && $__default['default'].isObject(key)) {\r\n          // Key\r\n          for (var k in key) {\r\n            $__default['default'](\"<input>\").attr({\r\n              type: \"hidden\",\r\n              name: k,\r\n              value: key[k]\r\n            }).appendTo($f);\r\n          }\r\n        }\r\n\r\n        $f.prop(\"action\", url).trigger(\"submit\"); // if (action) // Action\r\n        //     $f.find(\"input[type=hidden][name=useraction]\").remove(); // Remove the \"useraction\" element\r\n      } else {\r\n        // Ajax\r\n        data = $__default['default'].isObject(data) ? $__default['default'].param(data) : $__default['default'].isString(data) ? data : \"\"; // User data\r\n\r\n        if (action) data += \"&useraction=\" + action + \"&ajax=\" + action; // Action\r\n\r\n        if (isMultiple) // Multiple records\r\n          data += \"&\" + $f.find(\"input[name='key_m[]']:checked\").serialize(); // Keys\r\n        else if (key) // Single record\r\n            data += \"&\" + ($__default['default'].isObject(key) ? $__default['default'].param(key) : key); // Key\r\n\r\n        if (success && $__default['default'].isString(success)) success = window[success];\r\n\r\n        if (isFunction(success)) {\r\n          $__default['default'].post(url, data, success);\r\n        } else if ($__default['default'].isObject(success)) {\r\n          // \"success\" is Ajax settings\r\n          success.data = data;\r\n          success.method = success.method || \"POST\";\r\n          success.success = success.success || _success;\r\n          $__default['default'].ajax(url, success);\r\n        } else {\r\n          $__default['default'].post(url, data, _success);\r\n        }\r\n      }\r\n    };\r\n\r\n    if (msg) {\r\n      _prompt(msg, function (result) {\r\n        if (result) _submit();\r\n      });\r\n    } else {\r\n      _submit();\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Export with selected records and/or Custom Template\r\n   *\r\n   * @param {string} f - Form ID\r\n   * @param {string} url - Form action\r\n   * @param {string} type - Export type\r\n   * @param {boolean} custom - Using Custom Template\r\n   * @param {boolean} sel - Selected records only\r\n   * @param {Object} fobj - email form object\r\n   * @returns false\r\n   */\r\n\r\n  function _export(f, url, type, custom, sel, fobj) {\r\n    if (!f) return false;\r\n    var $f = $__default['default'](f),\r\n        target = $f.attr(\"target\"),\r\n        action = $f.attr(\"action\"),\r\n        cb = sel && $f.find(\"input[type=checkbox][name='key_m[]']\")[0];\r\n\r\n    if (cb && !keySelected(f)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    if (custom) {\r\n      // Use Custom Template\r\n      $__default['default'](\"iframe.ew-export\").remove();\r\n      if (type == \"email\") url += (\"&\" + $__default['default'](fobj).serialize()).replace(/&export=email/i, \"\"); // Remove duplicate export=email\r\n\r\n      if (cb) {\r\n        $__default['default'](\"<iframe>\").attr(\"name\", \"ew-export-frame\").addClass(\"ew-export d-none\").appendTo($body);\r\n\r\n        try {\r\n          $f.append($__default['default'](\"<input type='hidden'>\").attr({\r\n            name: \"custom\",\r\n            value: \"1\"\r\n          })).attr({\r\n            \"action\": url,\r\n            \"target\": \"ew-export-frame\"\r\n          }).find(\"input[name=exporttype]\").val(type).end().trigger(\"submit\");\r\n        } finally {\r\n          // Reset\r\n          $f.attr({\r\n            \"target\": target || \"\",\r\n            \"action\": action\r\n          }).find(\"input[name=custom]\").remove();\r\n        }\r\n      } else {\r\n        $__default['default'](\"<iframe>\").attr({\r\n          name: \"ew-export-frame\",\r\n          src: url\r\n        }).addClass(\"ew-export d-none\").appendTo($body);\r\n      }\r\n    } else {\r\n      // No Custom Template\r\n      $f.find(\"input[name=exporttype]\").val(type);\r\n      if ([\"xml\", \"print\"].includes(type)) $f.trigger(\"submit\"); // Submit the form directly\r\n      else fileDownload(action, $f.serialize());\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Remove spaces\r\n   * @param {string} value\r\n   * @returns {string}\r\n   */\r\n\r\n  function removeSpaces(value) {\r\n    return /^(<(p|br)\\/?>(&nbsp;)?(<\\/p>)?)?$/i.test(value.replace(/\\s/g, \"\")) ? \"\" : value;\r\n  }\r\n  /**\r\n   * Check if hidden text area (HTML editor)\r\n   * @param {HTMLElement|jQuery} el HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isHiddenTextArea(el) {\r\n    var $el = $__default['default'](el);\r\n    return $el.is(\":hidden\") && $el.data(\"editor\");\r\n  }\r\n  /**\r\n   * Check if modal lookup\r\n   * @param {HTMLElement|jQuery} el HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isModalLookup(el) {\r\n    var $el = $__default['default'](el);\r\n    return $el.is(\":hidden\") && $el.data(\"lookup\");\r\n  }\r\n  /**\r\n   * Check if hidden textbox (Auto-Suggest)\r\n   * @param {HTMLElement|jQuery} el HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isAutoSuggest(el) {\r\n    var $el = $__default['default'](el);\r\n    return $el.is(\":hidden\") && $el.data(\"autosuggest\");\r\n  }\r\n  /**\r\n   * Alert\r\n   *\r\n   * @param {string} msg - Message\r\n   * @param {callback} cb - Callback function\r\n   * @param {string} type - CSS class (see https://getbootstrap.com/docs/4.5/utilities/colors/#color)\r\n   */\r\n\r\n  function _alert(msg, cb, type) {\r\n    return Swal.fire(_objectSpread$2(_objectSpread$2({}, ew.sweetAlertSettings), {}, {\r\n      html: '<p class=\"text-' + (type || 'danger') + '\">' + msg + '</p>',\r\n      confirmButtonText: ew.language.phrase(\"OKBtn\")\r\n    })).then(function (result) {\r\n      if (isFunction(cb)) cb(result.value);\r\n    });\r\n  }\r\n  /**\r\n   * Clear error message\r\n   * @param {HTMLElement|HTMLElement[]|jQuery} el HTML element(s) or jQuery\r\n   */\r\n\r\n  function clearError(el) {\r\n    if (el.jquery) {\r\n      // el is jQuery object\r\n      var typ = el.attr(\"type\");\r\n      el = typ == \"checkbox\" || typ == \"radio\" ? el.get() : el[0];\r\n    }\r\n\r\n    $__default['default'](el).closest(\"[id^=el_], .form-group\").find(\".invalid-feedback\").html(\"\");\r\n  }\r\n  /**\r\n   * Show error message\r\n   * @param {Form} frm Form object\r\n   * @param {HTMLElement|HTMLElement[]|jQuery} el HTML element(s) or jQuery\r\n   * @param {string} msg Error message\r\n   * @param {boolean} focus Set focus\r\n   */\r\n\r\n  function onError(frm, el, msg, focus) {\r\n    if (el.jquery) {\r\n      // el is jQuery object\r\n      var typ = el.attr(\"type\");\r\n      el = typ == \"checkbox\" || typ == \"radio\" ? el.get() : el[0];\r\n    } else if (el instanceof Field) {\r\n      // el is Field object\r\n      el = el.element;\r\n    }\r\n\r\n    $__default['default'](el).closest(\"[id^=el_], .form-group\").find(\".invalid-feedback\").append(\"<p>\" + msg + \"</p>\");\r\n    if (focus) setFocus(el);\r\n    frm === null || frm === void 0 ? void 0 : frm.makeVisible(el);\r\n    return false;\r\n  }\r\n  /**\r\n   * Set focus\r\n   * @param {HTMLElement|HTMLElement[]} obj HTML element(s)\r\n   */\r\n\r\n  function setFocus(obj) {\r\n    if (!obj) return;\r\n    var $obj = $__default['default'](obj);\r\n    if (isHidden($obj)) return;\r\n\r\n    if (isHiddenTextArea(obj)) {\r\n      // HTML editor\r\n      return $obj.data(\"editor\").focus();\r\n    } else if (isModalLookup(obj)) {\r\n      // Modal lookup\r\n      return $obj.parent().find(\".ew-lookup-text\").trigger(\"focus\");\r\n    } else if (!obj.options && obj.length) {\r\n      // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    } else if (isAutoSuggest(obj)) {\r\n      // Auto-Suggest\r\n      obj = obj.input;\r\n    }\r\n\r\n    $__default['default'](obj).trigger(\"focus\");\r\n  }\r\n  /**\r\n   * Set invalid\r\n   * @param {HTMLElement|HTMLElement[]} obj HTML element(s)\r\n   */\r\n\r\n  function setInvalid(obj) {\r\n    if (!obj) return;\r\n    var $obj = $__default['default'](obj);\r\n    if (isHidden($obj)) return;\r\n    if (!obj.options && obj.length) // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    var $p = $obj.closest(\".form-group, [id^='el']\");\r\n\r\n    if (isAutoSuggest(obj)) {\r\n      $p.find(\".ew-auto-suggest\").addClass(\"is-invalid\").one(\"click keydown\", function () {\r\n        $p.find(\".is-invalid\").removeClass(\"is-invalid\");\r\n      });\r\n    } else if (isModalLookup(obj)) {\r\n      $p.find(\".input-group\").addClass(\"is-invalid\").one(\"click keydown\", function () {\r\n        $p.find(\".is-invalid\").removeClass(\"is-invalid\");\r\n      });\r\n    } else {\r\n      if (obj.type == \"checkbox\" || obj.type == \"radio\") {\r\n        $obj.addClass(\"is-invalid\").one(\"click keydown\", function () {\r\n          $p.find(\".is-invalid\").removeClass(\"is-invalid\");\r\n        });\r\n      } else {\r\n        $obj.addClass(\"is-invalid\").parent().one(\"click keydown\", function () {\r\n          $p.find(\".is-invalid\").removeClass(\"is-invalid\");\r\n        });\r\n        $obj.closest(\".input-group\").addClass(\"is-invalid\");\r\n      }\r\n    }\r\n  } // Check if object has value\r\n\r\n  function hasValue(obj) {\r\n    return getOptionValues(obj).join(\"\") != \"\";\r\n  } // Check if object value is a masked password\r\n\r\n  function isMaskedPassword(obj) {\r\n    var val = $__default['default'](obj).val();\r\n    return val && val.match(/^\\*+$/);\r\n  } // Get Ctrl key for multiple column sort\r\n\r\n  function sort(e, url, type) {\r\n    if (e.shiftKey && !e.ctrlKey) url = url.split(\"?\")[0] + \"?cmd=resetsort\";else if (type == 2 && e.ctrlKey) url += \"&ctrl=1\";\r\n    window.location = sanitizeUrl(url);\r\n    return true;\r\n  } // Confirm Delete Message\r\n\r\n  function confirmDelete(el) {\r\n    clickDelete(el);\r\n\r\n    _prompt(ew.language.phrase(\"DeleteConfirmMsg\"), function (result) {\r\n      result && el.href ? window.location = sanitizeUrl(el.href) : clearDelete(el);\r\n    });\r\n\r\n    return false;\r\n  } // Check if any key selected // PHP\r\n\r\n  function keySelected(f) {\r\n    return $__default['default'](f).find(\"input[type=checkbox][name='key_m[]']:checked\", f).length > 0;\r\n  } // Select all key\r\n\r\n  function selectAllKey(cb) {\r\n    selectAll(cb);\r\n    var tbl = $__default['default'](cb).closest(\".ew-table\")[0];\r\n    if (!tbl) return;\r\n    $__default['default'](tbl.tBodies).each(function () {\r\n      $__default['default'](this.rows).each(function (i, r) {\r\n        var $r = $__default['default'](r);\r\n\r\n        if ($r.is(\":not(.ew-template):not(.ew-table-preview-row)\")) {\r\n          $r.data({\r\n            selected: cb.checked,\r\n            checked: cb.checked\r\n          });\r\n          setColor(i, r);\r\n        }\r\n      });\r\n    });\r\n  } // Select all related checkboxes\r\n\r\n  function selectAll(cb) {\r\n    if (!cb || !cb.form) return;\r\n    $__default['default'](cb.form.elements).filter(\"input[type=checkbox][name^=\" + cb.name + \"_], [type=checkbox][name=\" + cb.name + \"]\").not(cb).not(\":disabled\").prop(\"checked\", cb.checked);\r\n  } // Update selected checkbox\r\n\r\n  function updateSelected(f) {\r\n    return $__default['default'](f).find(\"input[type=checkbox][name^=u_]:checked,input:hidden[name^=u_][value=1]\").length > 0;\r\n  } // Set row color\r\n\r\n  function setColor(index, row) {\r\n    var $row = $__default['default'](row),\r\n        $tbl = $row.closest(\".ew-table\");\r\n    if (!$tbl[0]) return;\r\n\r\n    if ($row.data(\"selected\")) {\r\n      $row.removeClass($tbl.data(\"rowhighlightclass\") || \"ew-table-highlight-row\").removeClass($tbl.data(\"roweditclass\") || \"ew-table-edit-row\").addClass($tbl.data(\"rowselectclass\") || \"ew-table-select-row\");\r\n    } else if ([ew.ROWTYPE_ADD, ew.ROWTYPE_EDIT].includes($row.data(\"rowtype\"))) {\r\n      $row.removeClass($tbl.data(\"rowselectclass\") || \"ew-table-select-row\").removeClass($tbl.data(\"rowhighlightclass\") || \"ew-table-highlight-row\").addClass($tbl.data(\"roweditclass\") || \"ew-table-edit-row\");\r\n    } else {\r\n      $row.removeClass($tbl.data(\"rowselectclass\") || \"ew-table-select-row\").removeClass($tbl.data(\"roweditclass\") || \"ew-table-edit-row\").removeClass($tbl.data(\"rowhighlightclass\") || \"ew-table-highlight-row\");\r\n    }\r\n  } // Clear selected rows color\r\n\r\n  function clearSelected(tbl) {\r\n    $__default['default'](tbl.rows).each(function (i, r) {\r\n      var $r = $__default['default'](r);\r\n\r\n      if (!$r.data(\"checked\") && $r.data(\"selected\")) {\r\n        $r.data(\"selected\", false);\r\n        setColor(i, r);\r\n      }\r\n    });\r\n  } // Clear all row delete status\r\n\r\n  function clearDelete(el) {\r\n    var $el = $__default['default'](el),\r\n        tbl = $el.closest(\".ew-table\")[0];\r\n    if (!tbl) return;\r\n    var $tr = $el.closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().each(function (i, r) {\r\n      var $r = $__default['default'](r);\r\n      $r.data(\"selected\", $r.data(\"checked\"));\r\n    });\r\n  } // Click single delete link\r\n\r\n  function clickDelete(el) {\r\n    var $el = $__default['default'](el),\r\n        tbl = $el.closest(\".ew-table\")[0];\r\n    if (!tbl) return;\r\n    clearSelected(tbl);\r\n    var $tr = $el.closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().each(function (i, r) {\r\n      $__default['default'](r).data(\"selected\", true);\r\n      setColor(i, r);\r\n    });\r\n  } // Click multiple checkbox\r\n\r\n  function clickMultiCheckbox(e) {\r\n    var cb = e.target || e.srcElement,\r\n        $cb = $__default['default'](cb),\r\n        tbl = $cb.closest(\".ew-table\")[0];\r\n    if (!tbl) return;\r\n    clearSelected(tbl);\r\n    var $tr = $cb.closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().each(function (i, r) {\r\n      $__default['default'](r).data(\"checked\", cb.checked).data(\"selected\", cb.checked).find(\"input[type=checkbox][name='key_m[]']\").each(function () {\r\n        if (this != cb) this.checked = cb.checked;\r\n      });\r\n      setColor(i, r);\r\n    });\r\n    e.stopPropagation();\r\n  } // Setup table\r\n\r\n  function setupTable(index, tbl, force) {\r\n    var $tbl = $__default['default'](tbl),\r\n        $rows = $__default['default'](tbl.rows);\r\n    if (!tbl || !tbl.rows || !force && $tbl.data(\"isset\") || tbl.tBodies.length == 0) return; // Set mouse over color\r\n\r\n    var mouseOver = function mouseOver(e) {\r\n      var $this = $__default['default'](this);\r\n\r\n      if (!$this.data(\"selected\") && ![ew.ROWTYPE_ADD, ew.ROWTYPE_EDIT].includes($this.data(\"rowtype\"))) {\r\n        var $tbl = $this.closest(\".ew-table\");\r\n        if (!$tbl[0]) return;\r\n        $this.siblings(\"[data-rowindex='\" + $this.data(\"rowindex\") + \"']\").addBack().each(function (i, r) {\r\n          $__default['default'](r).addClass($tbl.data(\"rowhighlightclass\") || \"ew-table-highlight-row\");\r\n        });\r\n      }\r\n    }; // Set mouse out color\r\n\r\n    var mouseOut = function mouseOut(e) {\r\n      var $this = $__default['default'](this);\r\n      if (!$this.data(\"selected\") && ![ew.ROWTYPE_ADD, ew.ROWTYPE_EDIT].includes($this.data(\"rowtype\"))) $this.siblings(\"[data-rowindex='\" + $this.data(\"rowindex\") + \"']\").addBack().each(setColor);\r\n    }; // Set selected row color\r\n\r\n    var click = function click(e) {\r\n      var $this = $__default['default'](this),\r\n          tbl = $this.closest(\".ew-table\")[0],\r\n          $target = $__default['default'](e.target);\r\n      if (!tbl || $target.hasClass(\"btn\") || $target.hasClass(\"ew-preview-row-btn\") || $target.is(\":input\")) return;\r\n\r\n      if (!$this.data(\"checked\")) {\r\n        var selected = $this.data(\"selected\");\r\n        clearSelected(tbl); // Clear all other selected rows\r\n\r\n        $this.siblings(\"[data-rowindex='\" + $this.data(\"rowindex\") + \"']\").addBack().each(function (i, r) {\r\n          $__default['default'](r).data(\"selected\", !selected); // Toggle\r\n\r\n          setColor(i, r);\r\n        });\r\n      }\r\n    };\r\n\r\n    var n = $rows.filter(\"[data-rowindex=1]\").length || $rows.filter(\"[data-rowindex=0]\").length || 1; // Alternate color every n rows\r\n\r\n    var rows = $rows.filter(\":not(.ew-template)\").each(function () {\r\n      $__default['default'](this.cells).removeClass(\"ew-table-last-row\").last().addClass(\"ew-table-last-col\"); // Cell of last column\r\n    }).get();\r\n    var div = $tbl.parentsUntil(\".ew-grid\", \".\" + ew.RESPONSIVE_TABLE_CLASS)[0];\r\n\r\n    if (rows.length) {\r\n      for (var i = 1; i <= n; i++) {\r\n        var r = rows[rows.length - i]; // Last rows\r\n\r\n        $__default['default'](r.cells).each(function () {\r\n          if (this.rowSpan == i) // Cell of last row\r\n            $__default['default'](this).addClass(\"ew-table-last-row\").toggleClass(\"ew-table-border-bottom\", !!div && div.clientHeight > tbl.offsetHeight);\r\n        });\r\n      }\r\n    }\r\n\r\n    var form = $tbl.closest(\"form\")[0];\r\n    var attach = form && $__default['default'](form.elements).filter(\"input#action:not([value^=grid])\").length > 0;\r\n    $__default['default'](tbl.tBodies[tbl.tBodies.length - 1].rows) // Use last TBODY (avoid Opera bug)\r\n    .filter(\":not(.ew-template):not(.ew-table-preview-row)\").each(function (i) {\r\n      var $r = $__default['default'](this);\r\n\r\n      if (attach && !$r.data(\"isset\")) {\r\n        if ([ew.ROWTYPE_ADD, ew.ROWTYPE_EDIT].includes($r.data(\"rowtype\"))) // Add/Edit row\r\n          $r.on(\"mouseover\", function () {\r\n            this.edit = true;\r\n          }).addClass(\"ew-table-edit-row\");\r\n        $r.on(\"mouseover\", mouseOver).on(\"mouseout\", mouseOut).on(\"click\", click);\r\n        $r.data(\"isset\", true);\r\n      }\r\n\r\n      var sw = i % (2 * n) < n;\r\n      $r.toggleClass(\"ew-table-row\", sw).toggleClass(\"ew-table-alt-row\", !sw);\r\n    });\r\n    setupGrid(index, $tbl.closest(\".ew-grid\")[0], force);\r\n    $tbl.data(\"isset\", true);\r\n  } // Setup grid\r\n\r\n  function setupGrid(index, grid, force) {\r\n    var $grid = $__default['default'](grid);\r\n    if (!grid || !force && $grid.data(\"isset\")) return;\r\n    var multi = $grid.find(\"table.ew-multi-column-table\").length,\r\n        rowcnt;\r\n\r\n    if (multi) {\r\n      rowcnt = $grid.find(\"td[data-rowindex]\").length;\r\n    } else {\r\n      rowcnt = $grid.find(\"table.ew-table > tbody\").first().children(\"tr:not(.ew-table-preview-row, .ew-template)\").length;\r\n    }\r\n\r\n    if (rowcnt == 0 && !$grid.find(\".ew-grid-upper-panel, .ew-grid-lower-panel\")[0]) $grid.hide(); // if (!$grid.find(\".ew-grid-upper-panel:visible\")[0])\r\n    // \t$grid.css({\"border-top-left-radius\": 0, \"border-top-right-radius\": 0});\r\n    // if (!$grid.find(\".ew-grid-lower-panel:visible\")[0])\r\n    // \t$grid.css({\"border-bottom-left-radius\": 0, \"border-bottom-right-radius\": 0});\r\n\r\n    if ($grid.find(\".ew-grid-middle-panel:visible\").hasClass(ew.RESPONSIVE_TABLE_CLASS) && $grid.width() > $__default['default'](\".content\").width()) {\r\n      $grid.addClass(\"d-flex\");\r\n      $grid.closest(\".ew-detail-pages\").addClass(\"d-block\");\r\n      $grid.closest(\".ew-form\").addClass(\"w-100\");\r\n      if (ew.USE_OVERLAY_SCROLLBARS) $grid.find(\".ew-grid-middle-panel:not(.ew-preview-middle-panel)\").overlayScrollbars(ew.overlayScrollbarsOptions);\r\n    }\r\n\r\n    $grid.data(\"isset\", true);\r\n  } // Add a row to grid\r\n\r\n  function addGridRow(el) {\r\n    var $grid = $__default['default'](el).closest(\".ew-grid\"),\r\n        $tbl = $grid.find(\"table.ew-table\").last(),\r\n        $p = $tbl.parent(\"div\"),\r\n        $tpl = $tbl.find(\"tr.ew-template\");\r\n    if (!el || !$grid[0] || !$tbl[0] || !$tpl[0]) return false;\r\n    var $lastrow = $__default['default']($tbl[0].rows).last();\r\n    $tbl.find(\"td.ew-table-last-row\").removeClass(\"ew-table-last-row\");\r\n    var $row = $tpl.clone(true, true).removeClass(\"ew-template\");\r\n    var $form = $grid.find(\"div.ew-form[id^=f][id$=grid]\");\r\n    if (!$form[0]) $form = $grid.find(\"form.ew-form[id^=f][id$=list]\");\r\n    var suffix = $form.is(\"div\") ? \"_\" + $form.attr(\"id\") : \"\";\r\n    var $elkeycnt = $form.find(\"#key_count\" + suffix);\r\n    var keycnt = parseInt($elkeycnt.val(), 10) + 1;\r\n    $row.attr({\r\n      \"id\": \"r\" + keycnt + $row.attr(\"id\").substring(2),\r\n      \"data-rowindex\": keycnt\r\n    });\r\n    var $els = $tpl.find(\"script:contains('$rowindex$')\"); // Get scripts with rowindex\r\n\r\n    $row.children(\"td\").each(function () {\r\n      $__default['default'](this).find(\"*\").each(function () {\r\n        $__default['default'].each(this.attributes, function (i, attr) {\r\n          attr.value = attr.value.replace(/\\$rowindex\\$/g, keycnt); // Replace row index\r\n        });\r\n      });\r\n    });\r\n    $row.find(\".ew-icon\").closest(\"a, button\").removeData(\"bs.tooltip\").tooltip({\r\n      container: \"body\",\r\n      placement: \"bottom\",\r\n      trigger: \"hover\",\r\n      sanitizeFn: ew.sanitizeFn\r\n    });\r\n    $elkeycnt.val(keycnt).after($__default['default'](\"<input>\").attr({\r\n      type: \"hidden\",\r\n      id: \"k\" + keycnt + \"_action\" + suffix,\r\n      name: \"k\" + keycnt + \"_action\" + suffix,\r\n      value: \"insert\"\r\n    }));\r\n    $lastrow.after($row);\r\n    $els.each(function () {\r\n      addScript(this.text.replace(/\\$rowindex\\$/g, keycnt));\r\n    });\r\n    var frm = $form.data(\"form\");\r\n\r\n    if (frm) {\r\n      frm.initEditors();\r\n      frm.initUpload();\r\n    }\r\n\r\n    setupTable(-1, $tbl[0], true);\r\n    $p.scrollTop($p[0].scrollHeight);\r\n    return false;\r\n  } // Delete a row from grid\r\n\r\n  function deleteGridRow(el, infix) {\r\n    var $el = $__default['default'](el).tooltip(\"hide\").removeData(\"bs.tooltip\"),\r\n        $grid = $el.closest(\".ew-grid, .ew-multi-column-grid\"),\r\n        $row = $el.closest(\"tr, div[data-rowindex]\"),\r\n        $tbl = $row.closest(\".ew-table\");\r\n    if (!el || !$grid[0] || !$row[0]) return false;\r\n    var rowidx = parseInt($row.data(\"rowindex\"), 10);\r\n    var $form = $grid.find(\"div.ew-form[id^=f][id$=grid]\");\r\n    if (!$form[0]) $form = $grid.find(\"form.ew-form[id^=f][id$=list]\");\r\n    var frm = $form.data(\"form\");\r\n    if (!$form[0] || !frm) return false;\r\n    var suffix = $form.is(\"div\") ? \"_\" + $form.attr(\"id\") : \"\";\r\n    var keycntname = \"#key_count\" + suffix;\r\n\r\n    var _delete = function _delete() {\r\n      $row.remove();\r\n      if ($grid.is(\".ew-grid\")) setupTable(-1, $tbl[0], true);\r\n\r\n      if (rowidx > 0) {\r\n        var $keyact = $form.find(\"#k\" + rowidx + \"_action\" + suffix);\r\n\r\n        if ($keyact[0]) {\r\n          $keyact.val($keyact.val() == \"insert\" ? \"insertdelete\" : \"delete\");\r\n        } else {\r\n          $form.find(keycntname).after($__default['default'](\"<input>\").attr({\r\n            type: \"hidden\",\r\n            id: \"k\" + rowidx + \"_action\" + suffix,\r\n            name: \"k\" + rowidx + \"_action\" + suffix,\r\n            value: \"delete\"\r\n          }));\r\n        }\r\n      }\r\n    };\r\n\r\n    if (isFunction(frm.emptyRow) && frm.emptyRow(infix)) {\r\n      // Empty row\r\n      _delete();\r\n    } else {\r\n      // Confirm\r\n      _prompt(ew.language.phrase(\"DeleteConfirmMsg\"), function (result) {\r\n        if (result) _delete();\r\n      });\r\n    }\r\n\r\n    return false;\r\n  } // HTML encode text\r\n\r\n  function htmlEncode(text) {\r\n    var str = String(text);\r\n    return str.replace(/&/g, '&amp;').replace(/\\\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n  } // Get form element(s) as single element or array of radio/checkbox\r\n\r\n  function getElements(el, root) {\r\n    var selector;\r\n\r\n    if ($__default['default'].isObject(el) && el.dataset) {\r\n      // HTML element (e.g. radio/checkbox)\r\n      selector = \"[data-table='\" + el.dataset.table + \"'][data-field='\" + el.dataset.field + \"']:not([name^=o]):not([name^='x$'])\";\r\n    } else if ($__default['default'].isString(el)) {\r\n      selector = \"[name='\" + el + \"']\";\r\n      var ar = el.split(\" \"); // Check if \"#id name\"\r\n\r\n      if (ar.length == 2) selector = \"[data-table='\" + ar[0] + \"'][data-field='\" + getId(ar[1]) + \"']:not([name^=o]):not([name^='x$'])\"; // Remove []\r\n    }\r\n\r\n    var root = !$__default['default'].isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    selector = \"input\" + selector + \",select\" + selector + \",textarea\" + selector + \",button\" + selector;\r\n    var $els = root ? $__default['default'](root).find(selector) : $__default['default'](selector);\r\n    if ($els.length == 1 && $els.is(\":not([type=checkbox]):not([type=radio])\")) return $els[0];\r\n    return $els.get();\r\n  } // Get first element (not necessarily form element)\r\n\r\n  function getElement(name, root) {\r\n    var root = $__default['default'].isString(root) ? \"#\" + root : root,\r\n        selector = \"#\" + name.replace(/([\\$\\[\\]])/g, \"\\\\$1\") + \",[name='\" + name + \"']\";\r\n    return root ? $__default['default'](root).find(selector)[0] : $__default['default'](selector).first()[0];\r\n  } // Get ancestor by function\r\n\r\n  function getAncestorBy(node, fn) {\r\n    while (node = node.parentNode) {\r\n      if (node && node.nodeType == 1 && (!fn || fn(node))) return node;\r\n    }\r\n\r\n    return null;\r\n  } // Check if an element is hidden\r\n\r\n  function isHidden(el) {\r\n    var $el = $__default['default'](el);\r\n    return $el.css(\"display\") == \"none\" && !$el.closest(\".dropdown-menu\")[0] && !isModalLookup(el) && !isAutoSuggest(el) && !isHiddenTextArea(el) || getAncestorBy(el, function (node) {\r\n      return node.style.display == \"none\" && !node.classList.contains(\"tab-pane\") && !node.classList.contains(\"collapse\");\r\n    }) != null;\r\n  } // Check if same text\r\n\r\n  function sameText(o1, o2) {\r\n    return String(o1).toLowerCase() == String(o2).toLowerCase();\r\n  } // Check if same string\r\n\r\n  function sameString(o1, o2) {\r\n    return String(o1) == String(o2);\r\n  } // Get element value\r\n\r\n  function getValue(el, form) {\r\n    if (!el) return \"\";\r\n    var obj;\r\n\r\n    if ($__default['default'].isString(el)) {\r\n      var _ar = el.split(\" \");\r\n\r\n      if (_ar.length == 2) {\r\n        // Parent field in master table\r\n        obj = getElements(el);\r\n      } else {\r\n        obj = getElements(el, form);\r\n      }\r\n    } else if (el.type == \"radio\" || el.type == \"checkbox\") {\r\n      // Single radio/checkbox\r\n      obj = getElements(el);\r\n    } else {\r\n      obj = el;\r\n    }\r\n\r\n    if (obj.options) {\r\n      // Selection list\r\n      if (obj.list) {\r\n        var val = obj.values;\r\n        return obj.multiple ? val : val[0] || \"\";\r\n      } else {\r\n        var _val = Array.prototype.filter.call(obj.options, function (option) {\r\n          return option.selected && option.value !== \"\";\r\n        }).map(function (option) {\r\n          return option.value;\r\n        });\r\n\r\n        return obj.type == \"select-multiple\" ? _val : _val[0] || \"\";\r\n      }\r\n    } else if ($__default['default'].isNumber(obj.length)) {\r\n      // Radio/Checkbox list, or element not found\r\n      var _val2 = $__default['default'](obj).filter(\":checked\").map(function () {\r\n        return this.value;\r\n      }).get();\r\n\r\n      return obj.length == 1 ? _val2[0] : _val2;\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $__default['default'](obj).data(\"editor\").save();\r\n      return obj.value;\r\n    } else {\r\n      // text/hidden\r\n      var data = $__default['default'](obj).data();\r\n      if (data.lookup && data.multiple) // Modal-Lookup\r\n        return obj.value.split(ew.MULTIPLE_OPTION_SEPARATOR);else return obj.value;\r\n    }\r\n  } // Get existing selected values as an array\r\n\r\n  function getOptionValues(el, form) {\r\n    var obj;\r\n\r\n    if ($__default['default'].isString(el)) {\r\n      var ar = el.split(\" \");\r\n\r\n      if (ar.length == 2) {\r\n        // Parent field in master table\r\n        obj = getElements(el);\r\n      } else {\r\n        obj = getElements(el, form);\r\n      }\r\n    } else if (el.type == \"radio\" || el.type == \"checkbox\") {\r\n      // Single radio/checkbox\r\n      obj = getElements(el);\r\n    } else {\r\n      obj = el;\r\n    }\r\n\r\n    if (obj.options) {\r\n      // Selection list\r\n      if (obj.list) return obj.values;else return Array.prototype.filter.call(obj.options, function (option) {\r\n        return option.selected && option.value !== \"\";\r\n      }).map(function (option) {\r\n        return option.value;\r\n      });\r\n    } else if ($__default['default'].isNumber(obj.length)) {\r\n      // Radio/Checkbox list, or element not found\r\n      return $__default['default'](obj).filter(\":checked\").map(function () {\r\n        return this.value;\r\n      }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $__default['default'](obj).data(\"editor\").save();\r\n      return [obj.value];\r\n    } else {\r\n      // text/hidden\r\n      var data = $__default['default'](obj).data();\r\n      if (data.lookup && data.multiple) // Modal-Lookup\r\n        return obj.value.split(ew.MULTIPLE_OPTION_SEPARATOR);else return [obj.value];\r\n    }\r\n  } // Get existing text of selected values as an array\r\n\r\n  function getOptionTexts(el, form) {\r\n    var obj;\r\n\r\n    if ($__default['default'].isString(el)) {\r\n      var ar = el.split(\" \");\r\n\r\n      if (ar.length == 2) {\r\n        // Parent field in master table\r\n        obj = getElements(el);\r\n      } else {\r\n        obj = getElements(el, form);\r\n      }\r\n    } else {\r\n      obj = el;\r\n    }\r\n\r\n    if (isAutoSuggest(obj)) {\r\n      // AutoSuggest (before obj.options)\r\n      return [obj.input.value];\r\n    } else if (isModalLookup(obj)) {\r\n      // Modal-Lookup (before obj.options)\r\n      var $obj = $__default['default'](obj);\r\n      return $obj.parent().find(\".ew-lookup-text .ew-option\").map(function () {\r\n        return $__default['default'](this).text().trim();\r\n      }).get();\r\n    } else if (obj.options) {\r\n      // Selection list\r\n      return Array.prototype.filter.call(obj.options, function (option) {\r\n        return option.selected && option.value !== \"\";\r\n      }).map(function (option) {\r\n        return option.text;\r\n      });\r\n    } else if ($__default['default'].isNumber(obj.length)) {\r\n      // Radio/Checkbox list, or element not found\r\n      return $__default['default'](obj).filter(\":checked\").map(function () {\r\n        return $__default['default'](this).parent().text();\r\n      }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $__default['default'](obj).data(\"editor\").save();\r\n      return [obj.value];\r\n    } else {\r\n      return [obj.value];\r\n    }\r\n  } // Clear existing options\r\n\r\n  function clearOptions(obj) {\r\n    if (obj.options) {\r\n      // Selection list\r\n      var lo = obj.type == \"select-multiple\" || // multiple\r\n      obj.hasAttribute(\"data-dropdown\") || // dropdown\r\n      convertToBool(obj.getAttribute(\"data-pleaseselect\")) === false || // data-pleaseselect=\"false\"\r\n      obj.length > 0 && obj.options[0].value != \"\" ? // non-empty first element\r\n      0 : 1;\r\n\r\n      if (obj.list) {\r\n        obj.removeAll();\r\n      } else {\r\n        for (var i = obj.length - 1; i >= lo; i--) {\r\n          obj.remove(i);\r\n        }\r\n      }\r\n\r\n      if (isAutoSuggest(obj)) {\r\n        obj.input.value = \"\";\r\n        obj.value = \"\";\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Get the name or id of an element\r\n   *\r\n   * @param {*} el - Element\r\n   * @param {boolean} [remove=true] - Remove square brackets\r\n   * @returns\r\n   */\r\n\r\n  function getId(el, remove) {\r\n    var id = $__default['default'].isString(el) ? el : $__default['default'](el).attr(\"name\") || $__default['default'](el).attr(\"id\"); // Use name first (id may have suffix)\r\n\r\n    return remove !== false ? id.replace(/\\[\\]$/, \"\") : id;\r\n  } // Get display value separator\r\n\r\n  function valueSeparator(index, obj) {\r\n    var sep = $__default['default'](obj).data(\"value-separator\");\r\n    return Array.isArray(sep) ? sep[index - 1] : sep || \", \";\r\n  }\r\n  /**\r\n   * Get display value\r\n   *\r\n   * @param {Object} opt - Option being displayed\r\n   * @param {HTMLElment} obj - HTML element\r\n   * @returns {string} Display value\r\n   */\r\n\r\n  function displayValue(opt, obj) {\r\n    var text = opt.df;\r\n\r\n    for (var i = 2; i <= 4; i++) {\r\n      if (opt[\"df\" + i] && opt[\"df\" + i] != \"\") {\r\n        var sep = valueSeparator(i - 1, obj);\r\n        if ($__default['default'].isUndefined(sep)) break;\r\n        if ($__default['default'].isValue(text)) text += sep;\r\n        text += opt[\"df\" + i];\r\n      }\r\n    }\r\n\r\n    return text;\r\n  }\r\n  /**\r\n   * Get HTML for a single option\r\n   *\r\n   * @param {*} val - Value of the option\r\n   * @returns {string} HTML\r\n   */\r\n\r\n  function optionHtml(val) {\r\n    return ew.OPTION_HTML_TEMPLATE.replace(/\\{value\\}/g, val);\r\n  }\r\n  /**\r\n   * Get HTML for diplaying all options\r\n   *\r\n   * @param {string[]} options - Array of all options (HTML)\r\n   * @param {number} max - Maximum number of options to show\r\n   * @returns {string} HTML\r\n   */\r\n\r\n  function optionsHtml(options, max) {\r\n    if (options.length > (max || ew.MAX_OPTION_COUNT)) {\r\n      // More than max option count\r\n      return ew.language.phrase(\"CountSelected\").replace(\"%s\", options.length);\r\n    } else if (options.length) {\r\n      // Some options\r\n      var html = \"\";\r\n\r\n      for (var i = 0; i < options.length; i++) {\r\n        html += optionHtml(options[i]);\r\n      }\r\n\r\n      return html;\r\n    } else {\r\n      // No options\r\n      return ew.language.phrase(\"PleaseSelect\");\r\n    }\r\n  }\r\n  /**\r\n   * Create new option\r\n   *\r\n   * @param {(HTMLElement|array)} obj - Selection list\r\n   * @param {Object} opt - Object for the new option\r\n   * @param {form} f - form object of obj\r\n   * @returns\r\n   */\r\n\r\n  function newOption(obj, opt, f) {\r\n    var frm = forms.get(f.id),\r\n        id = getId(obj),\r\n        list = frm.getList(id),\r\n        value = opt.lf,\r\n        item = {\r\n      lf: opt.lf,\r\n      df1: opt.df,\r\n      df2: opt.df2,\r\n      df3: opt.df3,\r\n      df4: opt.df4\r\n    },\r\n        text;\r\n\r\n    if (list.template && !isAutoSuggest(obj)) {\r\n      text = list.template.render(item, ew.jsRenderHelpers);\r\n    } else {\r\n      text = displayValue(opt, obj) || value;\r\n    }\r\n\r\n    var args = {\r\n      \"data\": item,\r\n      \"name\": id,\r\n      \"form\": f.$element,\r\n      \"value\": value,\r\n      \"text\": text\r\n    };\r\n\r\n    if (obj.options) {\r\n      // Selection list\r\n      var option;\r\n\r\n      if (obj.list) {\r\n        option = new SelectionListOption(args.value, args.text);\r\n      } else {\r\n        option = document.createElement(\"option\");\r\n        option.value = args.value;\r\n        option.innerHTML = args.text;\r\n      }\r\n\r\n      args = _objectSpread$2(_objectSpread$2({}, args), {}, {\r\n        option: option\r\n      });\r\n      $document.trigger(\"newoption\", [args]); // Fire \"newoption\" event for selection list\r\n\r\n      if (obj.list) {\r\n        obj.add(args.option.value, args.option.text);\r\n      } else {\r\n        obj.add(args.option);\r\n      }\r\n    }\r\n\r\n    return args.text;\r\n  } // Select combobox option\r\n\r\n  function selectOption(obj, values) {\r\n    if (!obj || !values) return;\r\n    var $obj = $__default['default'](obj);\r\n\r\n    if (Array.isArray(values)) {\r\n      if (obj.options) {\r\n        // Selection list\r\n        if (obj.list) {\r\n          obj.value = values;\r\n        } else {\r\n          $obj.val(values);\r\n          if (obj.type == \"select-one\" && obj.selectedIndex == -1) obj.selectedIndex = 0; // Make sure an option is selected (IE)\r\n        }\r\n\r\n        if (isAutoSuggest(obj) && values.length == 1) {\r\n          var opts = obj.options || [];\r\n\r\n          for (var _iterator2 = _createForOfIteratorHelperLoose$3(opts), _step2; !(_step2 = _iterator2()).done;) {\r\n            var opt = _step2.value;\r\n\r\n            if (opt.value == values[0]) {\r\n              obj.value = opt.value;\r\n              obj.input.value = opt.text;\r\n              break;\r\n            }\r\n          }\r\n        } else if (isModalLookup(obj)) {\r\n          var vals = [],\r\n              html = [],\r\n              _opts = obj.options || [];\r\n\r\n          for (var _iterator3 = _createForOfIteratorHelperLoose$3(values), _step3; !(_step3 = _iterator3()).done;) {\r\n            var value = _step3.value;\r\n\r\n            for (var _iterator4 = _createForOfIteratorHelperLoose$3(_opts), _step4; !(_step4 = _iterator4()).done;) {\r\n              var _opt = _step4.value;\r\n\r\n              if (value == _opt.value) {\r\n                vals.push(_opt.value);\r\n                html.push(optionHtml(_opt.text));\r\n                break;\r\n              }\r\n            }\r\n          }\r\n\r\n          $obj.val(vals.join(ew.MULTIPLE_OPTION_SEPARATOR));\r\n          $obj.parent().find(\".ew-lookup-text\").html(optionsHtml(html, $obj.data(\"maxcount\")));\r\n        }\r\n      } else if (obj.type) {\r\n        obj.value = values.join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n      }\r\n    } // Auto-select if only one option\r\n\r\n    function isAutoSelect(el) {\r\n      if (!$__default['default'](el).data(\"autoselect\")) // data-autoselect=\"false\"\r\n        return false;\r\n      var form = getForm(el);\r\n\r\n      if (form) {\r\n        if (/s(ea)?rch$/.test(form.id)) // Search forms\r\n          return false;\r\n        var list = forms.get(form.id).getList(el.id);\r\n        if (list && list.parentFields.length == 0) // No parent fields\r\n          return false;\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    }\r\n\r\n    if (!isAutoSelect(obj)) return;\r\n\r\n    if (obj.options) {\r\n      // Selection List\r\n      if (!obj.list && obj.type == \"select-one\" && obj.options.length == 2 && !obj.options[1].selected) {\r\n        obj.options[1].selected = true;\r\n      } else if (obj.options.length == 1 && !obj.options[0].selected) {\r\n        obj.options[0].selected = true;\r\n      }\r\n\r\n      if (obj.list) obj.render();\r\n\r\n      if (isAutoSuggest(obj)) {\r\n        var _opts2 = obj.options || [];\r\n\r\n        if (_opts2.length == 1) {\r\n          obj.value = _opts2[0].value;\r\n          obj.input.value = _opts2[0].text;\r\n        }\r\n      }\r\n    }\r\n  } // Ajax send\r\n\r\n  $document.ajaxSend(function (event, jqxhr, settings) {\r\n    var url = settings.url;\r\n    if (url.match(/\\/(\\w+preview|session)\\?/i)) // Preview/Session page\r\n      _removeSpinner(); // Preview has spinner already\r\n\r\n    var apiUrl = getApiUrl(),\r\n        isApi = url.startsWith(apiUrl),\r\n        // Is API request\r\n    allowed = isApi || url.startsWith(currentPage());\r\n\r\n    if (!allowed && url.match(/^http/i)) {\r\n      var objUrl = new URL(url);\r\n      allowed = objUrl.hostname == currentUrl.hostname; // Same host name\r\n    }\r\n\r\n    if (allowed) {\r\n      if (isApi && ew.API_JWT_TOKEN && !ew.IS_WINDOWS_AUTHENTICATION) // Do NOT set JWT authorization header if Windows Authentication\r\n        jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n\r\n      if (settings.type == \"GET\") {\r\n        // GET\r\n        var ar = settings.url.split(\"?\"),\r\n            params = new URLSearchParams(ar[1]);\r\n        params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name // PHP\r\n\r\n        params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token // PHP\r\n\r\n        ar[1] = params.toString();\r\n        settings.url = ar[0] + (ar[1] ? \"?\" + ar[1] : \"\");\r\n      } else {\r\n        // POST\r\n        if (settings.data instanceof FormData) {\r\n          // FormData\r\n          settings.data.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name // PHP\r\n\r\n          settings.data.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token // PHP\r\n        } else {\r\n          var params = new URLSearchParams(settings.data);\r\n          params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name // PHP\r\n\r\n          params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token // PHP\r\n\r\n          settings.data = params.toString();\r\n        }\r\n      }\r\n    }\r\n  }); // Ajax start\r\n\r\n  $document.ajaxStart(function () {\r\n    $document.data(\"_ajax\", true);\r\n    ew.addSpinner();\r\n    $__default['default'](\"form.ew-form\").addClass(\"ew-wait\").each(function () {\r\n      var frm = forms.get(this.id);\r\n\r\n      if (frm) {\r\n        if (!frm.multiPage || !frm.multiPage.lastPageSubmit) frm.disableForm();\r\n      }\r\n    });\r\n  }); // Ajax stop (internal)\r\n\r\n  function _ajaxStop() {\r\n    $__default['default'](\"form.ew-form.ew-wait\").removeClass(\"ew-wait\").each(function () {\r\n      var frm = forms.get(this.id);\r\n\r\n      if (frm) {\r\n        if (!frm.multiPage || !frm.multiPage.lastPageSubmit) {\r\n          frm.enableForm();\r\n        }\r\n      }\r\n    });\r\n    ew.removeSpinner();\r\n    $document.data(\"_ajax\", false);\r\n  } // Ajax stop/error\r\n\r\n  $document.ajaxStop(_ajaxStop).ajaxError(_ajaxStop); // Execute JavaScript in HTML loaded by Ajax\r\n\r\n  function executeScript(html, id) {\r\n    var matches = html.replace(/<head>[\\s\\S]*<\\/head>/, \"\").matchAll(/<script([^>]*)>([\\s\\S]*?)<\\/script\\s*>/ig);\r\n    Array.from(matches).filter(function (ar, i) {\r\n      var text = ar[2];\r\n\r\n      if (/(\\s+type\\s*=\\s*['\"]*text\\/javascript['\"]*)|^((?!\\s+type\\s*=).)*$/i.test(ar[1]) && text) {\r\n        if (ar[1].includes('class=\"ew-apply-template\"')) {\r\n          // Apply Custom Template first\r\n          addScript(text, \"scr_\" + id + \"_0\");\r\n          return false;\r\n        }\r\n\r\n        return true;\r\n      }\r\n    }).forEach(function (ar, i) {\r\n      return addScript(ar[2], \"scr_\" + id + \"_\" + (i + 1));\r\n    });\r\n  } // Strip JavaScript in HTML loaded by Ajax\r\n\r\n  function stripScript(html) {\r\n    var matches = html.matchAll(/<script([^>]*)>([\\s\\S]*?)<\\/script\\s*>/ig);\r\n\r\n    for (var _iterator5 = _createForOfIteratorHelperLoose$3(matches), _step5; !(_step5 = _iterator5()).done;) {\r\n      var _ar2 = _step5.value;\r\n      var text = _ar2[0];\r\n      if (/(\\s+type\\s*=\\s*['\"]*text\\/javascript['\"]*)|^((?!\\s+type\\s*=).)*$/i.test(_ar2[1])) html = html.replace(text, \"\");\r\n    }\r\n\r\n    return html;\r\n  } // Add SCRIPT tag\r\n\r\n  function addScript(text, id) {\r\n    var scr = document.createElement(\"SCRIPT\");\r\n    if (id) scr.id = id;\r\n    scr.text = text;\r\n    return document.body.appendChild(scr); // Do not use jQuery so it can be removed\r\n  } // Remove JavaScript added by Ajax\r\n\r\n  function removeScript(id) {\r\n    if (id) $__default['default'](\"script[id^='scr_\" + id + \"_']\").remove();\r\n  } // Clean HTML loaded by Ajax for modal dialog\r\n\r\n  function getContent(html) {\r\n    var body = stripScript(html).match(/<body[\\s\\S]*>[\\s\\S]*<\\/body>/i);\r\n    return body ? $__default['default'](body[0]).not(\"div[id^=ew].modal, #ew-tooltip, #ew-drilldown-panel, #cookie-consent, #template-upload, #template-download\") : $__default['default']();\r\n  } // Get all options of Selection list or Radio/Checkbox list as array\r\n\r\n  function getOptions(obj) {\r\n    return obj.options ? Array.prototype.map.call(obj.options, function (opt) {\r\n      return [opt.value, opt.text];\r\n    }) : [];\r\n  }\r\n  /**\r\n   * Show Add Option dialog\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {Object} args.frm - form object\r\n   * @param {HTMLElement} args.lnk - Add option anchor element\r\n   * @param {string} args.el - Form element name\r\n   * @param {string} args.url - URL of the Add form\r\n   * @returns\r\n   */\r\n\r\n  function addOptionDialogShow(args) {\r\n    // Hide dialog\r\n    var _hide = function _hide() {\r\n      removeScript($dlg.data(\"args\").el);\r\n      var frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n      if (frm) frm.destroyEditor();\r\n      $dlg.find(\".modal-body\").html(\"\");\r\n      $dlg.find(\".modal-footer .btn-primary\").off();\r\n      $dlg.data(\"showing\", false);\r\n    };\r\n\r\n    var $dlg = ew.addOptionDialog || $__default['default'](\"#ew-add-opt-dialog\").on(\"hidden.bs.modal\", _hide);\r\n\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-add-opt-dialog not found.\");\r\n\r\n      return;\r\n    }\r\n\r\n    if ($dlg.data(\"showing\")) return;\r\n    $dlg.data(\"showing\", true); // Submission success\r\n\r\n    var _submitSuccess = function _submitSuccess(data) {\r\n      var _results;\r\n\r\n      var results = data,\r\n          args = $dlg.data(\"args\"),\r\n          frm = forms.get(args.lnk),\r\n          // form object\r\n      objName = $dlg.find(\".modal-body form input[name='\" + ew.API_OBJECT_NAME + \"']\").val(),\r\n          // Get object name from form\r\n      el = args.el,\r\n          // HTML element name\r\n      re = /^x(\\d+)_/,\r\n          m = el.match(re),\r\n          // Check row index\r\n      prefix = m ? m[0] : \"x_\",\r\n          index = m ? m[1] : -1,\r\n          name = el.replace(re, \"x_\"),\r\n          list = frm.getList(el);\r\n      if ($__default['default'].isString(data)) results = parseJson(data);\r\n\r\n      if ((_results = results) !== null && _results !== void 0 && _results.success && results[objName]) {\r\n        // Success\r\n        $dlg.modal(\"hide\");\r\n        var result = results[objName],\r\n            form = frm.$element[0],\r\n            // HTML form or DIV\r\n        obj = getElements(el, form);\r\n\r\n        if (obj) {\r\n          var lf = list.linkField,\r\n              dfs = list.displayFields.slice(),\r\n              // Clone\r\n          ffs = list.filterFields.slice(),\r\n              // Clone\r\n          pfs = list.parentFields.slice(); // Clone\r\n\r\n          pfs.forEach(function (pf, i) {\r\n            if (pf.split(\" \").length == 1) // Parent field in the same table, add row index\r\n              pfs[i] = pfs[i].replace(/^x_/, prefix);\r\n          });\r\n          var lfv = lf != \"\" ? result[lf] : \"\",\r\n              row = {\r\n            lf: lfv\r\n          };\r\n          dfs.forEach(function (df, i) {\r\n            if (df in result) row[\"df\" + (i || \"\")] = result[df];\r\n          });\r\n          ffs.forEach(function (ff, i) {\r\n            if (ff in result) row[\"ff\" + (i || \"\")] = result[ff];\r\n          });\r\n\r\n          if (lfv && dfs.length > 0 && row[\"df\"]) {\r\n            if (list.ajax === null) // Non-Ajax\r\n              list.lookupOptions.push(row);\r\n            var arp = pfs.map(function (pf) {\r\n              return getOptionValues(pf, form);\r\n            }),\r\n                // Get the parent field values\r\n            args = {\r\n              \"data\": row,\r\n              \"parents\": arp,\r\n              \"valid\": true,\r\n              \"name\": getId(obj),\r\n              \"form\": form\r\n            };\r\n            $document.trigger(\"addoption\", [args]);\r\n\r\n            if (args.valid) {\r\n              // Add the new option\r\n              var ar = getOptions(obj),\r\n                  vals = [];\r\n              var txt = newOption(obj, row, form);\r\n\r\n              if (obj.options) {\r\n                obj.options[obj.options.length - 1].selected = true;\r\n\r\n                if (obj.list) {\r\n                  // Radio/Checkbox list\r\n                  obj.render();\r\n                  $__default['default'](obj.target).find(\"input\").last().trigger(\"focus\");\r\n                }\r\n\r\n                if (isAutoSuggest(obj)) {\r\n                  $__default['default'](obj).val(lfv).trigger(\"change\");\r\n                  $__default['default'](obj.input).val(txt).trigger(\"focus\");\r\n                } else if (isModalLookup(obj)) {\r\n                  var $obj = $__default['default'](obj),\r\n                      $lu = $__default['default'](getElement(\"lu_\" + args.name, form));\r\n\r\n                  if (obj.multiple) {\r\n                    // Add to existing values\r\n                    var val = $__default['default'](obj).val(),\r\n                        vals = [],\r\n                        nv = String(lfv);\r\n                    if (val !== \"\") vals = val.split(ew.MULTIPLE_OPTION_SEPARATOR);\r\n\r\n                    if (!vals.includes(nv)) {\r\n                      vals.push(nv);\r\n                      $obj.val(vals.join()).trigger(\"change\");\r\n                      var html = $lu.html(),\r\n                          arOpt = $lu.find(\".ew-option\").map(function () {\r\n                        return $__default['default'](this).html();\r\n                      }).get();\r\n\r\n                      if (arOpt.length) {\r\n                        // Some options selected\r\n                        arOpt.push(txt);\r\n                        $lu.html(optionsHtml(arOpt, $obj.data(\"maxcount\")));\r\n                      } else if (html == ew.language.phrase(\"PleaseSelect\")) {\r\n                        // No options selected\r\n                        $lu.html(optionHtml(txt));\r\n                      } else if (html) {\r\n                        // Many options selected\r\n                        $lu.html(ew.language.phrase(\"CountSelected\").replace(\"%s\", vals.length));\r\n                      }\r\n                    }\r\n                  } else {\r\n                    $obj.val(lfv).trigger(\"change\");\r\n                    $lu.html(txt);\r\n                  }\r\n                } else {\r\n                  $__default['default'](obj).trigger(\"change\").trigger(\"focus\");\r\n                }\r\n              }\r\n\r\n              var $form = $__default['default'](form),\r\n                  suffix = $form.is(\"div\") ? \"_\" + $form.attr(\"id\") : \"\";\r\n              var cnt = $form.find(\"#key_count\" + suffix).val();\r\n\r\n              if (cnt > 0) {\r\n                // Grid-Add/Edit, update other rows\r\n                for (var i = 1; i <= cnt; i++) {\r\n                  if (i == index) continue;\r\n                  var obj2 = getElements(name.replace(/^x/, \"x\" + i), form);\r\n                  var ar2 = getOptions(obj2),\r\n                      vals = [];\r\n                  if (JSON.stringify(ar) != JSON.stringify(ar2)) // Not same options\r\n                    continue;\r\n                  newOption(obj2, row, form);\r\n                  if (obj2.options && obj.list) // Radio/Checkbox list\r\n                    obj2.render();\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        var _results2;\r\n\r\n        // Failure\r\n        if ((_results2 = results) !== null && _results2 !== void 0 && _results2.error) {\r\n          var _results$error;\r\n\r\n          if ($__default['default'].isString(results.error)) showToast(results.error);else if ($__default['default'].isString((_results$error = results.error) === null || _results$error === void 0 ? void 0 : _results$error.description)) showToast(results.error.description);\r\n        } else {\r\n          var msg,\r\n              $div = $__default['default'](\"<div></div>\").html(data).find(\"div.ew-message-dialog\");\r\n\r\n          if ($div[0]) {\r\n            msg = $div.html();\r\n          } else {\r\n            var _results3;\r\n\r\n            msg = ((_results3 = results) === null || _results3 === void 0 ? void 0 : _results3.failureMessage) || data;\r\n            if (!msg || String(msg).trim() == \"\") msg = ew.language.phrase(\"InsertFailed\");\r\n          }\r\n\r\n          showToast(msg);\r\n        }\r\n      }\r\n    }; // Fail\r\n\r\n    var _fail = function _fail(o) {\r\n      $dlg.modal(\"hide\");\r\n\r\n      _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    }; // Submit\r\n\r\n    var _submit = function _submit(e) {\r\n      var $dlg = ew.addOptionDialog,\r\n          form = $dlg.find(\".modal-body form\")[0],\r\n          frm = forms.get(form.id),\r\n          btn = e ? e.target : null,\r\n          $btn = $__default['default'](btn);\r\n\r\n      if (frm.canSubmit()) {\r\n        $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n        $body.css(\"cursor\", \"wait\");\r\n        $__default['default'].post(getApiUrl([ew.API_ADD_ACTION, form.elements[ew.API_OBJECT_NAME].value]), $__default['default'](form).serialize(), _submitSuccess).fail(_fail).always(function () {\r\n          frm.enableForm();\r\n          $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n          $body.css(\"cursor\", \"default\");\r\n        });\r\n      }\r\n\r\n      return false;\r\n    };\r\n\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args); // Get form HTML\r\n\r\n    var success = function success(data) {\r\n      var frm = forms.get(args.lnk),\r\n          prefix = \"x_\",\r\n          m = args.el.match(/^(x\\d+_)/);\r\n      if (m) // Contains row index\r\n        prefix = m[1];\r\n      var list = frm.getList(args.el),\r\n          pfs = list.parentFields.slice() // Clone\r\n      .map(function (pf) {\r\n        return pf.split(\" \").length == 1 ? pf.replace(/^x_/, prefix) : pf;\r\n      }),\r\n          // Parent field in the same table, add row index\r\n      form = frm.htmlForm,\r\n          ar = pfs.map(function (pf) {\r\n        return getOptionValues(pf, form);\r\n      }),\r\n          ar2 = pfs.map(function (pf) {\r\n        return getOptionTexts(pf, form);\r\n      }),\r\n          ffs = list.filterFieldVars.slice(); // Clone\r\n\r\n      $dlg.find(\".modal-title\").html($__default['default'](args.lnk).closest(\".ew-add-opt-btn\").data(\"title\"));\r\n      $dlg.find(\".modal-body\").html(stripScript(data));\r\n      var form = $dlg.find(\".modal-body form\")[0];\r\n\r\n      if (form) {\r\n        // Set the filter field value\r\n        $__default['default'](form).on(\"keydown\", function (e) {\r\n          if (e.key == \"Enter\" && e.target.nodeName != \"TEXTAREA\") return _submit();\r\n        });\r\n        ar.forEach(function (v, i) {\r\n          (function () {\r\n            var obj = getElements(ffs[i], form);\r\n\r\n            if (obj) {\r\n              if (obj.options || obj.length) {\r\n                // Selection list\r\n                $__default['default'](obj).first().one(\"updated\", function () {\r\n                  return selectOption(obj, v);\r\n                });\r\n              } else {\r\n                selectOption(obj, v);\r\n              }\r\n            }\r\n          })();\r\n        });\r\n      }\r\n\r\n      ew.addOptionDialog = $dlg.modal(\"show\");\r\n      $dlg.find(\".modal-footer .btn-primary\").click(_submit).focus();\r\n      executeScript(data, args.el);\r\n\r\n      if (form) {\r\n        // Set the filter field value\r\n        ar.forEach(function (v, i) {\r\n          var obj = getElements(ffs[i], form);\r\n\r\n          if (obj) {\r\n            if (isAutoSuggest(obj)) {\r\n              // AutoSuggest\r\n              obj.value = v[0];\r\n              obj.input.value = ar2[i][0];\r\n              obj.add(v[0], ar2[i][0], true);\r\n            } else if (isModalLookup(obj)) {\r\n              // Modal-Lookup\r\n              obj.value = v[0];\r\n              updateOptions.call(forms.get(form.id), obj);\r\n            } else if (obj.options || obj.length) ; else {\r\n              // Text\r\n              obj.value = v[0];\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n      $dlg.trigger(\"load.ew\");\r\n    };\r\n\r\n    $__default['default'].get(args.url, success).fail(_fail);\r\n  } // Hide Modal dialog\r\n\r\n  function modalDialogHide(e) {\r\n    var $dlg = $__default['default'](this),\r\n        args = $dlg.data(\"args\");\r\n    removeScript(\"ModalDialog\");\r\n    var frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n    if (frm) frm.destroyEditor();\r\n    var $bd = $dlg.find(\".modal-body\").html(\"\");\r\n    if ($bd.ewjtable && $bd.ewjtable(\"instance\")) $bd.ewjtable(\"destroy\");\r\n    $dlg.find(\".modal-footer .btn-primary\").off();\r\n    $dlg.find(\".modal-dialog\").removeClass(function (index, className) {\r\n      var m = className.match(/table\\-\\w+/);\r\n      return m ? m[0] : \"\";\r\n    });\r\n    $dlg.data(\"showing\", false);\r\n    $dlg.data(\"url\", null);\r\n    if (args && args.reload) window.location.reload();\r\n  }\r\n  /**\r\n   * Show modal dialog\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {HTMLFormElement} args.f - Form of List page\r\n   * @param {HTMLElement} args.lnk - Anchor element\r\n   * @param {string} args.url - URL of the form\r\n   * @param {string|null} args.btn - Button phrase ID\r\n   * @param {string} args.caption - Caption in dialog header\r\n   * @param {boolean} args.reload - Reload page after hiding dialog or not\r\n   * @param {string} args.size - Size of the dialog 'modal-sm'|''|modal-lg'|'modal-xl'(default)\r\n   * @returns false\r\n   */\r\n\r\n  function modalDialogShow(args) {\r\n    $__default['default'](args.lnk).tooltip(\"hide\");\r\n    var f = args.f;\r\n\r\n    if (f && !keySelected(f)) {\r\n      _prompt(\"<p class=\\\"text-danger\\\">\" + ew.language.phrase(\"NoRecordSelected\") + \"</p>\");\r\n\r\n      return false;\r\n    }\r\n\r\n    var $dlg = ew.modalDialog || $__default['default'](\"#ew-modal-dialog\").on(\"hidden.bs.modal\", modalDialogHide); // div#ew-modal-dialog always exists\r\n\r\n    if ($dlg.data(\"showing\") && $dlg.data(\"url\") == args.url) return false;\r\n    $dlg.data({\r\n      showing: true,\r\n      url: args.url\r\n    });\r\n    args.reload = false; // size\r\n\r\n    if (args.size === \"modal-sm\") {\r\n      // 300px\r\n      $dlg.find(\".modal-dialog\").toggleClass(\"modal-sm\", true).toggleClass(\"modal-lg modal-xl\", false);\r\n    } else if (args.size === \"\") {\r\n      // 500px\r\n      $dlg.find(\".modal-dialog\").toggleClass(\"modal-sm modal-lg modal-xl\", false);\r\n    } else if (args.size === \"modal-lg\") {\r\n      // 800px\r\n      $dlg.find(\".modal-dialog\").toggleClass(\"modal-lg\", true).toggleClass(\"modal-sm modal-xl\", false);\r\n    } else {\r\n      // Default = 1140px\r\n      $dlg.find(\".modal-dialog\").toggleClass(\"modal-xl\", true).toggleClass(\"modal-sm modal-lg\", false);\r\n    } // caption\r\n\r\n    var _caption = function _caption() {\r\n      var args = $dlg.data(\"args\");\r\n      var $lnk = $__default['default'](args.lnk);\r\n      return args.caption || $lnk.data(\"caption\") || $lnk.data(\"original-title\") || \"\";\r\n    }; // button text\r\n\r\n    var _button = function _button() {\r\n      var args = $dlg.data(\"args\");\r\n      if ($__default['default'].isNull(args.btn)) return \"\";else if (args.btn && args.btn != \"\") return ew.language.phrase(args.btn);else return _caption();\r\n    }; // fail\r\n\r\n    var _fail = function _fail(o) {\r\n      $dlg.modal(\"hide\");\r\n      if (o.status) _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    }; // always\r\n\r\n    var _always = function _always(o) {\r\n      $body.css(\"cursor\", \"default\");\r\n    }; // check if current page\r\n\r\n    var _current = function _current(url) {\r\n      var a = $__default['default'](\"<a>\", {\r\n        href: url\r\n      })[0];\r\n      return window.location.pathname.endsWith(a.pathname);\r\n    };\r\n    /**\r\n     * handle result\r\n     *\r\n     * @param {Object} result - Result object\r\n     * @param {string|Object} result.error - Error message or object\r\n     * @param {string} result.error.message - Error message\r\n     * @param {string} result.error.description - Error message\r\n     * @param {string} result.failureMessage - Failure message\r\n     * @param {string} result.successMessage - Success message\r\n     * @param {string} result.warningMessage - Warning message\r\n     * @param {string} result.message - Message\r\n     * @param {string} result.url - Redirection URL\r\n     * @param {string} result.modal - Redirect to result.url in current modal dialog\r\n     * @param {boolean} result.view - result.url is View page => No primary button\r\n     * @param {string} result.caption - Caption of modal dialog for result.url\r\n     * @param {boolean} result.reload - Reload current page\r\n     */\r\n\r\n    var handleResult = function handleResult(result) {\r\n      var cb = null,\r\n          url = result.url,\r\n          reload = result.reload;\r\n\r\n      if (url || reload) {\r\n        cb = function cb() {\r\n          if (url) {\r\n            if (result.modal && !_current(url)) {\r\n              var args = $dlg.data(\"args\");\r\n              args.reload = true;\r\n              if (result.caption) args.caption = result.caption;\r\n              args.btn = result.view ? null : \"\";\r\n              $dlg.data(\"args\", args);\r\n              url += (url.split(\"?\").length > 1 ? \"&\" : \"?\") + \"modal=1&rnd=\" + random();\r\n              $body.css(\"cursor\", \"wait\");\r\n              $__default['default'].get(url).done(success).fail(_fail).always(_always);\r\n            } else {\r\n              $dlg.modal(\"hide\");\r\n              window.location = sanitizeUrl(url);\r\n            }\r\n          } else if (reload) {\r\n            $dlg.modal(\"hide\");\r\n            window.location.reload();\r\n          }\r\n        };\r\n      }\r\n\r\n      if ($__default['default'].isString(result.failureMessage)) {\r\n        _alert(result.failureMessage);\r\n      } else if ($__default['default'].isString(result.warningMessage)) {\r\n        _alert(result.warningMessage, cb, \"warning\");\r\n      } else if ($__default['default'].isString(result.message)) {\r\n        _alert(result.message, cb, \"body\");\r\n      } else if ($__default['default'].isString(result.successMessage)) {\r\n        _alert(result.successMessage, cb, \"success\");\r\n      } else if (result.error) {\r\n        var _result$error, _result$error2;\r\n\r\n        if ($__default['default'].isString(result.error)) _alert(result.error);else if ($__default['default'].isString((_result$error = result.error) === null || _result$error === void 0 ? void 0 : _result$error.message)) _alert(result.error.message);else if ($__default['default'].isString((_result$error2 = result.error) === null || _result$error2 === void 0 ? void 0 : _result$error2.description)) _alert(result.error.description);\r\n      } else if (cb) {\r\n        cb();\r\n      }\r\n    }; // submit success\r\n\r\n    var _submitSuccess = function _submitSuccess(data) {\r\n      var result = parseJson(data);\r\n\r\n      if ($__default['default'].isObject(result)) {\r\n        handleResult(result);\r\n      } else {\r\n        var body = getContent(data);\r\n\r\n        if (body.length) {\r\n          // Has HTML elements\r\n          var $bd = $dlg.find(\".modal-body\").html(body);\r\n          var footer = \"\";\r\n          var cf = $bd.find(\"#confirm\");\r\n          var ct = $bd.find(\"#conflict\");\r\n\r\n          if (ct && ct.val() == \"1\") {\r\n            // Conflict page\r\n            footer += \"<button type=\\\"button\\\" id=\\\"btn-overwrite\\\" class=\\\"btn btn-primary ew-btn\\\">\" + ew.language.phrase(\"OverwriteBtn\") + \"</button>\";\r\n            footer += \"<button type=\\\"button\\\" id=\\\"btn-reload\\\" class=\\\"btn btn-default ew-btn\\\">\" + ew.language.phrase(\"ReloadBtn\") + \"</button>\";\r\n            footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";\r\n            $dlg.find(\".modal-footer\").html(footer);\r\n            $dlg.find(\".modal-footer #btn-overwrite\").on('click', {\r\n              action: 'overwrite'\r\n            }, _submit);\r\n            $dlg.find(\".modal-footer #btn-reload\").on('click', {\r\n              action: 'show'\r\n            }, _submit);\r\n          } else if (cf && cf.val() == \"confirm\") {\r\n            // Confirm page\r\n            footer += \"<button type=\\\"button\\\" class=\\\"btn btn-primary ew-btn\\\">\" + ew.language.phrase(\"ConfirmBtn\") + \"</button>\";\r\n            footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";\r\n            $dlg.find(\".modal-footer\").html(footer);\r\n            $dlg.find(\".modal-footer .btn-primary\").click(_submit).focus();\r\n            $dlg.find(\".modal-footer .btn-default\").on(\"click\", {\r\n              action: \"cancel\"\r\n            }, _submit);\r\n          } else {\r\n            // Normal page\r\n            var btn = _button();\r\n\r\n            if (btn) footer += \"<button type=\\\"button\\\" class=\\\"btn btn-primary ew-btn\\\">\" + btn + \"</button>\";\r\n            footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";\r\n            $dlg.find(\".modal-footer\").html(footer);\r\n            $dlg.find(\".modal-footer .btn-primary\").addClass(\"ew-submit\").click(_submit).focus();\r\n          }\r\n\r\n          executeScript(data, \"ModalDialog\");\r\n          $dlg.trigger(\"load.ew\"); // Trigger load event for, e.g. Use JavaScript popup message\r\n        } else if (data) {\r\n          $dlg.modal(\"hide\");\r\n          ew.alert(data);\r\n        }\r\n      }\r\n    }; // submit\r\n\r\n    var _submit = function _submit(e) {\r\n      var form = $dlg.find(\".modal-body form\")[0],\r\n          $form = $__default['default'](form),\r\n          frm = forms.get(form.id),\r\n          action = e && e.data ? e.data.action : null,\r\n          btn = e ? e.target : null;\r\n\r\n      if (btn) {\r\n        if (btn.classList.contains(\"disabled\")) return false;\r\n\r\n        frm.enableForm = function () {\r\n          $__default['default'](btn).prop(\"disabled\", false).removeClass(\"disabled\");\r\n        };\r\n\r\n        frm.disableForm = function () {\r\n          $__default['default'](btn).prop(\"disabled\", true).addClass(\"disabled\");\r\n        };\r\n      }\r\n\r\n      var input = form.elements[\"action\"];\r\n      if (action && input) input.value = action; // Update action\r\n\r\n      if (action == \"cancel\") {\r\n        // Cancel\r\n        $__default['default'].post($form.attr(\"action\"), $form.serialize(), success).fail(_fail).always(_always);\r\n      } else if (frm.canSubmit()) {\r\n        $body.css(\"cursor\", \"wait\");\r\n        $__default['default'].post($form.attr(\"action\"), $form.serialize(), _submitSuccess).fail(_fail).always(function () {\r\n          frm.enableForm();\r\n\r\n          _always();\r\n        });\r\n      }\r\n\r\n      return false;\r\n    };\r\n\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args);\r\n\r\n    var success = function success(data) {\r\n      var result = parseJson(data);\r\n\r\n      if ($__default['default'].isObject(result)) {\r\n        handleResult(result);\r\n      } else {\r\n        var args = $dlg.data(\"args\");\r\n        var $lnk = $__default['default'](args.lnk);\r\n        $dlg.find(\".modal-title\").html(_caption());\r\n        var footer = \"\";\r\n\r\n        var btn = _button();\r\n\r\n        if (btn) footer += \"<button type=\\\"button\\\" class=\\\"btn btn-primary ew-btn\\\">\" + btn + \"</button>\";\r\n        if (footer != \"\") footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";else footer = \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CloseBtn\") + \"</button>\";\r\n        $dlg.find(\".modal-footer\").html(footer);\r\n        var body = getContent(data);\r\n        $dlg.find(\".modal-body\").html(body);\r\n        var table = $lnk.data(\"table\");\r\n        if (table) $dlg.find(\".modal-dialog\").addClass(\"table-\" + table);\r\n        var $btn = $dlg.find(\".modal-footer .btn-primary\").addClass(\"ew-submit\").click(_submit);\r\n        $dlg.find(\".modal-body form\").on(\"keydown\", function (e) {\r\n          if (e.key == \"Enter\" && e.target.nodeName != \"TEXTAREA\") {\r\n            $btn.click();\r\n            return false;\r\n          }\r\n        });\r\n        ew.modalDialog = $dlg.modal(\"show\");\r\n        executeScript(data, \"ModalDialog\");\r\n        $dlg.trigger(\"load.ew\"); // Trigger load event for, e.g. YouTube videos, ReCAPTCHA and Google maps\r\n\r\n        $btn.focus();\r\n      }\r\n    };\r\n\r\n    $body.css(\"cursor\", \"wait\");\r\n    var url = args.url;\r\n\r\n    if (f) {\r\n      // Post form\r\n      var $f = $__default['default'](f);\r\n      if (!f.elements.modal) $__default['default'](\"<input>\").attr({\r\n        type: \"hidden\",\r\n        name: \"modal\",\r\n        value: \"1\"\r\n      }).appendTo($f);\r\n      $__default['default'].post(url, $f.serialize(), success).fail(_fail).always(_always);\r\n    } else {\r\n      url += (url.split(\"?\").length > 1 ? \"&\" : \"?\") + \"modal=1&rnd=\" + random();\r\n      $__default['default'].get(url, success).fail(_fail).always(_always);\r\n    }\r\n\r\n    return false;\r\n  } // Show Modal Lookup\r\n\r\n  function modalLookupShow(args) {\r\n    var el = args.el,\r\n        f = getForm(args.lnk);\r\n    if (!f || !el) return;\r\n    var $dlg = ew.modalLookupDialog || $__default['default'](\"#ew-modal-lookup-dialog\").on(\"hidden.bs.modal\", modalDialogHide);\r\n\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-modal-lookup-dialog not found.\");\r\n\r\n      return;\r\n    }\r\n\r\n    if ($dlg.data(\"showing\")) return;\r\n    $dlg.data(\"showing\", true);\r\n    var $f = $__default['default'](f),\r\n        $input = $f.find(\"[id='\" + el + \"']\"),\r\n        // id may contains \"[]\"\r\n    $bd = $dlg.find(\".modal-body\"),\r\n        $lnk = $__default['default'](args.lnk),\r\n        $lu = $lnk.closest(\".ew-lookup-list\").find(\".ew-lookup-text\").trigger(\"focus\"),\r\n        oid = getId(el, false),\r\n        m = oid.match(/^([xy])(\\d*)_/),\r\n        rowindex = m ? m[2] : \"\",\r\n        list = forms.get(f.id).getList(el); // Format data\r\n\r\n    var _format = function _format(data) {\r\n      if (data.result == \"OK\" && Array.isArray(data.records)) {\r\n        data.records.forEach(function (ar, index) {\r\n          var item;\r\n          if (Array.isArray(ar)) item = {\r\n            \"lf\": ar[0],\r\n            \"df1\": ar[1],\r\n            \"df2\": ar[2],\r\n            \"df3\": ar[3],\r\n            \"df4\": ar[4]\r\n          };else if ($__default['default'].isObject(ar)) item = {\r\n            lf: ar.lf,\r\n            df1: ar.df,\r\n            df2: ar.df2,\r\n            df3: ar.df3,\r\n            df4: ar.df4\r\n          };\r\n          var txt = displayValue(ar, $input);\r\n\r\n          if (list.template) {\r\n            item[\"df\"] = list.template.render(item, ew.jsRenderHelpers);\r\n          } else {\r\n            item[\"df\"] = txt;\r\n          }\r\n\r\n          item[\"txt\"] = txt;\r\n          data.records[index] = item;\r\n        });\r\n      }\r\n\r\n      return data;\r\n    }; // Set AutoSuggest\r\n\r\n    var setAutoSuggest = function setAutoSuggest(value, text) {\r\n      if (!isAutoSuggest($input)) return;\r\n      var el = $input[0];\r\n      el.add(value, text, true);\r\n      el.input.value = text;\r\n    }; // Add option\r\n\r\n    var addOpt = function addOpt(ar) {\r\n      // Check if selected records are in the current page\r\n      var vals = [],\r\n          html = [],\r\n          opts = [],\r\n          txts = [],\r\n          useText = !args.m && args.srch;\r\n      $bd.ewjtable(\"selectedRows\").each(function () {\r\n        var record = $__default['default'](this).data(\"record\");\r\n        vals.push(record.lf);\r\n        html.push(record.df);\r\n        opts.push(record.df);\r\n        txts.push(record.txt); // Text for Auto-Suggest\r\n      });\r\n\r\n      if (ar.sort().join() === vals.sort().join()) {\r\n        // All selected records are from the current page\r\n        $lu.html(optionsHtml(opts, $input.data(\"maxcount\")));\r\n        setAutoSuggest(vals.join(), txts.join(\", \"));\r\n        $input.val(useText ? html.join(\", \") : vals.join()).trigger(\"change\");\r\n      } else {\r\n        // Get selected records from server\r\n        var data = Object.assign({\r\n          page: list.page,\r\n          field: list.field,\r\n          ajax: \"modal\",\r\n          keys: ar\r\n        }, getUserParams('#p_' + oid, f));\r\n        $body.css(\"cursor\", \"wait\");\r\n        $__default['default'].ajax(getApiUrl(ew.API_LOOKUP_ACTION), {\r\n          type: \"POST\",\r\n          dataType: \"json\",\r\n          data: data\r\n        }).done(_format).then(function (data) {\r\n          if (data.result == \"OK\" && Array.isArray(data.records)) {\r\n            var vals = [],\r\n                html = [],\r\n                opts = [],\r\n                txts = [],\r\n                results = data.records;\r\n\r\n            for (var _iterator6 = _createForOfIteratorHelperLoose$3(results), _step6; !(_step6 = _iterator6()).done;) {\r\n              var result = _step6.value;\r\n              vals.push(result.lf);\r\n              html.push(result.df);\r\n              opts.push(result.df);\r\n              txts.push(result.txt); // Text for Auto-Suggest\r\n            }\r\n\r\n            $lu.html(optionsHtml(opts, $input.data(\"maxcount\")));\r\n            setAutoSuggest(vals.join(), txts.join(\", \"));\r\n            $input.val(useText ? html.join(\", \") : vals.join()).trigger(\"change\");\r\n          }\r\n        }).always(function () {\r\n          $body.css(\"cursor\", \"default\");\r\n        });\r\n      }\r\n    }; // Submit\r\n\r\n    var _submit = function _submit() {\r\n      addOpt(arLinkValue);\r\n      $dlg.modal(\"hide\");\r\n      return false;\r\n    }; // Hide\r\n\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args);\r\n\r\n    var _timer, $search; // Success\r\n\r\n    var success = function success(data) {\r\n      if (data.result == \"OK\") {\r\n        $dlg.find(\".modal-title\").html($lnk.attr(\"title\") || $lnk.data(\"original-title\"));\r\n        $dlg.find(\".modal-body .ewjtable thead\").toggle(!!args.m);\r\n        $dlg.find(\".modal-footer\").html('<button type=\"button\" id=\"btn-select\" class=\"btn btn-primary ew-btn\">' + ew.language.phrase(\"SelectBtn\") + '</button>' + '<button type=\"button\" class=\"btn btn-default ew-btn\" data-dismiss=\"modal\">' + ew.language.phrase(\"CancelBtn\") + '</button>');\r\n        $search = $dlg.find(\".modal-header .modal-tools input[name=sv]\").off(\"keyup.ew\").on(\"keyup.ew\", function (e) {\r\n          if (_timer) _timer.cancel();\r\n          _timer = $__default['default'].later(ew.LOOKUP_DELAY, null, function () {\r\n            $bd.ewjtable(\"load\", {\r\n              \"sv\": $search.val()\r\n            });\r\n          });\r\n        });\r\n        $dlg.find(\".modal-footer #btn-select\").click(_submit); // Select\r\n\r\n        ew.modalLookupDialog = $dlg.modal(\"show\");\r\n        $search.focus();\r\n      } else {\r\n        _alert(data.message);\r\n      }\r\n    };\r\n\r\n    var arp = [];\r\n    var linkValue = $input.val(); // Link values\r\n\r\n    var arLinkValue = linkValue !== \"\" ? linkValue.split(ew.MULTIPLE_OPTION_SEPARATOR) : [];\r\n    var data = Object.assign({\r\n      page: list.page,\r\n      field: list.field\r\n    }, getUserParams('#p_' + oid, f)); // Add parent field values\r\n\r\n    var parentId = list.parentFields.slice(); // Clone\r\n\r\n    if (rowindex != \"\") {\r\n      for (var i = 0, len = parentId.length; i < len; i++) {\r\n        var ar = parentId[i].split(\" \");\r\n        if (ar.length == 1) // Parent field in the same table, add row index\r\n          parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n      }\r\n    }\r\n\r\n    if (parentId.length > 0) {\r\n      for (var i = 0, len = parentId.length; i < len; i++) {\r\n        arp.push(getOptionValues(parentId[i], f));\r\n      }\r\n    }\r\n\r\n    for (var i = 0, cnt = arp.length; i < cnt; i++) {\r\n      // Filter by parent fields\r\n      data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n    }\r\n\r\n    $body.css(\"cursor\", \"wait\");\r\n    $bd.ewjtable({\r\n      paging: true,\r\n      pageSize: args.n,\r\n      pageSizes: [],\r\n      pageSizeChangeArea: false,\r\n      pageList: \"minimal\",\r\n      selecting: true,\r\n      selectingCheckboxes: true,\r\n      multiselect: !!args.m,\r\n      actions: {\r\n        \"listAction\": function listAction(postData, jtParams) {\r\n          var _data = Object.assign({}, data, {\r\n            ajax: \"modal\",\r\n            start: jtParams.start,\r\n            recperpage: jtParams.recperpage\r\n          });\r\n\r\n          if ($__default['default'].isObject(postData)) // Search\r\n            Object.assign(_data, postData);\r\n          return $__default['default'].ajax(getApiUrl(ew.API_LOOKUP_ACTION), {\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            data: _data\r\n          }).done(_format).always(function () {\r\n            $body.css(\"cursor\", \"default\");\r\n          });\r\n        }\r\n      },\r\n      messages: {\r\n        serverCommunicationError: ew.language.phrase(\"ServerCommunicationError\"),\r\n        loadingMessage: '<div class=\"' + ew.spinnerClass + ' m-3 ew-loading\" role=\"status\"><span class=\"sr-only\">' + ew.language.phrase(\"Loading\") + '</span></div>',\r\n        noDataAvailable: ew.language.phrase(\"NoRecord\"),\r\n        close: ew.language.phrase(\"CloseBtn\"),\r\n        pagingInfo: ew.language.phrase(\"Record\") + \" {0}-{1} \" + ew.language.phrase(\"Of\") + \" {2}\",\r\n        pageSizeChangeLabel: ew.language.phrase(\"RecordsPerPage\"),\r\n        gotoPageLabel: ew.language.phrase(\"Page\")\r\n      },\r\n      fields: {\r\n        \"lf\": {\r\n          key: true,\r\n          list: false\r\n        },\r\n        \"df\": {}\r\n      },\r\n      recordsLoaded: function recordsLoaded(e, data) {\r\n        var selectedRows = $__default['default'](e.target).find(\".ewjtable-data-row\").filter(function () {\r\n          return arLinkValue.includes(String($__default['default'](this).data(\"record-key\")));\r\n        });\r\n        $__default['default'](e.target).ewjtable(\"selectRows\", selectedRows);\r\n      },\r\n      selectionChanged: function selectionChanged(e, data) {\r\n        var $rows = data.rows;\r\n\r\n        if ($rows) {\r\n          if (!args.m) arLinkValue = [];\r\n          $rows.each(function () {\r\n            var $row = $__default['default'](this);\r\n            var key = String($row.data(\"record-key\"));\r\n            var index = arLinkValue.indexOf(key);\r\n            var selected = $row.hasClass(\"ewjtable-row-selected\");\r\n            if (selected && index == -1) arLinkValue.push(key);else if (!selected && index > -1) arLinkValue.splice(index, 1);\r\n          });\r\n        }\r\n      }\r\n    }).ewjtable(\"load\", null, success);\r\n  }\r\n  /**\r\n   * Show dialog for import\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {HTMLElement} args.lnk - Anchor element\r\n   * @returns\r\n   */\r\n\r\n  function importDialogShow(args) {\r\n    $__default['default'](args.lnk).tooltip(\"hide\");\r\n    var $dlg = ew.importDialog || $__default['default'](\"#ew-import-dialog\");\r\n\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-import-dialog not found.\");\r\n\r\n      return false;\r\n    }\r\n\r\n    var $input = $dlg.find(\"#importfiles\"),\r\n        $bd = $dlg.find(\".modal-body\"),\r\n        $data = $bd.find(\":input[id!=importfiles]\"),\r\n        $message = $bd.find(\".message\"),\r\n        $progress = $bd.find(\".progress\"),\r\n        timer; // Disable buttons\r\n\r\n    var enableButtons = function enableButtons() {\r\n      $dlg.find(\".modal-footer .btn\").prop(\"disabled\", false);\r\n    }; // Show message\r\n\r\n    var showMessage = function showMessage(msg, classname) {\r\n      var $msg = $__default['default'](\"<div>\" + msg + \"</div>\");\r\n      if (classname) $msg.addClass(classname);\r\n      $message.removeClass(\"d-none\").html($msg);\r\n      if (classname == \"text-danger\") enableButtons();\r\n    }; // Hide message\r\n\r\n    var hideMessage = function hideMessage() {\r\n      $message.addClass(\"d-none\").html(\"\");\r\n    }; // Show progress\r\n\r\n    var showProgress = function showProgress(pc, classname) {\r\n      $progress.removeClass(\"d-none\").find(\".progress-bar\").removeClass(\"bg-success bg-info\").addClass(classname || \"bg-success\").attr(\"aria-valuenow\", pc).css(\"width\", pc + \"%\").html(pc + \"%\");\r\n    }; // Hide progress\r\n\r\n    var hideProgress = function hideProgress() {\r\n      $progress.addClass(\"d-none\").find(\".progress-bar\").attr(\"aria-valuenow\", 0).css(\"width\", \"0%\").html(\"0%\");\r\n    }; // Upload progress\r\n\r\n    var uploadProgress = function uploadProgress(data) {\r\n      var pc = parseInt(100 * data.loaded / data.total);\r\n      showProgress(pc, \"bg-info\");\r\n\r\n      if (pc === 100) {\r\n        showMessage(ew.language.phrase(\"ImportMessageUploadComplete\"), \"text-info\");\r\n      } else {\r\n        showMessage(ew.language.phrase(\"ImportMessageUploadProgress\").replace(\"%p\", pc), \"text-info\");\r\n      }\r\n    }; // Update progress (import)\r\n\r\n    var updateProgress = function updateProgress(result) {\r\n      try {\r\n        var cnt = parseInt(result.count),\r\n            tcnt = parseInt(result.totalCount),\r\n            filename = result.file;\r\n\r\n        if (tcnt > 0 && $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\")) {\r\n          // Show progress\r\n          var pc = parseInt(100 * cnt / tcnt);\r\n          showProgress(pc);\r\n          showMessage(ew.language.phrase(\"ImportMessageProgress\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", filename), \"text-info\");\r\n        }\r\n      } catch (e) {}\r\n    }; // Import progress\r\n\r\n    var importProgress = function importProgress() {\r\n      var url = getApiUrl(ew.API_PROGRESS_ACTION),\r\n          data = {\r\n        \"rnd\": random()\r\n      };\r\n      data[ew.API_FILE_TOKEN_NAME] = $input.data(ew.API_FILE_TOKEN_NAME);\r\n      $__default['default'].get(url, data, updateProgress, \"json\");\r\n    }; // Import complete\r\n\r\n    var importComplete = function importComplete(result) {\r\n      var maxErrorCount = 5;\r\n      var msg = \"\";\r\n      showProgress(100);\r\n      var fileResults = result.files;\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n\r\n      if (Array.isArray(fileResults)) {\r\n        for (var i = 0, len = fileResults.length; i < len; i++) {\r\n          var fileResult = fileResults[i],\r\n              tcnt = fileResult.totalCount || 0,\r\n              cnt = fileResult.count || 0,\r\n              scnt = fileResult.successCount || 0,\r\n              fcnt = fileResult.failCount || 0;\r\n          if (msg != \"\") msg += \"<br>\";\r\n\r\n          if (fileResult.success) {\r\n            msg += ew.language.phrase(\"ImportMessageSuccess\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", fileResult.file);\r\n          } else {\r\n            msg += ew.language.phrase(\"ImportMessageError1\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", fileResult.file).replace(\"%s\", scnt).replace(\"%e\", fcnt);\r\n            if (fileResult.error) msg += ew.language.phrase(\"ImportMessageError2\").replace(\"%e\", fileResult.error);\r\n            var showLog = true;\r\n\r\n            if (fileResult.failList) {\r\n              var ecnt = 0;\r\n\r\n              for (var i = 1; i <= cnt; i++) {\r\n                if (fileResult.failList[\"row\" + i]) {\r\n                  ecnt += 1;\r\n                  msg += \"<br>\" + ew.language.phrase(\"ImportMessageError3\").replace(\"%i\", i).replace(\"%d\", fileResult.failList[\"row\" + i]);\r\n                }\r\n\r\n                if (ecnt >= maxErrorCount) break;\r\n              }\r\n\r\n              if (fcnt > maxErrorCount) msg += \"<br>\" + ew.language.phrase(\"ImportMessageMore\").replace(\"%s\", fcnt - maxErrorCount);else showLog = false;\r\n            }\r\n\r\n            if (fileResult.log && showLog) msg += \"<br>\" + ew.language.phrase(\"ImportMessageError4\").replace(\"%l\", fileResult.log);\r\n            showMessage(msg, \"text-danger\"); // Show error message\r\n          }\r\n        }\r\n      }\r\n\r\n      if (result.success) {\r\n        showMessage(msg, \"text-success\");\r\n        $dlg.find(\".modal-footer .ew-close-btn\").data(\"imported\", true);\r\n      } else {\r\n        if (result.error) msg = result.error;\r\n        showMessage(msg, \"text-danger\"); // Show error message\r\n      }\r\n\r\n      hideProgress();\r\n    }; // Import fail\r\n\r\n    var importFail = function importFail(o) {\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n\r\n      showMessage(ew.language.phrase(\"ImportMessageServerError\").replace(\"%s\", o.status).replace(\"%t\", o.statusText), \"text-danger\");\r\n    }; // Import file\r\n\r\n    var importFiles = function importFiles(filetoken) {\r\n      $body.css(\"cursor\", \"wait\");\r\n      $input.data(ew.API_FILE_TOKEN_NAME, filetoken);\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", true); // Show import progress\r\n\r\n      var data = ew.API_ACTION_NAME + \"=import&\" + ew.API_FILE_TOKEN_NAME + \"=\" + encodeURIComponent(filetoken);\r\n      if ($data.length) data += \"&\" + $data.serialize();\r\n      $__default['default'].ajax(currentPage(), {\r\n        \"data\": data,\r\n        \"method\": \"POST\",\r\n        \"dataType\": \"json\",\r\n        \"beforeSend\": function beforeSend(xhr, settings) {\r\n          timer = $__default['default'].later(100, null, importProgress, null, true); // Use time to show progress periodically\r\n        }\r\n      }).done(importComplete).fail(importFail).always(function () {\r\n        $body.css(\"cursor\", \"default\");\r\n        if (timer) timer.cancel(); // Clear timer\r\n      });\r\n    };\r\n\r\n    var formData = {\r\n      session: ew.SESSION_ID\r\n    };\r\n    formData[ew.TOKEN_NAME_KEY] = ew.TOKEN_NAME; // Add token name for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n\r\n    formData[ew.ANTIFORGERY_TOKEN_KEY] = ew.ANTIFORGERY_TOKEN; // Add antiforgery token for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n\r\n    var options = ew.importUploadOptions;\r\n    if (!options.acceptFileTypes) options.acceptFileTypes = new RegExp('\\\\.(' + ew.IMPORT_FILE_ALLOWED_EXT.replace(/,/g, '|') + ')$', 'i');\r\n\r\n    if (!$input.data(\"blueimpFileupload\")) {\r\n      $input.fileupload(Object.assign({\r\n        url: getApiUrl(ew.API_UPLOAD_ACTION),\r\n        dataType: \"json\",\r\n        autoUpload: true,\r\n        formData: formData,\r\n        singleFileUploads: false,\r\n        messages: {\r\n          acceptFileTypes: ew.language.phrase(\"UploadErrMsgAcceptFileTypes\"),\r\n          maxFileSize: ew.language.phrase(\"UploadErrMsgMaxFileSize\"),\r\n          maxNumberOfFiles: ew.language.phrase(\"UploadErrMsgMaxNumberOfFiles\"),\r\n          minFileSize: ew.language.phrase(\"UploadErrMsgMinFileSize\")\r\n        },\r\n        beforeSend: function beforeSend(jqxhr, settings) {\r\n          if (ew.API_JWT_TOKEN && !ew.IS_WINDOWS_AUTHENTICATION) // Do NOT set JWT authorization header if Windows Authentication\r\n            jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n        },\r\n        done: function done(e, data) {\r\n          if (data.result && data.result.files && Array.isArray(data.result.files.importfiles)) {\r\n            var ok = true;\r\n            data.result.files.importfiles.forEach(function (file, index) {\r\n              if (file.error) {\r\n                showMessage(ew.language.phrase(\"ImportMessageUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error), \"text-danger\");\r\n                ok = false;\r\n              }\r\n            }); // Show upload errors for each file\r\n\r\n            if (ok) importFiles(data.result[ew.API_FILE_TOKEN_NAME]); // Import uploaded files\r\n          }\r\n        },\r\n        change: function change(e, data) {\r\n          hideMessage();\r\n        },\r\n        processfail: function processfail(e, data) {\r\n          data.files.forEach(function (file, index) {\r\n            if (file.error) showMessage(ew.language.phrase(\"ImportMessageUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error), \"text-danger\");\r\n          }); // Show process errors for each file\r\n        },\r\n        fail: function fail(e, data) {\r\n          showMessage(ew.language.phrase(\"ImportMessageServerError\").replace(\"%s\", data.textStatus).replace(\"%t\", data.errorThrown), \"text-danger\");\r\n        },\r\n        progressall: function progressall(e, data) {\r\n          uploadProgress(data);\r\n        }\r\n      }, options));\r\n    }\r\n\r\n    $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr);\r\n    $dlg.find(\".modal-footer .ew-close-btn\").off(\"click.ew\").on(\"click.ew\", function () {\r\n      var $this = $__default['default'](this);\r\n\r\n      if ($this.data(\"imported\")) {\r\n        $this.data(\"imported\", false);\r\n        window.location.reload();\r\n      }\r\n    });\r\n    hideMessage();\r\n    ew.importDialog = $dlg.modal(\"show\");\r\n    return false;\r\n  } // Auto-fill\r\n\r\n  function autoFill(el) {\r\n    var f = forms.get(el).$element[0];\r\n    if (!f) return;\r\n    var ar = getOptionValues(el),\r\n        id = getId(el),\r\n        m = id.match(/^([xy])(\\d*)_/),\r\n        rowindex = m ? m[2] : \"\",\r\n        list = forms.get(el).getList(id),\r\n        dest_array = list.autoFillTargetFields;\r\n\r\n    var success = function success(data) {\r\n      var results = data && data.records || \"\";\r\n      var result = results ? results[0] : [];\r\n\r\n      for (var j = 0; j < dest_array.length; j++) {\r\n        var destEl = getElements(dest_array[j].replace(/^x_/, \"x\" + rowindex + \"_\"), f);\r\n\r\n        if (destEl) {\r\n          var val = $__default['default'].isValue(result[\"af\" + j]) ? String(result[\"af\" + j]) : \"\";\r\n          var args = {\r\n            results: results,\r\n            result: result,\r\n            data: val,\r\n            form: f,\r\n            name: id,\r\n            target: dest_array[j],\r\n            cancel: false,\r\n            trigger: true\r\n          };\r\n          $__default['default'](el).trigger(\"autofill\", [args]); // Fire event\r\n\r\n          if (args.cancel) continue;\r\n          val = args.data; // Process the value\r\n\r\n          if (destEl.options) {\r\n            // Selection list\r\n            selectOption(destEl, val.split(\",\"));\r\n\r\n            if (isAutoSuggest(destEl)) {\r\n              // Auto-Suggest\r\n              destEl.input.value = val;\r\n              updateOptions.call(forms.get(f.id), destEl);\r\n            } else if (isModalLookup(destEl)) {\r\n              // Modal-Lookup\r\n              //$(destEl).parent().find(\".ew-lookup-text\").html(val);\r\n              updateOptions.call(forms.get(f.id), destEl);\r\n            }\r\n          } else if (isHiddenTextArea(destEl)) {\r\n            // HTML editor\r\n            destEl.value = val;\r\n            $__default['default'](destEl).data(\"editor\").set();\r\n          } else {\r\n            destEl.value = val;\r\n          }\r\n\r\n          if (args.trigger) $__default['default'](destEl).trigger(\"change\");\r\n        }\r\n      }\r\n\r\n      return result;\r\n    };\r\n\r\n    if (ar.length > 0 && ar[0] != \"\") {\r\n      var data = Object.assign({\r\n        page: list.page,\r\n        field: list.field,\r\n        ajax: \"autofill\",\r\n        v0: ar[0],\r\n        language: ew.LANGUAGE_ID\r\n      }, getUserParams('#p_' + id, f)); // Add parent field values\r\n\r\n      var parentId = list.parentFields.slice(); // Clone\r\n\r\n      if (rowindex != \"\") {\r\n        for (var i = 0, len = parentId.length; i < len; i++) {\r\n          var ar = parentId[i].split(\" \");\r\n          if (ar.length == 1) // Parent field in the same table, add row index\r\n            parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n        }\r\n      }\r\n\r\n      var arp = parentId.map(function (pid) {\r\n        return getOptionValues(pid, f);\r\n      });\r\n\r\n      for (var i = 0, cnt = arp.length; i < cnt; i++) {\r\n        // Filter by parent fields\r\n        data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n      }\r\n\r\n      return $__default['default'].post(getApiUrl(ew.API_LOOKUP_ACTION), data, success, \"json\");\r\n    }\r\n\r\n    return success();\r\n  } // Setup tooltip links\r\n\r\n  function tooltip(i, el) {\r\n    var $this = $__default['default'](el),\r\n        $tt = $__default['default'](\"#\" + $this.data(\"tooltip-id\")),\r\n        trig = $this.data(\"trigger\") || \"hover\",\r\n        dir = $this.data(\"placement\") || (ew.CSS_FLIP ? \"left\" : \"right\"); // dir = \"left|right\"\r\n\r\n    if (!$tt[0] || $tt.text().trim() == \"\" && !$tt.find(\"img[src!='']\")[0]) return;\r\n\r\n    if (!$this.data(\"bs.popover\")) {\r\n      $this.popover({\r\n        html: true,\r\n        placement: dir,\r\n        trigger: trig,\r\n        delay: 100,\r\n        container: $__default['default'](\"#ew-tooltip\")[0],\r\n        content: $tt.html(),\r\n        sanitizeFn: ew.sanitizeFn\r\n      }).on(\"show.bs.popover\", function (e) {\r\n        var wd,\r\n            $tip = $__default['default']($this.data(\"bs.popover\").getTipElement()).css(\"z-index\", 9999); // Make z-index higher than modal dialog\r\n\r\n        if (wd = $this.data(\"tooltip-width\")) // Set width before show\r\n          $tip.css(\"max-width\", parseInt(wd, 10) + \"px\");\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Show dialog for email sending\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {string} args.lnk - Email link ID\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {string} args.url - URL of the email content\r\n   * @param {HTMLElement} args.f - Form\r\n   * @param {Object} args.key - Key as object\r\n   * @param {boolean} args.sel - Exported selected\r\n   * @returns false\r\n   */\r\n\r\n  function emailDialogShow(args) {\r\n    var $dlg = ew.emailDialog || $__default['default'](\"#ew-email-dialog\");\r\n\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-email-dialog not found.\");\r\n\r\n      return false;\r\n    }\r\n\r\n    if (args.sel && !keySelected(args.f)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    var $f = $dlg.find(\".modal-body form\"),\r\n        frm = $f.data(\"form\");\r\n\r\n    if (!frm) {\r\n      frm = new Form($f.attr(\"id\"));\r\n      frm.addFields([[\"sender\", [ew.Validators.required(ew.language.phrase(\"Sender\")), ew.Validators.email]], [\"recipient\", [ew.Validators.required(ew.language.phrase(\"Recipient\")), ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperRecipientEmail\"))]], [\"cc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperCcEmail\"))], [\"bcc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperBccEmail\"))], [\"subject\", ew.Validators.required(ew.language.phrase(\"Subject\"))]]);\r\n\r\n      frm.validate = function () {\r\n        return this.validateFields();\r\n      };\r\n\r\n      frm.submit = function (e) {\r\n        if (!this.validate()) return false;\r\n        var qs = $f.serialize(),\r\n            data = \"\";\r\n        if (args.f && args.sel) // Export selected\r\n          data = $__default['default'](args.f).find(\"input[type=checkbox][name='key_m[]']:checked\").serialize();\r\n        if (args.key) qs += \"&\" + $__default['default'].param(args.key);\r\n        var fobj = this.getForm();\r\n\r\n        if (args.url) {\r\n          // Custom Template\r\n          $dlg.modal(\"hide\");\r\n          if (args.exportid) ew.exportWithCharts(args.el, args.url, args.exportid, fobj);else _export(args.f, args.url, \"email\", true, args.sel, fobj);\r\n        } else {\r\n          $__default['default'].post($__default['default'](args.f).attr(\"action\"), qs + \"&\" + data, function (result) {\r\n            showMessage(result);\r\n          });\r\n        }\r\n\r\n        return true;\r\n      };\r\n\r\n      $f.data(\"form\", frm);\r\n    }\r\n\r\n    $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr);\r\n    $dlg.find(\".modal-footer .btn-primary\").off().click(function (e) {\r\n      e.preventDefault();\r\n      if (frm.submit(e)) $dlg.modal(\"hide\");\r\n    });\r\n    ew.emailDialog = $dlg.modal(\"show\");\r\n    return false;\r\n  } // Show drill down\r\n\r\n  function showDrillDown(e, obj, url, id, hdr) {\r\n    if (e && e.ctrlKey) {\r\n      var arUrl = url.split(\"?\"),\r\n          params = new URLSearchParams(arUrl[1]);\r\n      params.set(\"d\", \"2\"); // Change d parameter to 2\r\n\r\n      redirect(arUrl[0] + \"?\" + params.toString());\r\n      return false;\r\n    }\r\n\r\n    var $obj = $__default['default'].isString(obj) ? $__default['default'](\"#\" + obj) : $__default['default'](obj);\r\n    var pos = $obj.data(\"drilldown-placement\") || ($obj.hasClass(\"ew-chart-canvas\") ? ew.CSS_FLIP ? \"left\" : \"right\" : \"bottom\");\r\n    $obj.tooltip(\"hide\");\r\n    var args = {\r\n      \"obj\": $obj[0],\r\n      \"id\": id,\r\n      \"url\": url,\r\n      \"hdr\": hdr,\r\n      \"placement\": pos\r\n    };\r\n    $document.trigger(\"drilldown\", [args]);\r\n    var ar = args.url.split(\"?\");\r\n    args.file = ar[0] || \"\";\r\n    args.data = ar[1] || \"\";\r\n\r\n    if (!$obj.data(\"bs.popover\")) {\r\n      $obj.popover({\r\n        html: true,\r\n        placement: args.placement,\r\n        trigger: \"manual\",\r\n        template: '<div class=\"popover\"><h3 class=\"popover-header d-none\" style=\"cursor: move;\"></h3><div class=\"popover-body\"></div></div>',\r\n        content: '<div class=\"' + ew.spinnerClass + ' m-3 ew-loading\" role=\"status\"><span class=\"sr-only\">' + ew.language.phrase(\"Loading\") + '</span></div>',\r\n        container: $__default['default'](\"#ew-drilldown-panel\"),\r\n        sanitizeFn: ew.sanitizeFn,\r\n        boundary: \"viewport\"\r\n      }).on(\"show.bs.popover\", function (e) {\r\n        $obj.attr(\"data-original-title\", \"\");\r\n      }).on(\"shown.bs.popover\", function (e) {\r\n        if (!$obj.data(\"args\")) return;\r\n        var data = $obj.data(\"args\").data;\r\n        data += (data ? \"&\" : \"\") + ew.TOKEN_NAME_KEY + \"=\" + ew.TOKEN_NAME; // Add token name // PHP\r\n\r\n        data += (data ? \"&\" : \"\") + ew.ANTIFORGERY_TOKEN_KEY + \"=\" + ew.ANTIFORGERY_TOKEN; // Add antiforgery token // PHP\r\n\r\n        $__default['default'].ajax({\r\n          cache: false,\r\n          dataType: \"html\",\r\n          type: \"POST\",\r\n          data: data,\r\n          url: $obj.data(\"args\").file,\r\n          success: function success(data) {\r\n            var $tip = $__default['default']($obj.data(\"bs.popover\").getTipElement()).on(\"mousedown\", function (e) {\r\n              var $this = $__default['default'](this).addClass(\"drag\"),\r\n                  height = $this.outerHeight(),\r\n                  width = $this.outerWidth(),\r\n                  ypos = $this.offset().top + height - e.pageY,\r\n                  xpos = $this.offset().left + width - e.pageX;\r\n              $body.on(\"mousemove\", function (e) {\r\n                var top = e.pageY + ypos - height,\r\n                    left = e.pageX + xpos - width;\r\n                if ($this.hasClass(\"drag\")) $this.offset({\r\n                  top: top,\r\n                  left: left\r\n                });\r\n              }).on(\"mouseup\", function (e) {\r\n                $this.removeClass(\"drag\");\r\n              });\r\n            });\r\n            if (args.hdr) $tip.find(\".popover-header\").empty().removeClass(\"d-none\").append('<button type=\"button\" class=\"close\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>' + args.hdr).find(\".close\").on(\"click\", function () {\r\n              $obj.popover(\"hide\");\r\n            });\r\n            var m = data.match(/<body[^>]*>([\\s\\S]*?)<\\/body\\s*>/i); // Use HTML in document body only\r\n\r\n            data = m ? m[0] : data;\r\n            var html = ew.stripScript(data);\r\n            $tip.find(\".popover-body\").html($__default['default'](\"<div></div>\").html(html).find(\"#ew-report\")) // Insert the container table only\r\n            .find(\".ew-table\").each(ew.setupTable);\r\n            ew.executeScript(data, id);\r\n            $obj.popover(\"update\");\r\n          },\r\n          error: function error(o) {\r\n            if (o.responseText) {\r\n              var $tip = $__default['default']($el.data(\"bs.popover\").getTipElement());\r\n              $tip.find(\".popover-body\").empty().append('<p class=\"text-danger\">' + o.responseText + '</p>');\r\n            }\r\n          }\r\n        });\r\n      }).on(\"hidden.bs.popover\", function (e) {\r\n        $__default['default'].each(ew.drillDownCharts, function (key, cht) {\r\n          // Dispose charts\r\n          cht.dispose();\r\n        });\r\n        ew.drillDownCharts = {};\r\n        ew.removeScript(id);\r\n      });\r\n    }\r\n\r\n    $obj.data(\"args\", args).popover(\"show\");\r\n  }\r\n  /**\r\n   * Ajax query\r\n   * @param {Object} data - object to passed to API\r\n   * @param {callback} callback - Callback function for async request (see http://api.jquery.com/jQuery.post/), empty for sync request\r\n   * @returns {string|string[]}\r\n   */\r\n\r\n  function ajax(data, callback) {\r\n    if (!$__default['default'].isObject(data) || !data.url && !data.action) return undefined;\r\n    var action;\r\n\r\n    if (data.url) {\r\n      if (data.url.startsWith(getApiUrl())) action = data.url.replace(getApiUrl(), \"\").split(\"/\")[0];else if (data.url.startsWith(ew.API_URL)) action = data.url.replace(ew.API_URL, \"\").split(\"/\")[0];\r\n    } else {\r\n      action = data.action;\r\n      delete data.action;\r\n    }\r\n\r\n    var obj = Object.assign({}, data);\r\n\r\n    var _convert = function _convert(response) {\r\n      if ($__default['default'].isObject(response) && response.result == \"OK\") {\r\n        var results = response.records;\r\n\r\n        if (Array.isArray(results) && results.length == 1) {\r\n          // Single row\r\n          results = results[0];\r\n          if (Array.isArray(results) && results.length == 1) // Single column\r\n            return results[0]; // Return a value\r\n          else return results; // Return a row\r\n        }\r\n\r\n        return results;\r\n      }\r\n\r\n      return response;\r\n    };\r\n\r\n    var url = obj.url || getApiUrl(action),\r\n        // URL\r\n    type = obj.type || ([ew.API_LIST_ACTION, ew.API_VIEW_ACTION, ew.API_DELETE_ACTION].includes(action) ? \"GET\" : \"POST\");\r\n    delete obj.url;\r\n    delete obj.type;\r\n    obj.dataType = \"json\";\r\n\r\n    if (isFunction(callback)) {\r\n      // Async\r\n      $__default['default'].ajax({\r\n        url: url,\r\n        type: type,\r\n        data: obj,\r\n        success: function success(response) {\r\n          callback(_convert(response));\r\n        }\r\n      });\r\n    } else {\r\n      // Sync\r\n      var response = $__default['default'].ajax({\r\n        url: url,\r\n        async: false,\r\n        type: type,\r\n        data: obj\r\n      });\r\n      return _convert(response.responseJSON);\r\n    }\r\n  } // Get URL of current page\r\n\r\n  function currentPage() {\r\n    return location.href.split(\"#\")[0].split(\"?\")[0];\r\n  } // Toggle search operator\r\n\r\n  function toggleSearchOperator(id, value) {\r\n    var el = this.form.elements[id];\r\n    if (!el) return;\r\n    el.value = el.value != value ? value : \"=\";\r\n  } // Validators\r\n  // Check US Date format (mm/dd/yyyy)\r\n\r\n  function checkUSDate(object_value) {\r\n    return checkDateEx(object_value, \"us\", ew.DATE_SEPARATOR);\r\n  } // Check US Date format (mm/dd/yy)\r\n\r\n  function checkShortUSDate(object_value) {\r\n    return checkDateEx(object_value, \"usshort\", ew.DATE_SEPARATOR);\r\n  } // Check Date format (yyyy/mm/dd)\r\n\r\n  function checkDate(object_value) {\r\n    return checkDateEx(object_value, \"std\", ew.DATE_SEPARATOR);\r\n  } // Check Date format (yy/mm/dd)\r\n\r\n  function checkShortDate(object_value) {\r\n    return checkDateEx(object_value, \"stdshort\", ew.DATE_SEPARATOR);\r\n  } // Check Euro Date format (dd/mm/yyyy)\r\n\r\n  function checkEuroDate(object_value) {\r\n    return checkDateEx(object_value, \"euro\", ew.DATE_SEPARATOR);\r\n  } // Check Euro Date format (dd/mm/yy)\r\n\r\n  function checkShortEuroDate(object_value) {\r\n    return checkDateEx(object_value, \"euroshort\", ew.DATE_SEPARATOR);\r\n  } // Check default date format\r\n\r\n  function checkDateDef(object_value) {\r\n    if (ew.DATE_FORMAT.match(/^yyyy/)) return checkDate(object_value);else if (ew.DATE_FORMAT.match(/^yy/)) return checkShortDate(object_value);else if (ew.DATE_FORMAT.match(/^m/) && ew.DATE_FORMAT.match(/yyyy$/)) return checkUSDate(object_value);else if (ew.DATE_FORMAT.match(/^m/) && ew.DATE_FORMAT.match(/yy$/)) return checkShortUSDate(object_value);else if (ew.DATE_FORMAT.match(/^d/) && ew.DATE_FORMAT.match(/yyyy$/)) return checkEuroDate(object_value);else if (ew.DATE_FORMAT.match(/^d/) && ew.DATE_FORMAT.match(/yy$/)) return checkShortEuroDate(object_value);\r\n    return false;\r\n  } // Check date format\r\n  // format: std/stdshort/us/usshort/euro/euroshort\r\n\r\n  function checkDateEx(value, format, sep) {\r\n    if (!value || value.length == \"\") return true;\r\n    value = value.replace(/ +/g, \" \").trim();\r\n    var arDT = value.split(\" \");\r\n\r\n    if (arDT.length > 0) {\r\n      var re, ar, sYear, sMonth, sDay;\r\n      re = /^(\\d{4})-([0][1-9]|[1][0-2])-([0][1-9]|[1|2]\\d|[3][0|1])$/;\r\n\r\n      if (ar = re.exec(arDT[0])) {\r\n        sYear = ar[1];\r\n        sMonth = ar[2];\r\n        sDay = ar[3];\r\n      } else {\r\n        var wrksep = escapeRegExChars(sep);\r\n\r\n        switch (format) {\r\n          case \"std\":\r\n            re = new RegExp(\"^(\\\\d{4})\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])$\");\r\n            break;\r\n\r\n          case \"stdshort\":\r\n            re = new RegExp(\"^(\\\\d{2})\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])$\");\r\n            break;\r\n\r\n          case \"us\":\r\n            re = new RegExp(\"^([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"(\\\\d{4})$\");\r\n            break;\r\n\r\n          case \"usshort\":\r\n            re = new RegExp(\"^([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"(\\\\d{2})$\");\r\n            break;\r\n\r\n          case \"euro\":\r\n            re = new RegExp(\"^([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"(\\\\d{4})$\");\r\n            break;\r\n\r\n          case \"euroshort\":\r\n            re = new RegExp(\"^([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"(\\\\d{2})$\");\r\n            break;\r\n        }\r\n\r\n        if (!re.test(arDT[0])) return false;\r\n        var arD = arDT[0].split(sep);\r\n\r\n        switch (format) {\r\n          case \"std\":\r\n          case \"stdshort\":\r\n            sYear = unformatYear(arD[0]);\r\n            sMonth = arD[1];\r\n            sDay = arD[2];\r\n            break;\r\n\r\n          case \"us\":\r\n          case \"usshort\":\r\n            sYear = unformatYear(arD[2]);\r\n            sMonth = arD[0];\r\n            sDay = arD[1];\r\n            break;\r\n\r\n          case \"euro\":\r\n          case \"euroshort\":\r\n            sYear = unformatYear(arD[2]);\r\n            sMonth = arD[1];\r\n            sDay = arD[0];\r\n            break;\r\n        }\r\n      }\r\n\r\n      if (!checkDay(sYear, sMonth, sDay)) return false;\r\n    }\r\n\r\n    if (arDT.length > 1 && !checkTime(arDT[1])) return false;\r\n    return true;\r\n  } // Unformat 2 digit year to 4 digit year\r\n\r\n  function unformatYear(yr) {\r\n    if (yr.length == 2) return yr > ew.UNFORMAT_YEAR ? \"19\" + yr : \"20\" + yr;\r\n    return yr;\r\n  } // Check day\r\n\r\n  function checkDay(checkYear, checkMonth, checkDay) {\r\n    checkYear = parseInt(checkYear, 10);\r\n    checkMonth = parseInt(checkMonth, 10);\r\n    checkDay = parseInt(checkDay, 10);\r\n    var maxDay = [4, 6, 9, 11].includes(checkMonth) ? 30 : 31;\r\n    if (checkMonth == 2) maxDay = checkYear % 4 > 0 || checkYear % 100 == 0 && checkYear % 400 > 0 ? 28 : 29;\r\n    return checkRange(checkDay, 1, maxDay);\r\n  } // Check integer\r\n\r\n  function checkInteger(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    if (object_value.includes(ew.DECIMAL_POINT)) return false;\r\n    return checkNumber(object_value);\r\n  } // Check number\r\n\r\n  function checkNumber(object_value) {\r\n    object_value = String(object_value);\r\n    if (!object_value || object_value.length == 0) return true;\r\n    object_value = object_value.trim();\r\n    var ts = escapeRegExChars(ew.THOUSANDS_SEP),\r\n        dp = escapeRegExChars(ew.DECIMAL_POINT),\r\n        re = new RegExp(\"^[+-]?(\\\\d{1,3}(\" + (ts ? ts + \"?\" : \"\") + \"\\\\d{3})*(\" + dp + \"\\\\d+)?|\" + dp + \"\\\\d+)$\");\r\n    return re.test(object_value);\r\n  } // Convert to float\r\n\r\n  function stringToFloat(object_value) {\r\n    object_value = String(object_value);\r\n\r\n    if (ew.THOUSANDS_SEP != \"\") {\r\n      var re = new RegExp(escapeRegExChars(ew.THOUSANDS_SEP), \"g\");\r\n      object_value = object_value.replace(re, \"\");\r\n    }\r\n\r\n    if (ew.DECIMAL_POINT != \"\") object_value = object_value.replace(ew.DECIMAL_POINT, \".\");\r\n    return parseFloat(object_value);\r\n  } // Convert string (yyyy-mm-dd hh:mm:ss) to date object\r\n\r\n  function stringToDate(object_value) {\r\n    var re = /^(\\d{4})-([0][1-9]|[1][0-2])-([0][1-9]|[1|2]\\d|[3][0|1]) (?:(0\\d|1\\d|2[0-3]):([0-5]\\d):([0-5]\\d))?$/;\r\n    var ar = object_value.replace(re, \"$1 $2 $3 $4 $5 $6\").split(\" \");\r\n    return new Date(ar[0], ar[1] - 1, ar[2], ar[3], ar[4], ar[5]);\r\n  } // Escape regular expression chars\r\n\r\n  function escapeRegExChars(str) {\r\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\r\n  } // Check range\r\n\r\n  function checkRange(object_value, min_value, max_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n\r\n    if ($__default['default'].isNumber(min_value) || $__default['default'].isNumber(max_value)) {\r\n      // Number\r\n      if (checkNumber(object_value)) object_value = stringToFloat(object_value);\r\n    }\r\n\r\n    if (!$__default['default'].isNull(min_value) && object_value < min_value) return false;\r\n    if (!$__default['default'].isNull(max_value) && object_value > max_value) return false;\r\n    return true;\r\n  } // Check time\r\n\r\n  function checkTime(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    object_value = object_value.trim();\r\n    var re = new RegExp('^(0\\\\d|1\\\\d|2[0-3])' + escapeRegExChars(ew.TIME_SEPARATOR) + '[0-5]\\\\d(( (' + escapeRegExChars(ew.language.phrase(\"AM\")) + '|' + escapeRegExChars(ew.language.phrase(\"PM\")) + '))|(' + escapeRegExChars(ew.TIME_SEPARATOR) + '[0-5]\\\\d(\\\\.\\\\d+|[+-][\\\\d:]+)?)?)$', 'i');\r\n    return re.test(object_value);\r\n  } // Check phone\r\n\r\n  function checkPhone(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^\\(\\d{3}\\) ?\\d{3}( |-)?\\d{4}|^\\d{3}( |-)?\\d{3}( |-)?\\d{4}$/.test(object_value.trim());\r\n  } // Check zip\r\n\r\n  function checkZip(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^\\d{5}$|^\\d{5}-\\d{4}$/.test(object_value.trim());\r\n  } // Check credit card\r\n\r\n  function checkCreditCard(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    var creditcard_string = object_value.replace(/\\D/g, \"\");\r\n    if (creditcard_string.length == 0) return false;\r\n    var doubledigit = creditcard_string.length % 2 == 1 ? false : true;\r\n    var tempdigit,\r\n        checkdigit = 0;\r\n\r\n    for (var i = 0, len = creditcard_string.length; i < len; i++) {\r\n      tempdigit = parseInt(creditcard_string.charAt(i), 10);\r\n\r\n      if (doubledigit) {\r\n        tempdigit *= 2;\r\n        checkdigit += tempdigit % 10;\r\n        if (tempdigit / 10 >= 1.0) checkdigit++;\r\n        doubledigit = false;\r\n      } else {\r\n        checkdigit += tempdigit;\r\n        doubledigit = true;\r\n      }\r\n    }\r\n\r\n    return checkdigit % 10 == 0;\r\n  } // Check social security number\r\n\r\n  function checkSsn(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^(?!000)([0-6]\\d{2}|7([0-6]\\d|7[012]))([ -]?)(?!00)\\d\\d\\3(?!0000)\\d{4}$/.test(object_value.trim());\r\n  } // Check emails\r\n\r\n  function checkEmails(object_value, email_cnt) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    var arEmails = object_value.replace(/,/g, \";\").split(\";\");\r\n\r\n    for (var i = 0, len = arEmails.length; i < len; i++) {\r\n      if (email_cnt > 0 && len > email_cnt) return false;\r\n      if (!checkEmail(arEmails[i])) return false;\r\n    }\r\n\r\n    return true;\r\n  } // Check email\r\n\r\n  function checkEmail(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^[\\w.%+-]+@[\\w.-]+\\.[A-Z]{2,18}$/i.test(object_value.trim());\r\n  } // Check GUID {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}\r\n\r\n  function checkGuid(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^(\\{\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12}\\}|\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12})$/.test(object_value.trim());\r\n  } // Check by regular expression\r\n\r\n  function checkByRegEx(object_value, pattern) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return !!object_value.match(pattern);\r\n  }\r\n  /**\r\n   * Show message dialog\r\n   *\r\n   * @param {Event|string} arg - Event or message\r\n   * @returns\r\n   */\r\n\r\n  function showMessage(arg) {\r\n    var _arg$target;\r\n\r\n    var doc, swal;\r\n\r\n    try {\r\n      var win = window.parent; // Note: If a window does not have a parent, its parent property is a reference to itself.\r\n\r\n      doc = win.document;\r\n      swal = win.Swal;\r\n    } catch (e) {\r\n      // In case win.document cannot be accessed\r\n      doc = window.document;\r\n      swal = window.Swal;\r\n    }\r\n\r\n    var p = (_arg$target = arg === null || arg === void 0 ? void 0 : arg.target) !== null && _arg$target !== void 0 ? _arg$target : doc,\r\n        $div = $__default['default'](p).find(\"div.ew-message-dialog:hidden\").first(),\r\n        msg = $div.length ? $div.text() : \"\"; // Text only\r\n\r\n    if ($__default['default'].isString(arg)) msg = $__default['default'](\"<div>\" + arg.trim() + \"</div>\").text();\r\n    if (msg.trim() == \"\") return;\r\n\r\n    if ($div.length) {\r\n      [\"success\", \"info\", \"warning\", \"danger\"].forEach(function (value, index) {\r\n        var $alert = $div.find(\".alert-\" + value).toggleClass(\"alert-\" + value),\r\n            $heading = $alert.find(\".alert-heading\").detach(),\r\n            $content = $alert.children(\":not(.icon)\");\r\n        $alert.find(\".icon\").remove();\r\n\r\n        if ($alert[0]) {\r\n          var w = parseInt($content.css(\"width\"), 10); // Width specified\r\n\r\n          if (w > 0) $content.first().css(\"width\", \"auto\");\r\n          var $toast = toast({\r\n            class: \"ew-toast bg-\" + value,\r\n            title: $heading[0] ? $heading.html() : ew.language.phrase(value),\r\n            body: $alert.html(),\r\n            autohide: value == \"success\" ? ew.autoHideSuccessMessage : false,\r\n            // Autohide for success message\r\n            delay: value == \"success\" ? ew.autoHideSuccessMessageDelay : 500\r\n          });\r\n          if (w > 0) $toast.css(\"max-width\", w); // Override bootstrap .toast max-width\r\n\r\n          return;\r\n        }\r\n      });\r\n    }\r\n\r\n    if ($__default['default'].isString(arg)) {\r\n      return swal.fire(_objectSpread$2(_objectSpread$2({}, ew.sweetAlertSettings), {}, {\r\n        html: arg\r\n      }));\r\n    }\r\n  } // Random number\r\n\r\n  function random() {\r\n    return Math.floor(Math.random() * 100001) + 100000;\r\n  } // File upload\r\n\r\n  function upload(input) {\r\n    var $input = $__default['default'](input);\r\n    if ($input.data(\"blueimpFileupload\")) return;\r\n    var id = $input.attr(\"name\"),\r\n        nid = id.replace(/\\$/g, \"\\\\$\"),\r\n        tbl = $input.data(\"table\"),\r\n        multiple = $input.is(\"[multiple]\"),\r\n        $p = $input.closest(\".form-group, [id^='el']\"),\r\n        readonly = $input.prop(\"disabled\") || $input.closest(\"form\").find(\"#confirm\").val() == \"confirm\",\r\n        $ft = $p.find(\"#ft_\" + nid),\r\n        $fn = $p.find(\"#fn_\" + nid),\r\n        $fa = $p.find(\"#fa_\" + nid),\r\n        $fs = $p.find(\"#fs_\" + nid),\r\n        $exts = $p.find(\"#fx_\" + nid),\r\n        $maxsize = $p.find(\"#fm_\" + nid),\r\n        $maxfilecount = $p.find(\"#fc_\" + nid),\r\n        $label = $p.find(\".custom-file-label\"),\r\n        label = $label.html();\r\n\r\n    var _done = function _done(e, data) {\r\n      if (data.result.files[0].error) return;\r\n      var name = data.result.files[0].name;\r\n      var ar = multiple ? $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [] : [];\r\n      ar.push(name);\r\n      $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n      $fa.val(\"0\");\r\n      if (!multiple) // Remove other entries if not multiple upload\r\n        $ft.find(\"tbody > tr:not(:last-child)\").remove();\r\n    };\r\n\r\n    var _deleted = function _deleted(e, data) {\r\n      var url = $__default['default'](e.originalEvent.target).data(\"url\"),\r\n          param = new URLSearchParams(url.split(\"?\")[1]),\r\n          fid = param.get(\"id\"),\r\n          name = param.get(fid);\r\n\r\n      if (name) {\r\n        var ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n        var index = ar.indexOf(name);\r\n        if (index > -1) ar.splice(index, 1);\r\n        $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n        $fa.val(\"0\");\r\n      }\r\n    };\r\n\r\n    var _change = function _change(e, data) {\r\n      var _data$files;\r\n\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files = data.files) === null || _data$files === void 0 ? void 0 : _data$files.length) > 0);\r\n      var ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n\r\n      for (var i = 0; i < data.files.length; i++) {\r\n        ar.push(data.files[i].name);\r\n      }\r\n\r\n      var cnt = parseInt($maxfilecount.val(), 10);\r\n\r\n      if ($__default['default'].isNumber(cnt) && cnt > 0 && ar.length > cnt) {\r\n        _alert(ew.language.phrase(\"UploadErrMsgMaxNumberOfFiles\"));\r\n\r\n        return false;\r\n      }\r\n\r\n      var l = parseInt($fs.val(), 10);\r\n\r\n      if ($__default['default'].isNumber(l) && l > 0 && ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR).length > l) {\r\n        _alert(ew.language.phrase(\"UploadErrMsgMaxFileLength\"));\r\n\r\n        return false;\r\n      }\r\n    };\r\n\r\n    var _confirmDelete = function _confirmDelete(e) {\r\n      if (!multiple && $fn.val()) {\r\n        if (!confirm(ew.language.phrase(\"UploadOverwrite\"))) {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }\r\n      }\r\n    };\r\n\r\n    var _changed = function _changed(e, data) {\r\n      var _data$files2, _data$result, _data$result$files;\r\n\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files2 = data.files) === null || _data$files2 === void 0 ? void 0 : _data$files2.length) > 0 || ((_data$result = data.result) === null || _data$result === void 0 ? void 0 : (_data$result$files = _data$result.files) === null || _data$result$files === void 0 ? void 0 : _data$result$files.length) > 0);\r\n      var ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n      $label.html(ar.join(\", \") || label);\r\n    }; // var _clicked = function() {\r\n    //     $input.closest(\"span.fileinput-button\").tooltip(\"hide\");\r\n    // };\r\n    // var _process = function(e, data) {\r\n    //     $ft.toggleClass(\"ew-has-rows\", data.files?.length > 0);\r\n    // };\r\n\r\n    var _downloadTemplate = $__default['default'].templates(\"#template-download\"),\r\n        _uploadTemplate = $__default['default'].templates(\"#template-upload\");\r\n\r\n    var _completed = function _completed(e, data) {\r\n      // After download template rendered\r\n      var e = {\r\n        target: data.context\r\n      };\r\n      initLightboxes(e);\r\n      initPdfObjects(e);\r\n      ew.updateDropdownPosition();\r\n      data.context.find(\"img\").on(\"load\", ew.updateDropdownPosition);\r\n    };\r\n\r\n    var _added = function _added(e, data) {\r\n      var _data$files3;\r\n\r\n      // After upload template rendered\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files3 = data.files) === null || _data$files3 === void 0 ? void 0 : _data$files3.length) > 0);\r\n      data.context.find(\".start\").click(_confirmDelete);\r\n    }; // Hide input button if readonly\r\n\r\n    var form = getForm(input),\r\n        $form = $__default['default'](form),\r\n        readonly = $form.find(\"#confirm\").val() == \"confirm\" || $input.attr(\"readonly\");\r\n    if (readonly) $input.prop(\"disabled\", true); // $form.find(\"span.fileinput-button\").hide();\r\n\r\n    var cnt = parseInt($maxfilecount.val(), 10);\r\n    var uploadUrl = getApiUrl(ew.API_JQUERY_UPLOAD_ACTION);\r\n    var formData = {\r\n      id: id,\r\n      table: tbl,\r\n      session: ew.SESSION_ID,\r\n      replace: multiple ? \"0\" : \"1\",\r\n      exts: $exts.val(),\r\n      maxsize: $maxsize.val(),\r\n      maxfilecount: $maxfilecount.val()\r\n    };\r\n    $input.fileupload({\r\n      url: uploadUrl,\r\n      type: \"POST\",\r\n      multipart: true,\r\n      autoUpload: true,\r\n      // Comment out to disable auto upload\r\n      loadImageFileTypes: /^image\\/(gif|jpe?g|png)$/i,\r\n      loadVideoFileTypes: /^video\\/mp4$/i,\r\n      loadAudioFileTypes: /^audio\\/(mpeg|mp3)$/i,\r\n      acceptFileTypes: $exts.val() ? new RegExp('\\\\.(' + $exts.val().replace(/,/g, '|') + ')$', 'i') : null,\r\n      maxFileSize: parseInt($maxsize.val(), 10),\r\n      maxNumberOfFiles: cnt > 1 ? cnt : null,\r\n      filesContainer: $ft,\r\n      formData: formData,\r\n      uploadTemplateId: null,\r\n      downloadTemplateId: null,\r\n      uploadTemplate: _uploadTemplate.render.bind(_uploadTemplate),\r\n      downloadTemplate: _downloadTemplate.render.bind(_downloadTemplate),\r\n      previewMaxWidth: ew.UPLOAD_THUMBNAIL_WIDTH,\r\n      previewMaxHeight: ew.UPLOAD_THUMBNAIL_HEIGHT,\r\n      dropZone: $p,\r\n      pasteZone: $p,\r\n      messages: {\r\n        acceptFileTypes: ew.language.phrase(\"UploadErrMsgAcceptFileTypes\"),\r\n        maxFileSize: ew.language.phrase(\"UploadErrMsgMaxFileSize\"),\r\n        maxNumberOfFiles: ew.language.phrase(\"UploadErrMsgMaxNumberOfFiles\"),\r\n        minFileSize: ew.language.phrase(\"UploadErrMsgMinFileSize\")\r\n      },\r\n      readonly: readonly // Custom\r\n\r\n    }).on(\"fileuploaddone\", _done).on(\"fileuploaddestroy\", _deleted).on(\"fileuploadchange\", _change).on(\"fileuploadadded fileuploadfinished fileuploaddestroyed\", _changed) //.on(\"fileuploadprocess\", _process)\r\n    .on('fileuploadadded', _added).on('fileuploadcompleted', _completed); // .click(_clicked);\r\n\r\n    if ($fn.val()) {\r\n      $__default['default'].ajax({\r\n        url: uploadUrl,\r\n        data: {\r\n          id: id,\r\n          table: tbl,\r\n          session: ew.SESSION_ID\r\n        },\r\n        dataType: \"json\",\r\n        context: this,\r\n        success: function success(result) {\r\n          if (result && result[id]) {\r\n            var done = $input.fileupload(\"option\", \"done\");\r\n            if (done) done.call(input, $__default['default'].Event(), {\r\n              result: {\r\n                files: result[id]\r\n              }\r\n            }); // Use \"files\"\r\n          }\r\n\r\n          if (readonly) // Hide delete button if readonly\r\n            $ft.find(\"td.delete\").hide();\r\n        }\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Convert data to number\r\n   *\r\n   * @param {*} data - Data being converted\r\n   * @param {Object} [config] - Configuration\r\n   * @param {string} config.decimalSeparator - Decimal separator\r\n   * @param {string} config.thousandsSeparator - Thousands separator\r\n   * @returns {(number|null)}\r\n   */\r\n\r\n  function parseNumber(data, config) {\r\n    if ($__default['default'].isString(data)) {\r\n      config = config || {\r\n        \"thousandsSeparator\": ew.THOUSANDS_SEP,\r\n        \"decimalSeparator\": ew.DECIMAL_POINT\r\n      };\r\n      var regexBits = [],\r\n          regex,\r\n          separator = config.thousandsSeparator,\r\n          decimal = config.decimalSeparator;\r\n      if (separator) regexBits.push(escapeRegExChars(separator) + \"(?=\\\\d)\");\r\n      regex = new RegExp(\"(?:\" + regexBits.join(\"|\") + \")\", \"g\");\r\n      if (decimal === \".\") decimal = null;\r\n      data = data.replace(regex, \"\");\r\n      data = decimal ? data.replace(decimal, \".\") : data;\r\n    }\r\n\r\n    if ($__default['default'].isString(data) && data.trim() !== \"\") data = +data;\r\n    if (!$__default['default'].isNumber || !isFinite(data)) // Catch NaN and Infinity\r\n      data = null;\r\n    return data;\r\n  }\r\n  /**\r\n   * Format a Number to string for display\r\n   *\r\n   * @param {*} data - Data being converted\r\n   * @param {Object} [config] - Configuration\r\n   * @param {number} config.decimalPlaces - Number of decimal places to round. Must be a number 0 to 20.\r\n   * @param {string} config.decimalSeparator - Decimal separator\r\n   * @param {string} config.thousandsSeparator - Thousands separator\r\n   * @returns {string} Note: null, undefined, NaN and \"\" returns as \"\".\r\n   */\r\n\r\n  function formatNumber(data, config) {\r\n    if ($__default['default'].isNumber(data)) {\r\n      config = config || {\r\n        \"thousandsSeparator\": ew.THOUSANDS_SEP,\r\n        \"decimalSeparator\": ew.DECIMAL_POINT\r\n      };\r\n      var isNeg = data < 0,\r\n          output = data + \"\",\r\n          decPlaces = config.decimalPlaces,\r\n          decSep = config.decimalSeparator || \".\",\r\n          thouSep = config.thousandsSeparator,\r\n          decIndex,\r\n          newOutput,\r\n          count,\r\n          i;\r\n      if ($__default['default'].isNumber(decPlaces) && decPlaces >= 0 && decPlaces <= 20) // Decimal precision\r\n        output = data.toFixed(decPlaces);\r\n      if (decSep !== \".\") // Decimal separator\r\n        output = output.replace(\".\", decSep);\r\n\r\n      if (thouSep) {\r\n        // Add the thousands separator\r\n        decIndex = output.lastIndexOf(decSep); // Find the dot or where it would be\r\n\r\n        decIndex = decIndex > -1 ? decIndex : output.length;\r\n        newOutput = output.substring(decIndex); // Start with the dot and everything to the right\r\n\r\n        for (count = 0, i = decIndex; i > 0; i--) {\r\n          // Working left, every third time add a separator, every time add a digit\r\n          if (count % 3 === 0 && i !== decIndex && (!isNeg || i > 1)) newOutput = thouSep + newOutput;\r\n          newOutput = output.charAt(i - 1) + newOutput;\r\n          count++;\r\n        }\r\n\r\n        output = newOutput;\r\n      }\r\n\r\n      return output;\r\n    } else {\r\n      // Not a Number, return as string\r\n      return $__default['default'].isValue(data) && data.toString ? data.toString() : \"\";\r\n    }\r\n  }\r\n  /**\r\n   * Convert data to Moment object (see http://momentjs.com/docs/)\r\n   *\r\n   * @param {*} data - Data being converted\r\n   * @param {number} format - Date format matching server side FormatDateTime()\r\n   * @returns {Moment}\r\n   */\r\n\r\n  function parseDate(data, format) {\r\n    var args = $__default['default'].makeArray(arguments);\r\n\r\n    if ($__default['default'].isNumber(format) && format >= 0 && format <= 17) {\r\n      var f,\r\n          def = ew.DATE_FORMAT.toUpperCase(),\r\n          sep = ew.DATE_SEPARATOR,\r\n          timesep = ew.TIME_SEPARATOR;\r\n\r\n      switch (format) {\r\n        case 0:\r\n        case 1:\r\n        case 2:\r\n        case 8:\r\n          f = def + \" HH\" + timesep + \"mm\" + timesep + \"ss\";\r\n          break;\r\n        // ew.DATE_FORMAT + \" %H:%M:%S\"\r\n\r\n        case 3:\r\n          f = \"hh:mm:ss A\";\r\n          break;\r\n        // \"%I:%M:%S %p\"\r\n\r\n        case 4:\r\n          f = \"HH:mm:ss\";\r\n          break;\r\n        // \"%H:%M:%S\"\r\n\r\n        case 5:\r\n          f = \"YYYY\" + sep + \"MM\" + sep + \"DD\";\r\n          break;\r\n        // \"%Y\" + sep + \"%m\" + sep + \"%d\"\r\n\r\n        case 6:\r\n          f = \"MM\" + sep + \"DD\" + sep + \"YYYY\";\r\n          break;\r\n        // \"%m\" + sep + \"%d\" + sep + \"%Y\"\r\n\r\n        case 7:\r\n          f = \"DD\" + sep + \"MM\" + sep + \"YYYY\";\r\n          break;\r\n        // \"%d\" + sep + \"%m\" + sep + \"%Y\"\r\n\r\n        case 9:\r\n          f = \"YYYY\" + sep + \"MM\" + sep + \"DD HH\" + timesep + \"mm\" + timesep + \"ss\";\r\n          break;\r\n        // \"%Y\" + sep + \"%m\" + sep + \"%d %H:%M:%S\"\r\n\r\n        case 10:\r\n          f = \"MM\" + sep + \"DD\" + sep + \"YYYY HH\" + timesep + \"mm\" + timesep + \"ss\";\r\n          break;\r\n        // \"%m\" + sep + \"%d\" + sep + \"%Y %H:%M:%S\"\r\n\r\n        case 11:\r\n          f = \"DD\" + sep + \"MM\" + sep + \"YYYY HH\" + timesep + \"mm\" + timesep + \"ss\";\r\n          break;\r\n        // \"%d\" + sep + \"%m\" + sep + \"%Y %H:%M:%S\"\r\n\r\n        case 12:\r\n          f = \"YY\" + sep + \"MM\" + sep + \"DD\";\r\n          break;\r\n        // \"%y\" + sep + \"%m\" + sep + \"%d\"\r\n\r\n        case 13:\r\n          f = \"MM\" + sep + \"DD\" + sep + \"YY\";\r\n          break;\r\n        // \"%m\" + sep + \"%d\" + sep + \"%y\"\r\n\r\n        case 14:\r\n          f = \"DD\" + sep + \"MM\" + sep + \"YY\";\r\n          break;\r\n        // \"%d\" + sep + \"%m\" + sep + \"%y\"\r\n\r\n        case 15:\r\n          f = \"YY\" + sep + \"MM\" + sep + \"DD HH\" + timesep + \"mm\" + timesep + \"ss\";\r\n          break;\r\n        // \"%y\" + sep + \"%m\" + sep + \"%d %H:%M:%S\"\r\n\r\n        case 16:\r\n          f = \"MM\" + sep + \"DD\" + sep + \"YY HH\" + timesep + \"mm\" + timesep + \"ss\";\r\n          break;\r\n        // \"%m\" + sep + \"%d\" + sep + \"%y %H:%M:%S\"\r\n\r\n        case 17:\r\n          f = \"DD\" + sep + \"MM\" + sep + \"YY HH\" + timesep + \"mm\" + timesep + \"ss\";\r\n          break;\r\n        // \"%d\" + sep + \"%m\" + sep + \"%y %H:%M:%S\"\r\n      }\r\n\r\n      args[1] = [f, \"YYYY-MM-DD HH\" + timesep + \"mm\" + timesep + \"ss\"];\r\n    }\r\n\r\n    return moment.apply(this, args);\r\n  }\r\n  /**\r\n   * Format date time\r\n   *\r\n   * @param {*} data - Date being formatted\r\n   * @param {string} format - Date format (see http://momentjs.com/docs/#/displaying/format/)\r\n   * @returns {string}\r\n   */\r\n\r\n  function formatDate(data, format) {\r\n    return moment(data).format(format || ew.DATE_FORMAT.toUpperCase());\r\n  }\r\n  /**\r\n   * Init page\r\n   *\r\n   * @param {Event|undefined} e - Event\r\n   */\r\n\r\n  function initPage(e) {\r\n    var el = e && e.target ? e.target : document,\r\n        $el = $__default['default'](el),\r\n        $tables = $el.find(\"table.ew-table:not(.ew-export-table)\");\r\n    Array.prototype.forEach.call(el.querySelectorAll(\".ew-grid-upper-panel, .ew-grid-lower-panel\"), ew.initGridPanel); // Init grid panels\r\n\r\n    ew.renderJsTemplates(e);\r\n    lazyLoad(e);\r\n    initForms(e);\r\n    initTooltips(e);\r\n    initPasswordOptions(e);\r\n    initIcons(e);\r\n    initLightboxes(e);\r\n    initPdfObjects(e);\r\n    $el.find(\"[data-widget='treeview']\").each(function () {\r\n      adminlte.Treeview._jQueryInterface.call($__default['default'](this), \"init\");\r\n    });\r\n    $tables.each(setupTable); // Init tables\r\n\r\n    $el.find(\".ew-btn-dropdown\").on(\"shown.bs.dropdown\", function () {\r\n      var $this = $__default['default'](this).removeClass(\"dropup\"),\r\n          $window = $__default['default'](window),\r\n          $menu = $this.find(\"> .dropdown-menu\");\r\n      $this.toggleClass(\"dropup\", $menu.offset().top + $menu.height() > $window.scrollTop() + $window.height());\r\n    });\r\n    $el.find(\"input[name=pageno]\").on(\"keydown\", function (e) {\r\n      if (e.key == \"Enter\") {\r\n        currentUrl.searchParams.set(this.name, parseInt(this.value));\r\n        window.location = sanitizeUrl(currentUrl.toString());\r\n        return false;\r\n      }\r\n    });\r\n\r\n    if (!ew.IS_SCREEN_SM_MIN) {\r\n      $el.find(\".\" + ew.RESPONSIVE_TABLE_CLASS + \" [data-toggle='dropdown']\").parent().on(\"shown.bs.dropdown\", function () {\r\n        var $this = $__default['default'](this),\r\n            $menu = $this.find(\".dropdown-menu\"),\r\n            div = $this.closest(\".\" + ew.RESPONSIVE_TABLE_CLASS)[0];\r\n\r\n        if (div.scrollHeight - div.clientHeight) {\r\n          var d = $menu.offset().top + $menu.outerHeight() - $__default['default'](div).offset().top - div.clientHeight;\r\n          if (d > 0) $menu.css(ew.CSS_FLIP ? \"right\" : \"left\", \"100%\").css(\"top\", parseFloat($menu.css(\"top\")) - d);\r\n        }\r\n      });\r\n    }\r\n\r\n    initExportLinks(e);\r\n    initMultiSelectCheckboxes(e); // Report\r\n\r\n    var $rpt = $el.find(\".ew-report\");\r\n\r\n    if ($rpt[0]) {\r\n      $rpt.find(\".card\").on(\"collapsed.lte.widget\", function () {\r\n        // Fix min-height when .lte.widget is collapsed\r\n        var $card = $__default['default'](this),\r\n            $div = $card.closest(\"[class^='col-']\"),\r\n            mh = $div.css(\"min-height\");\r\n        if (mh) $div.data(\"min-height\", mh);\r\n        $div.css(\"min-height\", 0);\r\n      }).on(\"expanded.lte.widget\", function () {\r\n        // Fix min-height when .lte.widget is expanded\r\n        var $card = $__default['default'](this),\r\n            $div = $card.closest(\"[class^='col-']\"),\r\n            mh = $div.css(\"min-height\");\r\n        if (mh) $div.css(\"min-height\", mh); // Restore min-height\r\n      }); // Group expand/collapse button\r\n\r\n      $rpt.find(\"span.ew-group-toggle\").on(\"click\", function () {\r\n        ew.toggleGroup(this);\r\n      });\r\n    } // Show message\r\n\r\n    if (typeof ew.USE_JAVASCRIPT_MESSAGE != \"undefined\" && ew.USE_JAVASCRIPT_MESSAGE) showMessage(e);\r\n  } // Redirect by HTTP GET or POST\r\n\r\n  function redirect(url, f, method) {\r\n    var newUrl = new URL(url),\r\n        params = newUrl.searchParams;\r\n    params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // PHP\r\n\r\n    params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // PHP\r\n\r\n    if (sameText(method, \"post\")) {\r\n      // POST\r\n      var $form = f ? $__default['default'](f) : $__default['default'](\"<form></form>\").appendTo(\"body\");\r\n      $form.attr({\r\n        action: ar[0],\r\n        method: \"post\"\r\n      });\r\n      params.forEach(function (value, key) {\r\n        $__default['default']('<input type=\"hidden\">').attr({\r\n          name: key,\r\n          value: ew.sanitize(value)\r\n        }).appendTo($form);\r\n      });\r\n      $form.trigger(\"submit\");\r\n    } else {\r\n      // GET\r\n      window.location = sanitizeUrl(newUrl.toString());\r\n    }\r\n  } // Show/Hide password\r\n\r\n  function togglePassword(e) {\r\n    var $btn = $__default['default'](e.currentTarget),\r\n        $input = $btn.closest(\".input-group\").find(\"input\"),\r\n        $i = $btn.find(\"i\");\r\n\r\n    if ($input.attr(\"type\") == \"text\") {\r\n      $input.attr(\"type\", \"password\");\r\n      $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    } else if ($input.attr(\"type\") == \"password\") {\r\n      $input.attr(\"type\", \"text\");\r\n      $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    }\r\n  } // Export with charts\r\n\r\n  function exportWithCharts(e, url, exportId, f) {\r\n    var el = e.target,\r\n        exportUrl = new URL(window.location.href),\r\n        ar = url.split(\"?\"),\r\n        $el = $__default['default'](el),\r\n        method = f ? \"post\" : \"get\";\r\n    exportId += \"_\" + Date.now();\r\n    exportUrl.pathname = ar[0];\r\n    exportUrl.search = ar[1];\r\n    exportUrl.searchParams.set(\"exportid\", exportId);\r\n    if ($el.is(\".dropdown-menu a\")) $el = $el.closest(\".btn-group\");\r\n\r\n    var _export = function _export() {\r\n      var params = exportUrl.searchParams,\r\n          custom = params.get(\"custom\") == \"1\";\r\n\r\n      if (f && !custom) {\r\n        // Not custom\r\n        var data = $__default['default'](f).serialize(); // Add token\r\n\r\n        $__default['default'].post(exportUrl, data, function (result) {\r\n          showMessage(result);\r\n        });\r\n      } else {\r\n        // Custom\r\n        var exp = params.get(\"export\");\r\n\r\n        if (custom && [\"word\", \"excel\", \"pdf\", \"email\"].includes(exp)) {\r\n          if (exp == \"email\") {\r\n            params.delete(\"export\"); // Remove duplicate export=email (exists in form)\r\n\r\n            exportUrl.search = params.toString() + \"&\" + $__default['default'](f).serialize();\r\n          }\r\n\r\n          $__default['default'](\"iframe.ew-export\").remove();\r\n          $__default['default'](\"<iframe></iframe>\").addClass(\"ew-export d-none\").attr(\"src\", exportUrl.toString()).appendTo($body.css(\"cursor\", \"wait\"));\r\n          setTimeout(function () {\r\n            $body.css(\"cursor\", \"default\");\r\n          }, 5000);\r\n        } else if (exp == \"print\") {\r\n          redirect(exportUrl.toString(), f, method);\r\n        } else {\r\n          fileDownload(exportUrl.toString(), null);\r\n        }\r\n      }\r\n\r\n      return false;\r\n    };\r\n\r\n    var keys = Object.keys(window.exportCharts);\r\n    if (keys.length == 0) // No charts, just submit the form\r\n      return _export(); // Success callback\r\n\r\n    var success = function success(result) {\r\n      if ($__default['default'].isString(result)) result = parseJson(result);\r\n\r\n      if (result.success) {\r\n        _export();\r\n      } else {\r\n        ew.alert(result.error);\r\n      }\r\n    }; // Failure callback\r\n\r\n    var fail = function fail(xhr, status, error) {\r\n      ew.alert(error + \": \" + xhr.responseText); // Show detailed export error message\r\n    }; // Export charts\r\n\r\n    $body.css(\"cursor\", \"wait\");\r\n    var charts = [];\r\n\r\n    for (var i = 0; i < keys.length; i++) {\r\n      var id = keys[i],\r\n          o = window.exportCharts[id],\r\n          params = \"exportfilename=\" + exportId + \"_\" + id + \".png|exportformat=png|exportaction=download|exportparameters=undefined\";\r\n      if (o && o.toBase64Image) // Chart.js chart\r\n        charts.push({\r\n          \"chart_engine\": \"Chart.js\",\r\n          \"stream_type\": \"base64\",\r\n          \"stream\": o.toBase64Image(),\r\n          \"parameters\": params\r\n        });\r\n    }\r\n\r\n    $__default['default'].ajax({\r\n      \"url\": getApiUrl(ew.API_EXPORT_CHART_ACTION),\r\n      \"data\": {\r\n        \"charts\": JSON.stringify(charts)\r\n      },\r\n      \"cache\": false,\r\n      \"type\": \"POST\"\r\n    }).done(success).fail(fail).always(function () {\r\n      $body.css(\"cursor\", \"default\");\r\n    });\r\n    return false;\r\n  } // Layout\r\n\r\n  var _fixLayoutHeightTimer; // Fix layout height\r\n\r\n  function fixLayoutHeight() {\r\n    if (_fixLayoutHeightTimer) _fixLayoutHeightTimer.cancel(); // Clear timer\r\n\r\n    _fixLayoutHeightTimer = $__default['default'].later(50, null, function () {\r\n      var layout = $body.data(\"lte.layout\");\r\n      if (layout) layout.fixLayoutHeight();\r\n    });\r\n  } // Add user event handlers\r\n\r\n  function addEventHandlers(tblVar) {\r\n    var fields = ew.events[tblVar];\r\n\r\n    if (fields) {\r\n      for (var _i = 0, _Object$entries = Object.entries(fields); _i < _Object$entries.length; _i++) {\r\n        var _Object$entries$_i = _Object$entries[_i],\r\n            fldVar = _Object$entries$_i[0],\r\n            events = _Object$entries$_i[1];\r\n        $__default['default']('[data-table=' + tblVar + '][data-field=' + fldVar + ']').on(events);\r\n      }\r\n    }\r\n  }\n\n  var functions = {\n    __proto__: null,\n    currentUrl: currentUrl,\n    forms: forms,\n    AjaxLookup: AjaxLookup,\n    AutoSuggest: AutoSuggest,\n    Form: Form,\n    SelectionListOption: SelectionListOption,\n    removeSpinner: removeSpinner,\n    createSelect: createSelect,\n    initIcons: initIcons,\n    initPasswordOptions: initPasswordOptions,\n    getApiUrl: getApiUrl,\n    sanitizeUrl: sanitizeUrl,\n    setSessionTimer: setSessionTimer,\n    initExportLinks: initExportLinks,\n    initMultiSelectCheckboxes: initMultiSelectCheckboxes,\n    fileDownload: fileDownload,\n    lazyLoad: lazyLoad,\n    updateDropdownPosition: updateDropdownPosition,\n    initLightboxes: initLightboxes,\n    initPdfObjects: initPdfObjects,\n    initTooltips: initTooltips,\n    parseJson: parseJson,\n    searchOperatorChanged: searchOperatorChanged,\n    isFunction: isFunction,\n    prompt: _prompt,\n    toast: toast,\n    showToast: showToast,\n    getForm: getForm,\n    hasFormData: hasFormData,\n    setSearchType: setSearchType,\n    updateOptions: updateOptions,\n    getUserParams: getUserParams,\n    applyTemplate: applyTemplate,\n    toggleGroup: toggleGroup,\n    convertToBool: convertToBool,\n    valueChanged: valueChanged,\n    setLanguage: setLanguage,\n    submitAction: submitAction,\n    'export': _export,\n    removeSpaces: removeSpaces,\n    isHiddenTextArea: isHiddenTextArea,\n    isModalLookup: isModalLookup,\n    isAutoSuggest: isAutoSuggest,\n    alert: _alert,\n    clearError: clearError,\n    onError: onError,\n    setFocus: setFocus,\n    setInvalid: setInvalid,\n    hasValue: hasValue,\n    isMaskedPassword: isMaskedPassword,\n    sort: sort,\n    confirmDelete: confirmDelete,\n    keySelected: keySelected,\n    selectAllKey: selectAllKey,\n    selectAll: selectAll,\n    updateSelected: updateSelected,\n    setColor: setColor,\n    clearSelected: clearSelected,\n    clearDelete: clearDelete,\n    clickDelete: clickDelete,\n    clickMultiCheckbox: clickMultiCheckbox,\n    setupTable: setupTable,\n    setupGrid: setupGrid,\n    addGridRow: addGridRow,\n    deleteGridRow: deleteGridRow,\n    htmlEncode: htmlEncode,\n    getElements: getElements,\n    getElement: getElement,\n    getAncestorBy: getAncestorBy,\n    isHidden: isHidden,\n    sameText: sameText,\n    sameString: sameString,\n    getValue: getValue,\n    getOptionValues: getOptionValues,\n    getOptionTexts: getOptionTexts,\n    clearOptions: clearOptions,\n    getId: getId,\n    valueSeparator: valueSeparator,\n    displayValue: displayValue,\n    optionHtml: optionHtml,\n    optionsHtml: optionsHtml,\n    newOption: newOption,\n    selectOption: selectOption,\n    executeScript: executeScript,\n    stripScript: stripScript,\n    addScript: addScript,\n    removeScript: removeScript,\n    getContent: getContent,\n    getOptions: getOptions,\n    addOptionDialogShow: addOptionDialogShow,\n    modalDialogHide: modalDialogHide,\n    modalDialogShow: modalDialogShow,\n    modalLookupShow: modalLookupShow,\n    importDialogShow: importDialogShow,\n    autoFill: autoFill,\n    tooltip: tooltip,\n    emailDialogShow: emailDialogShow,\n    showDrillDown: showDrillDown,\n    ajax: ajax,\n    currentPage: currentPage,\n    toggleSearchOperator: toggleSearchOperator,\n    checkUSDate: checkUSDate,\n    checkShortUSDate: checkShortUSDate,\n    checkDate: checkDate,\n    checkShortDate: checkShortDate,\n    checkEuroDate: checkEuroDate,\n    checkShortEuroDate: checkShortEuroDate,\n    checkDateDef: checkDateDef,\n    checkDateEx: checkDateEx,\n    unformatYear: unformatYear,\n    checkDay: checkDay,\n    checkInteger: checkInteger,\n    checkNumber: checkNumber,\n    stringToFloat: stringToFloat,\n    stringToDate: stringToDate,\n    escapeRegExChars: escapeRegExChars,\n    checkRange: checkRange,\n    checkTime: checkTime,\n    checkPhone: checkPhone,\n    checkZip: checkZip,\n    checkCreditCard: checkCreditCard,\n    checkSsn: checkSsn,\n    checkEmails: checkEmails,\n    checkEmail: checkEmail,\n    checkGuid: checkGuid,\n    checkByRegEx: checkByRegEx,\n    showMessage: showMessage,\n    random: random,\n    upload: upload,\n    parseNumber: parseNumber,\n    formatNumber: formatNumber,\n    parseDate: parseDate,\n    formatDate: formatDate,\n    initPage: initPage,\n    redirect: redirect,\n    togglePassword: togglePassword,\n    exportWithCharts: exportWithCharts,\n    fixLayoutHeight: fixLayoutHeight,\n    addEventHandlers: addEventHandlers\n  };\n\n  ew.IS_SCREEN_SM_MIN = window.matchMedia(\"(min-width: 768px)\").matches; // Should matches $screen-sm-min\r\n\r\n  ew.MOBILE_DETECT = new MobileDetect(window.navigator.userAgent);\r\n  ew.IS_MOBILE = !!ew.MOBILE_DETECT.mobile();\r\n  ew.IS_IE = ew.MOBILE_DETECT.version(\"MSIE\") > 0; // Charts\r\n\r\n  window.exportCharts = {}; // Per window\r\n\r\n  window.drillDownCharts = {}; // Per window\r\n  // Init spinner\r\n\r\n  ew.addSpinner(); // Extend\r\n\r\n  Object.assign(ew, {\r\n    MultiPage: MultiPage,\r\n    Form: Form,\r\n    Validators: Validators\r\n  }, functions);\r\n  var $document$1 = $__default['default'](document); // Init document\r\n\r\n  loadjs.ready(\"load\", function () {\r\n    $__default['default'].views.settings.debugMode(ew.DEBUG);\r\n    ew.setSessionTimer();\r\n    ew.initPage();\r\n    $__default['default'](\"#ew-modal-dialog\").on(\"load.ew\", ew.initPage);\r\n    $__default['default'](\"#ew-add-opt-dialog\").on(\"load.ew\", ew.initPage);\r\n    var hash = ew.currentUrl.searchParams.get(\"hash\");\r\n    if (hash) $__default['default'](\"html, body\").animate({\r\n      scrollTop: $__default['default'](\"#\" + hash).offset().top\r\n    }, 800);\r\n    ew.removeSpinner();\r\n    $document$1.trigger(\"load\");\r\n  }); // Default \"addoption\" event (fired before adding new option to selection list)\r\n\r\n  $document$1.on(\"addoption\", function (e, args) {\r\n    var row = args.data; // New row to be validated\r\n\r\n    var arp = args.parents; // Parent field values\r\n\r\n    for (var i = 0, cnt = arp.length; i < cnt; i++) {\r\n      // Iterate parent values\r\n      var p = arp[i];\r\n      if (!p.length) // Empty parent\r\n        //continue; // Allow\r\n        return args.valid = false; // Disallow\r\n\r\n      var val = row[\"ff\" + (i > 0 ? i + 1 : \"\")]; // Filter fields start from the 6th field\r\n\r\n      if (!$__default['default'].isUndefined(val) && !p.includes(String(val))) // Filter field value not in parent field values\r\n        return args.valid = false; // Returns false if invalid\r\n    }\r\n  }); // Fix z-index of multiple modals\r\n\r\n  $document$1.on(\"show.bs.modal\", \".modal\", function () {\r\n    var zIndex = 1050 + $__default['default'](\".modal:visible\").length;\r\n    $__default['default'](this).css(\"z-index\", zIndex);\r\n    setTimeout(function () {\r\n      $__default['default'](\".modal-backdrop\").not(\".modal-stack\").css(\"z-index\", zIndex - 1).addClass(\"modal-stack\");\r\n    }, 0);\r\n  }); // Fix scrolling of multiple modals\r\n\r\n  $document$1.on(\"hidden.bs.modal\", \".modal\", function () {\r\n    $__default['default'](\".modal:visible\").length && $__default['default'](\"body\").addClass(\"modal-open\");\r\n  });\n\n  $__default['default'].extend({\r\n    isBoolean: function isBoolean(o) {\r\n      return typeof o === 'boolean';\r\n    },\r\n    isNull: function isNull(o) {\r\n      return o === null;\r\n    },\r\n    isNumber: function isNumber(o) {\r\n      return typeof o === 'number' && isFinite(o);\r\n    },\r\n    isObject: function isObject(o) {\r\n      return o && (typeof o === 'object' || this.isFunction(o)) || false;\r\n    },\r\n    isString: function isString(o) {\r\n      return typeof o === 'string';\r\n    },\r\n    isUndefined: function isUndefined(o) {\r\n      return typeof o === 'undefined';\r\n    },\r\n    isValue: function isValue(o) {\r\n      return this.isObject(o) || this.isString(o) || this.isNumber(o) || this.isBoolean(o);\r\n    },\r\n    isDate: function isDate(o) {\r\n      return this.type(o) === 'date' && o.toString() !== 'Invalid Date' && !isNaN(o);\r\n    },\r\n    later: function later(when, o, fn, data, periodic) {\r\n      when = when || 0;\r\n      o = o || {};\r\n      var m = fn,\r\n          d = data,\r\n          f,\r\n          r;\r\n      if (this.isString(fn)) m = o[fn];\r\n      if (!m) return;\r\n      if (!this.isUndefined(data) && !this.isArray(d)) d = [data];\r\n\r\n      f = function f() {\r\n        m.apply(o, d || []);\r\n      };\r\n\r\n      r = periodic ? setInterval(f, when) : setTimeout(f, when);\r\n      return {\r\n        interval: periodic,\r\n        cancel: function cancel() {\r\n          if (this.interval) {\r\n            clearInterval(r);\r\n          } else {\r\n            clearTimeout(r);\r\n          }\r\n        }\r\n      };\r\n    }\r\n  });\n\n  /**\r\n   * jQuery.fields() plugin\r\n   *\r\n   * @param {string|undefined} fldvar - Field variable name or undefined\r\n   *  If field variable name, returns jQuery object of the specified field element(s).\r\n   *  If unspecified, returns object of jQuery objects of all fields.\r\n   * @returns jQuery object\r\n   */\r\n\r\n  $__default['default'].fn.fields = function (fldvar) {\r\n    // Note: fldvar has NO \"x_\" prefix\r\n    var rec = {},\r\n        id = this.attr(\"id\"),\r\n        obj = this[0],\r\n        m = id.match(/^[xy](\\d*)_/),\r\n        f,\r\n        tbl,\r\n        infix;\r\n\r\n    if (m) {\r\n      // \"this\" is input element\r\n      f = ew.getForm(obj); // form\r\n\r\n      tbl = this.data(\"table\"); // table var\r\n\r\n      infix = m[1]; // row index\r\n    } else if (obj && obj.htmlForm) {\r\n      // \"this\" is form\r\n      f = obj.$element; // form\r\n\r\n      tbl = obj.id.replace(new RegExp(\"^f|\" + obj.pageId + \"$\", \"g\"), \"\"); // table var\r\n\r\n      infix = $__default['default'](obj.htmlForm).data(\"rowindex\"); // row index\r\n    }\r\n\r\n    var selector = \"[data-table\" + (tbl ? \"=\" + tbl : \"\") + \"][data-field\" + (fldvar ? \"=x_\" + fldvar : \"\") + \"]\";\r\n    if ($__default['default'].isValue(infix)) selector += \"[name^=x\" + infix + \"_]\";\r\n\r\n    if (f && selector) {\r\n      $__default['default'](f).find(selector).each(function () {\r\n        var key = this.getAttribute(\"data-field\").substr(2),\r\n            name = this.getAttribute(\"name\");\r\n        key = /^y_/.test(name) ? \"y_\" + key : key; // Use \"y_fldvar\" as key for 2nd search input\r\n\r\n        rec[key] = rec[key] ? rec[key].add(this) : $__default['default'](this); // Create jQuery object for each field\r\n      });\r\n    }\r\n\r\n    return fldvar ? rec[fldvar] : rec;\r\n  };\r\n\r\n  $__default['default'].fn.extend({\r\n    // Get jQuery object of the row (<div> or <tr>)\r\n    row: function row() {\r\n      var _this$data;\r\n\r\n      var $row = this.closest(\"#r_\" + ((_this$data = this.data(\"field\")) === null || _this$data === void 0 ? void 0 : _this$data.substr(2)));\r\n      if (!$row[0]) $row = this.closest(\".ew-table > tbody > tr\"); // Grid page\r\n\r\n      return $row;\r\n    },\r\n    // Show/Hide field\r\n    visible: function visible(v) {\r\n      var _this$data2;\r\n\r\n      var $p = this.closest(\"#r_\" + ((_this$data2 = this.data(\"field\")) === null || _this$data2 === void 0 ? void 0 : _this$data2.substr(2))); // Find the row\r\n\r\n      if (!$p[0]) $p = this.closest(\"[id^=el]\"); // Find the span\r\n\r\n      if (typeof v != \"undefined\") {\r\n        $p.toggle(v);\r\n        return this;\r\n      } else {\r\n        return $el.is(\":visible\");\r\n      }\r\n    },\r\n    // Get/Set field \"readonly\" attribute\r\n    // Note: This attribute is ignored if the value of the type attribute is hidden, range, color, checkbox, radio, file, or a button type\r\n    readonly: function readonly(v) {\r\n      if (typeof v != \"undefined\") {\r\n        this.prop(\"readOnly\", v);\r\n        return this;\r\n      } else {\r\n        return this.prop(\"readOnly\");\r\n      }\r\n    },\r\n    // Get/Set field \"disabled\" attribute\r\n    // Note: A disabled control's value isn't submitted with the form\r\n    disabled: function disabled(v) {\r\n      if (typeof v != \"undefined\") {\r\n        this.prop(\"disabled\", v);\r\n        return this;\r\n      } else {\r\n        return this.prop(\"disabled\");\r\n      }\r\n    },\r\n    // Get/Set field value(s)\r\n    // Note: Return array if select-multiple\r\n    value: function value(v) {\r\n      var type = this.attr(\"type\");\r\n\r\n      if (typeof v != \"undefined\") {\r\n        if (!Array.isArray(v)) v = [v];\r\n        var type = this.attr(\"type\");\r\n        var el = type == \"radio\" || type == \"checkbox\" ? this.get() : this[0];\r\n\r\n        if (ew.isHiddenTextArea(this)) {\r\n          this.val(v).data(\"editor\").save();\r\n        } else {\r\n          ew.selectOption(el, v);\r\n\r\n          if (this.hasClass(\"select2-hidden-accessible\")) {\r\n            // Select2\r\n            this.trigger(\"change\");\r\n          }\r\n        }\r\n\r\n        return this;\r\n      } else {\r\n        if (type == \"checkbox\") {\r\n          var val = ew.getOptionValues(this.get());\r\n          return this.length == 1 ? val.join() : val;\r\n        } else if (type == \"radio\") {\r\n          return ew.getOptionValues(this.get()).join();\r\n        } else if (ew.isHiddenTextArea(this)) {\r\n          this.data(\"editor\").save();\r\n          return this.val();\r\n        } else {\r\n          return this.val();\r\n        }\r\n      }\r\n    },\r\n    // Get field value as number\r\n    toNumber: function toNumber() {\r\n      return ew.parseNumber(this.value());\r\n    },\r\n    // Get field value as moment object\r\n    toDate: function toDate() {\r\n      return ew.parseDate(this.value(), this.data(\"format\"));\r\n    },\r\n    // Get field value as native Date object\r\n    toJsDate: function toJsDate() {\r\n      return ew.parseDate(this.value(), this.data(\"format\")).toDate();\r\n    }\r\n  });\n\n  $__default['default'](window).off(\"load.lte.treeview\"); // Treeview\r\n\r\n  var Treeview = adminlte.Treeview;\r\n  Treeview.prototype._toggle = Treeview.prototype.toggle;\r\n\r\n  Treeview.prototype.toggle = function toggle(event) {\r\n    var $currentTarget = $__default['default'](event.currentTarget),\r\n        treeviewMenu = $currentTarget.next(),\r\n        href = $currentTarget.attr(\"href\"),\r\n        isText = event.target.tagName == \"P\";\r\n    if (!treeviewMenu.is(\".nav-treeview\") || isText && href && href != \"#\" && href != \"javascript:void(0);\") // Menu text with href\r\n      return;\r\n\r\n    this._toggle(event);\r\n\r\n    event.stopImmediatePropagation();\r\n  }; // Dropdown menu parent item with href // Override AdminLTE\r\n\r\n  $__default['default'](\"ul.dropdown-menu [data-toggle=dropdown]\").on(\"click\", function (e) {\r\n    var href = $__default['default'](this).attr(\"href\");\r\n    if (href && href != \"#\" && e.target.nodeName == \"SPAN\") window.location = href;\r\n  });\n\n}(jQuery));\n"]}