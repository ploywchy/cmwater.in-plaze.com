{"version":3,"sources":["dist/js/ew.js"],"names":["$","_interopDefaultLegacy","e","default","$__default","jQuery","commonjsGlobal","globalThis","window","global","self","unwrapExports","x","__esModule","Object","prototype","hasOwnProperty","call","createCommonjsModule","fn","basedir","module","path","exports","require","base","Error","commonjsRequire","regenerator","runtime","undefined$1","Op","hasOwn","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","GenStateSuspendedStart","method","arg","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","constructor","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","toString","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","_createForOfIteratorHelperLoose$3","o","allowArrayLike","it","bind","Array","isArray","minLen","_arrayLikeToArray$3","n","from","test","_unsupportedIterableToArray$3","arr","len","arr2","Blob","FormData","normalizeValue","_ref","filename","File","lastModified","ensureArgs","args","expected","normalizeArgs","String","undefined","each","cb","global$1","_FormData","_send","XMLHttpRequest","send","_fetch","Request","fetch","_sendBeacon","navigator","sendBeacon","stringTag","a","b","d","c","blob","t","Date","defineProperties","lastModifiedDate","FormDataPolyfill","form","_data","elements","elm","disabled","files","file","append","options","opt","selected","checked","replace","normalizeLinefeeds","_proto","arguments","_normalizeArgs$apply","apply","map","delete","entries","_iterator","_step","_context","t0","t1","callback","thisArg","_step2","_iterator2","_step2$value","get","getAll","has","_iterator3","_step3","_step3$value","_context2","set","_iterator4","_step4","_step4$value","_context3","_step5","fd","_iterator5","_step5$value","_step6","boundary","Math","random","chunks","_iterator6","_step6$value","setRequestHeader","toLowerCase","_hasContentType","data","_fetch2","input","init","body","url","Validators","userLevelId","el","ew","checkInteger","language","phrase","parseInt","userLevelName","id","elId","document","getElementById","trim","level","sameText","includes","required","fieldName","_$el$data","$el","$p","closest","substr","css","hasValue","fileRequired","elFn","mismatchPassword","startsWith","elPwd","between","z","val","passwordStrength","isMaskedPassword","hasClass","username","raw","match","RegExp","escapeRegExChars","INVALID_USERNAME_CHARACTERS","password","ENCRYPTED_PASSWORD","INVALID_PASSWORD_CHARACTERS","email","getValue","checkEmail","emails","cnt","checkEmails","datetime","dateFormat","phraseId","newSubStr","DATE_SEPARATOR","checkShortDate","checkDate","checkShortEuroDate","checkEuroDate","checkShortUSDate","checkUSDate","checkDateDef","DATE_FORMAT","time","checkTime","float","checkNumber","range","min","max","checkRange","integer","phone","checkPhone","zip","checkZip","creditCard","checkCreditCard","ssn","checkSsn","guid","checkGuid","regex","pattern","checkByRegEx","custom","_len","_key","concat","captcha","recaptcha","_grecaptcha","grecaptcha","getResponse","dataset","_createClass","_defineProperties","target","props","descriptor","Constructor","protoProps","staticProps","_assertThisInitialized","ReferenceError","_setPrototypeOf","p","_inheritsLoose","subClass","superClass","_defineProperty","_asyncToGenerator","asyncGeneratorStep","gen","_next","_throw","FormBase","pageId","_initiated","$element","htmlForm","initSearchPanel","modified","validateRequired","validate","emptyRow","multiPage","autoSuggests","lists","disableForm","getForm","find","prop","addClass","enableForm","$form","removeClass","appendHidden","$dp","attr","ar","serializeArray","appendTo","canSubmit","updateTextArea","$dps","dp","j","$els","not","submit","_callee","action","f","trigger","isBoolean","isObject","_x","_x2","getList","compileTemplates","_i","_lists","list","template","isString","templates","is","getElement","getElements","selector","updateLists","rowindex","isNumber","confirm","querySelector","removeSpinner","fixId","multiple","split","prefix","endsWith","_ref2","join","actions","promises","_i2","_Object$entries","_Object$entries$_i","_id","parents","parentFields","parent","ajax","pvalues","getOptionValues","updateOptions","setTimeout","shift","AJAX_DELAY","all","source","console","log","createAutoSuggest","settings","assign","limit","AUTO_SUGGEST_MAX_ENTRIES","autoSuggestSettings","AutoSuggest","initEditors","filter","ed","active","save","destroyEditor","destroy","onError","msg","initUpload","index","later","upload","setupFilters","filters","filterList","$sf","toggleClass","$df","$delete","$save","saveFilters","SEARCH_FILTER_OPTION","localStorage","setItem","JSON","stringify","$body","currentPage","dataType","success","always","off","on","prompt","sanitize","prevAll","remove","$submenu","splice","insertBefore","TOKEN_NAME_KEY","TOKEN_NAME","ANTIFORGERY_TOKEN_KEY","ANTIFORGERY_TOKEN","IS_LOGGEDIN","IS_SYS_ADMIN","CURRENT_USER_NAME","item","getItem","parseJson","grep","show","hide","isSearch","hasFormData","collapse","text","render","loadjs","ready","$tab","getAttribute","$panel","$container","width","CONFIRM_CANCEL","href","location","forms","add","ownKeys$2","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","_objectSpread$2","getOwnPropertyDescriptors","_createForOfIteratorHelperLoose$2","_arrayLikeToArray$2","_unsupportedIterableToArray$2","Field","fldvar","validators","invalid","validator","addValidator","addError","_this$_error","_error","clearErrors","clearValidators","_element","shouldValidate","updateFeedback","errorMessage","html","setInvalid","focus","setFocus","_checkbox","_this$_element","_this$_element$id","ownKeys$1","_objectSpread$1","_createForOfIteratorHelperLoose$1","_arrayLikeToArray$1","_unsupportedIterableToArray$1","Form","_FormBase","_this","addField","fields","getField","addFields","field","addCustomError","makeVisible","element","gotoPageByElement","$pane","click","validateFields","rowIndex","row","_Object$values","_i3","_Object$values2","AjaxLookup","elementId","formElement","m","pf","debounce","recordCount","formatResult","isAutoSuggest","jsRenderHelpers","displayValue","generateRequest","page","LANGUAGE_ID","getUserParams","arp","MULTIPLE_OPTION_SEPARATOR","getUrl","query","start","params","URLSearchParams","q","rnd","getApiUrl","API_LOOKUP_ACTION","prepare","transform","results","totalRecordCount","records","_isAutoSuggest","SelectionListOption","emptyObj","typeahead","timer","$input","minWidth","maxHeight","highlight","hint","minLength","delay","display","forceSelection","forceSelect","setValue","v","findIndex","option","lf","syncResults","asyncResults","cancel","count","menu","$node","more","ta","datasets","_append","scrollTop","$lastSuggestion","outerHeight","isOpen","empty","$item","getActiveSelectable","close","tpl","$more","one","preventDefault","stopPropagation","$menu","$dataset","max-height","overflow-y","Forms","_forms","ids","_createForOfIteratorHelperLoose","_arrayLikeToArray","_unsupportedIterableToArray","ownKeys","_objectSpread","_fixLayoutHeightTimer","currentUrl","URL","$document$1","_removeSpinner","initIcons","tooltip","container","IS_MOBILE","placement","sanitizeFn","initPasswordOptions","pStrength","MIN_PASSWORD_STRENGTH","$this","changeBackground","backgrounds","passwordValidFrom","onPasswordStrengthChanged","strength","percentage","$pst","$pb","outerWidth","pct","pGenerator","passwordLength","GENERATE_PASSWORD_LENGTH","uppercase","GENERATE_PASSWORD_UPPERCASE","lowercase","GENERATE_PASSWORD_LOWERCASE","numbers","GENERATE_PASSWORD_NUMBER","specialChars","GENERATE_PASSWORD_SPECIALCHARS","onPasswordGenerated","pwd","triggerHandler","PATH_BASE","API_URL","qs","route","encodeURIComponent","sanitizeUrl","search","searchParams","initExportLinks","fileDownload","initMultiSelectCheckboxes","$cbs","_update","isHtml","Swal","fire","sweetAlertSettings","showConfirmButton","allowOutsideClick","allowEscapeKey","willOpen","showLoading","cache","xhrFields","responseType","textStatus","jqXHR","createObjectURL","createElement","getResponseHeader","style","download","appendChild","objectUrl","revokeObjectURL","fail","errorThrown","_Swal$getActions","hideLoading","update","getActions","classList","showValidationMessage","lazyLoad","LAZY_LOAD","src","initLightboxes","USE_COLORBOX","lightboxSettings","title","current","previous","xhrError","imgError","colorbox","rel","initPdfObjects","EMBED_PDF","PDFObjectOptions","PDFObject","embed","fallbackLink","initTooltips","popover","parse","isFunction","_prompt","confirmButtonText","showCancelButton","cancelButtonText","inputValidator","toast","toastOptions","Toasts","position","toUpperCase","substring","children","first","showToast","class","autohide","autoHideSuccessMessage","autoHideSuccessMessageDelay","$f","parentId","change","isUndefined","childFields","promise","els","getId","names","$elf","typ","elf","_updateOptions","autoFillTargetFields","autoFill","fo","frmo","$obj","clearOptions","addOpt","valid","newOption","selectOption","_updateSibling","lookupOptions","ds","isModalLookup","root","convertToBool","_export","sel","fobj","keySelected","_alert","serialize","end","isHiddenTextArea","isHidden","selectAll","setColor","$row","$tbl","ROWTYPE_ADD","ROWTYPE_EDIT","clearSelected","tbl","rows","r","$r","clearDelete","$tr","siblings","addBack","clickDelete","setupTable","force","$rows","tBodies","mouseOver","mouseOut","$target","cells","last","div","parentsUntil","RESPONSIVE_TABLE_CLASS","rowSpan","clientHeight","offsetHeight","attach","edit","sw","setupGrid","grid","$grid","USE_OVERLAY_SCROLLBARS","overlayScrollbars","overlayScrollbarsOptions","table","getAncestorBy","node","parentNode","nodeType","contains","o1","o2","lookup","getOptionTexts","lo","hasAttribute","removeAll","valueSeparator","sep","df","isValue","optionHtml","OPTION_HTML_TEMPLATE","optionsHtml","MAX_OPTION_COUNT","frm","df1","df2","df3","df4","innerHTML","selectedIndex","vals","_opts","_opt","isAutoSelect","_opts2","_ajaxStop","lastPageSubmit","executeScript","matches","matchAll","addScript","stripScript","_ar2","scr","removeScript","getContent","getOptions","modalDialogHide","$dlg","removeData","$bd","ewjtable","className","reload","dest_array","destEl","v0","pid","post","$tt","trig","dir","CSS_FLIP","content","wd","$tip","getTipElement","object_value","checkDateEx","format","arDT","re","sYear","sMonth","sDay","exec","wrksep","arD","unformatYear","checkDay","yr","UNFORMAT_YEAR","checkYear","checkMonth","maxDay","ts","THOUSANDS_SEP","DECIMAL_POINT","stringToFloat","parseFloat","str","min_value","max_value","isNull","TIME_SEPARATOR","showMessage","_arg$target","doc","swal","win","$div","$alert","$heading","detach","$content","w","$toast","floor","redirect","newUrl","ajaxSend","event","jqxhr","apiUrl","isApi","allowed","hostname","API_JWT_TOKEN","IS_WINDOWS_AUTHENTICATION","API_JWT_AUTHORIZATION_HEADER","ajaxStart","addSpinner","ajaxStop","ajaxError","functions","createSelect","opts","selectId","select2","amd","Utils","ResultsList","InfiniteScroll","HidePlaceholder","SelectOnClose","selectOptions","resultsAdapter","dropdown","columns","customOption","Decorate","Select2CustomOption","decorated","$results","displayMessage","escapeMarkup","clear","$message","message","sort","cols","$option","attrs","role","aria-selected","Element","msMatchesSelector","webkitMatchesSelector","_resultId","setAttribute","StoreData","getSelect2CustomOptionClass","iconClass","templateResult","HTMLOptionElement","placeholder","selectOnClose","term","processResults","pagination","$select","_$$","minimumResultsForSearch","Infinity","setSessionTimer","timeoutTime","keepAliveTimer","counter","useKeepAlive","SESSION_KEEP_ALIVE_INTERVAL","IS_AUTOLOGIN","keepAlive","API_SESSION_ACTION","token","resetTimer","SESSION_TIMEOUT_COUNTDOWN","SESSION_TIMEOUT","timeout","timerInterval","timerProgressBar","setInterval","sec","timeleft","round","getTimerLeft","textContent","onClose","clearInterval","setTimer","dismiss","DismissReason","TIMEOUT_URL","keepAliveInterval","updateDropdownPosition","select","_positionDropdown","_resizeDropdown","searchOperatorChanged","parm","$fld","$fld2","hasY","$cond","hasCond","$and","opr","$opr2","opr2","isBetween","isNullOpr","isNullOpr2","hideOpr2","hideX","hideY","setSearchType","applyTemplate","divId","tmplId","classId","exportType","export","enabled","replaceWith","querySelectorAll","subtmpl","rowspan","childNodes","views","hasTag","jsRenderAttributes","scripts","tmpl","$meta","PDF_STYLESHEET_FILENAME","PROJECT_STYLESHEET_FILENAME","responseText","customexport","param","toggleGroup","idx","valueChanged","infix","fld","bool","nelm","oelm","fnelm","setLanguage","submitAction","srcElement","currentForm","isPost","isMultiple","_success","_submit","k","removeSpaces","alert","clearError","jquery","shiftKey","ctrlKey","confirmDelete","selectAllKey","updateSelected","clickMultiCheckbox","$cb","addGridRow","$tpl","$lastrow","clone","suffix","$elkeycnt","keycnt","data-rowindex","attributes","after","scrollHeight","deleteGridRow","rowidx","keycntname","_delete","$keyact","htmlEncode","sameString","_val","_val2","addOptionDialogShow","addOptionDialog","_submitSuccess","_results","lnk","objName","API_OBJECT_NAME","modal","linkField","dfs","displayFields","ffs","filterFields","pfs","lfv","ff","txt","$lu","nv","arOpt","obj2","ar2","_results2","_results$error","description","_results3","failureMessage","_fail","status","statusText","btn","$btn","API_ADD_ACTION","filterFieldVars","nodeName","modalDialogShow","modalDialog","showing","size","_caption","$lnk","caption","_button","_always","handleResult","pathname","_current","view","warningMessage","successMessage","_result$error","_result$error2","footer","cf","ct","modalLookupShow","modalLookupDialog","_timer","$search","oid","_format","setAutoSuggest","txts","useText","srch","arLinkValue","linkValue","paging","pageSize","pageSizes","pageSizeChangeArea","pageList","selecting","selectingCheckboxes","multiselect","listAction","postData","jtParams","recperpage","messages","serverCommunicationError","loadingMessage","spinnerClass","noDataAvailable","pagingInfo","pageSizeChangeLabel","gotoPageLabel","recordsLoaded","selectedRows","selectionChanged","indexOf","toggle","LOOKUP_DELAY","sv","importDialogShow","importDialog","$data","$progress","classname","$msg","hideMessage","showProgress","pc","updateProgress","tcnt","totalCount","importProgress","API_PROGRESS_ACTION","API_FILE_TOKEN_NAME","importComplete","fileResults","fileResult","scnt","successCount","fcnt","failCount","showLog","failList","ecnt","importFail","formData","session","SESSION_ID","importUploadOptions","acceptFileTypes","IMPORT_FILE_ALLOWED_EXT","fileupload","API_UPLOAD_ACTION","autoUpload","singleFileUploads","maxFileSize","maxNumberOfFiles","minFileSize","beforeSend","importfiles","ok","filetoken","API_ACTION_NAME","xhr","importFiles","processfail","progressall","loaded","total","uploadProgress","hdr","emailDialogShow","emailDialog","MAX_EMAIL_RECIPIENT","exportid","exportWithCharts","showDrillDown","arUrl","pos","height","ypos","offset","top","pageY","xpos","left","pageX","drillDownCharts","cht","dispose","_convert","response","API_LIST_ACTION","API_VIEW_ACTION","API_DELETE_ACTION","responseJSON","toggleSearchOperator","stringToDate","creditcard_string","tempdigit","doubledigit","checkdigit","email_cnt","arEmails","nid","readonly","$ft","$fn","$fa","$fs","$exts","$maxsize","$maxfilecount","$label","label","_confirmDelete","_downloadTemplate","_uploadTemplate","uploadUrl","API_JQUERY_UPLOAD_ACTION","exts","maxsize","maxfilecount","multipart","loadImageFileTypes","loadVideoFileTypes","loadAudioFileTypes","filesContainer","uploadTemplateId","downloadTemplateId","uploadTemplate","downloadTemplate","previewMaxWidth","UPLOAD_THUMBNAIL_WIDTH","previewMaxHeight","UPLOAD_THUMBNAIL_HEIGHT","dropZone","pasteZone","MULTIPLE_UPLOAD_SEPARATOR","originalEvent","fid","_data$files","l","_data$files2","_data$result","_data$result$files","_data$files3","Event","parseNumber","config","regexBits","separator","thousandsSeparator","decimalSeparator","decimal","isFinite","formatNumber","decIndex","newOutput","isNeg","output","decPlaces","decimalPlaces","decSep","thouSep","toFixed","lastIndexOf","parseDate","makeArray","def","timesep","moment","formatDate","initPage","$tables","initGridPanel","renderJsTemplates","initForms","adminlte","Treeview","_jQueryInterface","$window","IS_SCREEN_SM_MIN","$rpt","mh","USE_JAVASCRIPT_MESSAGE","togglePassword","currentTarget","$i","exportId","exportUrl","now","exp","exportCharts","charts","toBase64Image","chart_engine","stream_type","stream","parameters","API_EXPORT_CHART_ACTION","fixLayoutHeight","layout","addEventHandlers","tblVar","events","fldVar","matchMedia","MOBILE_DETECT","MobileDetect","userAgent","mobile","IS_IE","version","MultiPage","formid","formID","pageIndex","maxPageIndex","minPageIndex","pageIndexes","$pages","$collapses","isTab","isCollapse","hideDisabledButton","hideInactivePages","lockTabs","hideTabs","showPagerTop","showPagerBottom","pagerTemplate","_show","_properties","before","pageShow","gotoPage","$page","eq","gotoPageByIndex","gotoPageByElementId","togglePage","$tabs","googleMaps","google","maps","setCenter","$bodies","$document","debugMode","DEBUG","hash","animate","zIndex","extend","isDate","when","periodic","interval","clearTimeout","rec","_this$data","visible","_this$data2","toNumber","toDate","toJsDate","_toggle","$currentTarget","treeviewMenu","isText","tagName","stopImmediatePropagation"],"mappings":"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","sourcesContent":["/*!\n * JavaScript for PHPMaker v2021.0.14\n * Copyright (c) e.World Technology Limited. All rights reserved.\n */\n(function ($) {\n  'use strict';\n\n  function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\n  var $__default = /*#__PURE__*/_interopDefaultLegacy($);\n\n  var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n  function unwrapExports (x) {\n  \treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n  }\n\n  function createCommonjsModule(fn, basedir, module) {\n  \treturn module = {\n  \t  path: basedir,\n  \t  exports: {},\n  \t  require: function (path, base) {\n        return commonjsRequire(path, (base === undefined || base === null) ? module.path : base);\n      }\n  \t}, fn(module, module.exports), module.exports;\n  }\n\n  function commonjsRequire () {\n  \tthrow new Error('Dynamic requires are not currently supported by @rollup/plugin-commonjs');\n  }\n\n  var runtime_1 = createCommonjsModule(function (module) {\r\n  /**\r\n   * Copyright (c) 2014-present, Facebook, Inc.\r\n   *\r\n   * This source code is licensed under the MIT license found in the\r\n   * LICENSE file in the root directory of this source tree.\r\n   */\r\n\r\n  var runtime = (function (exports) {\r\n\r\n    var Op = Object.prototype;\r\n    var hasOwn = Op.hasOwnProperty;\r\n    var undefined$1; // More compressible than void 0.\r\n    var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\r\n    var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\r\n    var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\r\n    var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\r\n\r\n    function define(obj, key, value) {\r\n      Object.defineProperty(obj, key, {\r\n        value: value,\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true\r\n      });\r\n      return obj[key];\r\n    }\r\n    try {\r\n      // IE 8 has a broken Object.defineProperty that only works on DOM objects.\r\n      define({}, \"\");\r\n    } catch (err) {\r\n      define = function(obj, key, value) {\r\n        return obj[key] = value;\r\n      };\r\n    }\r\n\r\n    function wrap(innerFn, outerFn, self, tryLocsList) {\r\n      // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\r\n      var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\r\n      var generator = Object.create(protoGenerator.prototype);\r\n      var context = new Context(tryLocsList || []);\r\n\r\n      // The ._invoke method unifies the implementations of the .next,\r\n      // .throw, and .return methods.\r\n      generator._invoke = makeInvokeMethod(innerFn, self, context);\r\n\r\n      return generator;\r\n    }\r\n    exports.wrap = wrap;\r\n\r\n    // Try/catch helper to minimize deoptimizations. Returns a completion\r\n    // record like context.tryEntries[i].completion. This interface could\r\n    // have been (and was previously) designed to take a closure to be\r\n    // invoked without arguments, but in all the cases we care about we\r\n    // already have an existing method we want to call, so there's no need\r\n    // to create a new function object. We can even get away with assuming\r\n    // the method takes exactly one argument, since that happens to be true\r\n    // in every case, so we don't have to touch the arguments object. The\r\n    // only additional allocation required is the completion record, which\r\n    // has a stable shape and so hopefully should be cheap to allocate.\r\n    function tryCatch(fn, obj, arg) {\r\n      try {\r\n        return { type: \"normal\", arg: fn.call(obj, arg) };\r\n      } catch (err) {\r\n        return { type: \"throw\", arg: err };\r\n      }\r\n    }\r\n\r\n    var GenStateSuspendedStart = \"suspendedStart\";\r\n    var GenStateSuspendedYield = \"suspendedYield\";\r\n    var GenStateExecuting = \"executing\";\r\n    var GenStateCompleted = \"completed\";\r\n\r\n    // Returning this object from the innerFn has the same effect as\r\n    // breaking out of the dispatch switch statement.\r\n    var ContinueSentinel = {};\r\n\r\n    // Dummy constructor functions that we use as the .constructor and\r\n    // .constructor.prototype properties for functions that return Generator\r\n    // objects. For full spec compliance, you may wish to configure your\r\n    // minifier not to mangle the names of these two functions.\r\n    function Generator() {}\r\n    function GeneratorFunction() {}\r\n    function GeneratorFunctionPrototype() {}\r\n\r\n    // This is a polyfill for %IteratorPrototype% for environments that\r\n    // don't natively support it.\r\n    var IteratorPrototype = {};\r\n    IteratorPrototype[iteratorSymbol] = function () {\r\n      return this;\r\n    };\r\n\r\n    var getProto = Object.getPrototypeOf;\r\n    var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\r\n    if (NativeIteratorPrototype &&\r\n        NativeIteratorPrototype !== Op &&\r\n        hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\r\n      // This environment has a native %IteratorPrototype%; use it instead\r\n      // of the polyfill.\r\n      IteratorPrototype = NativeIteratorPrototype;\r\n    }\r\n\r\n    var Gp = GeneratorFunctionPrototype.prototype =\r\n      Generator.prototype = Object.create(IteratorPrototype);\r\n    GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\r\n    GeneratorFunctionPrototype.constructor = GeneratorFunction;\r\n    GeneratorFunction.displayName = define(\r\n      GeneratorFunctionPrototype,\r\n      toStringTagSymbol,\r\n      \"GeneratorFunction\"\r\n    );\r\n\r\n    // Helper for defining the .next, .throw, and .return methods of the\r\n    // Iterator interface in terms of a single ._invoke method.\r\n    function defineIteratorMethods(prototype) {\r\n      [\"next\", \"throw\", \"return\"].forEach(function(method) {\r\n        define(prototype, method, function(arg) {\r\n          return this._invoke(method, arg);\r\n        });\r\n      });\r\n    }\r\n\r\n    exports.isGeneratorFunction = function(genFun) {\r\n      var ctor = typeof genFun === \"function\" && genFun.constructor;\r\n      return ctor\r\n        ? ctor === GeneratorFunction ||\r\n          // For the native GeneratorFunction constructor, the best we can\r\n          // do is to check its .name property.\r\n          (ctor.displayName || ctor.name) === \"GeneratorFunction\"\r\n        : false;\r\n    };\r\n\r\n    exports.mark = function(genFun) {\r\n      if (Object.setPrototypeOf) {\r\n        Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\r\n      } else {\r\n        genFun.__proto__ = GeneratorFunctionPrototype;\r\n        define(genFun, toStringTagSymbol, \"GeneratorFunction\");\r\n      }\r\n      genFun.prototype = Object.create(Gp);\r\n      return genFun;\r\n    };\r\n\r\n    // Within the body of any async function, `await x` is transformed to\r\n    // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\r\n    // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\r\n    // meant to be awaited.\r\n    exports.awrap = function(arg) {\r\n      return { __await: arg };\r\n    };\r\n\r\n    function AsyncIterator(generator, PromiseImpl) {\r\n      function invoke(method, arg, resolve, reject) {\r\n        var record = tryCatch(generator[method], generator, arg);\r\n        if (record.type === \"throw\") {\r\n          reject(record.arg);\r\n        } else {\r\n          var result = record.arg;\r\n          var value = result.value;\r\n          if (value &&\r\n              typeof value === \"object\" &&\r\n              hasOwn.call(value, \"__await\")) {\r\n            return PromiseImpl.resolve(value.__await).then(function(value) {\r\n              invoke(\"next\", value, resolve, reject);\r\n            }, function(err) {\r\n              invoke(\"throw\", err, resolve, reject);\r\n            });\r\n          }\r\n\r\n          return PromiseImpl.resolve(value).then(function(unwrapped) {\r\n            // When a yielded Promise is resolved, its final value becomes\r\n            // the .value of the Promise<{value,done}> result for the\r\n            // current iteration.\r\n            result.value = unwrapped;\r\n            resolve(result);\r\n          }, function(error) {\r\n            // If a rejected Promise was yielded, throw the rejection back\r\n            // into the async generator function so it can be handled there.\r\n            return invoke(\"throw\", error, resolve, reject);\r\n          });\r\n        }\r\n      }\r\n\r\n      var previousPromise;\r\n\r\n      function enqueue(method, arg) {\r\n        function callInvokeWithMethodAndArg() {\r\n          return new PromiseImpl(function(resolve, reject) {\r\n            invoke(method, arg, resolve, reject);\r\n          });\r\n        }\r\n\r\n        return previousPromise =\r\n          // If enqueue has been called before, then we want to wait until\r\n          // all previous Promises have been resolved before calling invoke,\r\n          // so that results are always delivered in the correct order. If\r\n          // enqueue has not been called before, then it is important to\r\n          // call invoke immediately, without waiting on a callback to fire,\r\n          // so that the async generator function has the opportunity to do\r\n          // any necessary setup in a predictable way. This predictability\r\n          // is why the Promise constructor synchronously invokes its\r\n          // executor callback, and why async functions synchronously\r\n          // execute code before the first await. Since we implement simple\r\n          // async functions in terms of async generators, it is especially\r\n          // important to get this right, even though it requires care.\r\n          previousPromise ? previousPromise.then(\r\n            callInvokeWithMethodAndArg,\r\n            // Avoid propagating failures to Promises returned by later\r\n            // invocations of the iterator.\r\n            callInvokeWithMethodAndArg\r\n          ) : callInvokeWithMethodAndArg();\r\n      }\r\n\r\n      // Define the unified helper method that is used to implement .next,\r\n      // .throw, and .return (see defineIteratorMethods).\r\n      this._invoke = enqueue;\r\n    }\r\n\r\n    defineIteratorMethods(AsyncIterator.prototype);\r\n    AsyncIterator.prototype[asyncIteratorSymbol] = function () {\r\n      return this;\r\n    };\r\n    exports.AsyncIterator = AsyncIterator;\r\n\r\n    // Note that simple async functions are implemented on top of\r\n    // AsyncIterator objects; they just return a Promise for the value of\r\n    // the final result produced by the iterator.\r\n    exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\r\n      if (PromiseImpl === void 0) PromiseImpl = Promise;\r\n\r\n      var iter = new AsyncIterator(\r\n        wrap(innerFn, outerFn, self, tryLocsList),\r\n        PromiseImpl\r\n      );\r\n\r\n      return exports.isGeneratorFunction(outerFn)\r\n        ? iter // If outerFn is a generator, return the full iterator.\r\n        : iter.next().then(function(result) {\r\n            return result.done ? result.value : iter.next();\r\n          });\r\n    };\r\n\r\n    function makeInvokeMethod(innerFn, self, context) {\r\n      var state = GenStateSuspendedStart;\r\n\r\n      return function invoke(method, arg) {\r\n        if (state === GenStateExecuting) {\r\n          throw new Error(\"Generator is already running\");\r\n        }\r\n\r\n        if (state === GenStateCompleted) {\r\n          if (method === \"throw\") {\r\n            throw arg;\r\n          }\r\n\r\n          // Be forgiving, per 25.3.3.3.3 of the spec:\r\n          // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\r\n          return doneResult();\r\n        }\r\n\r\n        context.method = method;\r\n        context.arg = arg;\r\n\r\n        while (true) {\r\n          var delegate = context.delegate;\r\n          if (delegate) {\r\n            var delegateResult = maybeInvokeDelegate(delegate, context);\r\n            if (delegateResult) {\r\n              if (delegateResult === ContinueSentinel) continue;\r\n              return delegateResult;\r\n            }\r\n          }\r\n\r\n          if (context.method === \"next\") {\r\n            // Setting context._sent for legacy support of Babel's\r\n            // function.sent implementation.\r\n            context.sent = context._sent = context.arg;\r\n\r\n          } else if (context.method === \"throw\") {\r\n            if (state === GenStateSuspendedStart) {\r\n              state = GenStateCompleted;\r\n              throw context.arg;\r\n            }\r\n\r\n            context.dispatchException(context.arg);\r\n\r\n          } else if (context.method === \"return\") {\r\n            context.abrupt(\"return\", context.arg);\r\n          }\r\n\r\n          state = GenStateExecuting;\r\n\r\n          var record = tryCatch(innerFn, self, context);\r\n          if (record.type === \"normal\") {\r\n            // If an exception is thrown from innerFn, we leave state ===\r\n            // GenStateExecuting and loop back for another invocation.\r\n            state = context.done\r\n              ? GenStateCompleted\r\n              : GenStateSuspendedYield;\r\n\r\n            if (record.arg === ContinueSentinel) {\r\n              continue;\r\n            }\r\n\r\n            return {\r\n              value: record.arg,\r\n              done: context.done\r\n            };\r\n\r\n          } else if (record.type === \"throw\") {\r\n            state = GenStateCompleted;\r\n            // Dispatch the exception by looping back around to the\r\n            // context.dispatchException(context.arg) call above.\r\n            context.method = \"throw\";\r\n            context.arg = record.arg;\r\n          }\r\n        }\r\n      };\r\n    }\r\n\r\n    // Call delegate.iterator[context.method](context.arg) and handle the\r\n    // result, either by returning a { value, done } result from the\r\n    // delegate iterator, or by modifying context.method and context.arg,\r\n    // setting context.delegate to null, and returning the ContinueSentinel.\r\n    function maybeInvokeDelegate(delegate, context) {\r\n      var method = delegate.iterator[context.method];\r\n      if (method === undefined$1) {\r\n        // A .throw or .return when the delegate iterator has no .throw\r\n        // method always terminates the yield* loop.\r\n        context.delegate = null;\r\n\r\n        if (context.method === \"throw\") {\r\n          // Note: [\"return\"] must be used for ES3 parsing compatibility.\r\n          if (delegate.iterator[\"return\"]) {\r\n            // If the delegate iterator has a return method, give it a\r\n            // chance to clean up.\r\n            context.method = \"return\";\r\n            context.arg = undefined$1;\r\n            maybeInvokeDelegate(delegate, context);\r\n\r\n            if (context.method === \"throw\") {\r\n              // If maybeInvokeDelegate(context) changed context.method from\r\n              // \"return\" to \"throw\", let that override the TypeError below.\r\n              return ContinueSentinel;\r\n            }\r\n          }\r\n\r\n          context.method = \"throw\";\r\n          context.arg = new TypeError(\r\n            \"The iterator does not provide a 'throw' method\");\r\n        }\r\n\r\n        return ContinueSentinel;\r\n      }\r\n\r\n      var record = tryCatch(method, delegate.iterator, context.arg);\r\n\r\n      if (record.type === \"throw\") {\r\n        context.method = \"throw\";\r\n        context.arg = record.arg;\r\n        context.delegate = null;\r\n        return ContinueSentinel;\r\n      }\r\n\r\n      var info = record.arg;\r\n\r\n      if (! info) {\r\n        context.method = \"throw\";\r\n        context.arg = new TypeError(\"iterator result is not an object\");\r\n        context.delegate = null;\r\n        return ContinueSentinel;\r\n      }\r\n\r\n      if (info.done) {\r\n        // Assign the result of the finished delegate to the temporary\r\n        // variable specified by delegate.resultName (see delegateYield).\r\n        context[delegate.resultName] = info.value;\r\n\r\n        // Resume execution at the desired location (see delegateYield).\r\n        context.next = delegate.nextLoc;\r\n\r\n        // If context.method was \"throw\" but the delegate handled the\r\n        // exception, let the outer generator proceed normally. If\r\n        // context.method was \"next\", forget context.arg since it has been\r\n        // \"consumed\" by the delegate iterator. If context.method was\r\n        // \"return\", allow the original .return call to continue in the\r\n        // outer generator.\r\n        if (context.method !== \"return\") {\r\n          context.method = \"next\";\r\n          context.arg = undefined$1;\r\n        }\r\n\r\n      } else {\r\n        // Re-yield the result returned by the delegate method.\r\n        return info;\r\n      }\r\n\r\n      // The delegate iterator is finished, so forget it and continue with\r\n      // the outer generator.\r\n      context.delegate = null;\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    // Define Generator.prototype.{next,throw,return} in terms of the\r\n    // unified ._invoke helper method.\r\n    defineIteratorMethods(Gp);\r\n\r\n    define(Gp, toStringTagSymbol, \"Generator\");\r\n\r\n    // A Generator should always return itself as the iterator object when the\r\n    // @@iterator function is called on it. Some browsers' implementations of the\r\n    // iterator prototype chain incorrectly implement this, causing the Generator\r\n    // object to not be returned from this call. This ensures that doesn't happen.\r\n    // See https://github.com/facebook/regenerator/issues/274 for more details.\r\n    Gp[iteratorSymbol] = function() {\r\n      return this;\r\n    };\r\n\r\n    Gp.toString = function() {\r\n      return \"[object Generator]\";\r\n    };\r\n\r\n    function pushTryEntry(locs) {\r\n      var entry = { tryLoc: locs[0] };\r\n\r\n      if (1 in locs) {\r\n        entry.catchLoc = locs[1];\r\n      }\r\n\r\n      if (2 in locs) {\r\n        entry.finallyLoc = locs[2];\r\n        entry.afterLoc = locs[3];\r\n      }\r\n\r\n      this.tryEntries.push(entry);\r\n    }\r\n\r\n    function resetTryEntry(entry) {\r\n      var record = entry.completion || {};\r\n      record.type = \"normal\";\r\n      delete record.arg;\r\n      entry.completion = record;\r\n    }\r\n\r\n    function Context(tryLocsList) {\r\n      // The root entry object (effectively a try statement without a catch\r\n      // or a finally block) gives us a place to store values thrown from\r\n      // locations where there is no enclosing try statement.\r\n      this.tryEntries = [{ tryLoc: \"root\" }];\r\n      tryLocsList.forEach(pushTryEntry, this);\r\n      this.reset(true);\r\n    }\r\n\r\n    exports.keys = function(object) {\r\n      var keys = [];\r\n      for (var key in object) {\r\n        keys.push(key);\r\n      }\r\n      keys.reverse();\r\n\r\n      // Rather than returning an object with a next method, we keep\r\n      // things simple and return the next function itself.\r\n      return function next() {\r\n        while (keys.length) {\r\n          var key = keys.pop();\r\n          if (key in object) {\r\n            next.value = key;\r\n            next.done = false;\r\n            return next;\r\n          }\r\n        }\r\n\r\n        // To avoid creating an additional object, we just hang the .value\r\n        // and .done properties off the next function object itself. This\r\n        // also ensures that the minifier will not anonymize the function.\r\n        next.done = true;\r\n        return next;\r\n      };\r\n    };\r\n\r\n    function values(iterable) {\r\n      if (iterable) {\r\n        var iteratorMethod = iterable[iteratorSymbol];\r\n        if (iteratorMethod) {\r\n          return iteratorMethod.call(iterable);\r\n        }\r\n\r\n        if (typeof iterable.next === \"function\") {\r\n          return iterable;\r\n        }\r\n\r\n        if (!isNaN(iterable.length)) {\r\n          var i = -1, next = function next() {\r\n            while (++i < iterable.length) {\r\n              if (hasOwn.call(iterable, i)) {\r\n                next.value = iterable[i];\r\n                next.done = false;\r\n                return next;\r\n              }\r\n            }\r\n\r\n            next.value = undefined$1;\r\n            next.done = true;\r\n\r\n            return next;\r\n          };\r\n\r\n          return next.next = next;\r\n        }\r\n      }\r\n\r\n      // Return an iterator with no values.\r\n      return { next: doneResult };\r\n    }\r\n    exports.values = values;\r\n\r\n    function doneResult() {\r\n      return { value: undefined$1, done: true };\r\n    }\r\n\r\n    Context.prototype = {\r\n      constructor: Context,\r\n\r\n      reset: function(skipTempReset) {\r\n        this.prev = 0;\r\n        this.next = 0;\r\n        // Resetting context._sent for legacy support of Babel's\r\n        // function.sent implementation.\r\n        this.sent = this._sent = undefined$1;\r\n        this.done = false;\r\n        this.delegate = null;\r\n\r\n        this.method = \"next\";\r\n        this.arg = undefined$1;\r\n\r\n        this.tryEntries.forEach(resetTryEntry);\r\n\r\n        if (!skipTempReset) {\r\n          for (var name in this) {\r\n            // Not sure about the optimal order of these conditions:\r\n            if (name.charAt(0) === \"t\" &&\r\n                hasOwn.call(this, name) &&\r\n                !isNaN(+name.slice(1))) {\r\n              this[name] = undefined$1;\r\n            }\r\n          }\r\n        }\r\n      },\r\n\r\n      stop: function() {\r\n        this.done = true;\r\n\r\n        var rootEntry = this.tryEntries[0];\r\n        var rootRecord = rootEntry.completion;\r\n        if (rootRecord.type === \"throw\") {\r\n          throw rootRecord.arg;\r\n        }\r\n\r\n        return this.rval;\r\n      },\r\n\r\n      dispatchException: function(exception) {\r\n        if (this.done) {\r\n          throw exception;\r\n        }\r\n\r\n        var context = this;\r\n        function handle(loc, caught) {\r\n          record.type = \"throw\";\r\n          record.arg = exception;\r\n          context.next = loc;\r\n\r\n          if (caught) {\r\n            // If the dispatched exception was caught by a catch block,\r\n            // then let that catch block handle the exception normally.\r\n            context.method = \"next\";\r\n            context.arg = undefined$1;\r\n          }\r\n\r\n          return !! caught;\r\n        }\r\n\r\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n          var entry = this.tryEntries[i];\r\n          var record = entry.completion;\r\n\r\n          if (entry.tryLoc === \"root\") {\r\n            // Exception thrown outside of any try block that could handle\r\n            // it, so set the completion value of the entire function to\r\n            // throw the exception.\r\n            return handle(\"end\");\r\n          }\r\n\r\n          if (entry.tryLoc <= this.prev) {\r\n            var hasCatch = hasOwn.call(entry, \"catchLoc\");\r\n            var hasFinally = hasOwn.call(entry, \"finallyLoc\");\r\n\r\n            if (hasCatch && hasFinally) {\r\n              if (this.prev < entry.catchLoc) {\r\n                return handle(entry.catchLoc, true);\r\n              } else if (this.prev < entry.finallyLoc) {\r\n                return handle(entry.finallyLoc);\r\n              }\r\n\r\n            } else if (hasCatch) {\r\n              if (this.prev < entry.catchLoc) {\r\n                return handle(entry.catchLoc, true);\r\n              }\r\n\r\n            } else if (hasFinally) {\r\n              if (this.prev < entry.finallyLoc) {\r\n                return handle(entry.finallyLoc);\r\n              }\r\n\r\n            } else {\r\n              throw new Error(\"try statement without catch or finally\");\r\n            }\r\n          }\r\n        }\r\n      },\r\n\r\n      abrupt: function(type, arg) {\r\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n          var entry = this.tryEntries[i];\r\n          if (entry.tryLoc <= this.prev &&\r\n              hasOwn.call(entry, \"finallyLoc\") &&\r\n              this.prev < entry.finallyLoc) {\r\n            var finallyEntry = entry;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (finallyEntry &&\r\n            (type === \"break\" ||\r\n             type === \"continue\") &&\r\n            finallyEntry.tryLoc <= arg &&\r\n            arg <= finallyEntry.finallyLoc) {\r\n          // Ignore the finally entry if control is not jumping to a\r\n          // location outside the try/catch block.\r\n          finallyEntry = null;\r\n        }\r\n\r\n        var record = finallyEntry ? finallyEntry.completion : {};\r\n        record.type = type;\r\n        record.arg = arg;\r\n\r\n        if (finallyEntry) {\r\n          this.method = \"next\";\r\n          this.next = finallyEntry.finallyLoc;\r\n          return ContinueSentinel;\r\n        }\r\n\r\n        return this.complete(record);\r\n      },\r\n\r\n      complete: function(record, afterLoc) {\r\n        if (record.type === \"throw\") {\r\n          throw record.arg;\r\n        }\r\n\r\n        if (record.type === \"break\" ||\r\n            record.type === \"continue\") {\r\n          this.next = record.arg;\r\n        } else if (record.type === \"return\") {\r\n          this.rval = this.arg = record.arg;\r\n          this.method = \"return\";\r\n          this.next = \"end\";\r\n        } else if (record.type === \"normal\" && afterLoc) {\r\n          this.next = afterLoc;\r\n        }\r\n\r\n        return ContinueSentinel;\r\n      },\r\n\r\n      finish: function(finallyLoc) {\r\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n          var entry = this.tryEntries[i];\r\n          if (entry.finallyLoc === finallyLoc) {\r\n            this.complete(entry.completion, entry.afterLoc);\r\n            resetTryEntry(entry);\r\n            return ContinueSentinel;\r\n          }\r\n        }\r\n      },\r\n\r\n      \"catch\": function(tryLoc) {\r\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n          var entry = this.tryEntries[i];\r\n          if (entry.tryLoc === tryLoc) {\r\n            var record = entry.completion;\r\n            if (record.type === \"throw\") {\r\n              var thrown = record.arg;\r\n              resetTryEntry(entry);\r\n            }\r\n            return thrown;\r\n          }\r\n        }\r\n\r\n        // The context.catch method must only be called with a location\r\n        // argument that corresponds to a known catch block.\r\n        throw new Error(\"illegal catch attempt\");\r\n      },\r\n\r\n      delegateYield: function(iterable, resultName, nextLoc) {\r\n        this.delegate = {\r\n          iterator: values(iterable),\r\n          resultName: resultName,\r\n          nextLoc: nextLoc\r\n        };\r\n\r\n        if (this.method === \"next\") {\r\n          // Deliberately forget the last sent value so that we don't\r\n          // accidentally pass it on to the delegate.\r\n          this.arg = undefined$1;\r\n        }\r\n\r\n        return ContinueSentinel;\r\n      }\r\n    };\r\n\r\n    // Regardless of whether this script is executing as a CommonJS module\r\n    // or not, return the runtime object so that we can declare the variable\r\n    // regeneratorRuntime in the outer scope, which allows this module to be\r\n    // injected easily by `bin/regenerator --include-runtime script.js`.\r\n    return exports;\r\n\r\n  }(\r\n    // If this script is executing as a CommonJS module, use module.exports\r\n    // as the regeneratorRuntime namespace. Otherwise create a new empty\r\n    // object. Either way, the resulting object will be used to initialize\r\n    // the regeneratorRuntime variable at the top of this file.\r\n    module.exports \r\n  ));\r\n\r\n  try {\r\n    regeneratorRuntime = runtime;\r\n  } catch (accidentalStrictMode) {\r\n    // This module should not be running in strict mode, so the above\r\n    // assignment should always work unless something is misconfigured. Just\r\n    // in case runtime.js accidentally runs in strict mode, we can escape\r\n    // strict mode using a global Function call. This could conceivably fail\r\n    // if a Content Security Policy forbids using Function, but in that case\r\n    // the proper solution is to fix the accidental strict mode problem. If\r\n    // you've misconfigured your bundler to force strict mode and applied a\r\n    // CSP to forbid Function, and you're not willing to fix either of those\r\n    // problems, please detail your unique predicament in a GitHub issue.\r\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\r\n  }\r\n  });\n\n  var regenerator = runtime_1;\n\n  function _createForOfIteratorHelperLoose$3(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray$3(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\n\r\n  function _unsupportedIterableToArray$3(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray$3(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$3(o, minLen); }\r\n\r\n  function _arrayLikeToArray$3(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n  /* global FormData self Blob File */\r\n\r\n  /* eslint-disable no-inner-declarations */\r\n\r\n  if (typeof Blob !== 'undefined' && (typeof FormData === 'undefined' || !FormData.prototype.keys)) {\r\n    var normalizeValue = function normalizeValue(_ref) {\r\n      var value = _ref[0],\r\n          filename = _ref[1];\r\n\r\n      if (value instanceof Blob) {\r\n        // Should always returns a new File instance\r\n        // console.assert(fd.get(x) !== fd.get(x))\r\n        value = new File([value], filename, {\r\n          type: value.type,\r\n          lastModified: value.lastModified\r\n        });\r\n      }\r\n\r\n      return value;\r\n    };\r\n\r\n    var ensureArgs = function ensureArgs(args, expected) {\r\n      if (args.length < expected) {\r\n        throw new TypeError(expected + \" argument required, but only \" + args.length + \" present.\");\r\n      }\r\n    };\r\n\r\n    var normalizeArgs = function normalizeArgs(name, value, filename) {\r\n      return value instanceof Blob // normalize name and filename if adding an attachment\r\n      ? [String(name), value, filename !== undefined ? filename + '' // Cast filename to string if 3th arg isn't undefined\r\n      : typeof value.name === 'string' // if name prop exist\r\n      ? value.name // Use File.name\r\n      : 'blob'] // otherwise fallback to Blob\r\n      // If no attachment, just cast the args to strings\r\n      : [String(name), String(value)];\r\n    }; // normalize linefeeds for textareas\r\n    // https://html.spec.whatwg.org/multipage/form-elements.html#textarea-line-break-normalisation-transformation\r\n\r\n    var normalizeLinefeeds = function normalizeLinefeeds(value) {\r\n      return value.replace(/\\r\\n/g, '\\n').replace(/\\n/g, '\\r\\n');\r\n    };\r\n\r\n    var each = function each(arr, cb) {\r\n      for (var i = 0; i < arr.length; i++) {\r\n        cb(arr[i]);\r\n      }\r\n    };\r\n    /**\r\n     * @implements {Iterable}\r\n     */\r\n\r\n    var global$1 = typeof window === 'object' ? window : typeof self === 'object' ? self : commonjsGlobal; // keep a reference to native implementation\r\n\r\n    var _FormData = global$1.FormData; // To be monkey patched\r\n\r\n    var _send = global$1.XMLHttpRequest && global$1.XMLHttpRequest.prototype.send;\r\n\r\n    var _fetch = global$1.Request && global$1.fetch;\r\n\r\n    var _sendBeacon = global$1.navigator && global$1.navigator.sendBeacon; // Unable to patch Request constructor correctly\r\n    // const _Request = global.Request\r\n    // only way is to use ES6 class extend\r\n    // https://github.com/babel/babel/issues/1966\r\n\r\n    var stringTag = global$1.Symbol && Symbol.toStringTag; // Add missing stringTags to blob and files\r\n\r\n    if (stringTag) {\r\n      if (!Blob.prototype[stringTag]) {\r\n        Blob.prototype[stringTag] = 'Blob';\r\n      }\r\n\r\n      if ('File' in global$1 && !File.prototype[stringTag]) {\r\n        File.prototype[stringTag] = 'File';\r\n      }\r\n    } // Fix so you can construct your own File\r\n\r\n    try {\r\n      new File([], ''); // eslint-disable-line\r\n    } catch (a) {\r\n      global$1.File = function File(b, d, c) {\r\n        var blob = new Blob(b, c);\r\n        var t = c && void 0 !== c.lastModified ? new Date(c.lastModified) : new Date();\r\n        Object.defineProperties(blob, {\r\n          name: {\r\n            value: d\r\n          },\r\n          lastModifiedDate: {\r\n            value: t\r\n          },\r\n          lastModified: {\r\n            value: +t\r\n          },\r\n          toString: {\r\n            value: function value() {\r\n              return '[object File]';\r\n            }\r\n          }\r\n        });\r\n\r\n        if (stringTag) {\r\n          Object.defineProperty(blob, stringTag, {\r\n            value: 'File'\r\n          });\r\n        }\r\n\r\n        return blob;\r\n      };\r\n    }\r\n\r\n    var FormDataPolyfill = /*#__PURE__*/function () {\r\n      /**\r\n       * FormData class\r\n       *\r\n       * @param {HTMLElement=} form\r\n       */\r\n      function FormDataPolyfill(form) {\r\n        this._data = Object.create(null);\r\n        if (!form) return this;\r\n        var self = this;\r\n        each(form.elements, function (elm) {\r\n          if (!elm.name || elm.disabled || elm.type === 'submit' || elm.type === 'button') return;\r\n\r\n          if (elm.type === 'file') {\r\n            var files = elm.files && elm.files.length ? elm.files : [new File([], '', {\r\n              type: 'application/octet-stream'\r\n            })]; // #78\r\n\r\n            each(files, function (file) {\r\n              self.append(elm.name, file);\r\n            });\r\n          } else if (elm.type === 'select-multiple' || elm.type === 'select-one') {\r\n            each(elm.options, function (opt) {\r\n              !opt.disabled && opt.selected && self.append(elm.name, opt.value);\r\n            });\r\n          } else if (elm.type === 'checkbox' || elm.type === 'radio') {\r\n            if (elm.checked) self.append(elm.name, elm.value);\r\n          } else {\r\n            var value = elm.type === 'textarea' ? normalizeLinefeeds(elm.value) : elm.value;\r\n            self.append(elm.name, value);\r\n          }\r\n        });\r\n      }\r\n      /**\r\n       * Append a field\r\n       *\r\n       * @param   {string}           name      field name\r\n       * @param   {string|Blob|File} value     string / blob / file\r\n       * @param   {string=}          filename  filename to use with blob\r\n       * @return  {undefined}\r\n       */\r\n\r\n      var _proto = FormDataPolyfill.prototype;\r\n\r\n      _proto.append = function append(name, value, filename) {\r\n        ensureArgs(arguments, 2);\r\n\r\n        var _normalizeArgs$apply = normalizeArgs.apply(null, arguments);\r\n\r\n        name = _normalizeArgs$apply[0];\r\n        value = _normalizeArgs$apply[1];\r\n        filename = _normalizeArgs$apply[2];\r\n        var map = this._data;\r\n        if (!map[name]) map[name] = [];\r\n        map[name].push([value, filename]);\r\n      }\r\n      /**\r\n       * Delete all fields values given name\r\n       *\r\n       * @param   {string}  name  Field name\r\n       * @return  {undefined}\r\n       */\r\n      ;\r\n\r\n      _proto.delete = function _delete(name) {\r\n        ensureArgs(arguments, 1);\r\n        delete this._data[String(name)];\r\n      }\r\n      /**\r\n       * Iterate over all fields as [name, value]\r\n       *\r\n       * @return {Iterator}\r\n       */\r\n      ;\r\n\r\n      _proto.entries =\r\n      /*#__PURE__*/\r\n      regenerator.mark(function entries() {\r\n        var map, name, _iterator, _step, value;\r\n\r\n        return regenerator.wrap(function entries$(_context) {\r\n          while (1) {\r\n            switch (_context.prev = _context.next) {\r\n              case 0:\r\n                map = this._data;\r\n                _context.t0 = regenerator.keys(map);\r\n\r\n              case 2:\r\n                if ((_context.t1 = _context.t0()).done) {\r\n                  _context.next = 13;\r\n                  break;\r\n                }\r\n\r\n                name = _context.t1.value;\r\n                _iterator = _createForOfIteratorHelperLoose$3(map[name]);\r\n\r\n              case 5:\r\n                if ((_step = _iterator()).done) {\r\n                  _context.next = 11;\r\n                  break;\r\n                }\r\n\r\n                value = _step.value;\r\n                _context.next = 9;\r\n                return [name, normalizeValue(value)];\r\n\r\n              case 9:\r\n                _context.next = 5;\r\n                break;\r\n\r\n              case 11:\r\n                _context.next = 2;\r\n                break;\r\n\r\n              case 13:\r\n              case \"end\":\r\n                return _context.stop();\r\n            }\r\n          }\r\n        }, entries, this);\r\n      })\r\n      /**\r\n       * Iterate over all fields\r\n       *\r\n       * @param   {Function}  callback  Executed for each item with parameters (value, name, thisArg)\r\n       * @param   {Object=}   thisArg   `this` context for callback function\r\n       * @return  {undefined}\r\n       */\r\n      ;\r\n\r\n      _proto.forEach = function forEach(callback, thisArg) {\r\n        ensureArgs(arguments, 1);\r\n\r\n        for (var _iterator2 = _createForOfIteratorHelperLoose$3(this), _step2; !(_step2 = _iterator2()).done;) {\r\n          var _step2$value = _step2.value,\r\n              name = _step2$value[0],\r\n              value = _step2$value[1];\r\n          callback.call(thisArg, value, name, this);\r\n        }\r\n      }\r\n      /**\r\n       * Return first field value given name\r\n       * or null if non existen\r\n       *\r\n       * @param   {string}  name      Field name\r\n       * @return  {string|File|null}  value Fields value\r\n       */\r\n      ;\r\n\r\n      _proto.get = function get(name) {\r\n        ensureArgs(arguments, 1);\r\n        var map = this._data;\r\n        name = String(name);\r\n        return map[name] ? normalizeValue(map[name][0]) : null;\r\n      }\r\n      /**\r\n       * Return all fields values given name\r\n       *\r\n       * @param   {string}  name  Fields name\r\n       * @return  {Array}         [{String|File}]\r\n       */\r\n      ;\r\n\r\n      _proto.getAll = function getAll(name) {\r\n        ensureArgs(arguments, 1);\r\n        return (this._data[String(name)] || []).map(normalizeValue);\r\n      }\r\n      /**\r\n       * Check for field name existence\r\n       *\r\n       * @param   {string}   name  Field name\r\n       * @return  {boolean}\r\n       */\r\n      ;\r\n\r\n      _proto.has = function has(name) {\r\n        ensureArgs(arguments, 1);\r\n        return String(name) in this._data;\r\n      }\r\n      /**\r\n       * Iterate over all fields name\r\n       *\r\n       * @return {Iterator}\r\n       */\r\n      ;\r\n\r\n      _proto.keys =\r\n      /*#__PURE__*/\r\n      regenerator.mark(function keys() {\r\n        var _iterator3, _step3, _step3$value, name;\r\n\r\n        return regenerator.wrap(function keys$(_context2) {\r\n          while (1) {\r\n            switch (_context2.prev = _context2.next) {\r\n              case 0:\r\n                _iterator3 = _createForOfIteratorHelperLoose$3(this);\r\n\r\n              case 1:\r\n                if ((_step3 = _iterator3()).done) {\r\n                  _context2.next = 7;\r\n                  break;\r\n                }\r\n\r\n                _step3$value = _step3.value, name = _step3$value[0];\r\n                _context2.next = 5;\r\n                return name;\r\n\r\n              case 5:\r\n                _context2.next = 1;\r\n                break;\r\n\r\n              case 7:\r\n              case \"end\":\r\n                return _context2.stop();\r\n            }\r\n          }\r\n        }, keys, this);\r\n      })\r\n      /**\r\n       * Overwrite all values given name\r\n       *\r\n       * @param   {string}    name      Filed name\r\n       * @param   {string}    value     Field value\r\n       * @param   {string=}   filename  Filename (optional)\r\n       * @return  {undefined}\r\n       */\r\n      ;\r\n\r\n      _proto.set = function set(name, value, filename) {\r\n        ensureArgs(arguments, 2);\r\n        var args = normalizeArgs.apply(null, arguments);\r\n        this._data[args[0]] = [[args[1], args[2]]];\r\n      }\r\n      /**\r\n       * Iterate over all fields\r\n       *\r\n       * @return {Iterator}\r\n       */\r\n      ;\r\n\r\n      _proto.values =\r\n      /*#__PURE__*/\r\n      regenerator.mark(function values() {\r\n        var _iterator4, _step4, _step4$value, value;\r\n\r\n        return regenerator.wrap(function values$(_context3) {\r\n          while (1) {\r\n            switch (_context3.prev = _context3.next) {\r\n              case 0:\r\n                _iterator4 = _createForOfIteratorHelperLoose$3(this);\r\n\r\n              case 1:\r\n                if ((_step4 = _iterator4()).done) {\r\n                  _context3.next = 7;\r\n                  break;\r\n                }\r\n\r\n                _step4$value = _step4.value, value = _step4$value[1];\r\n                _context3.next = 5;\r\n                return value;\r\n\r\n              case 5:\r\n                _context3.next = 1;\r\n                break;\r\n\r\n              case 7:\r\n              case \"end\":\r\n                return _context3.stop();\r\n            }\r\n          }\r\n        }, values, this);\r\n      })\r\n      /**\r\n       * Return a native (perhaps degraded) FormData with only a `append` method\r\n       * Can throw if it's not supported\r\n       *\r\n       * @return {FormData}\r\n       */\r\n      ;\r\n\r\n      _proto['_asNative'] = function _asNative() {\r\n        var fd = new _FormData();\r\n\r\n        for (var _iterator5 = _createForOfIteratorHelperLoose$3(this), _step5; !(_step5 = _iterator5()).done;) {\r\n          var _step5$value = _step5.value,\r\n              name = _step5$value[0],\r\n              value = _step5$value[1];\r\n          fd.append(name, value);\r\n        }\r\n\r\n        return fd;\r\n      }\r\n      /**\r\n       * [_blob description]\r\n       *\r\n       * @return {Blob} [description]\r\n       */\r\n      ;\r\n\r\n      _proto['_blob'] = function _blob() {\r\n        var boundary = '----formdata-polyfill-' + Math.random();\r\n        var chunks = [];\r\n\r\n        for (var _iterator6 = _createForOfIteratorHelperLoose$3(this), _step6; !(_step6 = _iterator6()).done;) {\r\n          var _step6$value = _step6.value,\r\n              name = _step6$value[0],\r\n              value = _step6$value[1];\r\n          chunks.push(\"--\" + boundary + \"\\r\\n\");\r\n\r\n          if (value instanceof Blob) {\r\n            chunks.push(\"Content-Disposition: form-data; name=\\\"\" + name + \"\\\"; filename=\\\"\" + value.name + \"\\\"\\r\\n\", \"Content-Type: \" + (value.type || 'application/octet-stream') + \"\\r\\n\\r\\n\", value, '\\r\\n');\r\n          } else {\r\n            chunks.push(\"Content-Disposition: form-data; name=\\\"\" + name + \"\\\"\\r\\n\\r\\n\" + value + \"\\r\\n\");\r\n          }\r\n        }\r\n\r\n        chunks.push(\"--\" + boundary + \"--\");\r\n        return new Blob(chunks, {\r\n          type: 'multipart/form-data; boundary=' + boundary\r\n        });\r\n      }\r\n      /**\r\n       * The class itself is iterable\r\n       * alias for formdata.entries()\r\n       *\r\n       * @return  {Iterator}\r\n       */\r\n      ;\r\n\r\n      _proto[Symbol.iterator] = function () {\r\n        return this.entries();\r\n      }\r\n      /**\r\n       * Create the default string description.\r\n       *\r\n       * @return  {string} [object FormData]\r\n       */\r\n      ;\r\n\r\n      _proto.toString = function toString() {\r\n        return '[object FormData]';\r\n      };\r\n\r\n      return FormDataPolyfill;\r\n    }();\r\n\r\n    if (stringTag) {\r\n      /**\r\n       * Create the default string description.\r\n       * It is accessed internally by the Object.prototype.toString().\r\n       */\r\n      FormDataPolyfill.prototype[stringTag] = 'FormData';\r\n    } // Patch xhr's send method to call _blob transparently\r\n\r\n    if (_send) {\r\n      var setRequestHeader = global$1.XMLHttpRequest.prototype.setRequestHeader;\r\n      /**\r\n       * @param {string} name\r\n       * @param {string} value\r\n       * @returns {undefined}\r\n       * @see https://xhr.spec.whatwg.org/#dom-xmlhttprequest-setrequestheader\r\n       */\r\n\r\n      global$1.XMLHttpRequest.prototype.setRequestHeader = function (name, value) {\r\n        setRequestHeader.call(this, name, value);\r\n        if (name.toLowerCase() === 'content-type') this._hasContentType = true;\r\n      };\r\n      /**\r\n       * @param {ArrayBuffer|ArrayBufferView|Blob|Document|FormData|string=} data\r\n       * @return {undefined}\r\n       * @see https://xhr.spec.whatwg.org/#the-send()-method\r\n       */\r\n\r\n      global$1.XMLHttpRequest.prototype.send = function (data) {\r\n        // need to patch send b/c old IE don't send blob's type (#44)\r\n        if (data instanceof FormDataPolyfill) {\r\n          var blob = data['_blob']();\r\n          if (!this._hasContentType) this.setRequestHeader('Content-Type', blob.type);\r\n\r\n          _send.call(this, blob);\r\n        } else {\r\n          _send.call(this, data);\r\n        }\r\n      };\r\n    } // Patch fetch's function to call _blob transparently\r\n\r\n    if (_fetch) {\r\n      var _fetch2 = global$1.fetch;\r\n\r\n      global$1.fetch = function (input, init) {\r\n        if (init && init.body && init.body instanceof FormDataPolyfill) {\r\n          init.body = init.body['_blob']();\r\n        }\r\n\r\n        return _fetch2.call(this, input, init);\r\n      };\r\n    } // Patch navigator.sendBeacon to use native FormData\r\n\r\n    if (_sendBeacon) {\r\n      global$1.navigator.sendBeacon = function (url, data) {\r\n        if (data instanceof FormDataPolyfill) {\r\n          data = data['_asNative']();\r\n        }\r\n\r\n        return _sendBeacon.call(this, url, data);\r\n      };\r\n    }\r\n\r\n    global$1['FormData'] = FormDataPolyfill;\r\n  }\n\n  function MultiPage(formid) {\r\n    var self = this;\r\n    this.$form = null;\r\n    this.formID = formid;\r\n    this.pageIndex = 1;\r\n    this.maxPageIndex = 0;\r\n    this.minPageIndex = 0;\r\n    this.pageIndexes = [];\r\n    this.$pages = null;\r\n    this.$collapses = null;\r\n    this.isTab = false; // Is tabs\r\n\r\n    this.isCollapse = false; // Is collapses (accordion)\r\n\r\n    this.lastPageSubmit = false; // Enable submit button for the last page only\r\n\r\n    this.hideDisabledButton = false; // Hide disabled submit button\r\n\r\n    this.hideInactivePages = false; // Hide inactive pages\r\n\r\n    this.lockTabs = false; // Set inactive tabs as disabled\r\n\r\n    this.hideTabs = false; // Hide all tabs\r\n\r\n    this.showPagerTop = false; // Show pager at top\r\n\r\n    this.showPagerBottom = false; // Show pager at bottom\r\n\r\n    this.pagerTemplate = '<nav><ul class=\"pagination\"><li class=\"page-item previous ew-prev\"><a href=\"#\" class=\"page-link\"><span class=\"icon-prev\"></span> {Prev}</a></li><li class=\"page-item next ew-next\"><a href=\"#\" class=\"page-link\">{Next} <span class=\"icon-next\"></span></a></li></ul></nav>'; // Pager template\r\n    // \"show\" handler (for disabled tabs)\r\n\r\n    var _show = function _show(e) {\r\n      e.preventDefault();\r\n    }; // Set properties\r\n\r\n    var _properties = [\"lastPageSubmit\", \"hideDisabledButton\", \"hideInactivePages\", \"lockTabs\", \"hideTabs\", \"showPagerTop\", \"showPagerBottom\", \"pagerTemplate\"];\r\n\r\n    this.set = function () {\r\n      if (arguments.length == 1 && $__default['default'].isObject(arguments[0])) {\r\n        var obj = arguments[0];\r\n\r\n        for (var i in obj) {\r\n          var p = i[0].toLowerCase() + i.substr(1); // Camel case\r\n\r\n          if (_properties.includes(p)) this[p] = obj[i];\r\n        }\r\n      }\r\n    }; // DOM loaded\r\n\r\n    this.init = function () {\r\n      var tpl = this.pagerTemplate.replace(/\\{prev\\}/i, ew.language.phrase(\"Prev\")).replace(/\\{next\\}/i, ew.language.phrase(\"Next\"));\r\n\r\n      if (this.isTab) {\r\n        if (this.showPagerTop) this.$pages.closest(\".tabbable, .ew-nav-tabs\").before(tpl);\r\n        if (this.showPagerBottom) this.$pages.closest(\".tabbable, .ew-nav-tabs\").after(tpl);\r\n        this.$form.find(\".ew-prev\").click(function (e) {\r\n          self.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent().prev(\":has([data-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\").find(\"[data-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n          return false;\r\n        });\r\n        this.$form.find(\".ew-next\").click(function (e) {\r\n          self.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent().next(\":has([data-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\").find(\"[data-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n          return false;\r\n        });\r\n        if (this.hideTabs) this.$form.find(\".ew-multi-page > .tabbable > .nav-tabs, .ew-multi-page > .ew-nav-tabs > .nav-tabs\").hide();\r\n      } else if (this.isCollapse) {\r\n        if (this.showPagerTop) this.$collapses.closest(\".ew-accordion\").before(tpl);\r\n        if (this.showPagerBottom) this.$collapses.closest(\".ew-accordion\").after(tpl);\r\n        this.$form.find(\".ew-prev\").click(function (e) {\r\n          self.$pages.closest(\".card\").filter(\":has(.collapse.show)\").prev(\":has([data-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\").toggleClass(\"disabled d-none\", false).find(\"[data-toggle=collapse]\").click();\r\n          return false;\r\n        });\r\n        this.$form.find(\".ew-next\").click(function (e) {\r\n          self.$pages.closest(\".card\").filter(\":has(.collapse.show)\").next(\":has([data-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\").toggleClass(\"disabled d-none\", false).find(\"[data-toggle=collapse]\").click();\r\n          return false;\r\n        });\r\n      }\r\n\r\n      this.pageShow();\r\n    }; // Page show\r\n\r\n    this.pageShow = function () {\r\n      if (this.isTab) {\r\n        if (this.lockTabs) this.$pages.on(\"show.bs.tab\", _show);\r\n        this.$pages.each(function () {\r\n          var $this = $__default['default'](this);\r\n          if (self.hideInactivePages) $this.toggleClass(\"d-none\", !$this.hasClass(\"active\"));\r\n          if (self.lockTabs) $this.toggleClass(\"disabled\", !$this.hasClass(\"active\"));\r\n        });\r\n      } else if (this.isCollapse) {\r\n        this.$pages.closest(\".card\").each(function () {\r\n          var $this = $__default['default'](this);\r\n          if (self.hideInactivePages) $this.toggleClass(\"d-none\", !$this.find(\".collapse.show\")[0]);\r\n        });\r\n      }\r\n\r\n      var disabled = this.lastPageSubmit && this.pageIndex != this.maxPageIndex;\r\n      var $btn = this.$form.closest(\".content, .modal-content\").find(\"#btn-action, button.ew-submit\").prop(\"disabled\", disabled).toggle(!this.hideDisabledButton || !disabled);\r\n      $__default['default'](\".ew-captcha\").toggle($btn.is(\":visible:not(:disabled)\")); // Re-captcha uses class \"disabled\", not \"disabled\" property.\r\n\r\n      disabled = this.pageIndex <= this.minPageIndex;\r\n      this.$form.find(\".ew-prev\").toggleClass(\"disabled\", disabled);\r\n      disabled = this.pageIndex >= this.maxPageIndex;\r\n      this.$form.find(\".ew-next\").toggleClass(\"disabled\", disabled);\r\n    }; // Go to page by index\r\n\r\n    this.gotoPage = function (i) {\r\n      if (i <= 0 || i < this.minPageIndex || i > this.maxPageIndex) return;\r\n\r\n      if (this.pageIndex != i) {\r\n        var $page = this.$pages.eq(i - 1);\r\n\r\n        if (this.isTab) {\r\n          if ($page.is(\":not(.d-none):not(.disabled)\")) $page.click();else $page.parent().next(\":has([data-toggle=tab]):not(.d-none):not(.disabled)\").find(\"[data-toggle=tab]\").toggleClass(\"disabled\", false).click();\r\n        } else if (this.isCollapse) {\r\n          var $p = $page.closest(\".card\");\r\n          if ($p.is(\":not(.d-none)\")) $page.click();else $p.next(\":has([data-toggle=collapse]):not(.d-none)\").find(\"[data-toggle=collapse]\").click();\r\n        }\r\n\r\n        this.pageIndex = i;\r\n      }\r\n    };\r\n\r\n    this.gotoPageByIndex = this.gotoPage; // Go to page by element\r\n\r\n    this.gotoPageByElement = function (el) {\r\n      this.gotoPage(parseInt($__default['default'](el).data(\"page\"), 10) || -1);\r\n    }; // Go to page by element's id or name or data-field attribute\r\n\r\n    this.gotoPageByElementId = function (id) {\r\n      var $el = this.$form.find(\"[data-page]\").filter(\"[id='\" + id + \"'],[name='\" + id + \"'],[data-field='\" + id + \"']\");\r\n      this.gotoPageByElement($el);\r\n    }; // Toggle page\r\n\r\n    this.togglePage = function (i, show) {\r\n      if (this.isTab) {\r\n        this.$pages.eq(i - 1).toggleClass(\"d-none\", !show);\r\n      } else if (this.isCollapse) {\r\n        this.$pages.eq(i - 1).closest(\".card\").toggle(\"d-none\", !show);\r\n      }\r\n    }; // Render\r\n\r\n    this.render = function () {\r\n      this.$form = $__default['default'](\"#\" + formid);\r\n      this.pageIndexes = this.$form.find(\"[data-page]\").map(function () {\r\n        var index = parseInt($__default['default'](this).data(\"page\"), 10);\r\n        return index > 0 ? index : null;\r\n      }).get();\r\n      this.pageIndexes.sort(function (a, b) {\r\n        return a - b;\r\n      });\r\n      this.minPageIndex = this.pageIndexes[0];\r\n      this.maxPageIndex = this.pageIndexes[this.pageIndexes.length - 1];\r\n      var $tabs = this.$form.find(\"[data-toggle=tab]\");\r\n\r\n      if ($tabs[0]) {\r\n        this.$pages = $tabs;\r\n        this.isTab = true;\r\n        $tabs.on(\"shown.bs.tab\", function (e) {\r\n          self.pageIndex = $tabs.index(e.target) + 1;\r\n          self.pageShow();\r\n          $__default['default']($__default['default'](this).attr(\"href\")).find(\".ew-google-map\").each(function () {\r\n            var m = ew.googleMaps[this.id];\r\n\r\n            if (m && m[\"map\"]) {\r\n              google.maps.event.trigger(m[\"map\"], \"resize\");\r\n              m[\"map\"].setCenter(m[\"latlng\"]);\r\n            }\r\n          });\r\n        });\r\n        this.pageIndex = $tabs.index($tabs.parent(\".active\")) + 1;\r\n      } else {\r\n        this.$collapses = this.$form.find(\"[data-toggle=collapse]\");\r\n\r\n        if (this.$collapses[0]) {\r\n          this.$pages = this.$collapses;\r\n          this.isCollapse = true;\r\n          var $bodies = this.$collapses.closest(\".card-header\").next();\r\n          $bodies.on(\"shown.bs.collapse\", function (e) {\r\n            self.pageIndex = $bodies.index(e.target) + 1;\r\n            self.pageShow();\r\n            $__default['default'](this).find(\".ew-google-map\").each(function () {\r\n              var m = ew.googleMaps[this.id];\r\n\r\n              if (m && m[\"map\"]) {\r\n                google.maps.event.trigger(m[\"map\"], \"resize\");\r\n                m[\"map\"].setCenter(m[\"latlng\"]);\r\n              }\r\n            });\r\n          });\r\n          this.pageIndex = $bodies.index($bodies.hasClass(\"show\")) + 1;\r\n        }\r\n      }\r\n\r\n      $__default['default'](function () {\r\n        self.init();\r\n      });\r\n    };\r\n  }\n\n  /**\r\n   * User level ID validator\r\n   */\r\n\r\n  function userLevelId(el) {\r\n    if (el && !ew.checkInteger(el.value)) return {\r\n      userLevelId: ew.language.phrase(\"UserLevelIDInteger\")\r\n    };\r\n    var level = parseInt(el.value, 10);\r\n    if (level < 1) return {\r\n      userLevelId: ew.language.phrase(\"UserLevelIDIncorrect\")\r\n    };\r\n    return false;\r\n  }\r\n  /**\r\n   * User level name validator\r\n   * @param {string} id User ID Field input element ID\r\n   */\r\n\r\n  function userLevelName(id) {\r\n    return function (el) {\r\n      var elId = document.getElementById(\"x_\" + id);\r\n\r\n      if (elId && el) {\r\n        var name = el.value.trim(),\r\n            level = parseInt(elId.value.trim(), 10);\r\n\r\n        if (level === 0 && !ew.sameText(name, \"Default\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelDefaultName\")\r\n          };\r\n        } else if (level === -1 && !ew.sameText(name, \"Administrator\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelAdministratorName\")\r\n          };\r\n        } else if (level === -2 && !ew.sameText(name, \"Anonymous\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelAnonymousName\")\r\n          };\r\n        } else if (level > 0 && [\"anonymous\", \"administrator\", \"default\"].includes(name.toLowerCase())) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelNameIncorrect\")\r\n          };\r\n        }\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Required validator\r\n   */\r\n\r\n  function required(fieldName) {\r\n    return function (el) {\r\n      var _$el$data;\r\n\r\n      var $el = $__default['default'](el),\r\n          $p = $el.closest(\"#r_\" + ((_$el$data = $el.data(\"field\")) === null || _$el$data === void 0 ? void 0 : _$el$data.substr(2))); // Find the row\r\n\r\n      if (!$p[0]) $p = $el.closest(\"[id^=el]\"); // Find the span\r\n\r\n      if ($p.css(\"display\") == \"none\") {\r\n        // Hidden by .visible()\r\n        return false;\r\n      }\r\n\r\n      if (el && !ew.hasValue(el)) {\r\n        return {\r\n          required: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * File required validator\r\n   */\r\n\r\n  function fileRequired(fieldName) {\r\n    return function (el) {\r\n      var elFn = document.getElementById(\"fn_\" + el.id);\r\n\r\n      if (elFn && !ew.hasValue(elFn)) {\r\n        return {\r\n          fileRequired: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Mismatch password validator\r\n   */\r\n\r\n  function mismatchPassword(el) {\r\n    var id;\r\n    if (el.id.startsWith(\"c_\")) // Confirm Password field in Register page\r\n      id = el.id.replace(/^c_/, \"x_\");else if (el.id == \"cpwd\") // Change Password page\r\n      id = \"npwd\";\r\n    var elPwd = document.getElementById(id);\r\n\r\n    if (el.value !== elPwd.value) {\r\n      return {\r\n        mismatchPassword: ew.language.phrase(\"MismatchPassword\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Between validator\r\n   */\r\n\r\n  function between(el) {\r\n    var x, z;\r\n\r\n    if (el.id.startsWith(\"y_\")) {\r\n      x = document.getElementById(el.id.replace(/^y_/, \"x_\"));\r\n      z = document.getElementById(el.id.replace(/^y_/, \"z_\"));\r\n    }\r\n\r\n    if (ew.hasValue(x) && $__default['default'](z).val() == \"BETWEEN\" && !ew.hasValue(el)) {\r\n      return {\r\n        between: ew.language.phrase(\"EnterValue2\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Password strength validator\r\n   */\r\n\r\n  function passwordStrength(el) {\r\n    var $el = $__default['default'](el);\r\n\r\n    if (!ew.isMaskedPassword(el) && $el.hasClass(\"ew-password-strength\") && !$el.data(\"validated\")) {\r\n      return {\r\n        passwordStrength: ew.language.phrase(\"PasswordTooSimple\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * User name validator\r\n   */\r\n\r\n  function username(raw) {\r\n    return function (el) {\r\n      if (!raw && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_USERNAME_CHARACTERS) + ']'))) return {\r\n        username: ew.language.phrase(\"InvalidUsernameChars\")\r\n      };\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Password validator\r\n   */\r\n\r\n  function password(raw) {\r\n    return function (el) {\r\n      if (!raw && !ew.ENCRYPTED_PASSWORD && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_PASSWORD_CHARACTERS) + ']'))) return {\r\n        password: ew.language.phrase(\"InvalidPasswordChars\")\r\n      };\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Email validator\r\n   */\r\n\r\n  function email(el) {\r\n    var value = ew.getValue(el);\r\n\r\n    if (!ew.checkEmail(value)) {\r\n      return {\r\n        email: ew.language.phrase(\"IncorrectEmail\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Emails validator\r\n   */\r\n\r\n  function emails(cnt, err) {\r\n    return function (el) {\r\n      var value = ew.getValue(el);\r\n\r\n      if (!ew.checkEmails(value, cnt)) {\r\n        return {\r\n          email: err\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * DateTime validator\r\n   * @param {number} dateFormat DateTime format ID\r\n   */\r\n\r\n  function datetime(dateFormat) {\r\n    return function (el) {\r\n      var fn,\r\n          phraseId,\r\n          value = ew.getValue(el),\r\n          newSubStr = ew.DATE_SEPARATOR;\r\n\r\n      if ([12, 15, 115].includes(dateFormat)) {\r\n        fn = ew.checkShortDate;\r\n        phraseId = \"IncorrectShortDateYMD\";\r\n      } else if ([5, 9, 109].includes(dateFormat)) {\r\n        fn = ew.checkDate;\r\n        phraseId = \"IncorrectDateYMD\";\r\n      } else if ([14, 17, 117].includes(dateFormat)) {\r\n        fn = ew.checkShortEuroDate;\r\n        phraseId = \"IncorrectShortDateDMY\";\r\n      } else if ([7, 11, 111].includes(dateFormat)) {\r\n        fn = ew.checkEuroDate;\r\n        phraseId = \"IncorrectDateDMY\";\r\n      } else if ([13, 16, 116].includes(dateFormat)) {\r\n        fn = ew.checkShortUSDate;\r\n        phraseId = \"IncorrectShortDateMDY\";\r\n      } else if ([6, 10, 110].includes(dateFormat)) {\r\n        fn = ew.checkUSDate;\r\n        phraseId = \"IncorrectDateMDY\";\r\n      } else {\r\n        // Default date format\r\n        fn = ew.checkDateDef;\r\n        phraseId = \"IncorrectDate\";\r\n        newSubStr = ew.DATE_FORMAT;\r\n      }\r\n\r\n      if (fn && !fn(value)) {\r\n        return {\r\n          datetime: ew.language.phrase(phraseId).replace(/%s/g, newSubStr)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Time validator\r\n   */\r\n\r\n  function time(el) {\r\n    var value = ew.getValue(el);\r\n\r\n    if (!ew.checkTime(value)) {\r\n      return {\r\n        time: ew.language.phrase(\"IncorrectTime\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Float validator\r\n   */\r\n\r\n  function float(el) {\r\n    var value = ew.getValue(el);\r\n\r\n    if (!ew.checkNumber(value)) {\r\n      return {\r\n        time: ew.language.phrase(\"IncorrectFloat\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Range validator\r\n   * @param {number} min Min value\r\n   * @param {number} max Max value\r\n   */\r\n\r\n  function range(min, max) {\r\n    return function (el) {\r\n      var value = ew.getValue(el);\r\n\r\n      if (!ew.checkRange(value, min, max)) {\r\n        return {\r\n          range: ew.language.phrase(\"IncorrectRange\").replace(\"%1\", min).replace(\"%2\", max)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Integer validator\r\n   */\r\n\r\n  function integer(el) {\r\n    var value = ew.getValue(el);\r\n\r\n    if (!ew.checkInteger(value)) {\r\n      return {\r\n        integer: ew.language.phrase(\"IncorrectInteger\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * US phone validator\r\n   */\r\n\r\n  function phone(el) {\r\n    var value = ew.getValue(el);\r\n\r\n    if (!ew.checkPhone(value)) {\r\n      return {\r\n        phone: ew.language.phrase(\"IncorrectPhone\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * US ZIP validator\r\n   */\r\n\r\n  function zip(el) {\r\n    var value = ew.getValue(el);\r\n\r\n    if (!ew.checkZip(value)) {\r\n      return {\r\n        zip: ew.language.phrase(\"IncorrectZip\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Credit card validator\r\n   */\r\n\r\n  function creditCard(el) {\r\n    var value = ew.getValue(el);\r\n\r\n    if (!ew.checkCreditCard(value)) {\r\n      return {\r\n        creditCard: ew.language.phrase(\"IncorrectCreditCard\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * US SSN validator\r\n   */\r\n\r\n  function ssn(el) {\r\n    var value = ew.getValue(el);\r\n\r\n    if (!ew.checkSsn(value)) {\r\n      return {\r\n        ssn: ew.language.phrase(\"IncorrectSSN\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * GUID validator\r\n   */\r\n\r\n  function guid(el) {\r\n    var value = ew.getValue(el);\r\n\r\n    if (!ew.checkGuid(value)) {\r\n      return {\r\n        guid: ew.language.phrase(\"IncorrectGUID\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Regular expression validator\r\n   * @param {string} pattern Regular expression pattern\r\n   */\r\n\r\n  function regex(pattern) {\r\n    return function (el) {\r\n      var value = ew.getValue(el);\r\n\r\n      if (!ew.checkByRegEx(value, pattern)) {\r\n        return {\r\n          regex: ew.language.phrase(\"IncorrectField\")\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n    * Custom validator\r\n    * @param {*} fn Function(value, ...args)\r\n    * @param  {...any} args Additional arguments for the function\r\n    */\r\n\r\n  function custom(fn) {\r\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n      args[_key - 1] = arguments[_key];\r\n    }\r\n\r\n    return function (el) {\r\n      if (typeof fn == \"function\") {\r\n        var value = ew.getValue(el);\r\n        if (fn.apply(void 0, [value].concat(args))) return {\r\n          custom: ew.language.phrase(\"IncorrectField\")\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Captcha validator\r\n   */\r\n\r\n  function captcha(el) {\r\n    if (el && !ew.hasValue(el)) {\r\n      return {\r\n        captcha: ew.language.phrase(\"EnterValidateCode\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * reCaptcha validator\r\n   * @param {number} id reCaptcha ID\r\n   */\r\n\r\n  function recaptcha(el) {\r\n    var _grecaptcha;\r\n\r\n    if (el && !ew.hasValue(el) && ((_grecaptcha = grecaptcha) === null || _grecaptcha === void 0 ? void 0 : _grecaptcha.getResponse(el.dataset.id)) === \"\") {\r\n      return {\r\n        recaptcha: ew.language.phrase(\"ClickReCaptcha\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\n\n  var Validators = {\n    __proto__: null,\n    userLevelId: userLevelId,\n    userLevelName: userLevelName,\n    required: required,\n    fileRequired: fileRequired,\n    mismatchPassword: mismatchPassword,\n    between: between,\n    passwordStrength: passwordStrength,\n    username: username,\n    password: password,\n    email: email,\n    emails: emails,\n    datetime: datetime,\n    time: time,\n    float: float,\n    range: range,\n    integer: integer,\n    phone: phone,\n    zip: zip,\n    creditCard: creditCard,\n    ssn: ssn,\n    guid: guid,\n    regex: regex,\n    custom: custom,\n    captcha: captcha,\n    recaptcha: recaptcha\n  };\n\n  var createClass = createCommonjsModule(function (module) {\r\n  function _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n      var descriptor = props[i];\r\n      descriptor.enumerable = descriptor.enumerable || false;\r\n      descriptor.configurable = true;\r\n      if (\"value\" in descriptor) descriptor.writable = true;\r\n      Object.defineProperty(target, descriptor.key, descriptor);\r\n    }\r\n  }\r\n\r\n  function _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\r\n    if (staticProps) _defineProperties(Constructor, staticProps);\r\n    return Constructor;\r\n  }\r\n\r\n  module.exports = _createClass;\r\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\r\n  });\r\n\r\n  var _createClass = unwrapExports(createClass);\n\n  var assertThisInitialized = createCommonjsModule(function (module) {\r\n  function _assertThisInitialized(self) {\r\n    if (self === void 0) {\r\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\r\n    }\r\n\r\n    return self;\r\n  }\r\n\r\n  module.exports = _assertThisInitialized;\r\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\r\n  });\r\n\r\n  var _assertThisInitialized = unwrapExports(assertThisInitialized);\n\n  var setPrototypeOf = createCommonjsModule(function (module) {\r\n  function _setPrototypeOf(o, p) {\r\n    module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\r\n      o.__proto__ = p;\r\n      return o;\r\n    };\r\n\r\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\r\n    return _setPrototypeOf(o, p);\r\n  }\r\n\r\n  module.exports = _setPrototypeOf;\r\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\r\n  });\r\n\r\n  unwrapExports(setPrototypeOf);\n\n  var inheritsLoose = createCommonjsModule(function (module) {\r\n  function _inheritsLoose(subClass, superClass) {\r\n    subClass.prototype = Object.create(superClass.prototype);\r\n    subClass.prototype.constructor = subClass;\r\n    setPrototypeOf(subClass, superClass);\r\n  }\r\n\r\n  module.exports = _inheritsLoose;\r\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\r\n  });\r\n\r\n  var _inheritsLoose = unwrapExports(inheritsLoose);\n\n  var defineProperty = createCommonjsModule(function (module) {\r\n  function _defineProperty(obj, key, value) {\r\n    if (key in obj) {\r\n      Object.defineProperty(obj, key, {\r\n        value: value,\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true\r\n      });\r\n    } else {\r\n      obj[key] = value;\r\n    }\r\n\r\n    return obj;\r\n  }\r\n\r\n  module.exports = _defineProperty;\r\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\r\n  });\r\n\r\n  var _defineProperty = unwrapExports(defineProperty);\n\n  var asyncToGenerator = createCommonjsModule(function (module) {\r\n  function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\r\n    try {\r\n      var info = gen[key](arg);\r\n      var value = info.value;\r\n    } catch (error) {\r\n      reject(error);\r\n      return;\r\n    }\r\n\r\n    if (info.done) {\r\n      resolve(value);\r\n    } else {\r\n      Promise.resolve(value).then(_next, _throw);\r\n    }\r\n  }\r\n\r\n  function _asyncToGenerator(fn) {\r\n    return function () {\r\n      var self = this,\r\n          args = arguments;\r\n      return new Promise(function (resolve, reject) {\r\n        var gen = fn.apply(self, args);\r\n\r\n        function _next(value) {\r\n          asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\r\n        }\r\n\r\n        function _throw(err) {\r\n          asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\r\n        }\r\n\r\n        _next(undefined);\r\n      });\r\n    };\r\n  }\r\n\r\n  module.exports = _asyncToGenerator;\r\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\r\n  });\r\n\r\n  var _asyncToGenerator = unwrapExports(asyncToGenerator);\n\n  function FormBase(id, pageId) {\r\n    var self = this;\r\n    this._initiated = false;\r\n    this.id = id; // Same ID as the form\r\n\r\n    this.pageId = pageId;\r\n    this.$element = null; // jQuery object of the form or div\r\n\r\n    this.htmlForm = null; // HTML form element\r\n\r\n    this.initSearchPanel = false; // Expanded by default\r\n\r\n    this.modified = false;\r\n    this.validateRequired = true;\r\n    this.validate = null;\r\n    this.emptyRow = null; // Check empty row\r\n\r\n    this.multiPage = null; // Multi-page\r\n\r\n    this.autoSuggests = {}; // AutoSuggests\r\n\r\n    this.lists = {}; // Dynamic selection lists\r\n    // Disable form\r\n\r\n    this.disableForm = function () {\r\n      var form = this.getForm();\r\n      $__default['default'](form).find(\":submit:not(.dropdown-toggle)\").prop(\"disabled\", true).addClass(\"disabled\");\r\n    }; // Enable form\r\n\r\n    this.enableForm = function () {\r\n      var form = this.getForm(),\r\n          $form = $__default['default'](form);\r\n      $form.find(\".ew-disabled-element\").removeClass(\"ew-disabled-element\").prop(\"disabled\", false);\r\n      $form.find(\".ew-enabled-element\").removeClass(\"ew-enabled-element\").prop(\"disabled\", true);\r\n      $form.find(\":submit:not(.dropdown-toggle)\").prop(\"disabled\", false).removeClass(\"disabled\");\r\n    }; // Append hidden element with form name\r\n\r\n    this.appendHidden = function (el) {\r\n      var form = this.getForm(),\r\n          $form = $__default['default'](form),\r\n          $dp = $__default['default'](el).closest(\".ew-form\"),\r\n          name = $dp.attr(\"id\") + \"$\" + el.name;\r\n      if ($form.find(\"input:hidden[name='\" + name + \"']\")[0]) // Already appended\r\n        return;\r\n      var ar = $dp.find('[name=\"' + el.name + '\"]').serializeArray();\r\n\r\n      if (ar.length) {\r\n        ar.forEach(function (o, i) {\r\n          $__default['default']('<input type=\"hidden\" name=\"' + name + '\">').val(o.value).appendTo($form);\r\n        });\r\n      } else {\r\n        $__default['default']('<input type=\"hidden\" name=\"' + name + '\">').val(\"\").appendTo($form);\r\n      }\r\n    }; // Can submit\r\n\r\n    this.canSubmit = function () {\r\n      var form = this.getForm(),\r\n          $form = $__default['default'](form);\r\n      this.disableForm();\r\n      this.updateTextArea();\r\n\r\n      if (!this.validate || this.validate() && !$form.find(\".is-invalid\")[0]) {\r\n        $form.find(\"input[name^=sv_], input[name^=p_], .ew-template input\") // Do not submit these values\r\n        .prop(\"disabled\", true).addClass(\"ew-disabled-element\");\r\n        $form.find(\"[data-readonly=1][disabled]\").prop(\"disabled\", false).addClass(\"ew-enabled-element\"); // Submit readonly values\r\n\r\n        var $dps = $__default['default']($form.find(\"input[name='detailpage']\").map(function (i, el) {\r\n          return $form.find(\"#\" + el.value).get();\r\n        }));\r\n\r\n        if ($dps.length > 1) {\r\n          // Multiple Master/Detail, check element names\r\n          $dps.each(function (i, dp) {\r\n            $__default['default'](dp).find(\":input\").each(function (j, el) {\r\n              if (/^(fn_)?(x|o)\\d*_/.test(el.name)) {\r\n                var $els = $dps.not(dp).find(\":input[name='\" + el.name + \"']\");\r\n\r\n                if ($els.length) {\r\n                  // Elements with same name found\r\n                  self.appendHidden(el); // Append element with form name\r\n\r\n                  $els.each(function () {\r\n                    self.appendHidden(this); // Append elements with same name and form name\r\n                  });\r\n                }\r\n              }\r\n            });\r\n          });\r\n        }\r\n\r\n        return true;\r\n      } else {\r\n        this.enableForm();\r\n      }\r\n\r\n      return false;\r\n    }; // Submit\r\n\r\n    this.submit = /*#__PURE__*/function () {\r\n      var _ref = _asyncToGenerator( /*#__PURE__*/regenerator.mark(function _callee(e, action) {\r\n        var form, args, result;\r\n        return regenerator.wrap(function _callee$(_context) {\r\n          while (1) {\r\n            switch (_context.prev = _context.next) {\r\n              case 0:\r\n                form = this.getForm();\r\n\r\n                if (!this.canSubmit()) {\r\n                  _context.next = 11;\r\n                  break;\r\n                }\r\n\r\n                if (action) form.action = action;\r\n                args = {\r\n                  f: this,\r\n                  form: form,\r\n                  result: true\r\n                };\r\n                $__default['default'](form).trigger(\"beforesubmit\", [args]);\r\n                _context.next = 7;\r\n                return args.result;\r\n\r\n              case 7:\r\n                result = _context.sent;\r\n                // Support Promise\r\n                if ($__default['default'].isBoolean(result) && result || $__default['default'].isObject(result) && result.value) // Support Swal.fire()\r\n                  form.submit();\r\n                _context.next = 12;\r\n                break;\r\n\r\n              case 11:\r\n                this.enableForm();\r\n\r\n              case 12:\r\n              case \"end\":\r\n                return _context.stop();\r\n            }\r\n          }\r\n        }, _callee, this);\r\n      }));\r\n\r\n      return function (_x, _x2) {\r\n        return _ref.apply(this, arguments);\r\n      };\r\n    }(); // Get dynamic selection list by element name or id\r\n\r\n    this.getList = function (name) {\r\n      name = name.replace(/^(sv_)?[xy](\\d*|\\$rowindex\\$)_|\\[\\]$/g, \"\"); // Remove element name prefix/suffix\r\n\r\n      return this.lists[name];\r\n    }; // Compile templates\r\n\r\n    this.compileTemplates = function () {\r\n      var lists = Object.values(this.lists);\r\n\r\n      for (var _i = 0, _lists = lists; _i < _lists.length; _i++) {\r\n        var list = _lists[_i];\r\n        if (list.template && $__default['default'].isString(list.template)) list.template = $__default['default'].templates(list.template);\r\n      }\r\n    }; // Get the HTML form element\r\n\r\n    this.getForm = function () {\r\n      if (!this.htmlForm) {\r\n        this.$element = $__default['default'](\"#\" + this.id);\r\n\r\n        if (this.$element.is(\"form\")) {\r\n          // HTML form\r\n          this.htmlForm = this.$element[0];\r\n        } else if (this.$element.is(\"div\")) {\r\n          // HTML div => Grid page\r\n          this.htmlForm = this.$element.closest(\"form\")[0];\r\n        }\r\n      }\r\n\r\n      return this.htmlForm;\r\n    }; // Get form element as single element\r\n\r\n    this.getElement = function (name) {\r\n      if (!this.$element) this.$element = $__default['default'](\"#\" + this.id);\r\n      return name ? ew.getElement(name, this.$element) : this.$element[0];\r\n    }; // Get form element(s) as single element or array of radio/checkbox\r\n\r\n    this.getElements = function (name) {\r\n      if (!this.$element) this.$element = $__default['default'](\"#\" + this.id);\r\n      var selector = \"[name='\" + name + \"']\";\r\n      selector = \"input\" + selector + \",select\" + selector + \",textarea\" + selector + \",button\" + selector;\r\n      var $els = this.$element.find(selector);\r\n      return $els.length == 0 ? null : $els.length == 1 && $els.is(\":not([type=checkbox]):not([type=radio])\") ? $els[0] : $els.get();\r\n    }; // Update selection lists\r\n    // @param {(null|undefined|number)*} rowindex Row index\r\n\r\n    this.updateLists = function (rowindex) {\r\n      if (rowindex === null) // rowindex == $rowindex$ == null\r\n        return;\r\n      if (!$__default['default'].isNumber(rowindex) && this.pageId == \"grid\") return;\r\n      var form = this.getForm(),\r\n          // Set up $element and htmlForm\r\n      confirm = form.querySelector(\"input#confirm\");\r\n\r\n      if (confirm && confirm.value == \"confirm\") {\r\n        // Confirm page\r\n        ew.removeSpinner();\r\n        return;\r\n      }\r\n\r\n      var fixId = function fixId(id, multiple) {\r\n        var t = \"\",\r\n            i = rowindex,\r\n            ar = id.split(\" \");\r\n\r\n        if (ar.length > 1) {\r\n          t = ar[0];\r\n          i = \"\";\r\n          id = ar[1];\r\n        }\r\n\r\n        var prefix = $__default['default'].isNumber(i) ? \"x\" + i + \"_\" : \"x_\"; // Add row index\r\n\r\n        if (id.startsWith(\"x_\")) // Field element name\r\n          id = id.replace(/^x_/, prefix);else // Field var\r\n          id = prefix + id;\r\n        if (multiple && !id.endsWith(\"[]\")) // Add [] if select-multiple\r\n          id += \"[]\";\r\n        return t ? t + \" \" + id : id;\r\n      };\r\n\r\n      var selector = Object.entries(this.lists).map(function (_ref2) {\r\n        var id = _ref2[0],\r\n            list = _ref2[1];\r\n        return \"[name='\" + fixId(id, list.multiple) + \"']\";\r\n      }).join();\r\n\r\n      if (!selector || !form.querySelector(selector)) {\r\n        // Lists not found\r\n        ew.removeSpinner();\r\n        return;\r\n      }\r\n\r\n      var actions = [],\r\n          promises = [];\r\n      this.compileTemplates(); // For grid where updateList() called before init()\r\n\r\n      for (var _i2 = 0, _Object$entries = Object.entries(this.lists); _i2 < _Object$entries.length; _i2++) {\r\n        var _Object$entries$_i = _Object$entries[_i2],\r\n            _id = _Object$entries$_i[0],\r\n            list = _Object$entries$_i[1];\r\n        var parents = list.parentFields.slice().map(function (parent) {\r\n          return fixId(parent);\r\n        }),\r\n            // Clone and fix index\r\n        ajax = list.ajax;\r\n        _id = fixId(_id, list.multiple);\r\n\r\n        if ($__default['default'].isBoolean(ajax)) {\r\n          // Ajax\r\n          var pvalues = parents.map(function (parent) {\r\n            return ew.getOptionValues(parent, form);\r\n          }); // Save the initial values of the parent lists\r\n\r\n          actions.push([_id, pvalues, ajax, false]);\r\n        } else {\r\n          // Non-Ajax\r\n          ew.updateOptions.call(this, _id, parents, null, false);\r\n        }\r\n      } // Update the Ajax lists\r\n\r\n      for (var i = 0; i < actions.length; i++) {\r\n        promises.push(new Promise(function (resolve, reject) {\r\n          setTimeout(function () {\r\n            resolve(ew.updateOptions.apply(self, actions.shift()));\r\n          }, ew.AJAX_DELAY * i); // Delay a little in case of large number of lists\r\n        }));\r\n      }\r\n\r\n      Promise.all(promises).then(function () {\r\n        $__default['default'](document).trigger(\"updatedone\", [{\r\n          source: self,\r\n          target: form\r\n        }]);\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n      });\r\n    }; // Create AutoSuggest\r\n\r\n    this.createAutoSuggest = function (settings) {\r\n      var options = Object.assign({\r\n        limit: ew.AUTO_SUGGEST_MAX_ENTRIES,\r\n        form: this\r\n      }, ew.autoSuggestSettings, settings); // Global settings + field specific settings\r\n\r\n      self.autoSuggests[settings.id] = new ew.AutoSuggest(options);\r\n    }; // Init editors\r\n\r\n    this.initEditors = function () {\r\n      var form = this.getForm();\r\n      $__default['default'](form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $__default['default'](el).data(\"editor\");\r\n        if (ed && !ed.active && !ed.name.includes(\"$rowindex$\")) ed.create();\r\n      });\r\n    }; // Update textareas\r\n\r\n    this.updateTextArea = function (name) {\r\n      var form = this.getForm();\r\n      $__default['default'](form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $__default['default'](el).data(\"editor\");\r\n        if (!ed || name && ed.name != name) return true; // Continue\r\n\r\n        ed.save();\r\n        if (name) return false; // Break\r\n      });\r\n    }; // Destroy editor(s)\r\n\r\n    this.destroyEditor = function (name) {\r\n      var form = this.getForm();\r\n      $__default['default'](form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $__default['default'](el).data(\"editor\");\r\n        if (!ed || name && ed.name != name) return true; // Continue\r\n\r\n        ed.destroy();\r\n        if (name) return false; // Break\r\n      });\r\n    }; // Show error message\r\n\r\n    this.onError = function (el, msg) {\r\n      return ew.onError(this, el, msg);\r\n    }; // Init file upload\r\n\r\n    this.initUpload = function () {\r\n      var form = this.getForm();\r\n      $__default['default'](form.elements).filter(\"input:file:not([name*='$rowindex$'],[id='importfiles'])\").each(function (index) {\r\n        $__default['default'].later(ew.AJAX_DELAY * index, null, ew.upload, this); // Delay a little in case of large number of upload fields\r\n      });\r\n    }; // Set up filters\r\n\r\n    this.setupFilters = function (e, filters) {\r\n      var id = this.id,\r\n          data = this.filterList ? this.filterList.data : null,\r\n          $sf = $__default['default'](\".ew-save-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !data),\r\n          $df = $__default['default'](\".ew-delete-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !filters.length).toggleClass(\"dropdown-toggle\", !!filters.length),\r\n          $delete = $df.parent(\"li\").toggleClass(\"dropdown-submenu dropdown-hover\", !!filters.length).toggleClass(\"disabled\", !filters.length),\r\n          $save = $sf.parent(\"li\").toggleClass(\"disabled\", !data);\r\n          $__default['default'](e.target);\r\n\r\n      var saveFilters = function saveFilters(id, filters) {\r\n        if (ew.SEARCH_FILTER_OPTION == \"Client\") {\r\n          window.localStorage.setItem(id + \"_filters\", JSON.stringify(filters));\r\n        } else if (ew.SEARCH_FILTER_OPTION == \"Server\") {\r\n          var $body = $__default['default'](\"body\");\r\n          $body.css(\"cursor\", \"wait\");\r\n          $__default['default'].ajax(ew.currentPage(), {\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            data: {\r\n              \"ajax\": \"savefilters\",\r\n              \"filters\": JSON.stringify(filters)\r\n            }\r\n          }).done(function (result) {\r\n            if (result[0] && result[0].success) self.filterList.filters = filters; // Save filters\r\n          }).always(function () {\r\n            $body.css(\"cursor\", \"default\");\r\n          });\r\n        }\r\n      };\r\n\r\n      $save.off(\"click.ew\").on(\"click.ew\", function (e) {\r\n        // Save filter\r\n        if ($save.hasClass(\"disabled\")) return false;\r\n        ew.prompt(ew.language.phrase(\"EnterFilterName\"), function (name) {\r\n          name = ew.sanitize(name);\r\n\r\n          if (name) {\r\n            filters.push([name, data]);\r\n            saveFilters(id, filters);\r\n          }\r\n        }, true);\r\n      }).prevAll().remove();\r\n      $df.next(\"ul.dropdown-menu\").remove();\r\n\r\n      if (filters.length) {\r\n        var $submenu = $__default['default'](\"<ul class='dropdown-menu'></ul>\");\r\n\r\n        for (var i in filters) {\r\n          if (!Array.isArray(filters[i])) continue;\r\n          $__default['default']('<li><a class=\"dropdown-item\" data-index=\"' + i + '\" href=\"#\" onclick=\"return false;\">' + filters[i][0] + '</a></li>').on(\"click\", function (e) {\r\n            // Delete\r\n            var i = $__default['default'](this).find(\"a[data-index]\").data(\"index\");\r\n            ew.prompt(ew.language.phrase(\"DeleteFilterConfirm\").replace(\"%s\", filters[i][0]), function (result) {\r\n              if (result) {\r\n                filters.splice(i, 1);\r\n                saveFilters(id, filters);\r\n              }\r\n            });\r\n          }).appendTo($submenu);\r\n          $__default['default']('<li><a class=\"dropdown-item ew-filter-list\" data-index=\"' + i + '\" href=\"#\" onclick=\"return false;\">' + filters[i][0] + '</a></li>').insertBefore($save).on(\"click\", function (e) {\r\n            var i = $__default['default'](this).find(\"a[data-index]\").data(\"index\");\r\n            $__default['default'](\"<form>\").attr({\r\n              method: \"post\",\r\n              action: ew.currentPage()\r\n            }).append($__default['default'](\"<input type='hidden'>\").attr({\r\n              name: \"cmd\",\r\n              value: \"resetfilter\"\r\n            }), $__default['default'](\"<input type='hidden'>\").attr({\r\n              name: ew.TOKEN_NAME_KEY,\r\n              value: ew.TOKEN_NAME\r\n            }), // PHP\r\n            $__default['default'](\"<input type='hidden'>\").attr({\r\n              name: ew.ANTIFORGERY_TOKEN_KEY,\r\n              value: ew.ANTIFORGERY_TOKEN\r\n            }), // PHP\r\n            $__default['default'](\"<input type='hidden'>\").attr({\r\n              name: \"filter\",\r\n              value: JSON.stringify(filters[i][1])\r\n            })).appendTo(\"body\").trigger(\"submit\");\r\n          });\r\n        }\r\n\r\n        $__default['default'](\"<li class='dropdown-divider'></li>\").insertBefore($save);\r\n        $delete.append($submenu);\r\n      }\r\n    }; // Init form\r\n\r\n    this.init = function () {\r\n      if (this._initiated) return; // Filters button\r\n\r\n      if (ew.SEARCH_FILTER_OPTION == \"Client\" && window.localStorage || ew.SEARCH_FILTER_OPTION == \"Server\" && ew.IS_LOGGEDIN && !ew.IS_SYS_ADMIN && ew.CURRENT_USER_NAME != \"\") {\r\n        $__default['default'](\".ew-filter-option.\" + this.id + \" .ew-btn-dropdown\").on(\"show.bs.dropdown\", function (e) {\r\n          var filters = [];\r\n\r\n          if (ew.SEARCH_FILTER_OPTION == \"Client\") {\r\n            var item = window.localStorage.getItem(self.id + \"_filters\");\r\n            if (item) filters = ew.parseJson(item) || [];\r\n          } else if (ew.SEARCH_FILTER_OPTION == \"Server\") filters = self.filterList && self.filterList.filters ? self.filterList.filters : [];\r\n\r\n          var ar = $__default['default'].grep(filters, function (val) {\r\n            if (Array.isArray(val) && val.length == 2) return val;\r\n          });\r\n          self.setupFilters(e, ar);\r\n        });\r\n        $__default['default'](\".ew-filter-option\").show();\r\n      } else {\r\n        $__default['default'](\".ew-filter-option\").hide();\r\n      } // Check form\r\n\r\n      var form = this.getForm(),\r\n          $form = $__default['default'](form);\r\n      if (!form) return; // Compile templates\r\n\r\n      this.compileTemplates(); // Check if Search panel\r\n\r\n      var isSearch = /s(ea)?rch$/.test(this.id); // Search panel\r\n\r\n      if (isSearch && this.initSearchPanel && !ew.hasFormData(form)) $__default['default'](\"#\" + this.id + \"-search-panel\").removeClass(\"show\"); // Search panel toggle\r\n\r\n      $__default['default'](\".ew-search-toggle[data-form=\" + this.id + \"]\").on(\"click.bs.button\", function () {\r\n        $__default['default'](\"#\" + $__default['default'](this).data(\"form\") + \"-search-panel\").collapse(\"toggle\");\r\n      }); // Hide search operator column\r\n\r\n      if (!$__default['default'](\".ew-table .ew-search-operator\").text().trim()) $__default['default'](\".ew-table .ew-search-operator\").parent(\"td\").hide(); // Highlight button\r\n\r\n      if (isSearch) {\r\n        $__default['default'](\".ew-highlight[data-form=\" + this.id + \"]\").on(\"click.bs.button\", function () {\r\n          $__default['default'](\"span.\" + $__default['default'](this).data(\"name\")).toggleClass(\"ew-highlight-search\");\r\n        });\r\n      } // Search operators\r\n\r\n      if (isSearch) {\r\n        // Search form\r\n        $form.find(\"select[id^=z_]\").each(function () {\r\n          var $this = $__default['default'](this).trigger(\"change\");\r\n          if ($this.val() != \"BETWEEN\") $form.find(\"#w_\" + this.id.substr(2)).trigger(\"change\");\r\n        });\r\n      } // Multi-page\r\n\r\n      if (this.multiPage) this.multiPage.render(); // HTML editors\r\n\r\n      loadjs.ready([\"editor\"], this.initEditors.bind(this)); // Dynamic selection lists\r\n\r\n      this.updateLists(); // Init file upload\r\n\r\n      this.initUpload(); // Submit/Cancel\r\n\r\n      if (this.$element.is(\"form\")) {\r\n        // Not Grid page\r\n        // Detail pages\r\n        this.$element.find(\".ew-detail-pages .ew-nav-tabs a[data-toggle=tab]\").on(\"shown.bs.tab\", function (e) {\r\n          var $tab = $__default['default'](e.target.getAttribute(\"href\")),\r\n              $panel = $tab.find(\".table-responsive.ew-grid-middle-panel\"),\r\n              $container = $tab.closest(\".container-fluid\");\r\n          if ($panel.width() >= $container.width()) $panel.width($container.width() + \"px\");else $panel.width(\"auto\");\r\n        });\r\n        $form.on(\"submit\", function (e) {\r\n          // Bind submit event\r\n          self.submit(e);\r\n          return false; // Disable normal submission\r\n        });\r\n        $form.find(\"[data-field], .ew-priv\").on(\"change\", function () {\r\n          if (ew.CONFIRM_CANCEL) self.modified = true;\r\n        });\r\n        $form.find(\"#btn-cancel[data-href]\").on(\"click\", function () {\r\n          // Cancel\r\n          self.updateTextArea();\r\n          var href = $__default['default'](this).data(\"href\");\r\n\r\n          if (self.modified && ew.hasFormData(form)) {\r\n            ew.prompt(ew.language.phrase(\"ConfirmCancel\"), function (result) {\r\n              if (result) {\r\n                $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\r\n\r\n                window.location = href;\r\n              }\r\n            });\r\n          } else {\r\n            $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\r\n\r\n            window.location = href;\r\n          }\r\n        });\r\n      }\r\n\r\n      this._initiated = true; // Store form object as data\r\n\r\n      this.$element.data(\"form\", this);\r\n    }; // Add to the global forms object\r\n\r\n    ew.forms.add(this);\r\n  }\n\n  function ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\r\n\r\n  function _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$2(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\r\n\r\n  function _createForOfIteratorHelperLoose$2(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray$2(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\n\r\n  function _unsupportedIterableToArray$2(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray$2(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$2(o, minLen); }\r\n\r\n  function _arrayLikeToArray$2(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\n  /**\r\n   * Class Field\r\n   */\r\n  var Field = /*#__PURE__*/function () {\r\n    /**\r\n     * Constructor\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Function[]|Function} validators Validators\r\n     * @param {bool} invalid Initial valid status (e.g. server side)\r\n     */\r\n    function Field(fldvar, validators, invalid) {\r\n      _defineProperty(this, \"name\", \"\");\r\n\r\n      _defineProperty(this, \"validators\", []);\r\n\r\n      _defineProperty(this, \"_validate\", true);\r\n\r\n      this.name = fldvar;\r\n\r\n      if (Array.isArray(validators)) {\r\n        for (var _iterator = _createForOfIteratorHelperLoose$2(validators), _step; !(_step = _iterator()).done;) {\r\n          var validator = _step.value;\r\n          this.addValidator(validator);\r\n        }\r\n      } else if (typeof validators === \"function\") {\r\n        this.addValidator(validators);\r\n      }\r\n\r\n      this.invalid = invalid;\r\n    }\r\n    /**\r\n     * Add validator\r\n     * @param {Function} validator Validator function\r\n     */\r\n\r\n    var _proto = Field.prototype;\r\n\r\n    _proto.addValidator = function addValidator(validator) {\r\n      if (typeof validator === \"function\") this.validators.push(validator);\r\n    }\r\n    /**\r\n     * Get error\r\n     * @returns {Object}\r\n     */\r\n    ;\r\n\r\n    /**\r\n     * Add error\r\n     * @param {Object} err Error\r\n     */\r\n    _proto.addError = function addError(err) {\r\n      if (err) {\r\n        var _this$_error;\r\n\r\n        var error = (_this$_error = this._error) !== null && _this$_error !== void 0 ? _this$_error : {};\r\n        this._error = _objectSpread$2(_objectSpread$2({}, error), err);\r\n        this.invalid = true;\r\n      }\r\n    }\r\n    /**\r\n     * Clear all errors\r\n     */\r\n    ;\r\n\r\n    _proto.clearErrors = function clearErrors() {\r\n      this._error = null;\r\n      this.invalid = false;\r\n    }\r\n    /**\r\n     * Clear all validators\r\n     */\r\n    ;\r\n\r\n    _proto.clearValidators = function clearValidators() {\r\n      this.validators = [];\r\n    }\r\n    /**\r\n     * Get error message\r\n     * @returns {string} HTML\r\n     */\r\n    ;\r\n\r\n    /**\r\n     * Validate field value\r\n     * @returns {boolean}\r\n     */\r\n    _proto.validate = function validate() {\r\n      var result = true;\r\n      this.clearErrors(); // Reset error\r\n\r\n      if (this._element && this.shouldValidate) {\r\n        if (Array.isArray(this.validators)) {\r\n          for (var _iterator2 = _createForOfIteratorHelperLoose$2(this.validators), _step2; !(_step2 = _iterator2()).done;) {\r\n            var validator = _step2.value;\r\n            var err = validator(this._element);\r\n\r\n            if (err !== false) {\r\n              this.addError(err);\r\n              result = false;\r\n            }\r\n          }\r\n\r\n          this.updateFeedback();\r\n        }\r\n      }\r\n\r\n      return result;\r\n    }\r\n    /**\r\n     * Update the error message to feedback element\r\n     */\r\n    ;\r\n\r\n    _proto.updateFeedback = function updateFeedback() {\r\n      var err = this.errorMessage;\r\n\r\n      if (this._element && err) {\r\n        jQuery(this._element).closest(\"[id^=el_], .form-group\").find(\".invalid-feedback\").html(err);\r\n        ew.setInvalid(this._element);\r\n      }\r\n    }\r\n    /**\r\n     * Set focus\r\n     */\r\n    ;\r\n\r\n    _proto.focus = function focus() {\r\n      if (this._element) ew.setFocus(this._element);\r\n    };\r\n\r\n    _createClass(Field, [{\r\n      key: \"error\",\r\n      get: function get() {\r\n        return this._error;\r\n      }\r\n    }, {\r\n      key: \"errorMessage\",\r\n      get: function get() {\r\n        if (this._error) {\r\n          return Array.from(Object.values(this._error)).join(\"<br>\");\r\n        }\r\n\r\n        return \"\";\r\n      }\r\n      /**\r\n       * Check if the field should be validated\r\n       */\r\n\r\n    }, {\r\n      key: \"shouldValidate\",\r\n      get: function get() {\r\n        return !this._checkbox || this._checkbox.checked;\r\n      }\r\n      /**\r\n       * Set form element\r\n       */\r\n\r\n    }, {\r\n      key: \"element\",\r\n      get:\r\n      /**\r\n       * Get form element\r\n       * @returns {HTMLElement|HTMLElement[]}\r\n       */\r\n      function get() {\r\n        return this._element;\r\n      }\r\n      /**\r\n       * Get field value from form element\r\n       * @returns {string|Array}\r\n       */\r\n      ,\r\n      set: function set(el) {\r\n        var _this$_element, _this$_element$id;\r\n\r\n        this._element = el;\r\n        this._checkbox = (_this$_element = this._element) !== null && _this$_element !== void 0 && (_this$_element$id = _this$_element.id) !== null && _this$_element$id !== void 0 && _this$_element$id.match(/^[xy]_/) ? document.getElementById(this._element.id.replace(/^[xy]_/, \"u_\")) : null; // Find the checkbox for the field in Update page\r\n      }\r\n    }, {\r\n      key: \"value\",\r\n      get: function get() {\r\n        return this._element ? ew.getValue(this._element) : \"\";\r\n      }\r\n    }]);\r\n\r\n    return Field;\r\n  }();\n\n  function ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\r\n\r\n  function _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$1(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\r\n\r\n  function _createForOfIteratorHelperLoose$1(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray$1(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\n\r\n  function _unsupportedIterableToArray$1(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray$1(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$1(o, minLen); }\r\n\r\n  function _arrayLikeToArray$1(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n  /**\r\n   * Class Form\r\n   */\r\n\r\n  var Form = /*#__PURE__*/function (_FormBase) {\r\n    _inheritsLoose(Form, _FormBase);\r\n\r\n    /**\r\n     * Constructor\r\n     * @param {string} id Form ID\r\n     * @param {string} pageId Page ID\r\n     */\r\n    function Form(id, pageId) {\r\n      var _this;\r\n\r\n      _this = _FormBase.call(this, id, pageId) || this;\r\n\r\n      _defineProperty(_assertThisInitialized(_this), \"row\", {});\r\n\r\n      _defineProperty(_assertThisInitialized(_this), \"fields\", {});\r\n\r\n      return _this;\r\n    }\r\n    /**\r\n     * Add field\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Function[]} validators Validators\r\n     * @param {bool} invalid Invalid\r\n     */\r\n\r\n    var _proto = Form.prototype;\r\n\r\n    _proto.addField = function addField(fldvar, validators, invalid) {\r\n      if (!(fldvar in this.fields)) this.fields[fldvar] = new Field(fldvar, validators, invalid);\r\n    }\r\n    /**\r\n     * Get field\r\n     * @param {string} fldvar Field variable name\r\n     * @returns Field\r\n     */\r\n    ;\r\n\r\n    _proto.getField = function getField(fldvar) {\r\n      return this.fields[fldvar];\r\n    }\r\n    /**\r\n     * Add fields by field definitions\r\n     * @param {Array} fields\r\n     */\r\n    ;\r\n\r\n    _proto.addFields = function addFields(fields) {\r\n      if (Array.isArray(fields)) {\r\n        for (var _iterator = _createForOfIteratorHelperLoose$1(fields), _step; !(_step = _iterator()).done;) {\r\n          var field = _step.value;\r\n\r\n          if (Array.isArray(field)) {\r\n            this.addField.apply(this, field);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Add error\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Object} err Error\r\n     */\r\n    ;\r\n\r\n    _proto.addError = function addError(fldvar, err) {\r\n      if (err) {\r\n        var _this$_error;\r\n\r\n        this._error = (_this$_error = this._error) !== null && _this$_error !== void 0 ? _this$_error : {};\r\n        this._error[fldvar] = err;\r\n      }\r\n    }\r\n    /**\r\n     * Add custom error\r\n     * @param {string} fldvar Field variable name\r\n     * @param {string} msg Error message\r\n     */\r\n    ;\r\n\r\n    _proto.addCustomError = function addCustomError(fldvar, msg) {\r\n      if (fldvar in this.fields) {\r\n        var field = this.fields[fldvar],\r\n            err = {\r\n          custom: msg\r\n        };\r\n        field.addError(err);\r\n        field.updateFeedback();\r\n        this.addError(fldvar, err);\r\n      }\r\n\r\n      return false;\r\n    }\r\n    /**\r\n     * Get error\r\n     */\r\n    ;\r\n\r\n    /**\r\n     * Set focus to the first field with error\r\n     */\r\n    _proto.focus = function focus() {\r\n      for (var _i = 0, _Object$entries = Object.entries(this.fields); _i < _Object$entries.length; _i++) {\r\n        var _Object$entries$_i = _Object$entries[_i],\r\n            fldvar = _Object$entries$_i[0],\r\n            field = _Object$entries$_i[1];\r\n\r\n        if (field.invalid || this._error && this._error[fldvar]) {\r\n          field.focus();\r\n          this.makeVisible(field.element);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Make the form visible\r\n     * @param {HTMLElement} el Focused element\r\n     */\r\n    ;\r\n\r\n    _proto.makeVisible = function makeVisible(el) {\r\n      if (this.multiPage) {\r\n        // Multi-page\r\n        this.multiPage.gotoPageByElement(el);\r\n      } else if (this.$element.is(\"div\")) {\r\n        // Multiple Master/Detail\r\n        var $pane = this.$element.closest(\".tab-pane\");\r\n        if ($pane[0] && !$pane.hasClass(\"active\")) $pane.closest(\".tabbable, .ew-nav-tabs\").find(\"a[data-toggle=tab][href='#\" + $pane.attr(\"id\") + \"']\").click();\r\n      }\r\n    }\r\n    /**\r\n     * Validate all fields of the specified row\r\n     * @param {number} rowIndex Row index\r\n     */\r\n    ;\r\n\r\n    _proto.validateFields = function validateFields(rowIndex) {\r\n      this.rowIndex = rowIndex !== null && rowIndex !== void 0 ? rowIndex : \"\";\r\n      this.row = {};\r\n      this._error = null; // Reset\r\n\r\n      var result = true;\r\n\r\n      for (var _i2 = 0, _Object$values = Object.values(this.fields); _i2 < _Object$values.length; _i2++) {\r\n        var field = _Object$values[_i2];\r\n        field.element = this.getElements(\"x\" + this.rowIndex + \"_\" + field.name); // Set element\r\n\r\n        if (!field.element) field.element = this.getElements(\"x\" + this.rowIndex + \"_\" + field.name + \"[]\"); // Field with []\r\n\r\n        if (!field.element) field.element = this.getElements(field.name); // Field by name directly (e.g. email form)\r\n\r\n        this.row[field.name] = field.value; // Get field value\r\n\r\n        if (field.element && !field.validate()) {\r\n          // Invalid field value\r\n          this.addError(field.name, field.error);\r\n          result = false;\r\n        }\r\n      } // Save the field values of the row\r\n\r\n      if (!this.value) {\r\n        this.value = _objectSpread$1({}, this.row);\r\n      } else {\r\n        if (!Array.isArray(this.value)) this.value = [this.value];\r\n        var index = parseInt(rowIndex, 10) || 0;\r\n        index = index > 1 ? index - 1 : 0;\r\n        this.value[index] = _objectSpread$1({}, this.row);\r\n      }\r\n\r\n      this.focus();\r\n      return result;\r\n    }\r\n    /**\r\n     * Set invalid fields of the specified row\r\n     * @param {number} rowIndex Row index\r\n     */\r\n    ;\r\n\r\n    _proto.setInvalid = function setInvalid(rowIndex) {\r\n      this.rowIndex = rowIndex !== null && rowIndex !== void 0 ? rowIndex : \"\";\r\n\r\n      for (var _i3 = 0, _Object$values2 = Object.values(this.fields); _i3 < _Object$values2.length; _i3++) {\r\n        var field = _Object$values2[_i3];\r\n        if (!field.invalid) continue;\r\n        field.element = this.getElements(\"x\" + this.rowIndex + \"_\" + field.name); // Set element\r\n\r\n        if (!field.element) field.element = this.getElements(\"x\" + this.rowIndex + \"_\" + field.name + \"[]\"); // Fields with []\r\n\r\n        if (!field.element) field.element = this.getElements(field.name); // Fields without prefix (e.g. email form)\r\n\r\n        ew.setInvalid(field.element);\r\n      }\r\n    };\r\n\r\n    _createClass(Form, [{\r\n      key: \"error\",\r\n      get: function get() {\r\n        return this._error;\r\n      }\r\n    }]);\r\n\r\n    return Form;\r\n  }(FormBase);\n\n  var AjaxLookup = /*#__PURE__*/function () {\r\n    /**\r\n     * Constructor\r\n     * @param {Object} settings Settings\r\n     * @param {string} settings.id - Input element ID\r\n     * @param {string|Form} settings.form - Form of the input element\r\n     * @param {Number} settings.limit - Options per page\r\n     * @param {Object} settings.data - Data submitted by Ajax\r\n     */\r\n    function AjaxLookup(settings) {\r\n      _defineProperty(this, \"_isAutoSuggest\", null);\r\n\r\n      this.elementId = settings.id; // Id\r\n\r\n      this.form = settings.form; // Form\r\n\r\n      if ($__default['default'].isString(this.form)) // Form is string => Form id\r\n        this.form = ew.forms.get(this.form);\r\n      this.element = this.form.getElement(this.elementId); // Actual HTML element\r\n\r\n      this.formElement = this.form.getElement(); // HTML form or DIV\r\n\r\n      this.list = this.form.getList(this.elementId);\r\n      var m = this.elementId.match(/^[xy](\\d*|\\$rowindex\\$)_/),\r\n          rowindex = m ? m[1] : \"\";\r\n      this.parentFields = this.list.parentFields.slice() // Clone\r\n      .map(function (pf) {\r\n        return pf.split(\" \").length == 1 ? pf.replace(/^x_/, \"x\" + rowindex + \"_\") : pf;\r\n      }); // Parent field in the same table, add row index\r\n\r\n      this.limit = settings.limit;\r\n      this.debounce = settings.debounce;\r\n      this.data = settings.data;\r\n      this.recordCount = 0;\r\n    }\r\n    /**\r\n     * Is AutoSuggest\r\n     */\r\n\r\n    var _proto = AjaxLookup.prototype;\r\n\r\n    /**\r\n     * Format display value\r\n     * @param {Array} opt Option\r\n     */\r\n    _proto.formatResult = function formatResult(opt) {\r\n      if (this.list.template && !this.isAutoSuggest) {\r\n        return this.list.template.render(opt, ew.jsRenderHelpers);\r\n      } else {\r\n        return ew.displayValue(opt, this.element) || opt[0];\r\n      }\r\n    }\r\n    /**\r\n     * Generate request\r\n     */\r\n    ;\r\n\r\n    _proto.generateRequest = function generateRequest() {\r\n      var _this = this;\r\n\r\n      var data = Object.assign({}, this.data, {\r\n        name: this.element.name,\r\n        page: this.list.page,\r\n        field: this.list.field,\r\n        ajax: \"autosuggest\",\r\n        language: ew.LANGUAGE_ID\r\n      }, ew.getUserParams(\"#p_\" + this.elementId, this.formElement));\r\n\r\n      if (this.parentFields.length > 0) {\r\n        this.parentFields.forEach(function (pf, i) {\r\n          var arp = ew.getOptionValues(pf, _this.formElement);\r\n          data[\"v\" + (i + 1)] = arp.join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n        });\r\n      }\r\n\r\n      return data;\r\n    }\r\n    /**\r\n     * Get URL\r\n     */\r\n    ;\r\n\r\n    _proto.getUrl = function getUrl(query, start) {\r\n      var params = new URLSearchParams({\r\n        q: query,\r\n        n: this.limit,\r\n        rnd: ew.random(),\r\n        start: $__default['default'].isNumber(start) ? start : -1\r\n      });\r\n      return ew.getApiUrl(ew.API_LOOKUP_ACTION, params.toString());\r\n    }\r\n    /**\r\n     * Prepare URL and data for sending request\r\n     * @param {string} query Search term\r\n     * @param {Number} start Start page\r\n     */\r\n    ;\r\n\r\n    _proto.prepare = function prepare(query, start) {\r\n      return {\r\n        url: this.getUrl(query, start),\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: this.generateRequest()\r\n      };\r\n    }\r\n    /**\r\n     * Transform options (virtual)\r\n     * @param {Object[]} data Data from server\r\n     */\r\n    ;\r\n\r\n    _proto.transform = function transform(data) {\r\n      var results = [];\r\n\r\n      if (data && data.result == \"OK\") {\r\n        this.recordCount = data.totalRecordCount;\r\n        results = data.records;\r\n      }\r\n\r\n      return results;\r\n    };\r\n\r\n    _createClass(AjaxLookup, [{\r\n      key: \"isAutoSuggest\",\r\n      get: function get() {\r\n        if (this._isAutoSuggest === null) this._isAutoSuggest = ew.isAutoSuggest(this.element);\r\n        return this._isAutoSuggest;\r\n      }\r\n    }]);\r\n\r\n    return AjaxLookup;\r\n  }();\n\n  /**\r\n   * Class selection list option\r\n   */\r\n  var SelectionListOption =\r\n  /**\r\n   * Constructor\r\n   */\r\n  function SelectionListOption(value, text, selected) {\r\n    this.value = String(value);\r\n    this.text = String(text);\r\n    this.selected = !!selected;\r\n  };\n\n  function AutoSuggest(settings) {\r\n    AjaxLookup.call(this, settings); // Extends AjaxLookup\r\n\r\n    var emptyObj = {\r\n      typeahead: {}\r\n    }; // Empty Auto-Suggest object\r\n\r\n    if (this.elementId.includes(\"$rowindex$\")) return emptyObj;\r\n    this.input = this.form.getElement(\"sv_\" + this.elementId); // User input\r\n\r\n    if (!this.input) return emptyObj;\r\n    var self = this,\r\n        $input = $__default['default'](this.input),\r\n        $element = $__default['default'](this.element),\r\n        timer; // Properties\r\n\r\n    this.minWidth = settings.minWidth;\r\n    this.maxHeight = settings.maxHeight;\r\n    this.highlight = settings.highlight;\r\n    this.hint = settings.hint;\r\n    this.minLength = settings.minLength;\r\n    this.templates = Object.assign({}, settings.templates); // Clone\r\n\r\n    this.trigger = settings.trigger; // For loading more results\r\n\r\n    this.delay = settings.delay; // For loading more results\r\n\r\n    this.debounce = settings.debounce;\r\n    this.display = settings.display || \"text\";\r\n    this.forceSelection = settings.forceSelect;\r\n    this.$input = $input;\r\n    this.$element = $element; // Save initial option\r\n\r\n    if ($input.val() && $element.val()) this.element.add($element.val(), $input.val(), true); // Set the selected item to the actual field\r\n\r\n    this.setValue = function (v) {\r\n      v = v || $input.val();\r\n      var index = this.element.options.findIndex(function (option) {\r\n        return option.text == v;\r\n      });\r\n\r\n      if (index < 0) {\r\n        // Not found in results\r\n        if (this.forceSelection && v) {\r\n          // Force selection and query not empty => error\r\n          $input.typeahead(\"val\", \"\").attr(\"placeholder\", ew.language.phrase(\"ValueNotExist\")).addClass(\"is-invalid\");\r\n          $element.val(\"\").trigger(\"change\");\r\n          return;\r\n        }\r\n      } else {\r\n        // Found in results\r\n        this.element.options[index].selected = true;\r\n        if (!/s(ea)?rch$/.test(this.formElement.id) || this.forceSelection) // Force selection or not search form\r\n          v = this.element.options[index].value; // Replace the display value by Link Field value\r\n      }\r\n\r\n      if (v !== $element.attr(\"value\")) $element.attr(\"value\", v).trigger(\"change\"); // Set value to the actual field\r\n    }; // Transform suggestion\r\n\r\n    this.transform = function (data) {\r\n      var results = AjaxLookup.prototype.transform.call(this, data);\r\n      this.element.options = results.map(function (item) {\r\n        return new SelectionListOption(item.lf || item[0], self.formatResult(item));\r\n      });\r\n      return this.element.options;\r\n    }; // Get suggestions by Ajax\r\n\r\n    this.source = function (query, syncResults, asyncResults) {\r\n      if (timer) timer.cancel();\r\n      timer = $__default['default'].later(self.debounce, null, function () {\r\n        self.recordCount = 0; // Reset\r\n\r\n        var settings = self.prepare(query);\r\n        $__default['default'].ajax(settings).done(function (data) {\r\n          asyncResults(self.transform(data));\r\n        });\r\n      });\r\n    }; // Get current suggestion count\r\n\r\n    this.count = function () {\r\n      return self.typeahead.menu.$node.find(\".tt-suggestion.tt-selectable\").length;\r\n    }; // Get more suggestions by Ajax\r\n\r\n    this.more = function () {\r\n      var $body = $__default['default'](\"body\");\r\n      $body.css(\"cursor\", \"wait\");\r\n      var ta = self.typeahead,\r\n          query = ta.menu.query,\r\n          dataset = ta.menu.datasets[0];\r\n      var start = self.count();\r\n      var settings = self.prepare(query, start);\r\n      $__default['default'].ajax(settings).done(function (data) {\r\n        data = self.transform(data);\r\n\r\n        dataset._append(query, data);\r\n\r\n        ta.menu.$node.find(\".tt-dataset\").scrollTop(dataset.$lastSuggestion.outerHeight() * start);\r\n      }).always(function () {\r\n        $body.css(\"cursor\", \"default\");\r\n      });\r\n    }; // Add events\r\n\r\n    $input.on(\"typeahead:select\", function (e, d) {\r\n      self.setValue(d[self.display]);\r\n    }).on(\"change\", function (e) {\r\n      var ta = $input.data(\"tt-typeahead\");\r\n\r\n      if (ta && ta.isOpen() && !ta.menu.empty()) {\r\n        var $item = ta.menu.getActiveSelectable();\r\n\r\n        if ($item) {\r\n          // A suggestion is highlighted\r\n          var i = $item.index(),\r\n              val = self.element.options[i].text;\r\n          $input.typeahead(\"val\", val);\r\n        }\r\n      }\r\n\r\n      self.setValue();\r\n    }).on(\"blur\", function (e) {\r\n      // \"change\" fires before blur\r\n      var ta = $input.data(\"tt-typeahead\");\r\n      if (ta && ta.isOpen()) ta.menu.close();\r\n    }).on(\"focus\", function (e) {\r\n      $input.attr(\"placeholder\", $input.data(\"placeholder\")).removeClass(\"is-invalid\");\r\n    }); // Option template (\"suggestion\" template)\r\n\r\n    var tpl = self.list.template || self.templates[\"suggestion\"];\r\n    if (tpl && $__default['default'].isString(tpl)) tpl = $__default['default'].templates(tpl);\r\n    if (tpl) self.templates[\"suggestion\"] = tpl.render.bind(tpl); // Save\r\n\r\n    $element.data(\"autosuggest\", this); // Create Typeahead\r\n\r\n    $__default['default'](function () {\r\n      // Typeahead options and dataset\r\n      var options = {\r\n        highlight: self.highlight,\r\n        minLength: self.minLength,\r\n        hint: self.hint,\r\n        trigger: self.trigger,\r\n        delay: self.delay\r\n      };\r\n      var dataset = {\r\n        name: self.form.id + \"-\" + self.elementId,\r\n        source: self.source,\r\n        templates: self.templates,\r\n        display: self.display,\r\n        limit: self.limit,\r\n        async: true\r\n      };\r\n      var args = [options, dataset]; // Trigger \"typeahead\" event\r\n\r\n      $element.trigger(\"typeahead\", [args]);\r\n      self.limit = dataset.limit; // Create Typeahead\r\n\r\n      $input.typeahead.apply($input, args);\r\n      $input.on(\"typeahead:rendered\", function () {\r\n        var $node = self.typeahead.menu.$node;\r\n        var $more = $node.find(\".tt-more\").html(ew.language.phrase(\"More\"));\r\n\r\n        if (arguments.length > 1 && // Arguments: event, suggestion, suggestion, ...\r\n        self.recordCount > self.count()) {\r\n          $more.one(options.trigger, function (e) {\r\n            setTimeout(function () {\r\n              self.more();\r\n            }, options.delay);\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n          });\r\n        } else {\r\n          $more.hide();\r\n        }\r\n      });\r\n      $input.off(\"blur.tt\");\r\n      self.typeahead = $input.data(\"tt-typeahead\");\r\n      var $menu = self.typeahead.menu.$node.css(\"z-index\", 1000);\r\n      if (self.minWidth) $menu.css(\"min-width\", self.minWidth);\r\n      var $dataset = $menu.find(\".tt-dataset\");\r\n      var maxHeight = self.maxHeight || (parseInt($dataset.css(\"line-height\"), 10) + 6) * (dataset.limit + 1); // Match .tt-suggestion padding\r\n\r\n      $dataset.css({\r\n        \"max-height\": maxHeight,\r\n        \"overflow-y\": \"auto\"\r\n      });\r\n    });\r\n  }\r\n\r\n  AutoSuggest.prototype = Object.create(AjaxLookup.prototype);\n\n  /**\r\n   * Class Forms\r\n   */\r\n\r\n  var Forms = /*#__PURE__*/function () {\r\n    function Forms() {\r\n      _defineProperty(this, \"_forms\", {});\r\n    }\r\n\r\n    var _proto = Forms.prototype;\r\n\r\n    /**\r\n     * Get form by element or id\r\n     * @param {HTMLElement|string} el Element or id\r\n     */\r\n    _proto.get = function get(el) {\r\n      var id = $__default['default'].isString(el) ? el : ew.getForm(el).id;\r\n      return this._forms[id];\r\n    }\r\n    /**\r\n     * Add form\r\n     * @param {Form} f Form\r\n     */\r\n    ;\r\n\r\n    _proto.add = function add(f) {\r\n      this._forms[f.id] = f;\r\n    }\r\n    /**\r\n     * Get all ids\r\n     * @returns {string[]}\r\n     */\r\n    ;\r\n\r\n    _proto.ids = function ids() {\r\n      return Object.keys(this._forms);\r\n    };\r\n\r\n    return Forms;\r\n  }();\n\n  /**\r\n   * Select2 decorator for results adapter\r\n   */\r\n\r\n  function getSelect2CustomOptionClass (Utils) {\r\n    var Select2CustomOption = /*#__PURE__*/function () {\r\n      function Select2CustomOption() {}\r\n\r\n      var _proto = Select2CustomOption.prototype;\r\n\r\n      _proto.render = function render(decorated) {\r\n        var $results = $__default['default']('<div class=\"select2-results__options ' + this.options.get('containerClass') + '\" role=\"listbox\"></div>'); //***\r\n\r\n        if (this.options.get('multiple')) {\r\n          $results.attr('aria-multiselectable', 'true');\r\n        }\r\n\r\n        this.$results = $results;\r\n        return $results;\r\n      };\r\n\r\n      _proto.displayMessage = function displayMessage(decorated, params) {\r\n        var escapeMarkup = this.options.get('escapeMarkup');\r\n        this.clear();\r\n        this.hideLoading();\r\n        var $message = $__default['default']('<div role=\"alert\" aria-live=\"assertive\"' + ' class=\"select2-results__option\"></div>'); //***\r\n\r\n        if (params.message.includes(\"<\") && params.message.includes(\">\")) {\r\n          // HTML //***\r\n          $message.append(params.message);\r\n        } else {\r\n          var message = this.options.get('translations').get(params.message);\r\n          $message.append(escapeMarkup(message(params.args)));\r\n        }\r\n\r\n        $message[0].className += ' select2-results__message';\r\n        this.$results.append($message);\r\n      };\r\n\r\n      _proto.append = function append(decorated, data) {\r\n        var _this = this;\r\n\r\n        this.hideLoading();\r\n\r\n        if (data.results == null || data.results.length === 0) {\r\n          if (this.$results.children().length === 0) {\r\n            if (this.$element.data(\"updating\")) {\r\n              this.trigger('results:message', {\r\n                message: '<div class=\"spinner-border spinner-border-sm text-primary ew-select-spinner\" role=\"status\"><span class=\"sr-only\">' + ew.language.phrase('Loading') + '</span></div> ' + ew.language.phrase('Loading')\r\n              });\r\n              this.$element.one(\"updatedone\", function () {\r\n                return _this.$element.select2(\"close\").select2(\"open\");\r\n              });\r\n            } else {\r\n              this.trigger('results:message', {\r\n                message: 'noResults'\r\n              });\r\n            }\r\n          }\r\n\r\n          return;\r\n        }\r\n\r\n        data.results = this.sort(data.results); //***\r\n\r\n        var cols = this.options.get('columns'),\r\n            len = data.results.length,\r\n            $row = this.$results.find(\".\" + this.options.get('rowClass')).last();\r\n\r\n        for (var d = 0; d < data.results.length; d++) {\r\n          var item = data.results[d];\r\n          var $option = this.option(item);\r\n\r\n          if (!$row.length || $row.children().length == cols) {\r\n            // Add new row\r\n            $row = $__default['default']('<div class=\"' + this.options.get('rowClass') + '\"></div>');\r\n            this.$results.append($row);\r\n          }\r\n\r\n          $row.append($option);\r\n\r\n          if (d == len - 1) {\r\n            // Last\r\n            var cnt = cols - $row.children().length;\r\n\r\n            for (var i = 0; i < cnt; i++) {\r\n              $row.append('<div class=\"' + this.options.get('colClass') + '\"></div>');\r\n            }\r\n          }\r\n        }\r\n      };\r\n\r\n      _proto.option = function option(decorated, data) {\r\n        // var option = document.createElement('li');\r\n        var option = document.createElement('div'); //***\r\n\r\n        option.className = 'select2-results__option ' + this.options.get('cellClass'); //***\r\n\r\n        var attrs = {\r\n          'role': 'option',\r\n          'aria-selected': 'false'\r\n        };\r\n        var matches = window.Element.prototype.matches || window.Element.prototype.msMatchesSelector || window.Element.prototype.webkitMatchesSelector;\r\n\r\n        if (data.element != null && matches.call(data.element, ':disabled') || data.element == null && data.disabled) {\r\n          delete attrs['aria-selected'];\r\n          attrs['aria-disabled'] = 'true';\r\n        }\r\n\r\n        if (data.id == null) {\r\n          delete attrs['aria-selected'];\r\n        }\r\n\r\n        if (data._resultId != null) {\r\n          option.id = data._resultId;\r\n        }\r\n\r\n        if (data.title) {\r\n          option.title = data.title;\r\n        } // if (data.children) { //***\r\n        //   attrs.role = 'group';\r\n        //   attrs['aria-label'] = data.text;\r\n        //   delete attrs['aria-selected'];\r\n        // }\r\n\r\n        for (var attr in attrs) {\r\n          var val = attrs[attr];\r\n          option.setAttribute(attr, val);\r\n        } // if (data.children) { //***\r\n        //   var $option = $(option);\r\n        //   var label = document.createElement('strong');\r\n        //   label.className = 'select2-results__group';\r\n        //   var $label = $(label);\r\n        //   this.template(data, label);\r\n        //   var $children = [];\r\n        //   for (var c = 0; c < data.children.length; c++) {\r\n        //     var child = data.children[c];\r\n        //     var $child = this.option(child);\r\n        //     $children.push($child);\r\n        //   }\r\n        //   var $childrenContainer = $('<ul></ul>', {\r\n        //     'class': 'select2-results__options select2-results__options--nested'\r\n        //   });\r\n        //   $childrenContainer.append($children);\r\n        //   $option.append(label);\r\n        //   $option.append($childrenContainer);\r\n        // } else {\r\n\r\n        this.template(data, option); // }\r\n\r\n        Utils.StoreData(option, 'data', data);\r\n        return option;\r\n      };\r\n\r\n      return Select2CustomOption;\r\n    }();\r\n\r\n    return Select2CustomOption;\r\n  }\n\n  function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\n\r\n  function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\n\r\n  function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\n  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\r\n\r\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\r\n  var currentUrl = new URL(window.location);\r\n  var forms = new Forms();\r\n  var $document$1 = $__default['default'](document),\r\n      $body = $__default['default'](\"body\"); // Remove spinner (immediately)\r\n\r\n  var _removeSpinner = ew.removeSpinner; // Remove spinner\r\n\r\n  function removeSpinner() {\r\n    var timer = $body.data(\"_spinner\");\r\n    if (timer) timer.cancel();\r\n    timer = $__default['default'].later(500, null, function () {\r\n      if ($document$1.data(\"_ajax\") !== true) {\r\n        // Ajax not running\r\n        _removeSpinner();\r\n\r\n        $__default['default'](\"form.ew-form\").each(function () {\r\n          var frm = forms.get(this.id);\r\n\r\n          if (frm) {\r\n            frm.focus();\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    });\r\n    $body.data(\"_spinner\", timer);\r\n  } // Create select2\r\n\r\n  function createSelect(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n\r\n    $__default['default'].fn.select2.amd.require([\"select2/utils\", \"select2/results\", \"select2/dropdown/infiniteScroll\", \"select2/dropdown/hidePlaceholder\", \"select2/dropdown/selectOnClose\"], function (opts) {\r\n      return function (Utils, ResultsList, InfiniteScroll, HidePlaceholder, SelectOnClose) {\r\n        var options = Object.assign({}, ew.selectOptions, opts);\r\n\r\n        if (options.resultsAdapter == null) {\r\n          options.resultsAdapter = ResultsList;\r\n\r\n          if (options.dropdown && options.columns && options.customOption) {\r\n            options.resultsAdapter = Utils.Decorate(options.resultsAdapter, getSelect2CustomOptionClass(Utils));\r\n\r\n            if (options.iconClass && options.multiple && !options.templateResult) {\r\n              options.templateResult = function (result) {\r\n                return '<label class=\"' + options.iconClass + ' ew-dropdown-label\">' + result.text + '</label>';\r\n              };\r\n            }\r\n          }\r\n\r\n          if (!options.templateResult) {\r\n            // Override Select2 default\r\n            options.templateResult = function (result) {\r\n              return (result.element instanceof HTMLOptionElement ? result.element.innerHTML : \"\") || result.text;\r\n            };\r\n          }\r\n\r\n          if (options.ajax != null) {\r\n            options.resultsAdapter = Utils.Decorate(options.resultsAdapter, InfiniteScroll);\r\n          }\r\n\r\n          if (options.placeholder != null) {\r\n            options.resultsAdapter = Utils.Decorate(options.resultsAdapter, HidePlaceholder);\r\n          }\r\n\r\n          if (options.selectOnClose) {\r\n            options.resultsAdapter = Utils.Decorate(options.resultsAdapter, SelectOnClose);\r\n          }\r\n        }\r\n\r\n        if ($__default['default'].isObject(options.ajax)) {\r\n          var lookup = new ew.AjaxLookup(options.ajax);\r\n          options.ajax = {\r\n            url: function url(params) {\r\n              var start = params.page ? (params.page - 1) * (settings.limit || ew.AUTO_SUGGEST_MAX_ENTRIES) : -1;\r\n              return lookup.getUrl(params.term, start);\r\n            },\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            data: lookup.generateRequest.bind(lookup),\r\n            delay: options.debounce,\r\n            processResults: function processResults(data) {\r\n              return {\r\n                results: lookup.transform(data).map(function (item) {\r\n                  return {\r\n                    id: item.lf,\r\n                    text: lookup.formatResult({\r\n                      lf: item.lf,\r\n                      df: item.df,\r\n                      df2: item.df2,\r\n                      df3: item.df3,\r\n                      df4: item.df4\r\n                    })\r\n                  };\r\n                }),\r\n                pagination: {\r\n                  more: data.length < lookup.recordCount\r\n                }\r\n              };\r\n            }\r\n          };\r\n        }\r\n\r\n        var $select = $__default['default'](\"select[data-select2-id='\" + options.selectId + \"']\").select2(options);\r\n        $select.on(\"select2:open\", function () {\r\n          var _$$;\r\n\r\n          (_$$ = $__default['default'](\".select2-container--open .select2-search__field\")[0]) === null || _$$ === void 0 ? void 0 : _$$.focus();\r\n        });\r\n\r\n        if (options.multiple && options.minimumResultsForSearch === Infinity) {\r\n          $select.on(\"select2:opening select2:closing\", function () {\r\n            $__default['default'](\".select2-container--open .select2-search__field\").prop(\"disabled\", true);\r\n          });\r\n        }\r\n      };\r\n    }(options));\r\n  } // Init icon tooltip\r\n\r\n  function initIcons(e) {\r\n    var el = e && e.target ? e.target : document;\r\n    $__default['default'](el).find(\".ew-icon\").closest(\"a, button\").add(\".ew-tooltip\").tooltip({\r\n      container: \"body\",\r\n      trigger: ew.IS_MOBILE ? \"manual\" : \"hover\",\r\n      placement: \"bottom\",\r\n      sanitizeFn: ew.sanitizeFn\r\n    });\r\n  } // Init password options\r\n\r\n  function initPasswordOptions(e) {\r\n    var el = e && e.target ? e.target : document;\r\n\r\n    if ($__default['default'].fn.pStrength && typeof ew.MIN_PASSWORD_STRENGTH != \"undefined\") {\r\n      $__default['default'](el).find(\".ew-password-strength\").each(function () {\r\n        var $this = $__default['default'](this);\r\n        if (!$this.data(\"pStrength\")) $this.pStrength({\r\n          \"changeBackground\": false,\r\n          \"backgrounds\": [],\r\n          \"passwordValidFrom\": ew.MIN_PASSWORD_STRENGTH,\r\n          \"onPasswordStrengthChanged\": function onPasswordStrengthChanged(strength, percentage) {\r\n            var $this = $__default['default'](this),\r\n                $pst = $__default['default'](\"[id='\" + $this.attr(\"data-password-strength\") + \"']\"),\r\n                // Do not use #\r\n            $pb = $pst.find(\".progress-bar\");\r\n            $pst.width($this.outerWidth());\r\n\r\n            if ($this.val() && !ew.isMaskedPassword(this)) {\r\n              var pct = percentage + \"%\";\r\n\r\n              if (percentage < 25) {\r\n                $pb.addClass(\"bg-danger\").removeClass(\"bg-warning bg-info bg-success\");\r\n              } else if (percentage < 50) {\r\n                $pb.addClass(\"bg-warning\").removeClass(\"bg-danger bg-info bg-success\");\r\n              } else if (percentage < 75) {\r\n                $pb.addClass(\"bg-info\").removeClass(\"bg-danger bg-warning bg-success\");\r\n              } else {\r\n                $pb.addClass(\"bg-success\").removeClass(\"bg-danger bg-warning bg-info\");\r\n              }\r\n\r\n              $pb.css(\"width\", pct);\r\n              if (percentage > 25) pct = ew.language.phrase(\"PasswordStrength\").replace(\"%p\", pct);\r\n              $pb.html(pct);\r\n              $pst.removeClass(\"d-none\").show();\r\n              $this.data(\"validated\", percentage >= ew.MIN_PASSWORD_STRENGTH);\r\n            } else {\r\n              $pst.addClass(\"d-none\").hide();\r\n              $this.data(\"validated\", null);\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    if ($__default['default'].fn.pGenerator) {\r\n      $__default['default'](el).find(\".ew-password-generator\").each(function () {\r\n        var $this = $__default['default'](this);\r\n        if (!$this.data(\"pGenerator\")) $this.pGenerator({\r\n          \"passwordLength\": ew.GENERATE_PASSWORD_LENGTH,\r\n          \"uppercase\": ew.GENERATE_PASSWORD_UPPERCASE,\r\n          \"lowercase\": ew.GENERATE_PASSWORD_LOWERCASE,\r\n          \"numbers\": ew.GENERATE_PASSWORD_NUMBER,\r\n          \"specialChars\": ew.GENERATE_PASSWORD_SPECIALCHARS,\r\n          \"onPasswordGenerated\": function onPasswordGenerated(pwd) {\r\n            var $this = $__default['default'](this);\r\n            $__default['default'](\"#\" + $this.attr(\"data-password-field\")).val(pwd).trigger(\"change\").trigger(\"focus\").triggerHandler(\"click\"); // Trigger click to remove \"is-invalid\" class (Do not use $this.data)\r\n\r\n            $__default['default'](\"#\" + $this.attr(\"data-password-confirm\")).val(pwd);\r\n            $__default['default'](\"#\" + $this.attr(\"data-password-strength\")).addClass(\"d-none\").hide();\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Get API action URL\r\n   * @param {string|string[]} action Route as string or array, e.g. \"foo\", [\"foo\", \"1\"]\r\n   * @param {string|string[]|object} query Search params, e.g. \"foo=1&bar=2\", [[\"foo\", \"1\"], [\"bar\", \"2\"]], {\"foo\": \"1\", \"bar\": \"2\"}\r\n   */\r\n\r\n  function getApiUrl(action, query) {\r\n    var url = ew.PATH_BASE + ew.API_URL,\r\n        params = new URLSearchParams(query),\r\n        qs = params.toString();\r\n\r\n    if ($__default['default'].isString(action)) {\r\n      // Route as string\r\n      url += action ? action : \"\";\r\n    } else if (Array.isArray(action)) {\r\n      // Route as array\r\n      var route = action.map(function (v) {\r\n        return encodeURIComponent(v);\r\n      }).join(\"/\");\r\n      url += route ? route : \"\";\r\n    }\r\n\r\n    return url + (qs ? \"?\" + qs : \"\");\r\n  } // Sanitize URL\r\n\r\n  function sanitizeUrl(url) {\r\n    var ar = url.split(\"?\"),\r\n        search = ar[1];\r\n\r\n    if (search) {\r\n      var searchParams = new URLSearchParams(search);\r\n      searchParams.forEach(function (value, key) {\r\n        return searchParams.set(key, ew.sanitize(value));\r\n      });\r\n      search = searchParams.toString();\r\n    }\r\n\r\n    return ar[0] + (search ? \"?\" + search : \"\");\r\n  } // Set session timer\r\n\r\n  function setSessionTimer() {\r\n    var timeoutTime,\r\n        timer,\r\n        keepAliveTimer,\r\n        counter,\r\n        useKeepAlive = ew.SESSION_KEEP_ALIVE_INTERVAL > 0 || ew.IS_LOGGEDIN && ew.IS_AUTOLOGIN; // Keep alive\r\n\r\n    var keepAlive = function keepAlive() {\r\n      $__default['default'].get(getApiUrl(ew.API_SESSION_ACTION), {\r\n        \"rnd\": random()\r\n      }, function (token) {\r\n        if (token && $__default['default'].isObject(token)) {\r\n          // PHP\r\n          ew.TOKEN_NAME = token[ew.TOKEN_NAME_KEY];\r\n          ew.ANTIFORGERY_TOKEN = token[ew.ANTIFORGERY_TOKEN_KEY];\r\n          if (token[\"JWT\"]) ew.API_JWT_TOKEN = token[\"JWT\"];\r\n        }\r\n      });\r\n    }; // Reset timer\r\n\r\n    var resetTimer = function resetTimer() {\r\n      counter = ew.SESSION_TIMEOUT_COUNTDOWN;\r\n      timeoutTime = ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN;\r\n\r\n      if (timeoutTime < 0) {\r\n        // Timeout now\r\n        timeoutTime = 0;\r\n        counter = ew.SESSION_TIMEOUT;\r\n      }\r\n\r\n      if (timer) timer.cancel(); // Clear timer\r\n    }; // Timeout\r\n\r\n    var timeout = function timeout() {\r\n      if (keepAliveTimer) keepAliveTimer.cancel(); // Stop keep alive\r\n\r\n      if (counter > 0) {\r\n        var timerInterval;\r\n        var message = '<p class=\"text-danger\">' + ew.language.phrase(\"SessionWillExpire\") + '</p>';\r\n\r\n        if (message.includes(\"%m\") && message.includes(\"%s\")) {\r\n          message = message.replace(\"%m\", '<span class=\"ew-session-counter-minute\">' + Math.floor(counter / 60) + '</span>');\r\n          message = message.replace(\"%s\", '<span class=\"ew-session-counter-second\">' + counter % 60 + '</span>');\r\n        } else if (message.includes(\"%s\")) {\r\n          message = message.replace(\"%s\", '<span class=\"ew-session-counter-second\">' + counter + '</span>');\r\n        }\r\n\r\n        Swal.fire(_objectSpread(_objectSpread({}, ew.sweetAlertSettings), {}, {\r\n          html: message,\r\n          showConfirmButton: true,\r\n          confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n          timer: counter * 1000,\r\n          timerProgressBar: true,\r\n          allowOutsideClick: false,\r\n          allowEscapeKey: false,\r\n          willOpen: function willOpen() {\r\n            timerInterval = setInterval(function () {\r\n              var content = Swal.getContent(),\r\n                  min = content.querySelector(\".ew-session-counter-minute\"),\r\n                  sec = content.querySelector(\".ew-session-counter-second\"),\r\n                  timeleft = Math.round(Swal.getTimerLeft() / 1000);\r\n\r\n              if (min && sec) {\r\n                min.textContent = Math.floor(timeleft / 60);\r\n                sec.textContent = timeleft % 60;\r\n              } else if (sec) {\r\n                sec.textContent = timeleft;\r\n              }\r\n            }, 1000);\r\n          },\r\n          onClose: function onClose() {\r\n            clearInterval(timerInterval);\r\n          }\r\n        })).then(function (result) {\r\n          if (result.value) {\r\n            // OK button pressed\r\n            keepAlive();\r\n            if (!useKeepAlive && ew.SESSION_TIMEOUT > 0) setTimer();\r\n          } else if (result.dismiss === Swal.DismissReason.timer) {\r\n            // Timeout\r\n            resetTimer();\r\n            window.location = sanitizeUrl(ew.TIMEOUT_URL + \"?expired=1\");\r\n          }\r\n        });\r\n      }\r\n    }; // Set timer\r\n\r\n    var setTimer = function setTimer() {\r\n      resetTimer(); // Reset timer first\r\n\r\n      timer = $__default['default'].later(timeoutTime * 1000, null, timeout);\r\n    };\r\n\r\n    if (useKeepAlive) {\r\n      // Keep alive\r\n      var keepAliveInterval = ew.SESSION_KEEP_ALIVE_INTERVAL > 0 ? ew.SESSION_KEEP_ALIVE_INTERVAL : ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN;\r\n      if (keepAliveInterval <= 0) keepAliveInterval = 60;\r\n      keepAliveTimer = $__default['default'].later(keepAliveInterval * 1000, null, keepAlive, null, true); // Periodic\r\n    } else {\r\n      if (ew.SESSION_TIMEOUT > 0) // Set session timeout\r\n        setTimer();\r\n    }\r\n  } // Init export links\r\n\r\n  function initExportLinks(e) {\r\n    var el = e && e.target ? e.target : document;\r\n    $__default['default'](el).find(\".ew-export-link[href]:not(.ew-email):not(.ew-print):not(.ew-xml)\").on(\"click\", function (e) {\r\n      var href = $__default['default'](this).attr(\"href\");\r\n      if (href && href != \"#\") fileDownload(href);\r\n      e.preventDefault();\r\n    });\r\n  } // Init multi-select checkboxes\r\n\r\n  function initMultiSelectCheckboxes(e) {\r\n    var el = e && e.target ? e.target : document,\r\n        $el = $__default['default'](el),\r\n        $cbs = $el.find(\"input[type=checkbox].ew-multi-select\");\r\n\r\n    var _update = function _update(id) {\r\n      var $els = $cbs.filter(\"[name^='\" + id + \"_']\"),\r\n          cnt = $els.length,\r\n          len = $els.filter(\":checked\").length;\r\n      $els.closest(\"form\").find(\"input[type=checkbox]#\" + id).prop(\"checked\", len == cnt).prop(\"indeterminate\", len != cnt && len != 0);\r\n    };\r\n\r\n    $cbs.on(\"click\", function (e) {\r\n      _update(this.name.split(\"_\")[0]);\r\n    });\r\n    $el.find(\"input[type=checkbox].ew-priv:not(.ew-multi-select)\").each(function () {\r\n      _update(this.id); // Init\r\n\r\n    });\r\n  } // Download file\r\n\r\n  function fileDownload(href, data) {\r\n    var isHtml = href.includes(\"export=html\");\r\n    return Swal.fire(_objectSpread(_objectSpread({}, ew.sweetAlertSettings), {}, {\r\n      showConfirmButton: false,\r\n      html: \"<p>\" + ew.language.phrase(\"Exporting\") + \"</p>\",\r\n      allowOutsideClick: false,\r\n      allowEscapeKey: false,\r\n      willOpen: function willOpen() {\r\n        Swal.showLoading(), $__default['default'].ajax({\r\n          url: href,\r\n          type: data ? \"POST\" : \"GET\",\r\n          cache: false,\r\n          data: data || null,\r\n          xhrFields: {\r\n            responseType: isHtml ? \"text\" : \"blob\"\r\n          }\r\n        }).done(function (data, textStatus, jqXHR) {\r\n          var url = URL.createObjectURL(isHtml ? new Blob([data], {\r\n            type: \"text/html\"\r\n          }) : data),\r\n              a = document.createElement(\"a\"),\r\n              cd = jqXHR.getResponseHeader(\"Content-Disposition\"),\r\n              m = cd.match(/\\bfilename=((['\"])(.+)\\2|([^;]+))/i);\r\n          a.style.display = \"none\";\r\n          a.href = url;\r\n          if (m) a.download = m[3] || m[4];\r\n          document.body.appendChild(a);\r\n          a.click();\r\n          $document$1.trigger(\"export\", [{\r\n            \"type\": \"done\",\r\n            \"url\": href,\r\n            \"objectUrl\": url\r\n          }]);\r\n          URL.revokeObjectURL(url);\r\n          Swal.close();\r\n        }).fail(function (jqXHR, textStatus, errorThrown) {\r\n          var _Swal$getActions;\r\n\r\n          Swal.hideLoading();\r\n          Swal.update({\r\n            showConfirmButton: true\r\n          });\r\n          (_Swal$getActions = Swal.getActions()) === null || _Swal$getActions === void 0 ? void 0 : _Swal$getActions.classList.add(\"d-flex\");\r\n          Swal.showValidationMessage(\"<div class='text-danger'>\" + (errorThrown || ew.language.phrase(\"FailedToExport\")) + \"</div>\");\r\n          $document$1.trigger(\"export\", [{\r\n            \"type\": \"fail\",\r\n            \"url\": href\r\n          }]);\r\n        }).always(function () {\r\n          $document$1.trigger(\"export\", [{\r\n            \"type\": \"always\",\r\n            \"url\": href\r\n          }]);\r\n        });\r\n      }\r\n    }));\r\n  } // Lazy load images\r\n\r\n  function lazyLoad(e) {\r\n    if (!ew.LAZY_LOAD) return;\r\n    var el = e && e.target ? e.target : document;\r\n    $__default['default'](el).find(\"img.ew-lazy\").each(function () {\r\n      this.src = this.dataset.src;\r\n    });\r\n    $document$1.trigger(\"lazyload\"); // All images loaded\r\n  } // Update select2 dropdown position\r\n\r\n  function updateDropdownPosition() {\r\n    var select = $__default['default'](\".select2-container--open\").prev(\".ew-select\").data(\"select2\");\r\n\r\n    if (select) {\r\n      select.dropdown._positionDropdown();\r\n\r\n      select.dropdown._resizeDropdown();\r\n    }\r\n  } // Colorboxes\r\n\r\n  function initLightboxes(e) {\r\n    if (!ew.USE_COLORBOX) return;\r\n    var el = e && e.target ? e.target : document;\r\n    var settings = Object.assign({}, ew.lightboxSettings, {\r\n      title: ew.language.phrase(\"LightboxTitle\"),\r\n      current: ew.language.phrase(\"LightboxCurrent\"),\r\n      previous: ew.language.phrase(\"LightboxPrevious\"),\r\n      next: ew.language.phrase(\"LightboxNext\"),\r\n      close: ew.language.phrase(\"LightboxClose\"),\r\n      xhrError: ew.language.phrase(\"LightboxXhrError\"),\r\n      imgError: ew.language.phrase(\"LightboxImgError\")\r\n    });\r\n    $__default['default'](el).find(\".ew-lightbox\").each(function () {\r\n      var $this = $__default['default'](this);\r\n      $this.colorbox(Object.assign({\r\n        rel: $this.data(\"rel\")\r\n      }, settings));\r\n    });\r\n  } // PDFObjects\r\n\r\n  function initPdfObjects(e) {\r\n    if (!ew.EMBED_PDF) return;\r\n    var el = e && e.target ? e.target : document,\r\n        options = Object.assign({}, ew.PDFObjectOptions);\r\n    $__default['default'](el).find(\".ew-pdfobject\").not(\":has(.pdfobject)\").each(function () {\r\n      // Not already embedded\r\n      var $this = $__default['default'](this),\r\n          url = $this.data(\"url\"),\r\n          html = $this.html();\r\n      if (url) PDFObject.embed(url, this, Object.assign(options, {\r\n        fallbackLink: html\r\n      }));\r\n    });\r\n  } // Tooltips and popovers\r\n\r\n  function initTooltips(e) {\r\n    var el = e && e.target ? e.target : document,\r\n        $el = $__default['default'](el);\r\n    $el.find(\"input[data-toggle=tooltip],textarea[data-toggle=tooltip],select[data-toggle=tooltip]\").each(function () {\r\n      var $this = $__default['default'](this);\r\n      $this.tooltip(Object.assign({\r\n        html: true,\r\n        placement: \"bottom\",\r\n        sanitizeFn: ew.sanitizeFn\r\n      }, $this.data()));\r\n    });\r\n    $el.find(\"a.ew-tooltip-link\").each(tooltip); // Init tooltips\r\n\r\n    $el.find(\".ew-tooltip\").tooltip({\r\n      placement: \"bottom\",\r\n      sanitizeFn: ew.sanitizeFn\r\n    });\r\n    $el.find(\".ew-popover\").popover({\r\n      sanitizeFn: ew.sanitizeFn\r\n    });\r\n  } // Parse JSON\r\n\r\n  function parseJson(data) {\r\n    if ($__default['default'].isString(data)) {\r\n      try {\r\n        return JSON.parse(data);\r\n      } catch (e) {\r\n        return undefined;\r\n      }\r\n    }\r\n\r\n    return data;\r\n  } // Change search operator\r\n\r\n  function searchOperatorChanged(el) {\r\n    var $el = $__default['default'](el),\r\n        $p = $el.closest(\"[id^=r_], [id^=xsc_]\"),\r\n        parm = el.id.substr(2),\r\n        $fld = $p.find(\".ew-search-field\"),\r\n        $fld2 = $p.find(\".ew-search-field2\"),\r\n        $y = $fld2.find(\"[name='y_\" + parm + \"'], [name='y_\" + parm + \"[]']\"),\r\n        hasY = $y.length,\r\n        $cond = $p.find(\".ew-search-cond\"),\r\n        hasCond = $cond.length,\r\n        // Has condition and operator 2\r\n    $and = $p.find(\".ew-search-and\"),\r\n        $opr = $p.find(\".ew-search-operator\"),\r\n        opr = $opr.find(\"[name='z_\" + parm + \"']\").val(),\r\n        $opr2 = $p.find(\".ew-search-operator2\"),\r\n        opr2 = $opr2.find(\"[name='w_\" + parm + \"']\").val(),\r\n        isBetween = opr == \"BETWEEN\",\r\n        // Can only be operator 1\r\n    isNullOpr = [\"IS NULL\", \"IS NOT NULL\"].includes(opr),\r\n        isNullOpr2 = [\"IS NULL\", \"IS NOT NULL\"].includes(opr2),\r\n        hideOpr2 = !hasY || isBetween,\r\n        hideX = isNullOpr,\r\n        hideY = !isBetween && (!hasCond || isNullOpr2);\r\n    $cond.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $and.toggleClass(\"d-none\", !isBetween);\r\n    $opr2.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $fld.toggleClass(\"d-none\", hideX).find(\":input\").prop(\"disabled\", hideX);\r\n    $fld2.toggleClass(\"d-none\", hideY).find(\":input\").prop(\"disabled\", hideY);\r\n  } // Init forms\r\n\r\n  function initForms(e) {\r\n    var el = e && e.target ? e.target : document,\r\n        $el = $__default['default'](el),\r\n        ids = ew.forms.ids();\r\n\r\n    for (var _iterator = _createForOfIteratorHelperLoose(ids), _step; !(_step = _iterator()).done;) {\r\n      var id = _step.value;\r\n      if ($el.find(\"#\" + id)) forms.get(id).init();\r\n    }\r\n  } // Is function\r\n\r\n  function isFunction(x) {\r\n    return typeof x === \"function\";\r\n  } // Prompt/Confirm/Alert\r\n\r\n  function _prompt(text, cb, input, validator) {\r\n    if (input) {\r\n      // Prompt\r\n      return Swal.fire(_objectSpread(_objectSpread({}, ew.sweetAlertSettings), {}, {\r\n        html: text,\r\n        input: \"text\",\r\n        confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n        showCancelButton: isFunction(cb),\r\n        cancelButtonText: ew.language.phrase(\"CancelBtn\"),\r\n        inputValidator: validator || function (value) {\r\n          if (!value) return ew.language.phrase(\"EnterValue\");\r\n        }\r\n      })).then(function (result) {\r\n        if (isFunction(cb)) cb(result.value);\r\n      });\r\n    } else {\r\n      // Confirm or Alert\r\n      return Swal.fire(_objectSpread(_objectSpread({}, ew.sweetAlertSettings), {}, {\r\n        html: \"<div>\" + text + \"</div>\",\r\n        confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n        showCancelButton: isFunction(cb),\r\n        cancelButtonText: ew.language.phrase(\"CancelBtn\")\r\n      })).then(function (result) {\r\n        if (isFunction(cb)) cb(result.value);\r\n      });\r\n    }\r\n  }\r\n\r\n  function toast(options) {\r\n    options = Object.assign({}, ew.toastOptions, options);\r\n    $document$1.Toasts(\"create\", options);\r\n    var position = options.position,\r\n        $container = $__default['default'](\"#toastsContainer\" + position[0].toUpperCase() + position.substring(1));\r\n    return $container.children().first();\r\n  }\r\n  /**\r\n   * Show toast\r\n   *\r\n   * @param {string} msg - Message\r\n   * @param {string} type - CSS class: \"muted|primary|success|info|warning|danger\"\r\n   */\r\n\r\n  function showToast(msg, type) {\r\n    type = type || \"danger\";\r\n    return toast({\r\n      class: \"ew-toast bg-\" + type,\r\n      title: ew.language.phrase(type),\r\n      body: msg,\r\n      autohide: type == \"success\" ? ew.autoHideSuccessMessage : false,\r\n      // Autohide for success message\r\n      delay: type == \"success\" ? ew.autoHideSuccessMessageDelay : 500\r\n    });\r\n  } // Get form.ew-form or div.ew-form HTML element\r\n\r\n  function getForm(el) {\r\n    if (el instanceof Form) return el.$element[0];\r\n    var $el = $__default['default'](el),\r\n        $f = $el.closest(\".ew-form\");\r\n    if (!$f[0]) // Element not inside form\r\n      $f = $el.closest(\".ew-grid, .ew-multi-column-grid\").find(\".ew-form\").not(\".ew-pager-form\");\r\n    return $f[0];\r\n  } // Check form data\r\n\r\n  function hasFormData(form) {\r\n    var selector = \"[name^=x_],[name^=y_],[name^=z_],[name^=w_],[name=psearch]\",\r\n        els = $__default['default'](form).find(selector).filter(\":enabled\").get();\r\n\r\n    for (var i = 0, len = els.length; i < len; i++) {\r\n      var el = els[i];\r\n\r\n      if (/^(z|w)_/.test(el.name)) {\r\n        if (/^IS/.test($__default['default'](el).val())) return true;\r\n      } else if (el.type == \"checkbox\" || el.type == \"radio\") {\r\n        if (el.checked) return true;\r\n      } else if (el.type == \"select-one\" || el.type == \"select-multiple\") {\r\n        if (!!$__default['default'](el).val()) return true;\r\n      } else if (el.type == \"text\" || el.type == \"hidden\" || el.type == \"textarea\") {\r\n        if (el.value) return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  } // Set search type\r\n\r\n  function setSearchType(el, val) {\r\n    var $this = $__default['default'](el),\r\n        $form = $this.closest(\"form\"),\r\n        text = \"\";\r\n    $form.find(\"input[name=psearchtype]\").val(val || \"\");\r\n\r\n    if (val == \"=\") {\r\n      text = ew.language.phrase(\"QuickSearchExactShort\");\r\n    } else if (val == \"AND\") {\r\n      text = ew.language.phrase(\"QuickSearchAllShort\");\r\n    } else if (val == \"OR\") {\r\n      text = ew.language.phrase(\"QuickSearchAnyShort\");\r\n    } else {\r\n      text = ew.language.phrase(\"QuickSearchAutoShort\");\r\n    }\r\n\r\n    $form.find(\"#searchtype\").html(text + (text ? \"&nbsp;\" : \"\"));\r\n    $this.closest(\"ul\").find(\"li\").removeClass(\"active\");\r\n    $this.closest(\"li\").addClass(\"active\");\r\n    return false;\r\n  }\r\n  /**\r\n   * Update a dynamic selection list\r\n   *\r\n   * @param {(HTMLElement|HTMLElement[]|string|string[])} obj - Target HTML element(s) or the ID of the element(s)\r\n   * @param {(string[]|array[])} parentId - Parent field element names or data\r\n   * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n   * @param {boolean} change - Trigger onchange event\r\n   * @returns\r\n   */\r\n\r\n  function updateOptions(obj, parentId, async, change) {\r\n    var f = this.$element ? this.$element[0] : this.form ? this.form : null; // Get form/div element from this\r\n\r\n    if (!f) return;\r\n    var frm = this.htmlForm ? this : forms.get(f.id); // Get Form object\r\n\r\n    if (!frm) return;\r\n    if (this.form && $__default['default'].isUndefined(obj)) // Target unspecified\r\n      obj = forms.get(this).getList(this.name).childFields.slice(); // Clone\r\n    else if ($__default['default'].isString(obj)) obj = getElements(obj, f);\r\n    if (!obj || Array.isArray(obj) && obj.length == 0) return;\r\n    var self = this,\r\n        promise = Promise.resolve();\r\n\r\n    if (Array.isArray(obj) && $__default['default'].isString(obj[0])) {\r\n      // Array of id (onchange/onclick event)\r\n      var els = [];\r\n\r\n      for (var i = 0, len = obj.length; i < len; i++) {\r\n        var ar = obj[i].split(\" \");\r\n\r\n        if (ar.length == 1 && self.form) {\r\n          // Parent/Child fields in the same table\r\n          var m = getId(self, false).match(/^([xy]\\d*_)/);\r\n          if (m) obj[i] = obj[i].replace(/^([xy]\\d*_)/, m[1]);\r\n        }\r\n\r\n        var el = getElements(obj[i], f),\r\n            names = [];\r\n        els.push(el);\r\n\r\n        if (ar.length == 2 && Array.isArray(el)) {\r\n          // Check if id is \"tblvar fldvar\" and multiple inputs\r\n          var $el = $__default['default'](el);\r\n          $el.each(function () {\r\n            if (!names.includes(this.name)) {\r\n              names.push(this.name);\r\n              var $elf = $el.filter(\"[name='\" + this.name + \"']\"),\r\n                  typ = $elf.attr(\"type\"),\r\n                  elf = [\"radio\", \"checkbox\"].includes(typ) ? $elf.get() : $elf[0];\r\n              promise = promise.then(_updateOptions.bind(self, elf, parentId, async, change));\r\n            }\r\n          });\r\n        } else {\r\n          promise = promise.then(_updateOptions.bind(self, el, parentId, async, change));\r\n        }\r\n      }\r\n\r\n      obj = els;\r\n      var list = forms.get(self).getList(self.name);\r\n      if (list && Array.isArray(list.autoFillTargetFields) && list.autoFillTargetFields[0]) // AutoFill\r\n        promise = promise.then(autoFill.bind(null, self));\r\n    } else {\r\n      promise = promise.then(_updateOptions.bind(self, obj, parentId, async, change));\r\n    }\r\n\r\n    return promise.then(function () {\r\n      $document$1.trigger(\"updatedone\", [{\r\n        source: self,\r\n        target: obj\r\n      }]); // Document \"updatedone\" event fired after all the target elements are updated\r\n    });\r\n  }\r\n  /**\r\n   * Update a dynamic selection list\r\n   *\r\n   * @param {(HTMLElement|HTMLElement[]} obj - Target HTML element(s) or the ID of the element(s)\r\n   * @param {(string[]|array[])} parentId - Parent field element names or data\r\n   * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n   * @param {boolean} change - Trigger onchange event\r\n   * @returns Promise\r\n   */\r\n\r\n  function _updateOptions(obj, parentId, async, change) {\r\n    var id = getId(obj, false);\r\n    if (!id) return;\r\n    var fo = getForm(obj); // Get form/div element from obj\r\n\r\n    if (!fo || !fo.id) return;\r\n    var frmo = forms.get(fo.id);\r\n    if (!frmo) return;\r\n    var self = this,\r\n        args = Array.from(arguments),\r\n        ar = getOptionValues(obj),\r\n        m = id.match(/^([xy])(\\d*)_/),\r\n        prefix = m ? m[1] : \"\",\r\n        rowindex = m ? m[2] : \"\",\r\n        arp = [],\r\n        list = frmo.getList(id),\r\n        $obj = $__default['default'](obj).data(\"updating\", true);\r\n    if ($obj.data(\"hidden\")) // Skip data-hidden field, e.g. detail key\r\n      return;\r\n\r\n    if ($__default['default'].isUndefined(parentId)) {\r\n      // Parent IDs not specified, use default\r\n      parentId = list.parentFields.slice(); // Clone\r\n\r\n      if (rowindex != \"\") {\r\n        for (var i = 0, len = parentId.length; i < len; i++) {\r\n          var arr = parentId[i].split(\" \");\r\n          if (arr.length == 1) // Parent field in the same table, add row index\r\n            parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n        }\r\n      }\r\n    }\r\n\r\n    if (Array.isArray(parentId) && parentId.length > 0) {\r\n      if (Array.isArray(parentId[0])) {\r\n        // Array of array => data\r\n        arp = parentId;\r\n      } else if ($__default['default'].isString(parentId[0])) {\r\n        // Array of string => Parent IDs\r\n        for (var i = 0, len = parentId.length; i < len; i++) {\r\n          arp.push(getOptionValues(parentId[i], fo));\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!isAutoSuggest(obj)) // Do not clear Auto-Suggest\r\n      clearOptions(obj);\r\n\r\n    var addOpt = function addOpt(results) {\r\n      var name = getId(obj);\r\n      results.forEach(function (result) {\r\n        var args = {\r\n          \"data\": result,\r\n          \"parents\": arp,\r\n          \"valid\": true,\r\n          \"name\": name,\r\n          \"form\": fo\r\n        };\r\n        $document$1.trigger(\"addoption\", [args]);\r\n        if (args.valid) newOption(obj, result, fo);\r\n      });\r\n      if (obj.list) obj.render();\r\n      selectOption(obj, ar);\r\n\r\n      if (change !== false) {\r\n        if (!obj.options && obj.length) $obj.first().triggerHandler(\"click\");else $obj.first().trigger(\"change\");\r\n      }\r\n    };\r\n\r\n    if ($__default['default'].isUndefined(async)) // Async not specified, use default\r\n      async = list.ajax;\r\n\r\n    var _updateSibling = function _updateSibling() {\r\n      // Update the y_* element\r\n      if (/(s(ea)?rch|summary|crosstab)$/.test(fo.id) && prefix == \"x\") {\r\n        // Search form\r\n        args[0] = id.replace(/^x_/, \"y_\");\r\n        updateOptions.apply(self, args); // args[0] is string, use updateOptions()\r\n      }\r\n    };\r\n\r\n    if (!$__default['default'].isBoolean(async) || Array.isArray(list.lookupOptions) && list.lookupOptions.length > 0) {\r\n      // Non-Ajax or Options loaded\r\n      var ds = list.lookupOptions;\r\n      addOpt(ds);\r\n\r\n      _updateSibling();\r\n\r\n      return ds;\r\n    } else {\r\n      // Ajax\r\n      var name = getId(obj),\r\n          data = Object.assign({\r\n        page: list.page,\r\n        field: list.field,\r\n        ajax: \"updateoption\",\r\n        language: ew.LANGUAGE_ID,\r\n        name: name // Name of the target element\r\n\r\n      }, getUserParams(\"#p_\" + id, fo)); // Add user parameters\r\n\r\n      if (isAutoSuggest(obj) && self.htmlForm) // Auto-Suggest (init form or auto-fill)\r\n        data[\"v0\"] = ar[0] || random(); // Filter by the current value\r\n      else if (obj.options && ![\"select-one\", \"select-multiple\"].includes(obj.type) || isModalLookup(obj)) // Lookup\r\n          data[\"v0\"] = ar[0] ? obj.multiple ? ar.join(ew.MULTIPLE_OPTION_SEPARATOR) : ar[0] : random(); // Filter by the current value\r\n\r\n      for (var i = 0, cnt = arp.length; i < cnt; i++) {\r\n        // Filter by parent fields\r\n        data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n      }\r\n\r\n      return $__default['default'].ajax(getApiUrl(ew.API_LOOKUP_ACTION), {\r\n        \"type\": \"POST\",\r\n        \"dataType\": \"json\",\r\n        \"data\": data,\r\n        \"async\": async\r\n      }).done(function (result) {\r\n        var ds = result.records || [];\r\n        addOpt(ds);\r\n\r\n        _updateSibling();\r\n\r\n        $obj.first().trigger(\"updated\", [Object.assign({}, result, {\r\n          target: obj\r\n        })]); // Object \"updatedone\" event fired after the object is updated\r\n\r\n        return ds;\r\n      }).always(function () {\r\n        return $obj.data(\"updating\", false);\r\n      });\r\n    }\r\n  } // Get user parameters from id\r\n\r\n  function getUserParams(id, root) {\r\n    var id = id.replace(/\\[\\]$/, \"\"),\r\n        o = {};\r\n    var root = !$__default['default'].isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    var $els = root ? $__default['default'](root).find(id) : $__default['default'](id);\r\n    var val = $els.val();\r\n\r\n    if (val) {\r\n      var params = new URLSearchParams(val);\r\n      params.forEach(function (value, key) {\r\n        o[key] = value;\r\n      });\r\n    }\r\n\r\n    return o;\r\n  } // Apply client side template to a DIV\r\n\r\n  function applyTemplate(divId, tmplId, classId, exportType, data) {\r\n    // Note: classId = fileName\r\n    var args = {\r\n      \"data\": data || {},\r\n      \"id\": divId,\r\n      \"template\": tmplId,\r\n      \"class\": classId,\r\n      \"export\": exportType,\r\n      \"enabled\": true\r\n    };\r\n    $document$1.trigger(\"rendertemplate\", [args]);\r\n\r\n    if (args.enabled) {\r\n      if (document.body.replaceWith) {\r\n        // Not IE\r\n        var template = document.getElementById(tmplId).content;\r\n        template.querySelectorAll(\".ew-slot\").forEach(function (el) {\r\n          var subtmpl = document.getElementById(el.name || el.id);\r\n\r\n          if (subtmpl && subtmpl.content) {\r\n            if (el.dataset.rowspan > 1) Array.prototype.slice.call(subtmpl.content.childNodes).forEach(function (node) {\r\n              return node.rowSpan = el.dataset.rowspan;\r\n            });\r\n            el.replaceWith(subtmpl.content);\r\n          } else {\r\n            el.remove();\r\n          }\r\n        });\r\n\r\n        if ($__default['default'].views) {\r\n          var textContent = template.textContent,\r\n              hasTag = textContent.includes(\"{{\") && textContent.includes(\"}}\");\r\n\r\n          if (!hasTag) {\r\n            var selector = ew.jsRenderAttributes.map(function (attr) {\r\n              return \"[\" + attr + \"*='{{'][\" + attr + \"*='}}']\";\r\n            }).join(\",\");\r\n            hasTag = template.querySelector(selector);\r\n          }\r\n\r\n          if (hasTag) {\r\n            // Includes JsRender template\r\n            var scripts = Array.prototype.slice.call(template.querySelectorAll(\"script\")); // Extract scripts\r\n\r\n            scripts.forEach(function (item) {\r\n              return item.remove();\r\n            });\r\n            var div = document.createElement(\"div\");\r\n            div.appendChild(template);\r\n            var html = div.innerHTML,\r\n                tmpl = $__default['default'].templates(html);\r\n            document.getElementById(divId).innerHTML = tmpl.render(args.data, ew.jsRenderHelpers);\r\n            scripts.forEach(function (item) {\r\n              return document.body.appendChild(item);\r\n            }); // Add scripts\r\n          } else {\r\n            document.getElementById(divId).appendChild(template);\r\n          }\r\n        } else {\r\n          document.getElementById(divId).appendChild(template);\r\n        }\r\n      } else {\r\n        // IE\r\n        _alert(ew.language.phrase(\"UnsupportedBrowser\") || \"Your browser is not supported by this page.\");\r\n      }\r\n    }\r\n\r\n    if (exportType && exportType != \"print\") {\r\n      // Export custom\r\n      $__default['default'](function () {\r\n        var $meta = $__default['default'](\"meta[http-equiv='Content-Type']\"),\r\n            html = \"<html><head>\",\r\n            $div = $__default['default'](\"#\" + divId);\r\n        if ($div.children(0).is(\"div[id^=ct_]\")) // Remove first div tag\r\n          $div = $div.children(0);\r\n        if ($meta[0]) html += \"<meta http-equiv='Content-Type' content='\" + $meta.attr(\"content\") + \"'>\";\r\n\r\n        if (exportType == \"pdf\") {\r\n          html += \"<link rel='stylesheet' href='\" + ew.PDF_STYLESHEET_FILENAME + \"'>\";\r\n        } else {\r\n          html += \"<style>\" + $__default['default'].ajax({\r\n            async: false,\r\n            type: \"GET\",\r\n            url: ew.PROJECT_STYLESHEET_FILENAME\r\n          }).responseText + \"</style>\";\r\n        }\r\n\r\n        html += \"</\" + \"head><body>\";\r\n        $__default['default'](\".ew-chart-top\").each(function () {\r\n          html += $__default['default'](this).html();\r\n        });\r\n        html += $div.html();\r\n        $__default['default'](\".ew-chart-bottom\").each(function () {\r\n          html += $__default['default'](this).html();\r\n        });\r\n        html += \"</body></html>\";\r\n        var url = currentPage(),\r\n            data = {\r\n          \"customexport\": exportType,\r\n          \"data\": html,\r\n          \"filename\": args.class\r\n        };\r\n        data[ew.TOKEN_NAME] = ew.ANTIFORGERY_TOKEN;\r\n\r\n        if (exportType == \"email\") {\r\n          var str = currentUrl.searchParams.toString() + \"&\" + $__default['default'].param(data); // Add data\r\n\r\n          $__default['default'].post(url, str, function (result) {\r\n            showMessage(result);\r\n          });\r\n        } else {\r\n          fileDownload(url, data);\r\n        }\r\n\r\n        window.parent.jQuery(\"body\").css(\"cursor\", \"default\"); // Use window.parent in case in iframe\r\n      });\r\n    }\r\n  } // Toggle group\r\n\r\n  function toggleGroup(el) {\r\n    var $el = $__default['default'](el),\r\n        $tr = $el.closest(\"tr\"),\r\n        selector = \"tr\",\r\n        level;\r\n\r\n    for (var i = 1; i <= 6; i++) {\r\n      var idx = i == 1 ? \"\" : \"-\" + i;\r\n      var data = $tr.data(\"group\" + idx);\r\n\r\n      if ($__default['default'].isValue(data)) {\r\n        level = i;\r\n        if (data != \"\") selector += \"[data-group\" + idx + \"='\" + String(data).replace(/'/g, \"\\\\'\") + \"']\";\r\n      }\r\n    }\r\n\r\n    if ($el.hasClass(\"icon-collapse\")) {\r\n      // Hide\r\n      $__default['default'](selector).slice(1).addClass(\"ew-rpt-grp-hide-\" + level);\r\n      $el.toggleClass(\"icon-expand icon-collapse\");\r\n    } else {\r\n      $__default['default'](selector).slice(1).removeClass(\"ew-rpt-grp-hide-\" + level);\r\n      $el.toggleClass(\"icon-expand icon-collapse\");\r\n    }\r\n  } // Check if boolean value is true\r\n\r\n  function convertToBool(value) {\r\n    return value && [\"1\", \"y\", \"t\", \"true\"].includes(value.toLowerCase());\r\n  } // Check if element value changed\r\n\r\n  function valueChanged(fobj, infix, fld, bool) {\r\n    var nelm = getElements(\"x\" + infix + \"_\" + fld, fobj);\r\n    var oelm = getElement(\"o\" + infix + \"_\" + fld, fobj); // Hidden element\r\n\r\n    var fnelm = getElement(\"fn_x\" + infix + \"_\" + fld, fobj); // Hidden element\r\n\r\n    if ((nelm === null || nelm === void 0 ? void 0 : nelm.type) == \"hidden\" && !oelm) // For example, detail key\r\n      return false;\r\n    if (!oelm && (!nelm || Array.isArray(nelm) && nelm.length == 0)) return false;\r\n\r\n    var getValue = function getValue(obj) {\r\n      return getOptionValues(obj).join();\r\n    };\r\n\r\n    if (oelm && nelm) {\r\n      if (bool) {\r\n        if (convertToBool(getValue(oelm)) === convertToBool(getValue(nelm))) return false;\r\n      } else {\r\n        var oldvalue = getValue(oelm);\r\n        var newvalue = fnelm ? getValue(fnelm) : getValue(nelm);\r\n        if (oldvalue == newvalue) return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  } // Set language\r\n\r\n  function setLanguage(el) {\r\n    var $el = $__default['default'](el),\r\n        val = $el.val() || $el.data(\"language\");\r\n    if (!val) return;\r\n    currentUrl.searchParams.set(\"language\", val);\r\n    window.location = sanitizeUrl(currentUrl.toString());\r\n  }\r\n  /**\r\n   * Submit action\r\n   *\r\n   * @param {Event} e\r\n   * @param {Object} args - Arguments\r\n   * @param {HTMLElement} args.f - HTML form (default is the form of the source element)\r\n   * @param {string} args.url - URL to which the request is sent (default is current page)\r\n   * @param {Object} args.key - Key as object (for single record only)\r\n   * @param {string} args.msg - Confirm message\r\n   * @param {string} args.action - Custom action name\r\n   * @param {string} args.select - \"single\"|\"s\" (single record) or \"multiple\"|\"m\" (multiple records, default)\r\n   * @param {string} args.method - \"ajax\"|\"a\" (Ajax by HTTP POST) or \"post\"|\"p\" (HTTP POST, default)\r\n   * @param {Object} args.data - Object of user data that is sent to the server\r\n   * @param {string|callback|Object} success - Function to be called if the request succeeds, or settings for jQuery.ajax() (for Ajax only)\r\n   * @returns\r\n   */\r\n\r\n  function submitAction(e, args) {\r\n    var el = e.target || e.srcElement,\r\n        $el = $__default['default'](el),\r\n        f = args.f || $el.closest(\"form\")[0] || currentForm,\r\n        $f = $__default['default'](f),\r\n        key = args.key,\r\n        action = args.action,\r\n        url = args.url || currentPage(),\r\n        msg = args.msg,\r\n        data = args.data,\r\n        success = args.success,\r\n        isPost = !args.method || sameText(args.method[0], \"p\"),\r\n        isMultiple = !args.select && !args.key || args.select && sameText(args.select[0], \"m\");\r\n    if (isMultiple && !$f[0]) return false;\r\n\r\n    if (isMultiple && !keySelected($f[0])) {\r\n      _prompt(\"<p class=\\\"text-danger\\\">\" + ew.language.phrase(\"NoRecordSelected\") + \"</p>\");\r\n\r\n      return false;\r\n    }\r\n\r\n    var _success = function _success(result) {\r\n      showMessage(result);\r\n    };\r\n\r\n    var _submit = function _submit() {\r\n      if (isPost) {\r\n        // Post back\r\n        if (action) // Action\r\n          $__default['default'](\"<input>\").attr({\r\n            type: \"hidden\",\r\n            name: \"useraction\",\r\n            value: action\r\n          }).appendTo($f);\r\n\r\n        if ($__default['default'].isObject(data)) {\r\n          // User data\r\n          for (var k in data) {\r\n            var $input = $f.find(\"input[type=hidden][name='\" + k + \"']\");\r\n            if ($input[0]) $input.val(data[k]);else $__default['default'](\"<input>\").attr({\r\n              type: \"hidden\",\r\n              name: k,\r\n              value: data[k]\r\n            }).appendTo($f);\r\n          }\r\n        }\r\n\r\n        if (!isMultiple && $__default['default'].isObject(key)) {\r\n          // Key\r\n          for (var k in key) {\r\n            $__default['default'](\"<input>\").attr({\r\n              type: \"hidden\",\r\n              name: k,\r\n              value: key[k]\r\n            }).appendTo($f);\r\n          }\r\n        }\r\n\r\n        $f.prop(\"action\", url).trigger(\"submit\"); // if (action) // Action\r\n        //     $f.find(\"input[type=hidden][name=useraction]\").remove(); // Remove the \"useraction\" element\r\n      } else {\r\n        // Ajax\r\n        data = $__default['default'].isObject(data) ? $__default['default'].param(data) : $__default['default'].isString(data) ? data : \"\"; // User data\r\n\r\n        if (action) data += \"&useraction=\" + action + \"&ajax=\" + action; // Action\r\n\r\n        if (isMultiple) // Multiple records\r\n          data += \"&\" + $f.find(\"input[name='key_m[]']:checked\").serialize(); // Keys\r\n        else if (key) // Single record\r\n            data += \"&\" + ($__default['default'].isObject(key) ? $__default['default'].param(key) : key); // Key\r\n\r\n        if (success && $__default['default'].isString(success)) success = window[success];\r\n\r\n        if (isFunction(success)) {\r\n          $__default['default'].post(url, data, success);\r\n        } else if ($__default['default'].isObject(success)) {\r\n          // \"success\" is Ajax settings\r\n          success.data = data;\r\n          success.method = success.method || \"POST\";\r\n          success.success = success.success || _success;\r\n          $__default['default'].ajax(url, success);\r\n        } else {\r\n          $__default['default'].post(url, data, _success);\r\n        }\r\n      }\r\n    };\r\n\r\n    if (msg) {\r\n      _prompt(msg, function (result) {\r\n        if (result) _submit();\r\n      });\r\n    } else {\r\n      _submit();\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Export with selected records and/or Custom Template\r\n   *\r\n   * @param {string} f - Form ID\r\n   * @param {string} url - Form action\r\n   * @param {string} type - Export type\r\n   * @param {boolean} custom - Using Custom Template\r\n   * @param {boolean} sel - Selected records only\r\n   * @param {Object} fobj - email form object\r\n   * @returns false\r\n   */\r\n\r\n  function _export(f, url, type, custom, sel, fobj) {\r\n    if (!f) return false;\r\n    var $f = $__default['default'](f),\r\n        target = $f.attr(\"target\"),\r\n        action = $f.attr(\"action\"),\r\n        cb = sel && $f.find(\"input[type=checkbox][name='key_m[]']\")[0];\r\n\r\n    if (cb && !keySelected(f)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    if (custom) {\r\n      // Use Custom Template\r\n      $__default['default'](\"iframe.ew-export\").remove();\r\n      if (type == \"email\") url += (\"&\" + $__default['default'](fobj).serialize()).replace(/&export=email/i, \"\"); // Remove duplicate export=email\r\n\r\n      if (cb) {\r\n        $__default['default'](\"<iframe>\").attr(\"name\", \"ew-export-frame\").addClass(\"ew-export d-none\").appendTo($body);\r\n\r\n        try {\r\n          $f.append($__default['default'](\"<input type='hidden'>\").attr({\r\n            name: \"custom\",\r\n            value: \"1\"\r\n          })).attr({\r\n            \"action\": url,\r\n            \"target\": \"ew-export-frame\"\r\n          }).find(\"input[name=exporttype]\").val(type).end().trigger(\"submit\");\r\n        } finally {\r\n          // Reset\r\n          $f.attr({\r\n            \"target\": target || \"\",\r\n            \"action\": action\r\n          }).find(\"input[name=custom]\").remove();\r\n        }\r\n      } else {\r\n        $__default['default'](\"<iframe>\").attr({\r\n          name: \"ew-export-frame\",\r\n          src: url\r\n        }).addClass(\"ew-export d-none\").appendTo($body);\r\n      }\r\n    } else {\r\n      // No Custom Template\r\n      $f.find(\"input[name=exporttype]\").val(type);\r\n      if ([\"xml\", \"print\"].includes(type)) $f.trigger(\"submit\"); // Submit the form directly\r\n      else fileDownload(action, $f.serialize());\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Remove spaces\r\n   * @param {string} value\r\n   * @returns {string}\r\n   */\r\n\r\n  function removeSpaces(value) {\r\n    return /^(<(p|br)\\/?>(&nbsp;)?(<\\/p>)?)?$/i.test(value.replace(/\\s/g, \"\")) ? \"\" : value;\r\n  }\r\n  /**\r\n   * Check if hidden text area (HTML editor)\r\n   * @param {HTMLElement|jQuery} el HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isHiddenTextArea(el) {\r\n    var $el = $__default['default'](el);\r\n    return $el.is(\":hidden\") && $el.data(\"editor\");\r\n  }\r\n  /**\r\n   * Check if modal lookup\r\n   * @param {HTMLElement|jQuery} el HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isModalLookup(el) {\r\n    var $el = $__default['default'](el);\r\n    return $el.is(\":hidden\") && $el.data(\"lookup\");\r\n  }\r\n  /**\r\n   * Check if hidden textbox (Auto-Suggest)\r\n   * @param {HTMLElement|jQuery} el HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isAutoSuggest(el) {\r\n    var $el = $__default['default'](el);\r\n    return $el.is(\":hidden\") && $el.data(\"autosuggest\");\r\n  }\r\n  /**\r\n   * Alert\r\n   *\r\n   * @param {string} msg - Message\r\n   * @param {callback} cb - Callback function\r\n   * @param {string} type - CSS class (see https://getbootstrap.com/docs/4.5/utilities/colors/#color)\r\n   */\r\n\r\n  function _alert(msg, cb, type) {\r\n    return Swal.fire(_objectSpread(_objectSpread({}, ew.sweetAlertSettings), {}, {\r\n      html: '<p class=\"text-' + (type || 'danger') + '\">' + msg + '</p>',\r\n      confirmButtonText: ew.language.phrase(\"OKBtn\")\r\n    })).then(function (result) {\r\n      if (isFunction(cb)) cb(result.value);\r\n    });\r\n  }\r\n  /**\r\n   * Clear error message\r\n   * @param {HTMLElement|HTMLElement[]|jQuery} el HTML element(s) or jQuery\r\n   */\r\n\r\n  function clearError(el) {\r\n    if (el.jquery) {\r\n      // el is jQuery object\r\n      var typ = el.attr(\"type\");\r\n      el = typ == \"checkbox\" || typ == \"radio\" ? el.get() : el[0];\r\n    }\r\n\r\n    $__default['default'](el).closest(\"[id^=el_], .form-group\").find(\".invalid-feedback\").html(\"\");\r\n  }\r\n  /**\r\n   * Show error message\r\n   * @param {Form} frm Form object\r\n   * @param {HTMLElement|HTMLElement[]|jQuery} el HTML element(s) or jQuery\r\n   * @param {string} msg Error message\r\n   * @param {boolean} focus Set focus\r\n   */\r\n\r\n  function onError(frm, el, msg, focus) {\r\n    if (el.jquery) {\r\n      // el is jQuery object\r\n      var typ = el.attr(\"type\");\r\n      el = typ == \"checkbox\" || typ == \"radio\" ? el.get() : el[0];\r\n    } else if (el instanceof Field) {\r\n      // el is Field object\r\n      el = el.element;\r\n    }\r\n\r\n    $__default['default'](el).closest(\"[id^=el_], .form-group\").find(\".invalid-feedback\").append(\"<p>\" + msg + \"</p>\");\r\n    if (focus) setFocus(el);\r\n    frm === null || frm === void 0 ? void 0 : frm.makeVisible(el);\r\n    return false;\r\n  }\r\n  /**\r\n   * Set focus\r\n   * @param {HTMLElement|HTMLElement[]} obj HTML element(s)\r\n   */\r\n\r\n  function setFocus(obj) {\r\n    if (!obj) return;\r\n    var $obj = $__default['default'](obj);\r\n    if (isHidden($obj)) return;\r\n\r\n    if (isHiddenTextArea(obj)) {\r\n      // HTML editor\r\n      return $obj.data(\"editor\").focus();\r\n    } else if (isModalLookup(obj)) {\r\n      // Modal lookup\r\n      return $obj.parent().find(\".ew-lookup-text\").trigger(\"focus\");\r\n    } else if (!obj.options && obj.length) {\r\n      // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    } else if (isAutoSuggest(obj)) {\r\n      // Auto-Suggest\r\n      obj = obj.input;\r\n    }\r\n\r\n    $__default['default'](obj).trigger(\"focus\");\r\n  }\r\n  /**\r\n   * Set invalid\r\n   * @param {HTMLElement|HTMLElement[]} obj HTML element(s)\r\n   */\r\n\r\n  function setInvalid(obj) {\r\n    if (!obj) return;\r\n    var $obj = $__default['default'](obj);\r\n    if (isHidden($obj)) return;\r\n    if (!obj.options && obj.length) // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    var $p = $obj.closest(\".form-group, [id^='el']\");\r\n\r\n    if (isAutoSuggest(obj)) {\r\n      $p.find(\".ew-auto-suggest\").addClass(\"is-invalid\").one(\"click keydown\", function () {\r\n        $p.find(\".is-invalid\").removeClass(\"is-invalid\");\r\n      });\r\n    } else if (isModalLookup(obj)) {\r\n      $p.find(\".input-group\").addClass(\"is-invalid\").one(\"click keydown\", function () {\r\n        $p.find(\".is-invalid\").removeClass(\"is-invalid\");\r\n      });\r\n    } else {\r\n      if (obj.type == \"checkbox\" || obj.type == \"radio\") {\r\n        $obj.addClass(\"is-invalid\").one(\"click keydown\", function () {\r\n          $p.find(\".is-invalid\").removeClass(\"is-invalid\");\r\n        });\r\n      } else {\r\n        $obj.addClass(\"is-invalid\").parent().one(\"click keydown\", function () {\r\n          $p.find(\".is-invalid\").removeClass(\"is-invalid\");\r\n        });\r\n        $obj.closest(\".input-group\").addClass(\"is-invalid\");\r\n      }\r\n    }\r\n  } // Check if object has value\r\n\r\n  function hasValue(obj) {\r\n    return getOptionValues(obj).join(\"\") != \"\";\r\n  } // Check if object value is a masked password\r\n\r\n  function isMaskedPassword(obj) {\r\n    var val = $__default['default'](obj).val();\r\n    return val && val.match(/^\\*+$/);\r\n  } // Get Ctrl key for multiple column sort\r\n\r\n  function sort(e, url, type) {\r\n    if (e.shiftKey && !e.ctrlKey) url = url.split(\"?\")[0] + \"?cmd=resetsort\";else if (type == 2 && e.ctrlKey) url += \"&ctrl=1\";\r\n    window.location = sanitizeUrl(url);\r\n    return true;\r\n  } // Confirm Delete Message\r\n\r\n  function confirmDelete(el) {\r\n    clickDelete(el);\r\n\r\n    _prompt(ew.language.phrase(\"DeleteConfirmMsg\"), function (result) {\r\n      result && el.href ? window.location = sanitizeUrl(el.href) : clearDelete(el);\r\n    });\r\n\r\n    return false;\r\n  } // Check if any key selected // PHP\r\n\r\n  function keySelected(f) {\r\n    return $__default['default'](f).find(\"input[type=checkbox][name='key_m[]']:checked\", f).length > 0;\r\n  } // Select all key\r\n\r\n  function selectAllKey(cb) {\r\n    selectAll(cb);\r\n    var tbl = $__default['default'](cb).closest(\".ew-table\")[0];\r\n    if (!tbl) return;\r\n    $__default['default'](tbl.tBodies).each(function () {\r\n      $__default['default'](this.rows).each(function (i, r) {\r\n        var $r = $__default['default'](r);\r\n\r\n        if ($r.is(\":not(.ew-template):not(.ew-table-preview-row)\")) {\r\n          $r.data({\r\n            selected: cb.checked,\r\n            checked: cb.checked\r\n          });\r\n          setColor(i, r);\r\n        }\r\n      });\r\n    });\r\n  } // Select all related checkboxes\r\n\r\n  function selectAll(cb) {\r\n    if (!cb || !cb.form) return;\r\n    $__default['default'](cb.form.elements).filter(\"input[type=checkbox][name^=\" + cb.name + \"_], [type=checkbox][name=\" + cb.name + \"]\").not(cb).not(\":disabled\").prop(\"checked\", cb.checked);\r\n  } // Update selected checkbox\r\n\r\n  function updateSelected(f) {\r\n    return $__default['default'](f).find(\"input[type=checkbox][name^=u_]:checked,input:hidden[name^=u_][value=1]\").length > 0;\r\n  } // Set row color\r\n\r\n  function setColor(index, row) {\r\n    var $row = $__default['default'](row),\r\n        $tbl = $row.closest(\".ew-table\");\r\n    if (!$tbl[0]) return;\r\n\r\n    if ($row.data(\"selected\")) {\r\n      $row.removeClass($tbl.data(\"rowhighlightclass\") || \"ew-table-highlight-row\").removeClass($tbl.data(\"roweditclass\") || \"ew-table-edit-row\").addClass($tbl.data(\"rowselectclass\") || \"ew-table-select-row\");\r\n    } else if ([ew.ROWTYPE_ADD, ew.ROWTYPE_EDIT].includes($row.data(\"rowtype\"))) {\r\n      $row.removeClass($tbl.data(\"rowselectclass\") || \"ew-table-select-row\").removeClass($tbl.data(\"rowhighlightclass\") || \"ew-table-highlight-row\").addClass($tbl.data(\"roweditclass\") || \"ew-table-edit-row\");\r\n    } else {\r\n      $row.removeClass($tbl.data(\"rowselectclass\") || \"ew-table-select-row\").removeClass($tbl.data(\"roweditclass\") || \"ew-table-edit-row\").removeClass($tbl.data(\"rowhighlightclass\") || \"ew-table-highlight-row\");\r\n    }\r\n  } // Clear selected rows color\r\n\r\n  function clearSelected(tbl) {\r\n    $__default['default'](tbl.rows).each(function (i, r) {\r\n      var $r = $__default['default'](r);\r\n\r\n      if (!$r.data(\"checked\") && $r.data(\"selected\")) {\r\n        $r.data(\"selected\", false);\r\n        setColor(i, r);\r\n      }\r\n    });\r\n  } // Clear all row delete status\r\n\r\n  function clearDelete(el) {\r\n    var $el = $__default['default'](el),\r\n        tbl = $el.closest(\".ew-table\")[0];\r\n    if (!tbl) return;\r\n    var $tr = $el.closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().each(function (i, r) {\r\n      var $r = $__default['default'](r);\r\n      $r.data(\"selected\", $r.data(\"checked\"));\r\n    });\r\n  } // Click single delete link\r\n\r\n  function clickDelete(el) {\r\n    var $el = $__default['default'](el),\r\n        tbl = $el.closest(\".ew-table\")[0];\r\n    if (!tbl) return;\r\n    clearSelected(tbl);\r\n    var $tr = $el.closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().each(function (i, r) {\r\n      $__default['default'](r).data(\"selected\", true);\r\n      setColor(i, r);\r\n    });\r\n  } // Click multiple checkbox\r\n\r\n  function clickMultiCheckbox(e) {\r\n    var cb = e.target || e.srcElement,\r\n        $cb = $__default['default'](cb),\r\n        tbl = $cb.closest(\".ew-table\")[0];\r\n    if (!tbl) return;\r\n    clearSelected(tbl);\r\n    var $tr = $cb.closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().each(function (i, r) {\r\n      $__default['default'](r).data(\"checked\", cb.checked).data(\"selected\", cb.checked).find(\"input[type=checkbox][name='key_m[]']\").each(function () {\r\n        if (this != cb) this.checked = cb.checked;\r\n      });\r\n      setColor(i, r);\r\n    });\r\n    e.stopPropagation();\r\n  } // Setup table\r\n\r\n  function setupTable(index, tbl, force) {\r\n    var $tbl = $__default['default'](tbl),\r\n        $rows = $__default['default'](tbl.rows);\r\n    if (!tbl || !tbl.rows || !force && $tbl.data(\"isset\") || tbl.tBodies.length == 0) return; // Set mouse over color\r\n\r\n    var mouseOver = function mouseOver(e) {\r\n      var $this = $__default['default'](this);\r\n\r\n      if (!$this.data(\"selected\") && ![ew.ROWTYPE_ADD, ew.ROWTYPE_EDIT].includes($this.data(\"rowtype\"))) {\r\n        var $tbl = $this.closest(\".ew-table\");\r\n        if (!$tbl[0]) return;\r\n        $this.siblings(\"[data-rowindex='\" + $this.data(\"rowindex\") + \"']\").addBack().each(function (i, r) {\r\n          $__default['default'](r).addClass($tbl.data(\"rowhighlightclass\") || \"ew-table-highlight-row\");\r\n        });\r\n      }\r\n    }; // Set mouse out color\r\n\r\n    var mouseOut = function mouseOut(e) {\r\n      var $this = $__default['default'](this);\r\n      if (!$this.data(\"selected\") && ![ew.ROWTYPE_ADD, ew.ROWTYPE_EDIT].includes($this.data(\"rowtype\"))) $this.siblings(\"[data-rowindex='\" + $this.data(\"rowindex\") + \"']\").addBack().each(setColor);\r\n    }; // Set selected row color\r\n\r\n    var click = function click(e) {\r\n      var $this = $__default['default'](this),\r\n          tbl = $this.closest(\".ew-table\")[0],\r\n          $target = $__default['default'](e.target);\r\n      if (!tbl || $target.hasClass(\"btn\") || $target.hasClass(\"ew-preview-row-btn\") || $target.is(\":input\")) return;\r\n\r\n      if (!$this.data(\"checked\")) {\r\n        var selected = $this.data(\"selected\");\r\n        clearSelected(tbl); // Clear all other selected rows\r\n\r\n        $this.siblings(\"[data-rowindex='\" + $this.data(\"rowindex\") + \"']\").addBack().each(function (i, r) {\r\n          $__default['default'](r).data(\"selected\", !selected); // Toggle\r\n\r\n          setColor(i, r);\r\n        });\r\n      }\r\n    };\r\n\r\n    var n = $rows.filter(\"[data-rowindex=1]\").length || $rows.filter(\"[data-rowindex=0]\").length || 1; // Alternate color every n rows\r\n\r\n    var rows = $rows.filter(\":not(.ew-template)\").each(function () {\r\n      $__default['default'](this.cells).removeClass(\"ew-table-last-row\").last().addClass(\"ew-table-last-col\"); // Cell of last column\r\n    }).get();\r\n    var div = $tbl.parentsUntil(\".ew-grid\", \".\" + ew.RESPONSIVE_TABLE_CLASS)[0];\r\n\r\n    if (rows.length) {\r\n      for (var i = 1; i <= n; i++) {\r\n        var r = rows[rows.length - i]; // Last rows\r\n\r\n        $__default['default'](r.cells).each(function () {\r\n          if (this.rowSpan == i) // Cell of last row\r\n            $__default['default'](this).addClass(\"ew-table-last-row\").toggleClass(\"ew-table-border-bottom\", !!div && div.clientHeight > tbl.offsetHeight);\r\n        });\r\n      }\r\n    }\r\n\r\n    var form = $tbl.closest(\"form\")[0];\r\n    var attach = form && $__default['default'](form.elements).filter(\"input#action:not([value^=grid])\").length > 0;\r\n    $__default['default'](tbl.tBodies[tbl.tBodies.length - 1].rows) // Use last TBODY (avoid Opera bug)\r\n    .filter(\":not(.ew-template):not(.ew-table-preview-row)\").each(function (i) {\r\n      var $r = $__default['default'](this);\r\n\r\n      if (attach && !$r.data(\"isset\")) {\r\n        if ([ew.ROWTYPE_ADD, ew.ROWTYPE_EDIT].includes($r.data(\"rowtype\"))) // Add/Edit row\r\n          $r.on(\"mouseover\", function () {\r\n            this.edit = true;\r\n          }).addClass(\"ew-table-edit-row\");\r\n        $r.on(\"mouseover\", mouseOver).on(\"mouseout\", mouseOut).on(\"click\", click);\r\n        $r.data(\"isset\", true);\r\n      }\r\n\r\n      var sw = i % (2 * n) < n;\r\n      $r.toggleClass(\"ew-table-row\", sw).toggleClass(\"ew-table-alt-row\", !sw);\r\n    });\r\n    setupGrid(index, $tbl.closest(\".ew-grid\")[0], force);\r\n    $tbl.data(\"isset\", true);\r\n  } // Setup grid\r\n\r\n  function setupGrid(index, grid, force) {\r\n    var $grid = $__default['default'](grid);\r\n    if (!grid || !force && $grid.data(\"isset\")) return;\r\n    var multi = $grid.find(\"table.ew-multi-column-table\").length,\r\n        rowcnt;\r\n\r\n    if (multi) {\r\n      rowcnt = $grid.find(\"td[data-rowindex]\").length;\r\n    } else {\r\n      rowcnt = $grid.find(\"table.ew-table > tbody\").first().children(\"tr:not(.ew-table-preview-row, .ew-template)\").length;\r\n    }\r\n\r\n    if (rowcnt == 0 && !$grid.find(\".ew-grid-upper-panel, .ew-grid-lower-panel\")[0]) $grid.hide(); // if (!$grid.find(\".ew-grid-upper-panel:visible\")[0])\r\n    // \t$grid.css({\"border-top-left-radius\": 0, \"border-top-right-radius\": 0});\r\n    // if (!$grid.find(\".ew-grid-lower-panel:visible\")[0])\r\n    // \t$grid.css({\"border-bottom-left-radius\": 0, \"border-bottom-right-radius\": 0});\r\n\r\n    if ($grid.find(\".ew-grid-middle-panel:visible\").hasClass(ew.RESPONSIVE_TABLE_CLASS) && $grid.width() > $__default['default'](\".content\").width()) {\r\n      $grid.addClass(\"d-flex\");\r\n      $grid.closest(\".ew-detail-pages\").addClass(\"d-block\");\r\n      $grid.closest(\".ew-form\").addClass(\"w-100\");\r\n      if (ew.USE_OVERLAY_SCROLLBARS) $grid.find(\".ew-grid-middle-panel:not(.ew-preview-middle-panel)\").overlayScrollbars(ew.overlayScrollbarsOptions);\r\n    }\r\n\r\n    $grid.data(\"isset\", true);\r\n  } // Add a row to grid\r\n\r\n  function addGridRow(el) {\r\n    var $grid = $__default['default'](el).closest(\".ew-grid\"),\r\n        $tbl = $grid.find(\"table.ew-table\").last(),\r\n        $p = $tbl.parent(\"div\"),\r\n        $tpl = $tbl.find(\"tr.ew-template\");\r\n    if (!el || !$grid[0] || !$tbl[0] || !$tpl[0]) return false;\r\n    var $lastrow = $__default['default']($tbl[0].rows).last();\r\n    $tbl.find(\"td.ew-table-last-row\").removeClass(\"ew-table-last-row\");\r\n    var $row = $tpl.clone(true, true).removeClass(\"ew-template\");\r\n    var $form = $grid.find(\"div.ew-form[id^=f][id$=grid]\");\r\n    if (!$form[0]) $form = $grid.find(\"form.ew-form[id^=f][id$=list]\");\r\n    var suffix = $form.is(\"div\") ? \"_\" + $form.attr(\"id\") : \"\";\r\n    var $elkeycnt = $form.find(\"#key_count\" + suffix);\r\n    var keycnt = parseInt($elkeycnt.val(), 10) + 1;\r\n    $row.attr({\r\n      \"id\": \"r\" + keycnt + $row.attr(\"id\").substring(2),\r\n      \"data-rowindex\": keycnt\r\n    });\r\n    var $els = $tpl.find(\"script:contains('$rowindex$')\"); // Get scripts with rowindex\r\n\r\n    $row.children(\"td\").each(function () {\r\n      $__default['default'](this).find(\"*\").each(function () {\r\n        $__default['default'].each(this.attributes, function (i, attr) {\r\n          attr.value = attr.value.replace(/\\$rowindex\\$/g, keycnt); // Replace row index\r\n        });\r\n      });\r\n    });\r\n    $row.find(\".ew-icon\").closest(\"a, button\").removeData(\"bs.tooltip\").tooltip({\r\n      container: \"body\",\r\n      placement: \"bottom\",\r\n      trigger: \"hover\",\r\n      sanitizeFn: ew.sanitizeFn\r\n    });\r\n    $elkeycnt.val(keycnt).after($__default['default'](\"<input>\").attr({\r\n      type: \"hidden\",\r\n      id: \"k\" + keycnt + \"_action\" + suffix,\r\n      name: \"k\" + keycnt + \"_action\" + suffix,\r\n      value: \"insert\"\r\n    }));\r\n    $lastrow.after($row);\r\n    $els.each(function () {\r\n      addScript(this.text.replace(/\\$rowindex\\$/g, keycnt));\r\n    });\r\n    var frm = $form.data(\"form\");\r\n\r\n    if (frm) {\r\n      frm.initEditors();\r\n      frm.initUpload();\r\n    }\r\n\r\n    setupTable(-1, $tbl[0], true);\r\n    $p.scrollTop($p[0].scrollHeight);\r\n    return false;\r\n  } // Delete a row from grid\r\n\r\n  function deleteGridRow(el, infix) {\r\n    var $el = $__default['default'](el).tooltip(\"hide\").removeData(\"bs.tooltip\"),\r\n        $grid = $el.closest(\".ew-grid, .ew-multi-column-grid\"),\r\n        $row = $el.closest(\"tr, div[data-rowindex]\"),\r\n        $tbl = $row.closest(\".ew-table\");\r\n    if (!el || !$grid[0] || !$row[0]) return false;\r\n    var rowidx = parseInt($row.data(\"rowindex\"), 10);\r\n    var $form = $grid.find(\"div.ew-form[id^=f][id$=grid]\");\r\n    if (!$form[0]) $form = $grid.find(\"form.ew-form[id^=f][id$=list]\");\r\n    var frm = $form.data(\"form\");\r\n    if (!$form[0] || !frm) return false;\r\n    var suffix = $form.is(\"div\") ? \"_\" + $form.attr(\"id\") : \"\";\r\n    var keycntname = \"#key_count\" + suffix;\r\n\r\n    var _delete = function _delete() {\r\n      $row.remove();\r\n      if ($grid.is(\".ew-grid\")) setupTable(-1, $tbl[0], true);\r\n\r\n      if (rowidx > 0) {\r\n        var $keyact = $form.find(\"#k\" + rowidx + \"_action\" + suffix);\r\n\r\n        if ($keyact[0]) {\r\n          $keyact.val($keyact.val() == \"insert\" ? \"insertdelete\" : \"delete\");\r\n        } else {\r\n          $form.find(keycntname).after($__default['default'](\"<input>\").attr({\r\n            type: \"hidden\",\r\n            id: \"k\" + rowidx + \"_action\" + suffix,\r\n            name: \"k\" + rowidx + \"_action\" + suffix,\r\n            value: \"delete\"\r\n          }));\r\n        }\r\n      }\r\n    };\r\n\r\n    if (isFunction(frm.emptyRow) && frm.emptyRow(infix)) {\r\n      // Empty row\r\n      _delete();\r\n    } else {\r\n      // Confirm\r\n      _prompt(ew.language.phrase(\"DeleteConfirmMsg\"), function (result) {\r\n        if (result) _delete();\r\n      });\r\n    }\r\n\r\n    return false;\r\n  } // HTML encode text\r\n\r\n  function htmlEncode(text) {\r\n    var str = String(text);\r\n    return str.replace(/&/g, '&amp;').replace(/\\\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n  } // Get form element(s) as single element or array of radio/checkbox\r\n\r\n  function getElements(el, root) {\r\n    var selector;\r\n\r\n    if ($__default['default'].isObject(el) && el.dataset) {\r\n      // HTML element (e.g. radio/checkbox)\r\n      selector = \"[data-table='\" + el.dataset.table + \"'][data-field='\" + el.dataset.field + \"']:not([name^=o]):not([name^='x$'])\";\r\n    } else if ($__default['default'].isString(el)) {\r\n      selector = \"[name='\" + el + \"']\";\r\n      var ar = el.split(\" \"); // Check if \"#id name\"\r\n\r\n      if (ar.length == 2) selector = \"[data-table='\" + ar[0] + \"'][data-field='\" + getId(ar[1]) + \"']:not([name^=o]):not([name^='x$'])\"; // Remove []\r\n    }\r\n\r\n    var root = !$__default['default'].isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    selector = \"input\" + selector + \",select\" + selector + \",textarea\" + selector + \",button\" + selector;\r\n    var $els = root ? $__default['default'](root).find(selector) : $__default['default'](selector);\r\n    if ($els.length == 1 && $els.is(\":not([type=checkbox]):not([type=radio])\")) return $els[0];\r\n    return $els.get();\r\n  } // Get first element (not necessarily form element)\r\n\r\n  function getElement(name, root) {\r\n    var root = $__default['default'].isString(root) ? \"#\" + root : root,\r\n        selector = \"#\" + name.replace(/([\\$\\[\\]])/g, \"\\\\$1\") + \",[name='\" + name + \"']\";\r\n    return root ? $__default['default'](root).find(selector)[0] : $__default['default'](selector).first()[0];\r\n  } // Get ancestor by function\r\n\r\n  function getAncestorBy(node, fn) {\r\n    while (node = node.parentNode) {\r\n      if (node && node.nodeType == 1 && (!fn || fn(node))) return node;\r\n    }\r\n\r\n    return null;\r\n  } // Check if an element is hidden\r\n\r\n  function isHidden(el) {\r\n    var $el = $__default['default'](el);\r\n    return $el.css(\"display\") == \"none\" && !$el.closest(\".dropdown-menu\")[0] && !isModalLookup(el) && !isAutoSuggest(el) && !isHiddenTextArea(el) || getAncestorBy(el, function (node) {\r\n      return node.style.display == \"none\" && !node.classList.contains(\"tab-pane\") && !node.classList.contains(\"collapse\");\r\n    }) != null;\r\n  } // Check if same text\r\n\r\n  function sameText(o1, o2) {\r\n    return String(o1).toLowerCase() == String(o2).toLowerCase();\r\n  } // Check if same string\r\n\r\n  function sameString(o1, o2) {\r\n    return String(o1) == String(o2);\r\n  } // Get element value\r\n\r\n  function getValue(el, form) {\r\n    if (!el) return \"\";\r\n    var obj;\r\n\r\n    if ($__default['default'].isString(el)) {\r\n      var _ar = el.split(\" \");\r\n\r\n      if (_ar.length == 2) {\r\n        // Parent field in master table\r\n        obj = getElements(el);\r\n      } else {\r\n        obj = getElements(el, form);\r\n      }\r\n    } else if (el.type == \"radio\" || el.type == \"checkbox\") {\r\n      // Single radio/checkbox\r\n      obj = getElements(el);\r\n    } else {\r\n      obj = el;\r\n    }\r\n\r\n    if (obj.options) {\r\n      // Selection list\r\n      if (obj.list) {\r\n        var val = obj.values;\r\n        return obj.multiple ? val : val[0] || \"\";\r\n      } else {\r\n        var _val = Array.prototype.filter.call(obj.options, function (option) {\r\n          return option.selected && option.value !== \"\";\r\n        }).map(function (option) {\r\n          return option.value;\r\n        });\r\n\r\n        return obj.type == \"select-multiple\" ? _val : _val[0] || \"\";\r\n      }\r\n    } else if ($__default['default'].isNumber(obj.length)) {\r\n      // Radio/Checkbox list, or element not found\r\n      var _val2 = $__default['default'](obj).filter(\":checked\").map(function () {\r\n        return this.value;\r\n      }).get();\r\n\r\n      return obj.length == 1 ? _val2[0] : _val2;\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $__default['default'](obj).data(\"editor\").save();\r\n      return obj.value;\r\n    } else {\r\n      // text/hidden\r\n      var data = $__default['default'](obj).data();\r\n      if (data.lookup && data.multiple) // Modal-Lookup\r\n        return obj.value.split(ew.MULTIPLE_OPTION_SEPARATOR);else return obj.value;\r\n    }\r\n  } // Get existing selected values as an array\r\n\r\n  function getOptionValues(el, form) {\r\n    var obj;\r\n\r\n    if ($__default['default'].isString(el)) {\r\n      var ar = el.split(\" \");\r\n\r\n      if (ar.length == 2) {\r\n        // Parent field in master table\r\n        obj = getElements(el);\r\n      } else {\r\n        obj = getElements(el, form);\r\n      }\r\n    } else if (el.type == \"radio\" || el.type == \"checkbox\") {\r\n      // Single radio/checkbox\r\n      obj = getElements(el);\r\n    } else {\r\n      obj = el;\r\n    }\r\n\r\n    if (obj.options) {\r\n      // Selection list\r\n      if (obj.list) return obj.values;else return Array.prototype.filter.call(obj.options, function (option) {\r\n        return option.selected && option.value !== \"\";\r\n      }).map(function (option) {\r\n        return option.value;\r\n      });\r\n    } else if ($__default['default'].isNumber(obj.length)) {\r\n      // Radio/Checkbox list, or element not found\r\n      return $__default['default'](obj).filter(\":checked\").map(function () {\r\n        return this.value;\r\n      }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $__default['default'](obj).data(\"editor\").save();\r\n      return [obj.value];\r\n    } else {\r\n      // text/hidden\r\n      var data = $__default['default'](obj).data();\r\n      if (data.lookup && data.multiple) // Modal-Lookup\r\n        return obj.value.split(ew.MULTIPLE_OPTION_SEPARATOR);else return [obj.value];\r\n    }\r\n  } // Get existing text of selected values as an array\r\n\r\n  function getOptionTexts(el, form) {\r\n    var obj;\r\n\r\n    if ($__default['default'].isString(el)) {\r\n      var ar = el.split(\" \");\r\n\r\n      if (ar.length == 2) {\r\n        // Parent field in master table\r\n        obj = getElements(el);\r\n      } else {\r\n        obj = getElements(el, form);\r\n      }\r\n    } else {\r\n      obj = el;\r\n    }\r\n\r\n    if (isAutoSuggest(obj)) {\r\n      // AutoSuggest (before obj.options)\r\n      return [obj.input.value];\r\n    } else if (isModalLookup(obj)) {\r\n      // Modal-Lookup (before obj.options)\r\n      var $obj = $__default['default'](obj);\r\n      return $obj.parent().find(\".ew-lookup-text .ew-option\").map(function () {\r\n        return $__default['default'](this).text().trim();\r\n      }).get();\r\n    } else if (obj.options) {\r\n      // Selection list\r\n      return Array.prototype.filter.call(obj.options, function (option) {\r\n        return option.selected && option.value !== \"\";\r\n      }).map(function (option) {\r\n        return option.text;\r\n      });\r\n    } else if ($__default['default'].isNumber(obj.length)) {\r\n      // Radio/Checkbox list, or element not found\r\n      return $__default['default'](obj).filter(\":checked\").map(function () {\r\n        return $__default['default'](this).parent().text();\r\n      }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $__default['default'](obj).data(\"editor\").save();\r\n      return [obj.value];\r\n    } else {\r\n      return [obj.value];\r\n    }\r\n  } // Clear existing options\r\n\r\n  function clearOptions(obj) {\r\n    if (obj.options) {\r\n      // Selection list\r\n      var lo = obj.type == \"select-multiple\" || // multiple\r\n      obj.hasAttribute(\"data-dropdown\") || // dropdown\r\n      convertToBool(obj.getAttribute(\"data-pleaseselect\")) === false || // data-pleaseselect=\"false\"\r\n      obj.length > 0 && obj.options[0].value != \"\" ? // non-empty first element\r\n      0 : 1;\r\n\r\n      if (obj.list) {\r\n        obj.removeAll();\r\n      } else {\r\n        for (var i = obj.length - 1; i >= lo; i--) {\r\n          obj.remove(i);\r\n        }\r\n      }\r\n\r\n      if (isAutoSuggest(obj)) {\r\n        obj.input.value = \"\";\r\n        obj.value = \"\";\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Get the name or id of an element\r\n   *\r\n   * @param {*} el - Element\r\n   * @param {boolean} [remove=true] - Remove square brackets\r\n   * @returns\r\n   */\r\n\r\n  function getId(el, remove) {\r\n    var id = $__default['default'].isString(el) ? el : $__default['default'](el).attr(\"name\") || $__default['default'](el).attr(\"id\"); // Use name first (id may have suffix)\r\n\r\n    return remove !== false ? id.replace(/\\[\\]$/, \"\") : id;\r\n  } // Get display value separator\r\n\r\n  function valueSeparator(index, obj) {\r\n    var sep = $__default['default'](obj).data(\"value-separator\");\r\n    return Array.isArray(sep) ? sep[index - 1] : sep || \", \";\r\n  }\r\n  /**\r\n   * Get display value\r\n   *\r\n   * @param {Object} opt - Option being displayed\r\n   * @param {HTMLElment} obj - HTML element\r\n   * @returns {string} Display value\r\n   */\r\n\r\n  function displayValue(opt, obj) {\r\n    var text = opt.df;\r\n\r\n    for (var i = 2; i <= 4; i++) {\r\n      if (opt[\"df\" + i] && opt[\"df\" + i] != \"\") {\r\n        var sep = valueSeparator(i - 1, obj);\r\n        if ($__default['default'].isUndefined(sep)) break;\r\n        if ($__default['default'].isValue(text)) text += sep;\r\n        text += opt[\"df\" + i];\r\n      }\r\n    }\r\n\r\n    return text;\r\n  }\r\n  /**\r\n   * Get HTML for a single option\r\n   *\r\n   * @param {*} val - Value of the option\r\n   * @returns {string} HTML\r\n   */\r\n\r\n  function optionHtml(val) {\r\n    return ew.OPTION_HTML_TEMPLATE.replace(/\\{value\\}/g, val);\r\n  }\r\n  /**\r\n   * Get HTML for diplaying all options\r\n   *\r\n   * @param {string[]} options - Array of all options (HTML)\r\n   * @param {number} max - Maximum number of options to show\r\n   * @returns {string} HTML\r\n   */\r\n\r\n  function optionsHtml(options, max) {\r\n    if (options.length > (max || ew.MAX_OPTION_COUNT)) {\r\n      // More than max option count\r\n      return ew.language.phrase(\"CountSelected\").replace(\"%s\", options.length);\r\n    } else if (options.length) {\r\n      // Some options\r\n      var html = \"\";\r\n\r\n      for (var i = 0; i < options.length; i++) {\r\n        html += optionHtml(options[i]);\r\n      }\r\n\r\n      return html;\r\n    } else {\r\n      // No options\r\n      return ew.language.phrase(\"PleaseSelect\");\r\n    }\r\n  }\r\n  /**\r\n   * Create new option\r\n   *\r\n   * @param {(HTMLElement|array)} obj - Selection list\r\n   * @param {Object} opt - Object for the new option\r\n   * @param {form} f - form object of obj\r\n   * @returns\r\n   */\r\n\r\n  function newOption(obj, opt, f) {\r\n    var frm = forms.get(f.id),\r\n        id = getId(obj),\r\n        list = frm.getList(id),\r\n        value = opt.lf,\r\n        item = {\r\n      lf: opt.lf,\r\n      df1: opt.df,\r\n      df2: opt.df2,\r\n      df3: opt.df3,\r\n      df4: opt.df4\r\n    },\r\n        text;\r\n\r\n    if (list.template && !isAutoSuggest(obj)) {\r\n      text = list.template.render(item, ew.jsRenderHelpers);\r\n    } else {\r\n      text = displayValue(opt, obj) || value;\r\n    }\r\n\r\n    var args = {\r\n      \"data\": item,\r\n      \"name\": id,\r\n      \"form\": f.$element,\r\n      \"value\": value,\r\n      \"text\": text\r\n    };\r\n\r\n    if (obj.options) {\r\n      // Selection list\r\n      var option;\r\n\r\n      if (obj.list) {\r\n        option = new SelectionListOption(args.value, args.text);\r\n      } else {\r\n        option = document.createElement(\"option\");\r\n        option.value = args.value;\r\n        option.innerHTML = args.text;\r\n      }\r\n\r\n      args = _objectSpread(_objectSpread({}, args), {}, {\r\n        option: option\r\n      });\r\n      $document$1.trigger(\"newoption\", [args]); // Fire \"newoption\" event for selection list\r\n\r\n      if (obj.list) {\r\n        obj.add(args.option.value, args.option.text);\r\n      } else {\r\n        obj.add(args.option);\r\n      }\r\n    }\r\n\r\n    return args.text;\r\n  } // Select combobox option\r\n\r\n  function selectOption(obj, values) {\r\n    if (!obj || !values) return;\r\n    var $obj = $__default['default'](obj);\r\n\r\n    if (Array.isArray(values)) {\r\n      if (obj.options) {\r\n        // Selection list\r\n        if (obj.list) {\r\n          obj.value = values;\r\n        } else {\r\n          $obj.val(values);\r\n          if (obj.type == \"select-one\" && obj.selectedIndex == -1) obj.selectedIndex = 0; // Make sure an option is selected (IE)\r\n        }\r\n\r\n        if (isAutoSuggest(obj) && values.length == 1) {\r\n          var opts = obj.options || [];\r\n\r\n          for (var _iterator2 = _createForOfIteratorHelperLoose(opts), _step2; !(_step2 = _iterator2()).done;) {\r\n            var opt = _step2.value;\r\n\r\n            if (opt.value == values[0]) {\r\n              obj.value = opt.value;\r\n              obj.input.value = opt.text;\r\n              break;\r\n            }\r\n          }\r\n        } else if (isModalLookup(obj)) {\r\n          var vals = [],\r\n              html = [],\r\n              _opts = obj.options || [];\r\n\r\n          for (var _iterator3 = _createForOfIteratorHelperLoose(values), _step3; !(_step3 = _iterator3()).done;) {\r\n            var value = _step3.value;\r\n\r\n            for (var _iterator4 = _createForOfIteratorHelperLoose(_opts), _step4; !(_step4 = _iterator4()).done;) {\r\n              var _opt = _step4.value;\r\n\r\n              if (value == _opt.value) {\r\n                vals.push(_opt.value);\r\n                html.push(optionHtml(_opt.text));\r\n                break;\r\n              }\r\n            }\r\n          }\r\n\r\n          $obj.val(vals.join(ew.MULTIPLE_OPTION_SEPARATOR));\r\n          $obj.parent().find(\".ew-lookup-text\").html(optionsHtml(html, $obj.data(\"maxcount\")));\r\n        }\r\n      } else if (obj.type) {\r\n        obj.value = values.join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n      }\r\n    } // Auto-select if only one option\r\n\r\n    function isAutoSelect(el) {\r\n      if (!$__default['default'](el).data(\"autoselect\")) // data-autoselect=\"false\"\r\n        return false;\r\n      var form = getForm(el);\r\n\r\n      if (form) {\r\n        if (/s(ea)?rch$/.test(form.id)) // Search forms\r\n          return false;\r\n        var list = forms.get(form.id).getList(el.id);\r\n        if (list && list.parentFields.length == 0) // No parent fields\r\n          return false;\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    }\r\n\r\n    if (!isAutoSelect(obj)) return;\r\n\r\n    if (obj.options) {\r\n      // Selection List\r\n      if (!obj.list && obj.type == \"select-one\" && obj.options.length == 2 && !obj.options[1].selected) {\r\n        obj.options[1].selected = true;\r\n      } else if (obj.options.length == 1 && !obj.options[0].selected) {\r\n        obj.options[0].selected = true;\r\n      }\r\n\r\n      if (obj.list) obj.render();\r\n\r\n      if (isAutoSuggest(obj)) {\r\n        var _opts2 = obj.options || [];\r\n\r\n        if (_opts2.length == 1) {\r\n          obj.value = _opts2[0].value;\r\n          obj.input.value = _opts2[0].text;\r\n        }\r\n      }\r\n    }\r\n  } // Ajax send\r\n\r\n  $document$1.ajaxSend(function (event, jqxhr, settings) {\r\n    var url = settings.url;\r\n    if (url.match(/\\/(\\w+preview|session)\\?/i)) // Preview/Session page\r\n      _removeSpinner(); // Preview has spinner already\r\n\r\n    var apiUrl = getApiUrl(),\r\n        isApi = url.startsWith(apiUrl),\r\n        // Is API request\r\n    allowed = isApi || url.startsWith(currentPage());\r\n\r\n    if (!allowed && url.match(/^http/i)) {\r\n      var objUrl = new URL(url);\r\n      allowed = objUrl.hostname == currentUrl.hostname; // Same host name\r\n    }\r\n\r\n    if (allowed) {\r\n      if (isApi && ew.API_JWT_TOKEN && !ew.IS_WINDOWS_AUTHENTICATION) // Do NOT set JWT authorization header if Windows Authentication\r\n        jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n\r\n      if (settings.type == \"GET\") {\r\n        // GET\r\n        var ar = settings.url.split(\"?\"),\r\n            params = new URLSearchParams(ar[1]);\r\n        params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name // PHP\r\n\r\n        params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token // PHP\r\n\r\n        ar[1] = params.toString();\r\n        settings.url = ar[0] + (ar[1] ? \"?\" + ar[1] : \"\");\r\n      } else {\r\n        // POST\r\n        if (settings.data instanceof FormData) {\r\n          // FormData\r\n          settings.data.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name // PHP\r\n\r\n          settings.data.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token // PHP\r\n        } else {\r\n          var params = new URLSearchParams(settings.data);\r\n          params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name // PHP\r\n\r\n          params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token // PHP\r\n\r\n          settings.data = params.toString();\r\n        }\r\n      }\r\n    }\r\n  }); // Ajax start\r\n\r\n  $document$1.ajaxStart(function () {\r\n    $document$1.data(\"_ajax\", true);\r\n    ew.addSpinner();\r\n    $__default['default'](\"form.ew-form\").addClass(\"ew-wait\").each(function () {\r\n      var frm = forms.get(this.id);\r\n\r\n      if (frm) {\r\n        if (!frm.multiPage || !frm.multiPage.lastPageSubmit) frm.disableForm();\r\n      }\r\n    });\r\n  }); // Ajax stop (internal)\r\n\r\n  function _ajaxStop() {\r\n    $__default['default'](\"form.ew-form.ew-wait\").removeClass(\"ew-wait\").each(function () {\r\n      var frm = forms.get(this.id);\r\n\r\n      if (frm) {\r\n        if (!frm.multiPage || !frm.multiPage.lastPageSubmit) {\r\n          frm.enableForm();\r\n        }\r\n      }\r\n    });\r\n    ew.removeSpinner();\r\n    $document$1.data(\"_ajax\", false);\r\n  } // Ajax stop/error\r\n\r\n  $document$1.ajaxStop(_ajaxStop).ajaxError(_ajaxStop); // Execute JavaScript in HTML loaded by Ajax\r\n\r\n  function executeScript(html, id) {\r\n    var matches = html.replace(/<head>[\\s\\S]*<\\/head>/, \"\").matchAll(/<script([^>]*)>([\\s\\S]*?)<\\/script\\s*>/ig);\r\n    Array.from(matches).filter(function (ar, i) {\r\n      var text = ar[2];\r\n\r\n      if (/(\\s+type\\s*=\\s*['\"]*text\\/javascript['\"]*)|^((?!\\s+type\\s*=).)*$/i.test(ar[1]) && text) {\r\n        if (ar[1].includes('class=\"ew-apply-template\"')) {\r\n          // Apply Custom Template first\r\n          addScript(text, \"scr_\" + id + \"_0\");\r\n          return false;\r\n        }\r\n\r\n        return true;\r\n      }\r\n    }).forEach(function (ar, i) {\r\n      return addScript(ar[2], \"scr_\" + id + \"_\" + (i + 1));\r\n    });\r\n  } // Strip JavaScript in HTML loaded by Ajax\r\n\r\n  function stripScript(html) {\r\n    var matches = html.matchAll(/<script([^>]*)>([\\s\\S]*?)<\\/script\\s*>/ig);\r\n\r\n    for (var _iterator5 = _createForOfIteratorHelperLoose(matches), _step5; !(_step5 = _iterator5()).done;) {\r\n      var _ar2 = _step5.value;\r\n      var text = _ar2[0];\r\n      if (/(\\s+type\\s*=\\s*['\"]*text\\/javascript['\"]*)|^((?!\\s+type\\s*=).)*$/i.test(_ar2[1])) html = html.replace(text, \"\");\r\n    }\r\n\r\n    return html;\r\n  } // Add SCRIPT tag\r\n\r\n  function addScript(text, id) {\r\n    var scr = document.createElement(\"SCRIPT\");\r\n    if (id) scr.id = id;\r\n    scr.text = text;\r\n    return document.body.appendChild(scr); // Do not use jQuery so it can be removed\r\n  } // Remove JavaScript added by Ajax\r\n\r\n  function removeScript(id) {\r\n    if (id) $__default['default'](\"script[id^='scr_\" + id + \"_']\").remove();\r\n  } // Clean HTML loaded by Ajax for modal dialog\r\n\r\n  function getContent(html) {\r\n    var body = stripScript(html).match(/<body[\\s\\S]*>[\\s\\S]*<\\/body>/i);\r\n    return body ? $__default['default'](body[0]).not(\"div[id^=ew].modal, #ew-tooltip, #ew-drilldown-panel, #cookie-consent, #template-upload, #template-download\") : $__default['default']();\r\n  } // Get all options of Selection list or Radio/Checkbox list as array\r\n\r\n  function getOptions(obj) {\r\n    return obj.options ? Array.prototype.map.call(obj.options, function (opt) {\r\n      return [opt.value, opt.text];\r\n    }) : [];\r\n  }\r\n  /**\r\n   * Show Add Option dialog\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {Object} args.frm - form object\r\n   * @param {HTMLElement} args.lnk - Add option anchor element\r\n   * @param {string} args.el - Form element name\r\n   * @param {string} args.url - URL of the Add form\r\n   * @returns\r\n   */\r\n\r\n  function addOptionDialogShow(args) {\r\n    // Hide dialog\r\n    var _hide = function _hide() {\r\n      removeScript($dlg.data(\"args\").el);\r\n      var frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n      if (frm) frm.destroyEditor();\r\n      $dlg.find(\".modal-body\").html(\"\");\r\n      $dlg.find(\".modal-footer .btn-primary\").off();\r\n      $dlg.data(\"showing\", false);\r\n    };\r\n\r\n    var $dlg = ew.addOptionDialog || $__default['default'](\"#ew-add-opt-dialog\").on(\"hidden.bs.modal\", _hide);\r\n\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-add-opt-dialog not found.\");\r\n\r\n      return;\r\n    }\r\n\r\n    if ($dlg.data(\"showing\")) return;\r\n    $dlg.data(\"showing\", true); // Submission success\r\n\r\n    var _submitSuccess = function _submitSuccess(data) {\r\n      var _results;\r\n\r\n      var results = data,\r\n          args = $dlg.data(\"args\"),\r\n          frm = forms.get(args.lnk),\r\n          // form object\r\n      objName = $dlg.find(\".modal-body form input[name='\" + ew.API_OBJECT_NAME + \"']\").val(),\r\n          // Get object name from form\r\n      el = args.el,\r\n          // HTML element name\r\n      re = /^x(\\d+)_/,\r\n          m = el.match(re),\r\n          // Check row index\r\n      prefix = m ? m[0] : \"x_\",\r\n          index = m ? m[1] : -1,\r\n          name = el.replace(re, \"x_\"),\r\n          list = frm.getList(el);\r\n      if ($__default['default'].isString(data)) results = parseJson(data);\r\n\r\n      if ((_results = results) !== null && _results !== void 0 && _results.success && results[objName]) {\r\n        // Success\r\n        $dlg.modal(\"hide\");\r\n        var result = results[objName],\r\n            form = frm.$element[0],\r\n            // HTML form or DIV\r\n        obj = getElements(el, form);\r\n\r\n        if (obj) {\r\n          var lf = list.linkField,\r\n              dfs = list.displayFields.slice(),\r\n              // Clone\r\n          ffs = list.filterFields.slice(),\r\n              // Clone\r\n          pfs = list.parentFields.slice(); // Clone\r\n\r\n          pfs.forEach(function (pf, i) {\r\n            if (pf.split(\" \").length == 1) // Parent field in the same table, add row index\r\n              pfs[i] = pfs[i].replace(/^x_/, prefix);\r\n          });\r\n          var lfv = lf != \"\" ? result[lf] : \"\",\r\n              row = {\r\n            lf: lfv\r\n          };\r\n          dfs.forEach(function (df, i) {\r\n            if (df in result) row[\"df\" + (i || \"\")] = result[df];\r\n          });\r\n          ffs.forEach(function (ff, i) {\r\n            if (ff in result) row[\"ff\" + (i || \"\")] = result[ff];\r\n          });\r\n\r\n          if (lfv && dfs.length > 0 && row[\"df\"]) {\r\n            if (list.ajax === null) // Non-Ajax\r\n              list.lookupOptions.push(row);\r\n            var arp = pfs.map(function (pf) {\r\n              return getOptionValues(pf, form);\r\n            }),\r\n                // Get the parent field values\r\n            args = {\r\n              \"data\": row,\r\n              \"parents\": arp,\r\n              \"valid\": true,\r\n              \"name\": getId(obj),\r\n              \"form\": form\r\n            };\r\n            $document$1.trigger(\"addoption\", [args]);\r\n\r\n            if (args.valid) {\r\n              // Add the new option\r\n              var ar = getOptions(obj),\r\n                  vals = [];\r\n              var txt = newOption(obj, row, form);\r\n\r\n              if (obj.options) {\r\n                obj.options[obj.options.length - 1].selected = true;\r\n\r\n                if (obj.list) {\r\n                  // Radio/Checkbox list\r\n                  obj.render();\r\n                  $__default['default'](obj.target).find(\"input\").last().trigger(\"focus\");\r\n                }\r\n\r\n                if (isAutoSuggest(obj)) {\r\n                  $__default['default'](obj).val(lfv).trigger(\"change\");\r\n                  $__default['default'](obj.input).val(txt).trigger(\"focus\");\r\n                } else if (isModalLookup(obj)) {\r\n                  var $obj = $__default['default'](obj),\r\n                      $lu = $__default['default'](getElement(\"lu_\" + args.name, form));\r\n\r\n                  if (obj.multiple) {\r\n                    // Add to existing values\r\n                    var val = $__default['default'](obj).val(),\r\n                        vals = [],\r\n                        nv = String(lfv);\r\n                    if (val !== \"\") vals = val.split(ew.MULTIPLE_OPTION_SEPARATOR);\r\n\r\n                    if (!vals.includes(nv)) {\r\n                      vals.push(nv);\r\n                      $obj.val(vals.join()).trigger(\"change\");\r\n                      var html = $lu.html(),\r\n                          arOpt = $lu.find(\".ew-option\").map(function () {\r\n                        return $__default['default'](this).html();\r\n                      }).get();\r\n\r\n                      if (arOpt.length) {\r\n                        // Some options selected\r\n                        arOpt.push(txt);\r\n                        $lu.html(optionsHtml(arOpt, $obj.data(\"maxcount\")));\r\n                      } else if (html == ew.language.phrase(\"PleaseSelect\")) {\r\n                        // No options selected\r\n                        $lu.html(optionHtml(txt));\r\n                      } else if (html) {\r\n                        // Many options selected\r\n                        $lu.html(ew.language.phrase(\"CountSelected\").replace(\"%s\", vals.length));\r\n                      }\r\n                    }\r\n                  } else {\r\n                    $obj.val(lfv).trigger(\"change\");\r\n                    $lu.html(txt);\r\n                  }\r\n                } else {\r\n                  $__default['default'](obj).trigger(\"change\").trigger(\"focus\");\r\n                }\r\n              }\r\n\r\n              var $form = $__default['default'](form),\r\n                  suffix = $form.is(\"div\") ? \"_\" + $form.attr(\"id\") : \"\";\r\n              var cnt = $form.find(\"#key_count\" + suffix).val();\r\n\r\n              if (cnt > 0) {\r\n                // Grid-Add/Edit, update other rows\r\n                for (var i = 1; i <= cnt; i++) {\r\n                  if (i == index) continue;\r\n                  var obj2 = getElements(name.replace(/^x/, \"x\" + i), form);\r\n                  var ar2 = getOptions(obj2),\r\n                      vals = [];\r\n                  if (JSON.stringify(ar) != JSON.stringify(ar2)) // Not same options\r\n                    continue;\r\n                  newOption(obj2, row, form);\r\n                  if (obj2.options && obj.list) // Radio/Checkbox list\r\n                    obj2.render();\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        var _results2;\r\n\r\n        // Failure\r\n        if ((_results2 = results) !== null && _results2 !== void 0 && _results2.error) {\r\n          var _results$error;\r\n\r\n          if ($__default['default'].isString(results.error)) showToast(results.error);else if ($__default['default'].isString((_results$error = results.error) === null || _results$error === void 0 ? void 0 : _results$error.description)) showToast(results.error.description);\r\n        } else {\r\n          var msg,\r\n              $div = $__default['default'](\"<div></div>\").html(data).find(\"div.ew-message-dialog\");\r\n\r\n          if ($div[0]) {\r\n            msg = $div.html();\r\n          } else {\r\n            var _results3;\r\n\r\n            msg = ((_results3 = results) === null || _results3 === void 0 ? void 0 : _results3.failureMessage) || data;\r\n            if (!msg || String(msg).trim() == \"\") msg = ew.language.phrase(\"InsertFailed\");\r\n          }\r\n\r\n          showToast(msg);\r\n        }\r\n      }\r\n    }; // Fail\r\n\r\n    var _fail = function _fail(o) {\r\n      $dlg.modal(\"hide\");\r\n\r\n      _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    }; // Submit\r\n\r\n    var _submit = function _submit(e) {\r\n      var $dlg = ew.addOptionDialog,\r\n          form = $dlg.find(\".modal-body form\")[0],\r\n          frm = forms.get(form.id),\r\n          btn = e ? e.target : null,\r\n          $btn = $__default['default'](btn);\r\n\r\n      if (frm.canSubmit()) {\r\n        $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n        $body.css(\"cursor\", \"wait\");\r\n        $__default['default'].post(getApiUrl([ew.API_ADD_ACTION, form.elements[ew.API_OBJECT_NAME].value]), $__default['default'](form).serialize(), _submitSuccess).fail(_fail).always(function () {\r\n          frm.enableForm();\r\n          $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n          $body.css(\"cursor\", \"default\");\r\n        });\r\n      }\r\n\r\n      return false;\r\n    };\r\n\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args); // Get form HTML\r\n\r\n    var success = function success(data) {\r\n      var frm = forms.get(args.lnk),\r\n          prefix = \"x_\",\r\n          m = args.el.match(/^(x\\d+_)/);\r\n      if (m) // Contains row index\r\n        prefix = m[1];\r\n      var list = frm.getList(args.el),\r\n          pfs = list.parentFields.slice() // Clone\r\n      .map(function (pf) {\r\n        return pf.split(\" \").length == 1 ? pf.replace(/^x_/, prefix) : pf;\r\n      }),\r\n          // Parent field in the same table, add row index\r\n      form = frm.htmlForm,\r\n          ar = pfs.map(function (pf) {\r\n        return getOptionValues(pf, form);\r\n      }),\r\n          ar2 = pfs.map(function (pf) {\r\n        return getOptionTexts(pf, form);\r\n      }),\r\n          ffs = list.filterFieldVars.slice(); // Clone\r\n\r\n      $dlg.find(\".modal-title\").html($__default['default'](args.lnk).closest(\".ew-add-opt-btn\").data(\"title\"));\r\n      $dlg.find(\".modal-body\").html(stripScript(data));\r\n      var form = $dlg.find(\".modal-body form\")[0];\r\n\r\n      if (form) {\r\n        // Set the filter field value\r\n        $__default['default'](form).on(\"keydown\", function (e) {\r\n          if (e.key == \"Enter\" && e.target.nodeName != \"TEXTAREA\") return _submit();\r\n        });\r\n        ar.forEach(function (v, i) {\r\n          (function () {\r\n            var obj = getElements(ffs[i], form);\r\n\r\n            if (obj) {\r\n              if (obj.options || obj.length) {\r\n                // Selection list\r\n                $__default['default'](obj).first().one(\"updated\", function () {\r\n                  return selectOption(obj, v);\r\n                });\r\n              } else {\r\n                selectOption(obj, v);\r\n              }\r\n            }\r\n          })();\r\n        });\r\n      }\r\n\r\n      ew.addOptionDialog = $dlg.modal(\"show\");\r\n      $dlg.find(\".modal-footer .btn-primary\").click(_submit).focus();\r\n      executeScript(data, args.el);\r\n\r\n      if (form) {\r\n        // Set the filter field value\r\n        ar.forEach(function (v, i) {\r\n          var obj = getElements(ffs[i], form);\r\n\r\n          if (obj) {\r\n            if (isAutoSuggest(obj)) {\r\n              // AutoSuggest\r\n              obj.value = v[0];\r\n              obj.input.value = ar2[i][0];\r\n              obj.add(v[0], ar2[i][0], true);\r\n            } else if (isModalLookup(obj)) {\r\n              // Modal-Lookup\r\n              obj.value = v[0];\r\n              updateOptions.call(forms.get(form.id), obj);\r\n            } else if (obj.options || obj.length) ; else {\r\n              // Text\r\n              obj.value = v[0];\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n      $dlg.trigger(\"load.ew\");\r\n    };\r\n\r\n    $__default['default'].get(args.url, success).fail(_fail);\r\n  } // Hide Modal dialog\r\n\r\n  function modalDialogHide(e) {\r\n    var $dlg = $__default['default'](this),\r\n        args = $dlg.data(\"args\");\r\n    removeScript(\"ModalDialog\");\r\n    var frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n    if (frm) frm.destroyEditor();\r\n    var $bd = $dlg.find(\".modal-body\").html(\"\");\r\n    if ($bd.ewjtable && $bd.ewjtable(\"instance\")) $bd.ewjtable(\"destroy\");\r\n    $dlg.find(\".modal-footer .btn-primary\").off();\r\n    $dlg.find(\".modal-dialog\").removeClass(function (index, className) {\r\n      var m = className.match(/table\\-\\w+/);\r\n      return m ? m[0] : \"\";\r\n    });\r\n    $dlg.data(\"showing\", false);\r\n    $dlg.data(\"url\", null);\r\n    if (args && args.reload) window.location.reload();\r\n  }\r\n  /**\r\n   * Show modal dialog\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {HTMLFormElement} args.f - Form of List page\r\n   * @param {HTMLElement} args.lnk - Anchor element\r\n   * @param {string} args.url - URL of the form\r\n   * @param {string|null} args.btn - Button phrase ID\r\n   * @param {string} args.caption - Caption in dialog header\r\n   * @param {boolean} args.reload - Reload page after hiding dialog or not\r\n   * @param {string} args.size - Size of the dialog 'modal-sm'|''|modal-lg'|'modal-xl'(default)\r\n   * @returns false\r\n   */\r\n\r\n  function modalDialogShow(args) {\r\n    $__default['default'](args.lnk).tooltip(\"hide\");\r\n    var f = args.f;\r\n\r\n    if (f && !keySelected(f)) {\r\n      _prompt(\"<p class=\\\"text-danger\\\">\" + ew.language.phrase(\"NoRecordSelected\") + \"</p>\");\r\n\r\n      return false;\r\n    }\r\n\r\n    var $dlg = ew.modalDialog || $__default['default'](\"#ew-modal-dialog\").on(\"hidden.bs.modal\", modalDialogHide); // div#ew-modal-dialog always exists\r\n\r\n    if ($dlg.data(\"showing\") && $dlg.data(\"url\") == args.url) return false;\r\n    $dlg.data({\r\n      showing: true,\r\n      url: args.url\r\n    });\r\n    args.reload = false; // size\r\n\r\n    if (args.size === \"modal-sm\") {\r\n      // 300px\r\n      $dlg.find(\".modal-dialog\").toggleClass(\"modal-sm\", true).toggleClass(\"modal-lg modal-xl\", false);\r\n    } else if (args.size === \"\") {\r\n      // 500px\r\n      $dlg.find(\".modal-dialog\").toggleClass(\"modal-sm modal-lg modal-xl\", false);\r\n    } else if (args.size === \"modal-lg\") {\r\n      // 800px\r\n      $dlg.find(\".modal-dialog\").toggleClass(\"modal-lg\", true).toggleClass(\"modal-sm modal-xl\", false);\r\n    } else {\r\n      // Default = 1140px\r\n      $dlg.find(\".modal-dialog\").toggleClass(\"modal-xl\", true).toggleClass(\"modal-sm modal-lg\", false);\r\n    } // caption\r\n\r\n    var _caption = function _caption() {\r\n      var args = $dlg.data(\"args\");\r\n      var $lnk = $__default['default'](args.lnk);\r\n      return args.caption || $lnk.data(\"caption\") || $lnk.data(\"original-title\") || \"\";\r\n    }; // button text\r\n\r\n    var _button = function _button() {\r\n      var args = $dlg.data(\"args\");\r\n      if ($__default['default'].isNull(args.btn)) return \"\";else if (args.btn && args.btn != \"\") return ew.language.phrase(args.btn);else return _caption();\r\n    }; // fail\r\n\r\n    var _fail = function _fail(o) {\r\n      $dlg.modal(\"hide\");\r\n      if (o.status) _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    }; // always\r\n\r\n    var _always = function _always(o) {\r\n      $body.css(\"cursor\", \"default\");\r\n    }; // check if current page\r\n\r\n    var _current = function _current(url) {\r\n      var a = $__default['default'](\"<a>\", {\r\n        href: url\r\n      })[0];\r\n      return window.location.pathname.endsWith(a.pathname);\r\n    };\r\n    /**\r\n     * handle result\r\n     *\r\n     * @param {Object} result - Result object\r\n     * @param {string|Object} result.error - Error message or object\r\n     * @param {string} result.error.message - Error message\r\n     * @param {string} result.error.description - Error message\r\n     * @param {string} result.failureMessage - Failure message\r\n     * @param {string} result.successMessage - Success message\r\n     * @param {string} result.warningMessage - Warning message\r\n     * @param {string} result.message - Message\r\n     * @param {string} result.url - Redirection URL\r\n     * @param {string} result.modal - Redirect to result.url in current modal dialog\r\n     * @param {boolean} result.view - result.url is View page => No primary button\r\n     * @param {string} result.caption - Caption of modal dialog for result.url\r\n     * @param {boolean} result.reload - Reload current page\r\n     */\r\n\r\n    var handleResult = function handleResult(result) {\r\n      var cb = null,\r\n          url = result.url,\r\n          reload = result.reload;\r\n\r\n      if (url || reload) {\r\n        cb = function cb() {\r\n          if (url) {\r\n            if (result.modal && !_current(url)) {\r\n              var args = $dlg.data(\"args\");\r\n              args.reload = true;\r\n              if (result.caption) args.caption = result.caption;\r\n              args.btn = result.view ? null : \"\";\r\n              $dlg.data(\"args\", args);\r\n              url += (url.split(\"?\").length > 1 ? \"&\" : \"?\") + \"modal=1&rnd=\" + random();\r\n              $body.css(\"cursor\", \"wait\");\r\n              $__default['default'].get(url).done(success).fail(_fail).always(_always);\r\n            } else {\r\n              $dlg.modal(\"hide\");\r\n              window.location = sanitizeUrl(url);\r\n            }\r\n          } else if (reload) {\r\n            $dlg.modal(\"hide\");\r\n            window.location.reload();\r\n          }\r\n        };\r\n      }\r\n\r\n      if ($__default['default'].isString(result.failureMessage)) {\r\n        _alert(result.failureMessage);\r\n      } else if ($__default['default'].isString(result.warningMessage)) {\r\n        _alert(result.warningMessage, cb, \"warning\");\r\n      } else if ($__default['default'].isString(result.message)) {\r\n        _alert(result.message, cb, \"body\");\r\n      } else if ($__default['default'].isString(result.successMessage)) {\r\n        _alert(result.successMessage, cb, \"success\");\r\n      } else if (result.error) {\r\n        var _result$error, _result$error2;\r\n\r\n        if ($__default['default'].isString(result.error)) _alert(result.error);else if ($__default['default'].isString((_result$error = result.error) === null || _result$error === void 0 ? void 0 : _result$error.message)) _alert(result.error.message);else if ($__default['default'].isString((_result$error2 = result.error) === null || _result$error2 === void 0 ? void 0 : _result$error2.description)) _alert(result.error.description);\r\n      } else if (cb) {\r\n        cb();\r\n      }\r\n    }; // submit success\r\n\r\n    var _submitSuccess = function _submitSuccess(data) {\r\n      var result = parseJson(data);\r\n\r\n      if ($__default['default'].isObject(result)) {\r\n        handleResult(result);\r\n      } else {\r\n        var body = getContent(data);\r\n\r\n        if (body.length) {\r\n          // Has HTML elements\r\n          var $bd = $dlg.find(\".modal-body\").html(body);\r\n          var footer = \"\";\r\n          var cf = $bd.find(\"#confirm\");\r\n          var ct = $bd.find(\"#conflict\");\r\n\r\n          if (ct && ct.val() == \"1\") {\r\n            // Conflict page\r\n            footer += \"<button type=\\\"button\\\" id=\\\"btn-overwrite\\\" class=\\\"btn btn-primary ew-btn\\\">\" + ew.language.phrase(\"OverwriteBtn\") + \"</button>\";\r\n            footer += \"<button type=\\\"button\\\" id=\\\"btn-reload\\\" class=\\\"btn btn-default ew-btn\\\">\" + ew.language.phrase(\"ReloadBtn\") + \"</button>\";\r\n            footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";\r\n            $dlg.find(\".modal-footer\").html(footer);\r\n            $dlg.find(\".modal-footer #btn-overwrite\").on('click', {\r\n              action: 'overwrite'\r\n            }, _submit);\r\n            $dlg.find(\".modal-footer #btn-reload\").on('click', {\r\n              action: 'show'\r\n            }, _submit);\r\n          } else if (cf && cf.val() == \"confirm\") {\r\n            // Confirm page\r\n            footer += \"<button type=\\\"button\\\" class=\\\"btn btn-primary ew-btn\\\">\" + ew.language.phrase(\"ConfirmBtn\") + \"</button>\";\r\n            footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";\r\n            $dlg.find(\".modal-footer\").html(footer);\r\n            $dlg.find(\".modal-footer .btn-primary\").click(_submit).focus();\r\n            $dlg.find(\".modal-footer .btn-default\").on(\"click\", {\r\n              action: \"cancel\"\r\n            }, _submit);\r\n          } else {\r\n            // Normal page\r\n            var btn = _button();\r\n\r\n            if (btn) footer += \"<button type=\\\"button\\\" class=\\\"btn btn-primary ew-btn\\\">\" + btn + \"</button>\";\r\n            footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";\r\n            $dlg.find(\".modal-footer\").html(footer);\r\n            $dlg.find(\".modal-footer .btn-primary\").addClass(\"ew-submit\").click(_submit).focus();\r\n          }\r\n\r\n          executeScript(data, \"ModalDialog\");\r\n          $dlg.trigger(\"load.ew\"); // Trigger load event for, e.g. Use JavaScript popup message\r\n        } else if (data) {\r\n          $dlg.modal(\"hide\");\r\n          ew.alert(data);\r\n        }\r\n      }\r\n    }; // submit\r\n\r\n    var _submit = function _submit(e) {\r\n      var form = $dlg.find(\".modal-body form\")[0],\r\n          $form = $__default['default'](form),\r\n          frm = forms.get(form.id),\r\n          action = e && e.data ? e.data.action : null,\r\n          btn = e ? e.target : null;\r\n\r\n      if (btn) {\r\n        if (btn.classList.contains(\"disabled\")) return false;\r\n\r\n        frm.enableForm = function () {\r\n          $__default['default'](btn).prop(\"disabled\", false).removeClass(\"disabled\");\r\n        };\r\n\r\n        frm.disableForm = function () {\r\n          $__default['default'](btn).prop(\"disabled\", true).addClass(\"disabled\");\r\n        };\r\n      }\r\n\r\n      var input = form.elements[\"action\"];\r\n      if (action && input) input.value = action; // Update action\r\n\r\n      if (action == \"cancel\") {\r\n        // Cancel\r\n        $__default['default'].post($form.attr(\"action\"), $form.serialize(), success).fail(_fail).always(_always);\r\n      } else if (frm.canSubmit()) {\r\n        $body.css(\"cursor\", \"wait\");\r\n        $__default['default'].post($form.attr(\"action\"), $form.serialize(), _submitSuccess).fail(_fail).always(function () {\r\n          frm.enableForm();\r\n\r\n          _always();\r\n        });\r\n      }\r\n\r\n      return false;\r\n    };\r\n\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args);\r\n\r\n    var success = function success(data) {\r\n      var result = parseJson(data);\r\n\r\n      if ($__default['default'].isObject(result)) {\r\n        handleResult(result);\r\n      } else {\r\n        var args = $dlg.data(\"args\");\r\n        var $lnk = $__default['default'](args.lnk);\r\n        $dlg.find(\".modal-title\").html(_caption());\r\n        var footer = \"\";\r\n\r\n        var btn = _button();\r\n\r\n        if (btn) footer += \"<button type=\\\"button\\\" class=\\\"btn btn-primary ew-btn\\\">\" + btn + \"</button>\";\r\n        if (footer != \"\") footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";else footer = \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CloseBtn\") + \"</button>\";\r\n        $dlg.find(\".modal-footer\").html(footer);\r\n        var body = getContent(data);\r\n        $dlg.find(\".modal-body\").html(body);\r\n        var table = $lnk.data(\"table\");\r\n        if (table) $dlg.find(\".modal-dialog\").addClass(\"table-\" + table);\r\n        var $btn = $dlg.find(\".modal-footer .btn-primary\").addClass(\"ew-submit\").click(_submit);\r\n        $dlg.find(\".modal-body form\").on(\"keydown\", function (e) {\r\n          if (e.key == \"Enter\" && e.target.nodeName != \"TEXTAREA\") {\r\n            $btn.click();\r\n            return false;\r\n          }\r\n        });\r\n        ew.modalDialog = $dlg.modal(\"show\");\r\n        executeScript(data, \"ModalDialog\");\r\n        $dlg.trigger(\"load.ew\"); // Trigger load event for, e.g. YouTube videos, ReCAPTCHA and Google maps\r\n\r\n        $btn.focus();\r\n      }\r\n    };\r\n\r\n    $body.css(\"cursor\", \"wait\");\r\n    var url = args.url;\r\n\r\n    if (f) {\r\n      // Post form\r\n      var $f = $__default['default'](f);\r\n      if (!f.elements.modal) $__default['default'](\"<input>\").attr({\r\n        type: \"hidden\",\r\n        name: \"modal\",\r\n        value: \"1\"\r\n      }).appendTo($f);\r\n      $__default['default'].post(url, $f.serialize(), success).fail(_fail).always(_always);\r\n    } else {\r\n      url += (url.split(\"?\").length > 1 ? \"&\" : \"?\") + \"modal=1&rnd=\" + random();\r\n      $__default['default'].get(url, success).fail(_fail).always(_always);\r\n    }\r\n\r\n    return false;\r\n  } // Show Modal Lookup\r\n\r\n  function modalLookupShow(args) {\r\n    var el = args.el,\r\n        f = getForm(args.lnk);\r\n    if (!f || !el) return;\r\n    var $dlg = ew.modalLookupDialog || $__default['default'](\"#ew-modal-lookup-dialog\").on(\"hidden.bs.modal\", modalDialogHide);\r\n\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-modal-lookup-dialog not found.\");\r\n\r\n      return;\r\n    }\r\n\r\n    if ($dlg.data(\"showing\")) return;\r\n    $dlg.data(\"showing\", true);\r\n    var $f = $__default['default'](f),\r\n        $input = $f.find(\"[id='\" + el + \"']\"),\r\n        // id may contains \"[]\"\r\n    $bd = $dlg.find(\".modal-body\"),\r\n        $lnk = $__default['default'](args.lnk),\r\n        $lu = $lnk.closest(\".ew-lookup-list\").find(\".ew-lookup-text\").trigger(\"focus\"),\r\n        oid = getId(el, false),\r\n        m = oid.match(/^([xy])(\\d*)_/),\r\n        rowindex = m ? m[2] : \"\",\r\n        list = forms.get(f.id).getList(el); // Format data\r\n\r\n    var _format = function _format(data) {\r\n      if (data.result == \"OK\" && Array.isArray(data.records)) {\r\n        data.records.forEach(function (ar, index) {\r\n          var item;\r\n          if (Array.isArray(ar)) item = {\r\n            \"lf\": ar[0],\r\n            \"df1\": ar[1],\r\n            \"df2\": ar[2],\r\n            \"df3\": ar[3],\r\n            \"df4\": ar[4]\r\n          };else if ($__default['default'].isObject(ar)) item = {\r\n            lf: ar.lf,\r\n            df1: ar.df,\r\n            df2: ar.df2,\r\n            df3: ar.df3,\r\n            df4: ar.df4\r\n          };\r\n          var txt = displayValue(ar, $input);\r\n\r\n          if (list.template) {\r\n            item[\"df\"] = list.template.render(item, ew.jsRenderHelpers);\r\n          } else {\r\n            item[\"df\"] = txt;\r\n          }\r\n\r\n          item[\"txt\"] = txt;\r\n          data.records[index] = item;\r\n        });\r\n      }\r\n\r\n      return data;\r\n    }; // Set AutoSuggest\r\n\r\n    var setAutoSuggest = function setAutoSuggest(value, text) {\r\n      if (!isAutoSuggest($input)) return;\r\n      var el = $input[0];\r\n      el.add(value, text, true);\r\n      el.input.value = text;\r\n    }; // Add option\r\n\r\n    var addOpt = function addOpt(ar) {\r\n      // Check if selected records are in the current page\r\n      var vals = [],\r\n          html = [],\r\n          opts = [],\r\n          txts = [],\r\n          useText = !args.m && args.srch;\r\n      $bd.ewjtable(\"selectedRows\").each(function () {\r\n        var record = $__default['default'](this).data(\"record\");\r\n        vals.push(record.lf);\r\n        html.push(record.df);\r\n        opts.push(record.df);\r\n        txts.push(record.txt); // Text for Auto-Suggest\r\n      });\r\n\r\n      if (ar.sort().join() === vals.sort().join()) {\r\n        // All selected records are from the current page\r\n        $lu.html(optionsHtml(opts, $input.data(\"maxcount\")));\r\n        setAutoSuggest(vals.join(), txts.join(\", \"));\r\n        $input.val(useText ? html.join(\", \") : vals.join()).trigger(\"change\");\r\n      } else {\r\n        // Get selected records from server\r\n        var data = Object.assign({\r\n          page: list.page,\r\n          field: list.field,\r\n          ajax: \"modal\",\r\n          keys: ar\r\n        }, getUserParams('#p_' + oid, f));\r\n        $body.css(\"cursor\", \"wait\");\r\n        $__default['default'].ajax(getApiUrl(ew.API_LOOKUP_ACTION), {\r\n          type: \"POST\",\r\n          dataType: \"json\",\r\n          data: data\r\n        }).done(_format).then(function (data) {\r\n          if (data.result == \"OK\" && Array.isArray(data.records)) {\r\n            var vals = [],\r\n                html = [],\r\n                opts = [],\r\n                txts = [],\r\n                results = data.records;\r\n\r\n            for (var _iterator6 = _createForOfIteratorHelperLoose(results), _step6; !(_step6 = _iterator6()).done;) {\r\n              var result = _step6.value;\r\n              vals.push(result.lf);\r\n              html.push(result.df);\r\n              opts.push(result.df);\r\n              txts.push(result.txt); // Text for Auto-Suggest\r\n            }\r\n\r\n            $lu.html(optionsHtml(opts, $input.data(\"maxcount\")));\r\n            setAutoSuggest(vals.join(), txts.join(\", \"));\r\n            $input.val(useText ? html.join(\", \") : vals.join()).trigger(\"change\");\r\n          }\r\n        }).always(function () {\r\n          $body.css(\"cursor\", \"default\");\r\n        });\r\n      }\r\n    }; // Submit\r\n\r\n    var _submit = function _submit() {\r\n      addOpt(arLinkValue);\r\n      $dlg.modal(\"hide\");\r\n      return false;\r\n    }; // Hide\r\n\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args);\r\n\r\n    var _timer, $search; // Success\r\n\r\n    var success = function success(data) {\r\n      if (data.result == \"OK\") {\r\n        $dlg.find(\".modal-title\").html($lnk.attr(\"title\") || $lnk.data(\"original-title\"));\r\n        $dlg.find(\".modal-body .ewjtable thead\").toggle(!!args.m);\r\n        $dlg.find(\".modal-footer\").html('<button type=\"button\" id=\"btn-select\" class=\"btn btn-primary ew-btn\">' + ew.language.phrase(\"SelectBtn\") + '</button>' + '<button type=\"button\" class=\"btn btn-default ew-btn\" data-dismiss=\"modal\">' + ew.language.phrase(\"CancelBtn\") + '</button>');\r\n        $search = $dlg.find(\".modal-header .modal-tools input[name=sv]\").off(\"keyup.ew\").on(\"keyup.ew\", function (e) {\r\n          if (_timer) _timer.cancel();\r\n          _timer = $__default['default'].later(ew.LOOKUP_DELAY, null, function () {\r\n            $bd.ewjtable(\"load\", {\r\n              \"sv\": $search.val()\r\n            });\r\n          });\r\n        });\r\n        $dlg.find(\".modal-footer #btn-select\").click(_submit); // Select\r\n\r\n        ew.modalLookupDialog = $dlg.modal(\"show\");\r\n        $search.focus();\r\n      } else {\r\n        _alert(data.message);\r\n      }\r\n    };\r\n\r\n    var arp = [];\r\n    var linkValue = $input.val(); // Link values\r\n\r\n    var arLinkValue = linkValue !== \"\" ? linkValue.split(ew.MULTIPLE_OPTION_SEPARATOR) : [];\r\n    var data = Object.assign({\r\n      page: list.page,\r\n      field: list.field\r\n    }, getUserParams('#p_' + oid, f)); // Add parent field values\r\n\r\n    var parentId = list.parentFields.slice(); // Clone\r\n\r\n    if (rowindex != \"\") {\r\n      for (var i = 0, len = parentId.length; i < len; i++) {\r\n        var ar = parentId[i].split(\" \");\r\n        if (ar.length == 1) // Parent field in the same table, add row index\r\n          parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n      }\r\n    }\r\n\r\n    if (parentId.length > 0) {\r\n      for (var i = 0, len = parentId.length; i < len; i++) {\r\n        arp.push(getOptionValues(parentId[i], f));\r\n      }\r\n    }\r\n\r\n    for (var i = 0, cnt = arp.length; i < cnt; i++) {\r\n      // Filter by parent fields\r\n      data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n    }\r\n\r\n    $body.css(\"cursor\", \"wait\");\r\n    $bd.ewjtable({\r\n      paging: true,\r\n      pageSize: args.n,\r\n      pageSizes: [],\r\n      pageSizeChangeArea: false,\r\n      pageList: \"minimal\",\r\n      selecting: true,\r\n      selectingCheckboxes: true,\r\n      multiselect: !!args.m,\r\n      actions: {\r\n        \"listAction\": function listAction(postData, jtParams) {\r\n          var _data = Object.assign({}, data, {\r\n            ajax: \"modal\",\r\n            start: jtParams.start,\r\n            recperpage: jtParams.recperpage\r\n          });\r\n\r\n          if ($__default['default'].isObject(postData)) // Search\r\n            Object.assign(_data, postData);\r\n          return $__default['default'].ajax(getApiUrl(ew.API_LOOKUP_ACTION), {\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            data: _data\r\n          }).done(_format).always(function () {\r\n            $body.css(\"cursor\", \"default\");\r\n          });\r\n        }\r\n      },\r\n      messages: {\r\n        serverCommunicationError: ew.language.phrase(\"ServerCommunicationError\"),\r\n        loadingMessage: '<div class=\"' + ew.spinnerClass + ' m-3 ew-loading\" role=\"status\"><span class=\"sr-only\">' + ew.language.phrase(\"Loading\") + '</span></div>',\r\n        noDataAvailable: ew.language.phrase(\"NoRecord\"),\r\n        close: ew.language.phrase(\"CloseBtn\"),\r\n        pagingInfo: ew.language.phrase(\"Record\") + \" {0}-{1} \" + ew.language.phrase(\"Of\") + \" {2}\",\r\n        pageSizeChangeLabel: ew.language.phrase(\"RecordsPerPage\"),\r\n        gotoPageLabel: ew.language.phrase(\"Page\")\r\n      },\r\n      fields: {\r\n        \"lf\": {\r\n          key: true,\r\n          list: false\r\n        },\r\n        \"df\": {}\r\n      },\r\n      recordsLoaded: function recordsLoaded(e, data) {\r\n        var selectedRows = $__default['default'](e.target).find(\".ewjtable-data-row\").filter(function () {\r\n          return arLinkValue.includes(String($__default['default'](this).data(\"record-key\")));\r\n        });\r\n        $__default['default'](e.target).ewjtable(\"selectRows\", selectedRows);\r\n      },\r\n      selectionChanged: function selectionChanged(e, data) {\r\n        var $rows = data.rows;\r\n\r\n        if ($rows) {\r\n          if (!args.m) arLinkValue = [];\r\n          $rows.each(function () {\r\n            var $row = $__default['default'](this);\r\n            var key = String($row.data(\"record-key\"));\r\n            var index = arLinkValue.indexOf(key);\r\n            var selected = $row.hasClass(\"ewjtable-row-selected\");\r\n            if (selected && index == -1) arLinkValue.push(key);else if (!selected && index > -1) arLinkValue.splice(index, 1);\r\n          });\r\n        }\r\n      }\r\n    }).ewjtable(\"load\", null, success);\r\n  }\r\n  /**\r\n   * Show dialog for import\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {HTMLElement} args.lnk - Anchor element\r\n   * @returns\r\n   */\r\n\r\n  function importDialogShow(args) {\r\n    $__default['default'](args.lnk).tooltip(\"hide\");\r\n    var $dlg = ew.importDialog || $__default['default'](\"#ew-import-dialog\");\r\n\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-import-dialog not found.\");\r\n\r\n      return false;\r\n    }\r\n\r\n    var $input = $dlg.find(\"#importfiles\"),\r\n        $bd = $dlg.find(\".modal-body\"),\r\n        $data = $bd.find(\":input[id!=importfiles]\"),\r\n        $message = $bd.find(\".message\"),\r\n        $progress = $bd.find(\".progress\"),\r\n        timer; // Disable buttons\r\n\r\n    var enableButtons = function enableButtons() {\r\n      $dlg.find(\".modal-footer .btn\").prop(\"disabled\", false);\r\n    }; // Show message\r\n\r\n    var showMessage = function showMessage(msg, classname) {\r\n      var $msg = $__default['default'](\"<div>\" + msg + \"</div>\");\r\n      if (classname) $msg.addClass(classname);\r\n      $message.removeClass(\"d-none\").html($msg);\r\n      if (classname == \"text-danger\") enableButtons();\r\n    }; // Hide message\r\n\r\n    var hideMessage = function hideMessage() {\r\n      $message.addClass(\"d-none\").html(\"\");\r\n    }; // Show progress\r\n\r\n    var showProgress = function showProgress(pc, classname) {\r\n      $progress.removeClass(\"d-none\").find(\".progress-bar\").removeClass(\"bg-success bg-info\").addClass(classname || \"bg-success\").attr(\"aria-valuenow\", pc).css(\"width\", pc + \"%\").html(pc + \"%\");\r\n    }; // Hide progress\r\n\r\n    var hideProgress = function hideProgress() {\r\n      $progress.addClass(\"d-none\").find(\".progress-bar\").attr(\"aria-valuenow\", 0).css(\"width\", \"0%\").html(\"0%\");\r\n    }; // Upload progress\r\n\r\n    var uploadProgress = function uploadProgress(data) {\r\n      var pc = parseInt(100 * data.loaded / data.total);\r\n      showProgress(pc, \"bg-info\");\r\n\r\n      if (pc === 100) {\r\n        showMessage(ew.language.phrase(\"ImportMessageUploadComplete\"), \"text-info\");\r\n      } else {\r\n        showMessage(ew.language.phrase(\"ImportMessageUploadProgress\").replace(\"%p\", pc), \"text-info\");\r\n      }\r\n    }; // Update progress (import)\r\n\r\n    var updateProgress = function updateProgress(result) {\r\n      try {\r\n        var cnt = parseInt(result.count),\r\n            tcnt = parseInt(result.totalCount),\r\n            filename = result.file;\r\n\r\n        if (tcnt > 0 && $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\")) {\r\n          // Show progress\r\n          var pc = parseInt(100 * cnt / tcnt);\r\n          showProgress(pc);\r\n          showMessage(ew.language.phrase(\"ImportMessageProgress\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", filename), \"text-info\");\r\n        }\r\n      } catch (e) {}\r\n    }; // Import progress\r\n\r\n    var importProgress = function importProgress() {\r\n      var url = getApiUrl(ew.API_PROGRESS_ACTION),\r\n          data = {\r\n        \"rnd\": random()\r\n      };\r\n      data[ew.API_FILE_TOKEN_NAME] = $input.data(ew.API_FILE_TOKEN_NAME);\r\n      $__default['default'].get(url, data, updateProgress, \"json\");\r\n    }; // Import complete\r\n\r\n    var importComplete = function importComplete(result) {\r\n      var maxErrorCount = 5;\r\n      var msg = \"\";\r\n      showProgress(100);\r\n      var fileResults = result.files;\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n\r\n      if (Array.isArray(fileResults)) {\r\n        for (var i = 0, len = fileResults.length; i < len; i++) {\r\n          var fileResult = fileResults[i],\r\n              tcnt = fileResult.totalCount || 0,\r\n              cnt = fileResult.count || 0,\r\n              scnt = fileResult.successCount || 0,\r\n              fcnt = fileResult.failCount || 0;\r\n          if (msg != \"\") msg += \"<br>\";\r\n\r\n          if (fileResult.success) {\r\n            msg += ew.language.phrase(\"ImportMessageSuccess\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", fileResult.file);\r\n          } else {\r\n            msg += ew.language.phrase(\"ImportMessageError1\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", fileResult.file).replace(\"%s\", scnt).replace(\"%e\", fcnt);\r\n            if (fileResult.error) msg += ew.language.phrase(\"ImportMessageError2\").replace(\"%e\", fileResult.error);\r\n            var showLog = true;\r\n\r\n            if (fileResult.failList) {\r\n              var ecnt = 0;\r\n\r\n              for (var i = 1; i <= cnt; i++) {\r\n                if (fileResult.failList[\"row\" + i]) {\r\n                  ecnt += 1;\r\n                  msg += \"<br>\" + ew.language.phrase(\"ImportMessageError3\").replace(\"%i\", i).replace(\"%d\", fileResult.failList[\"row\" + i]);\r\n                }\r\n\r\n                if (ecnt >= maxErrorCount) break;\r\n              }\r\n\r\n              if (fcnt > maxErrorCount) msg += \"<br>\" + ew.language.phrase(\"ImportMessageMore\").replace(\"%s\", fcnt - maxErrorCount);else showLog = false;\r\n            }\r\n\r\n            if (fileResult.log && showLog) msg += \"<br>\" + ew.language.phrase(\"ImportMessageError4\").replace(\"%l\", fileResult.log);\r\n            showMessage(msg, \"text-danger\"); // Show error message\r\n          }\r\n        }\r\n      }\r\n\r\n      if (result.success) {\r\n        showMessage(msg, \"text-success\");\r\n        $dlg.find(\".modal-footer .ew-close-btn\").data(\"imported\", true);\r\n      } else {\r\n        if (result.error) msg = result.error;\r\n        showMessage(msg, \"text-danger\"); // Show error message\r\n      }\r\n\r\n      hideProgress();\r\n    }; // Import fail\r\n\r\n    var importFail = function importFail(o) {\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n\r\n      showMessage(ew.language.phrase(\"ImportMessageServerError\").replace(\"%s\", o.status).replace(\"%t\", o.statusText), \"text-danger\");\r\n    }; // Import file\r\n\r\n    var importFiles = function importFiles(filetoken) {\r\n      $body.css(\"cursor\", \"wait\");\r\n      $input.data(ew.API_FILE_TOKEN_NAME, filetoken);\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", true); // Show import progress\r\n\r\n      var data = ew.API_ACTION_NAME + \"=import&\" + ew.API_FILE_TOKEN_NAME + \"=\" + encodeURIComponent(filetoken);\r\n      if ($data.length) data += \"&\" + $data.serialize();\r\n      $__default['default'].ajax(currentPage(), {\r\n        \"data\": data,\r\n        \"method\": \"POST\",\r\n        \"dataType\": \"json\",\r\n        \"beforeSend\": function beforeSend(xhr, settings) {\r\n          timer = $__default['default'].later(100, null, importProgress, null, true); // Use time to show progress periodically\r\n        }\r\n      }).done(importComplete).fail(importFail).always(function () {\r\n        $body.css(\"cursor\", \"default\");\r\n        if (timer) timer.cancel(); // Clear timer\r\n      });\r\n    };\r\n\r\n    var formData = {\r\n      session: ew.SESSION_ID\r\n    };\r\n    formData[ew.TOKEN_NAME_KEY] = ew.TOKEN_NAME; // Add token name for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n\r\n    formData[ew.ANTIFORGERY_TOKEN_KEY] = ew.ANTIFORGERY_TOKEN; // Add antiforgery token for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n\r\n    var options = ew.importUploadOptions;\r\n    if (!options.acceptFileTypes) options.acceptFileTypes = new RegExp('\\\\.(' + ew.IMPORT_FILE_ALLOWED_EXT.replace(/,/g, '|') + ')$', 'i');\r\n\r\n    if (!$input.data(\"blueimpFileupload\")) {\r\n      $input.fileupload(Object.assign({\r\n        url: getApiUrl(ew.API_UPLOAD_ACTION),\r\n        dataType: \"json\",\r\n        autoUpload: true,\r\n        formData: formData,\r\n        singleFileUploads: false,\r\n        messages: {\r\n          acceptFileTypes: ew.language.phrase(\"UploadErrMsgAcceptFileTypes\"),\r\n          maxFileSize: ew.language.phrase(\"UploadErrMsgMaxFileSize\"),\r\n          maxNumberOfFiles: ew.language.phrase(\"UploadErrMsgMaxNumberOfFiles\"),\r\n          minFileSize: ew.language.phrase(\"UploadErrMsgMinFileSize\")\r\n        },\r\n        beforeSend: function beforeSend(jqxhr, settings) {\r\n          if (ew.API_JWT_TOKEN && !ew.IS_WINDOWS_AUTHENTICATION) // Do NOT set JWT authorization header if Windows Authentication\r\n            jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n        },\r\n        done: function done(e, data) {\r\n          if (data.result && data.result.files && Array.isArray(data.result.files.importfiles)) {\r\n            var ok = true;\r\n            data.result.files.importfiles.forEach(function (file, index) {\r\n              if (file.error) {\r\n                showMessage(ew.language.phrase(\"ImportMessageUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error), \"text-danger\");\r\n                ok = false;\r\n              }\r\n            }); // Show upload errors for each file\r\n\r\n            if (ok) importFiles(data.result[ew.API_FILE_TOKEN_NAME]); // Import uploaded files\r\n          }\r\n        },\r\n        change: function change(e, data) {\r\n          hideMessage();\r\n        },\r\n        processfail: function processfail(e, data) {\r\n          data.files.forEach(function (file, index) {\r\n            if (file.error) showMessage(ew.language.phrase(\"ImportMessageUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error), \"text-danger\");\r\n          }); // Show process errors for each file\r\n        },\r\n        fail: function fail(e, data) {\r\n          showMessage(ew.language.phrase(\"ImportMessageServerError\").replace(\"%s\", data.textStatus).replace(\"%t\", data.errorThrown), \"text-danger\");\r\n        },\r\n        progressall: function progressall(e, data) {\r\n          uploadProgress(data);\r\n        }\r\n      }, options));\r\n    }\r\n\r\n    $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr);\r\n    $dlg.find(\".modal-footer .ew-close-btn\").off(\"click.ew\").on(\"click.ew\", function () {\r\n      var $this = $__default['default'](this);\r\n\r\n      if ($this.data(\"imported\")) {\r\n        $this.data(\"imported\", false);\r\n        window.location.reload();\r\n      }\r\n    });\r\n    hideMessage();\r\n    ew.importDialog = $dlg.modal(\"show\");\r\n    return false;\r\n  } // Auto-fill\r\n\r\n  function autoFill(el) {\r\n    var f = forms.get(el).$element[0];\r\n    if (!f) return;\r\n    var ar = getOptionValues(el),\r\n        id = getId(el),\r\n        m = id.match(/^([xy])(\\d*)_/),\r\n        rowindex = m ? m[2] : \"\",\r\n        list = forms.get(el).getList(id),\r\n        dest_array = list.autoFillTargetFields;\r\n\r\n    var success = function success(data) {\r\n      var results = data && data.records || \"\";\r\n      var result = results ? results[0] : [];\r\n\r\n      for (var j = 0; j < dest_array.length; j++) {\r\n        var destEl = getElements(dest_array[j].replace(/^x_/, \"x\" + rowindex + \"_\"), f);\r\n\r\n        if (destEl) {\r\n          var val = $__default['default'].isValue(result[\"af\" + j]) ? String(result[\"af\" + j]) : \"\";\r\n          var args = {\r\n            results: results,\r\n            result: result,\r\n            data: val,\r\n            form: f,\r\n            name: id,\r\n            target: dest_array[j],\r\n            cancel: false,\r\n            trigger: true\r\n          };\r\n          $__default['default'](el).trigger(\"autofill\", [args]); // Fire event\r\n\r\n          if (args.cancel) continue;\r\n          val = args.data; // Process the value\r\n\r\n          if (destEl.options) {\r\n            // Selection list\r\n            selectOption(destEl, val.split(\",\"));\r\n\r\n            if (isAutoSuggest(destEl)) {\r\n              // Auto-Suggest\r\n              destEl.input.value = val;\r\n              updateOptions.call(forms.get(f.id), destEl);\r\n            } else if (isModalLookup(destEl)) {\r\n              // Modal-Lookup\r\n              //$(destEl).parent().find(\".ew-lookup-text\").html(val);\r\n              updateOptions.call(forms.get(f.id), destEl);\r\n            }\r\n          } else if (isHiddenTextArea(destEl)) {\r\n            // HTML editor\r\n            destEl.value = val;\r\n            $__default['default'](destEl).data(\"editor\").set();\r\n          } else {\r\n            destEl.value = val;\r\n          }\r\n\r\n          if (args.trigger) $__default['default'](destEl).trigger(\"change\");\r\n        }\r\n      }\r\n\r\n      return result;\r\n    };\r\n\r\n    if (ar.length > 0 && ar[0] != \"\") {\r\n      var data = Object.assign({\r\n        page: list.page,\r\n        field: list.field,\r\n        ajax: \"autofill\",\r\n        v0: ar[0],\r\n        language: ew.LANGUAGE_ID\r\n      }, getUserParams('#p_' + id, f)); // Add parent field values\r\n\r\n      var parentId = list.parentFields.slice(); // Clone\r\n\r\n      if (rowindex != \"\") {\r\n        for (var i = 0, len = parentId.length; i < len; i++) {\r\n          var ar = parentId[i].split(\" \");\r\n          if (ar.length == 1) // Parent field in the same table, add row index\r\n            parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n        }\r\n      }\r\n\r\n      var arp = parentId.map(function (pid) {\r\n        return getOptionValues(pid, f);\r\n      });\r\n\r\n      for (var i = 0, cnt = arp.length; i < cnt; i++) {\r\n        // Filter by parent fields\r\n        data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n      }\r\n\r\n      return $__default['default'].post(getApiUrl(ew.API_LOOKUP_ACTION), data, success, \"json\");\r\n    }\r\n\r\n    return success();\r\n  } // Setup tooltip links\r\n\r\n  function tooltip(i, el) {\r\n    var $this = $__default['default'](el),\r\n        $tt = $__default['default'](\"#\" + $this.data(\"tooltip-id\")),\r\n        trig = $this.data(\"trigger\") || \"hover\",\r\n        dir = $this.data(\"placement\") || (ew.CSS_FLIP ? \"left\" : \"right\"); // dir = \"left|right\"\r\n\r\n    if (!$tt[0] || $tt.text().trim() == \"\" && !$tt.find(\"img[src!='']\")[0]) return;\r\n\r\n    if (!$this.data(\"bs.popover\")) {\r\n      $this.popover({\r\n        html: true,\r\n        placement: dir,\r\n        trigger: trig,\r\n        delay: 100,\r\n        container: $__default['default'](\"#ew-tooltip\")[0],\r\n        content: $tt.html(),\r\n        sanitizeFn: ew.sanitizeFn\r\n      }).on(\"show.bs.popover\", function (e) {\r\n        var wd,\r\n            $tip = $__default['default']($this.data(\"bs.popover\").getTipElement()).css(\"z-index\", 9999); // Make z-index higher than modal dialog\r\n\r\n        if (wd = $this.data(\"tooltip-width\")) // Set width before show\r\n          $tip.css(\"max-width\", parseInt(wd, 10) + \"px\");\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Show dialog for email sending\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {string} args.lnk - Email link ID\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {string} args.url - URL of the email content\r\n   * @param {HTMLElement} args.f - Form\r\n   * @param {Object} args.key - Key as object\r\n   * @param {boolean} args.sel - Exported selected\r\n   * @returns false\r\n   */\r\n\r\n  function emailDialogShow(args) {\r\n    var $dlg = ew.emailDialog || $__default['default'](\"#ew-email-dialog\");\r\n\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-email-dialog not found.\");\r\n\r\n      return false;\r\n    }\r\n\r\n    if (args.sel && !keySelected(args.f)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    var $f = $dlg.find(\".modal-body form\"),\r\n        frm = $f.data(\"form\");\r\n\r\n    if (!frm) {\r\n      frm = new Form($f.attr(\"id\"));\r\n      frm.addFields([[\"sender\", [ew.Validators.required(ew.language.phrase(\"Sender\")), ew.Validators.email]], [\"recipient\", [ew.Validators.required(ew.language.phrase(\"Recipient\")), ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperRecipientEmail\"))]], [\"cc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperCcEmail\"))], [\"bcc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperBccEmail\"))], [\"subject\", ew.Validators.required(ew.language.phrase(\"Subject\"))]]);\r\n\r\n      frm.validate = function () {\r\n        return this.validateFields();\r\n      };\r\n\r\n      frm.submit = function (e) {\r\n        if (!this.validate()) return false;\r\n        var qs = $f.serialize(),\r\n            data = \"\";\r\n        if (args.f && args.sel) // Export selected\r\n          data = $__default['default'](args.f).find(\"input[type=checkbox][name='key_m[]']:checked\").serialize();\r\n        if (args.key) qs += \"&\" + $__default['default'].param(args.key);\r\n        var fobj = this.getForm();\r\n\r\n        if (args.url) {\r\n          // Custom Template\r\n          $dlg.modal(\"hide\");\r\n          if (args.exportid) ew.exportWithCharts(args.el, args.url, args.exportid, fobj);else _export(args.f, args.url, \"email\", true, args.sel, fobj);\r\n        } else {\r\n          $__default['default'].post($__default['default'](args.f).attr(\"action\"), qs + \"&\" + data, function (result) {\r\n            showMessage(result);\r\n          });\r\n        }\r\n\r\n        return true;\r\n      };\r\n\r\n      $f.data(\"form\", frm);\r\n    }\r\n\r\n    $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr);\r\n    $dlg.find(\".modal-footer .btn-primary\").off().click(function (e) {\r\n      e.preventDefault();\r\n      if (frm.submit(e)) $dlg.modal(\"hide\");\r\n    });\r\n    ew.emailDialog = $dlg.modal(\"show\");\r\n    return false;\r\n  } // Show drill down\r\n\r\n  function showDrillDown(e, obj, url, id, hdr) {\r\n    if (e && e.ctrlKey) {\r\n      var arUrl = url.split(\"?\"),\r\n          params = new URLSearchParams(arUrl[1]);\r\n      params.set(\"d\", \"2\"); // Change d parameter to 2\r\n\r\n      redirect(arUrl[0] + \"?\" + params.toString());\r\n      return false;\r\n    }\r\n\r\n    var $obj = $__default['default'].isString(obj) ? $__default['default'](\"#\" + obj) : $__default['default'](obj);\r\n    var pos = $obj.data(\"drilldown-placement\") || ($obj.hasClass(\"ew-chart-canvas\") ? ew.CSS_FLIP ? \"left\" : \"right\" : \"bottom\");\r\n    $obj.tooltip(\"hide\");\r\n    var args = {\r\n      \"obj\": $obj[0],\r\n      \"id\": id,\r\n      \"url\": url,\r\n      \"hdr\": hdr,\r\n      \"placement\": pos\r\n    };\r\n    $document$1.trigger(\"drilldown\", [args]);\r\n    var ar = args.url.split(\"?\");\r\n    args.file = ar[0] || \"\";\r\n    args.data = ar[1] || \"\";\r\n\r\n    if (!$obj.data(\"bs.popover\")) {\r\n      $obj.popover({\r\n        html: true,\r\n        placement: args.placement,\r\n        trigger: \"manual\",\r\n        template: '<div class=\"popover\"><h3 class=\"popover-header d-none\" style=\"cursor: move;\"></h3><div class=\"popover-body\"></div></div>',\r\n        content: '<div class=\"' + ew.spinnerClass + ' m-3 ew-loading\" role=\"status\"><span class=\"sr-only\">' + ew.language.phrase(\"Loading\") + '</span></div>',\r\n        container: $__default['default'](\"#ew-drilldown-panel\"),\r\n        sanitizeFn: ew.sanitizeFn,\r\n        boundary: \"viewport\"\r\n      }).on(\"show.bs.popover\", function (e) {\r\n        $obj.attr(\"data-original-title\", \"\");\r\n      }).on(\"shown.bs.popover\", function (e) {\r\n        if (!$obj.data(\"args\")) return;\r\n        var data = $obj.data(\"args\").data;\r\n        data += (data ? \"&\" : \"\") + ew.TOKEN_NAME_KEY + \"=\" + ew.TOKEN_NAME; // Add token name // PHP\r\n\r\n        data += (data ? \"&\" : \"\") + ew.ANTIFORGERY_TOKEN_KEY + \"=\" + ew.ANTIFORGERY_TOKEN; // Add antiforgery token // PHP\r\n\r\n        $__default['default'].ajax({\r\n          cache: false,\r\n          dataType: \"html\",\r\n          type: \"POST\",\r\n          data: data,\r\n          url: $obj.data(\"args\").file,\r\n          success: function success(data) {\r\n            var $tip = $__default['default']($obj.data(\"bs.popover\").getTipElement()).on(\"mousedown\", function (e) {\r\n              var $this = $__default['default'](this).addClass(\"drag\"),\r\n                  height = $this.outerHeight(),\r\n                  width = $this.outerWidth(),\r\n                  ypos = $this.offset().top + height - e.pageY,\r\n                  xpos = $this.offset().left + width - e.pageX;\r\n              $body.on(\"mousemove\", function (e) {\r\n                var top = e.pageY + ypos - height,\r\n                    left = e.pageX + xpos - width;\r\n                if ($this.hasClass(\"drag\")) $this.offset({\r\n                  top: top,\r\n                  left: left\r\n                });\r\n              }).on(\"mouseup\", function (e) {\r\n                $this.removeClass(\"drag\");\r\n              });\r\n            });\r\n            if (args.hdr) $tip.find(\".popover-header\").empty().removeClass(\"d-none\").append('<button type=\"button\" class=\"close\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>' + args.hdr).find(\".close\").on(\"click\", function () {\r\n              $obj.popover(\"hide\");\r\n            });\r\n            var m = data.match(/<body[^>]*>([\\s\\S]*?)<\\/body\\s*>/i); // Use HTML in document body only\r\n\r\n            data = m ? m[0] : data;\r\n            var html = ew.stripScript(data);\r\n            $tip.find(\".popover-body\").html($__default['default'](\"<div></div>\").html(html).find(\"#ew-report\")) // Insert the container table only\r\n            .find(\".ew-table\").each(ew.setupTable);\r\n            ew.executeScript(data, id);\r\n            $obj.popover(\"update\");\r\n          },\r\n          error: function error(o) {\r\n            if (o.responseText) {\r\n              var $tip = $__default['default']($el.data(\"bs.popover\").getTipElement());\r\n              $tip.find(\".popover-body\").empty().append('<p class=\"text-danger\">' + o.responseText + '</p>');\r\n            }\r\n          }\r\n        });\r\n      }).on(\"hidden.bs.popover\", function (e) {\r\n        $__default['default'].each(ew.drillDownCharts, function (key, cht) {\r\n          // Dispose charts\r\n          cht.dispose();\r\n        });\r\n        ew.drillDownCharts = {};\r\n        ew.removeScript(id);\r\n      });\r\n    }\r\n\r\n    $obj.data(\"args\", args).popover(\"show\");\r\n  }\r\n  /**\r\n   * Ajax query\r\n   * @param {Object} data - object to passed to API\r\n   * @param {callback} callback - Callback function for async request (see http://api.jquery.com/jQuery.post/), empty for sync request\r\n   * @returns {string|string[]}\r\n   */\r\n\r\n  function ajax(data, callback) {\r\n    if (!$__default['default'].isObject(data) || !data.url && !data.action) return undefined;\r\n    var action;\r\n\r\n    if (data.url) {\r\n      if (data.url.startsWith(getApiUrl())) action = data.url.replace(getApiUrl(), \"\").split(\"/\")[0];else if (data.url.startsWith(ew.API_URL)) action = data.url.replace(ew.API_URL, \"\").split(\"/\")[0];\r\n    } else {\r\n      action = data.action;\r\n      delete data.action;\r\n    }\r\n\r\n    var obj = Object.assign({}, data);\r\n\r\n    var _convert = function _convert(response) {\r\n      if ($__default['default'].isObject(response) && response.result == \"OK\") {\r\n        var results = response.records;\r\n\r\n        if (Array.isArray(results) && results.length == 1) {\r\n          // Single row\r\n          results = results[0];\r\n          if (Array.isArray(results) && results.length == 1) // Single column\r\n            return results[0]; // Return a value\r\n          else return results; // Return a row\r\n        }\r\n\r\n        return results;\r\n      }\r\n\r\n      return response;\r\n    };\r\n\r\n    var url = obj.url || getApiUrl(action),\r\n        // URL\r\n    type = obj.type || ([ew.API_LIST_ACTION, ew.API_VIEW_ACTION, ew.API_DELETE_ACTION].includes(action) ? \"GET\" : \"POST\");\r\n    delete obj.url;\r\n    delete obj.type;\r\n    obj.dataType = \"json\";\r\n\r\n    if (isFunction(callback)) {\r\n      // Async\r\n      $__default['default'].ajax({\r\n        url: url,\r\n        type: type,\r\n        data: obj,\r\n        success: function success(response) {\r\n          callback(_convert(response));\r\n        }\r\n      });\r\n    } else {\r\n      // Sync\r\n      var response = $__default['default'].ajax({\r\n        url: url,\r\n        async: false,\r\n        type: type,\r\n        data: obj\r\n      });\r\n      return _convert(response.responseJSON);\r\n    }\r\n  } // Get URL of current page\r\n\r\n  function currentPage() {\r\n    return location.href.split(\"#\")[0].split(\"?\")[0];\r\n  } // Toggle search operator\r\n\r\n  function toggleSearchOperator(id, value) {\r\n    var el = this.form.elements[id];\r\n    if (!el) return;\r\n    el.value = el.value != value ? value : \"=\";\r\n  } // Validators\r\n  // Check US Date format (mm/dd/yyyy)\r\n\r\n  function checkUSDate(object_value) {\r\n    return checkDateEx(object_value, \"us\", ew.DATE_SEPARATOR);\r\n  } // Check US Date format (mm/dd/yy)\r\n\r\n  function checkShortUSDate(object_value) {\r\n    return checkDateEx(object_value, \"usshort\", ew.DATE_SEPARATOR);\r\n  } // Check Date format (yyyy/mm/dd)\r\n\r\n  function checkDate(object_value) {\r\n    return checkDateEx(object_value, \"std\", ew.DATE_SEPARATOR);\r\n  } // Check Date format (yy/mm/dd)\r\n\r\n  function checkShortDate(object_value) {\r\n    return checkDateEx(object_value, \"stdshort\", ew.DATE_SEPARATOR);\r\n  } // Check Euro Date format (dd/mm/yyyy)\r\n\r\n  function checkEuroDate(object_value) {\r\n    return checkDateEx(object_value, \"euro\", ew.DATE_SEPARATOR);\r\n  } // Check Euro Date format (dd/mm/yy)\r\n\r\n  function checkShortEuroDate(object_value) {\r\n    return checkDateEx(object_value, \"euroshort\", ew.DATE_SEPARATOR);\r\n  } // Check default date format\r\n\r\n  function checkDateDef(object_value) {\r\n    if (ew.DATE_FORMAT.match(/^yyyy/)) return checkDate(object_value);else if (ew.DATE_FORMAT.match(/^yy/)) return checkShortDate(object_value);else if (ew.DATE_FORMAT.match(/^m/) && ew.DATE_FORMAT.match(/yyyy$/)) return checkUSDate(object_value);else if (ew.DATE_FORMAT.match(/^m/) && ew.DATE_FORMAT.match(/yy$/)) return checkShortUSDate(object_value);else if (ew.DATE_FORMAT.match(/^d/) && ew.DATE_FORMAT.match(/yyyy$/)) return checkEuroDate(object_value);else if (ew.DATE_FORMAT.match(/^d/) && ew.DATE_FORMAT.match(/yy$/)) return checkShortEuroDate(object_value);\r\n    return false;\r\n  } // Check date format\r\n  // format: std/stdshort/us/usshort/euro/euroshort\r\n\r\n  function checkDateEx(value, format, sep) {\r\n    if (!value || value.length == \"\") return true;\r\n    value = value.replace(/ +/g, \" \").trim();\r\n    var arDT = value.split(\" \");\r\n\r\n    if (arDT.length > 0) {\r\n      var re, ar, sYear, sMonth, sDay;\r\n      re = /^(\\d{4})-([0][1-9]|[1][0-2])-([0][1-9]|[1|2]\\d|[3][0|1])$/;\r\n\r\n      if (ar = re.exec(arDT[0])) {\r\n        sYear = ar[1];\r\n        sMonth = ar[2];\r\n        sDay = ar[3];\r\n      } else {\r\n        var wrksep = escapeRegExChars(sep);\r\n\r\n        switch (format) {\r\n          case \"std\":\r\n            re = new RegExp(\"^(\\\\d{4})\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])$\");\r\n            break;\r\n\r\n          case \"stdshort\":\r\n            re = new RegExp(\"^(\\\\d{2})\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])$\");\r\n            break;\r\n\r\n          case \"us\":\r\n            re = new RegExp(\"^([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"(\\\\d{4})$\");\r\n            break;\r\n\r\n          case \"usshort\":\r\n            re = new RegExp(\"^([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"(\\\\d{2})$\");\r\n            break;\r\n\r\n          case \"euro\":\r\n            re = new RegExp(\"^([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"(\\\\d{4})$\");\r\n            break;\r\n\r\n          case \"euroshort\":\r\n            re = new RegExp(\"^([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"(\\\\d{2})$\");\r\n            break;\r\n        }\r\n\r\n        if (!re.test(arDT[0])) return false;\r\n        var arD = arDT[0].split(sep);\r\n\r\n        switch (format) {\r\n          case \"std\":\r\n          case \"stdshort\":\r\n            sYear = unformatYear(arD[0]);\r\n            sMonth = arD[1];\r\n            sDay = arD[2];\r\n            break;\r\n\r\n          case \"us\":\r\n          case \"usshort\":\r\n            sYear = unformatYear(arD[2]);\r\n            sMonth = arD[0];\r\n            sDay = arD[1];\r\n            break;\r\n\r\n          case \"euro\":\r\n          case \"euroshort\":\r\n            sYear = unformatYear(arD[2]);\r\n            sMonth = arD[1];\r\n            sDay = arD[0];\r\n            break;\r\n        }\r\n      }\r\n\r\n      if (!checkDay(sYear, sMonth, sDay)) return false;\r\n    }\r\n\r\n    if (arDT.length > 1 && !checkTime(arDT[1])) return false;\r\n    return true;\r\n  } // Unformat 2 digit year to 4 digit year\r\n\r\n  function unformatYear(yr) {\r\n    if (yr.length == 2) return yr > ew.UNFORMAT_YEAR ? \"19\" + yr : \"20\" + yr;\r\n    return yr;\r\n  } // Check day\r\n\r\n  function checkDay(checkYear, checkMonth, checkDay) {\r\n    checkYear = parseInt(checkYear, 10);\r\n    checkMonth = parseInt(checkMonth, 10);\r\n    checkDay = parseInt(checkDay, 10);\r\n    var maxDay = [4, 6, 9, 11].includes(checkMonth) ? 30 : 31;\r\n    if (checkMonth == 2) maxDay = checkYear % 4 > 0 || checkYear % 100 == 0 && checkYear % 400 > 0 ? 28 : 29;\r\n    return checkRange(checkDay, 1, maxDay);\r\n  } // Check integer\r\n\r\n  function checkInteger(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    if (object_value.includes(ew.DECIMAL_POINT)) return false;\r\n    return checkNumber(object_value);\r\n  } // Check number\r\n\r\n  function checkNumber(object_value) {\r\n    object_value = String(object_value);\r\n    if (!object_value || object_value.length == 0) return true;\r\n    object_value = object_value.trim();\r\n    var ts = escapeRegExChars(ew.THOUSANDS_SEP),\r\n        dp = escapeRegExChars(ew.DECIMAL_POINT),\r\n        re = new RegExp(\"^[+-]?(\\\\d{1,3}(\" + (ts ? ts + \"?\" : \"\") + \"\\\\d{3})*(\" + dp + \"\\\\d+)?|\" + dp + \"\\\\d+)$\");\r\n    return re.test(object_value);\r\n  } // Convert to float\r\n\r\n  function stringToFloat(object_value) {\r\n    object_value = String(object_value);\r\n\r\n    if (ew.THOUSANDS_SEP != \"\") {\r\n      var re = new RegExp(escapeRegExChars(ew.THOUSANDS_SEP), \"g\");\r\n      object_value = object_value.replace(re, \"\");\r\n    }\r\n\r\n    if (ew.DECIMAL_POINT != \"\") object_value = object_value.replace(ew.DECIMAL_POINT, \".\");\r\n    return parseFloat(object_value);\r\n  } // Convert string (yyyy-mm-dd hh:mm:ss) to date object\r\n\r\n  function stringToDate(object_value) {\r\n    var re = /^(\\d{4})-([0][1-9]|[1][0-2])-([0][1-9]|[1|2]\\d|[3][0|1]) (?:(0\\d|1\\d|2[0-3]):([0-5]\\d):([0-5]\\d))?$/;\r\n    var ar = object_value.replace(re, \"$1 $2 $3 $4 $5 $6\").split(\" \");\r\n    return new Date(ar[0], ar[1] - 1, ar[2], ar[3], ar[4], ar[5]);\r\n  } // Escape regular expression chars\r\n\r\n  function escapeRegExChars(str) {\r\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\r\n  } // Check range\r\n\r\n  function checkRange(object_value, min_value, max_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n\r\n    if ($__default['default'].isNumber(min_value) || $__default['default'].isNumber(max_value)) {\r\n      // Number\r\n      if (checkNumber(object_value)) object_value = stringToFloat(object_value);\r\n    }\r\n\r\n    if (!$__default['default'].isNull(min_value) && object_value < min_value) return false;\r\n    if (!$__default['default'].isNull(max_value) && object_value > max_value) return false;\r\n    return true;\r\n  } // Check time\r\n\r\n  function checkTime(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    object_value = object_value.trim();\r\n    var re = new RegExp('^(0\\\\d|1\\\\d|2[0-3])' + escapeRegExChars(ew.TIME_SEPARATOR) + '[0-5]\\\\d(( (' + escapeRegExChars(ew.language.phrase(\"AM\")) + '|' + escapeRegExChars(ew.language.phrase(\"PM\")) + '))|(' + escapeRegExChars(ew.TIME_SEPARATOR) + '[0-5]\\\\d(\\\\.\\\\d+|[+-][\\\\d:]+)?)?)$', 'i');\r\n    return re.test(object_value);\r\n  } // Check phone\r\n\r\n  function checkPhone(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^\\(\\d{3}\\) ?\\d{3}( |-)?\\d{4}|^\\d{3}( |-)?\\d{3}( |-)?\\d{4}$/.test(object_value.trim());\r\n  } // Check zip\r\n\r\n  function checkZip(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^\\d{5}$|^\\d{5}-\\d{4}$/.test(object_value.trim());\r\n  } // Check credit card\r\n\r\n  function checkCreditCard(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    var creditcard_string = object_value.replace(/\\D/g, \"\");\r\n    if (creditcard_string.length == 0) return false;\r\n    var doubledigit = creditcard_string.length % 2 == 1 ? false : true;\r\n    var tempdigit,\r\n        checkdigit = 0;\r\n\r\n    for (var i = 0, len = creditcard_string.length; i < len; i++) {\r\n      tempdigit = parseInt(creditcard_string.charAt(i), 10);\r\n\r\n      if (doubledigit) {\r\n        tempdigit *= 2;\r\n        checkdigit += tempdigit % 10;\r\n        if (tempdigit / 10 >= 1.0) checkdigit++;\r\n        doubledigit = false;\r\n      } else {\r\n        checkdigit += tempdigit;\r\n        doubledigit = true;\r\n      }\r\n    }\r\n\r\n    return checkdigit % 10 == 0;\r\n  } // Check social security number\r\n\r\n  function checkSsn(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^(?!000)([0-6]\\d{2}|7([0-6]\\d|7[012]))([ -]?)(?!00)\\d\\d\\3(?!0000)\\d{4}$/.test(object_value.trim());\r\n  } // Check emails\r\n\r\n  function checkEmails(object_value, email_cnt) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    var arEmails = object_value.replace(/,/g, \";\").split(\";\");\r\n\r\n    for (var i = 0, len = arEmails.length; i < len; i++) {\r\n      if (email_cnt > 0 && len > email_cnt) return false;\r\n      if (!checkEmail(arEmails[i])) return false;\r\n    }\r\n\r\n    return true;\r\n  } // Check email\r\n\r\n  function checkEmail(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^[\\w.%+-]+@[\\w.-]+\\.[A-Z]{2,18}$/i.test(object_value.trim());\r\n  } // Check GUID {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}\r\n\r\n  function checkGuid(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^(\\{\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12}\\}|\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12})$/.test(object_value.trim());\r\n  } // Check by regular expression\r\n\r\n  function checkByRegEx(object_value, pattern) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return !!object_value.match(pattern);\r\n  }\r\n  /**\r\n   * Show message dialog\r\n   *\r\n   * @param {Event|string} arg - Event or message\r\n   * @returns\r\n   */\r\n\r\n  function showMessage(arg) {\r\n    var _arg$target;\r\n\r\n    var doc, swal;\r\n\r\n    try {\r\n      var win = window.parent; // Note: If a window does not have a parent, its parent property is a reference to itself.\r\n\r\n      doc = win.document;\r\n      swal = win.Swal;\r\n    } catch (e) {\r\n      // In case win.document cannot be accessed\r\n      doc = window.document;\r\n      swal = window.Swal;\r\n    }\r\n\r\n    var p = (_arg$target = arg === null || arg === void 0 ? void 0 : arg.target) !== null && _arg$target !== void 0 ? _arg$target : doc,\r\n        $div = $__default['default'](p).find(\"div.ew-message-dialog:hidden\").first(),\r\n        msg = $div.length ? $div.text() : \"\"; // Text only\r\n\r\n    if ($__default['default'].isString(arg)) msg = $__default['default'](\"<div>\" + arg.trim() + \"</div>\").text();\r\n    if (msg.trim() == \"\") return;\r\n\r\n    if ($div.length) {\r\n      [\"success\", \"info\", \"warning\", \"danger\"].forEach(function (value, index) {\r\n        var $alert = $div.find(\".alert-\" + value).toggleClass(\"alert-\" + value),\r\n            $heading = $alert.find(\".alert-heading\").detach(),\r\n            $content = $alert.children(\":not(.icon)\");\r\n        $alert.find(\".icon\").remove();\r\n\r\n        if ($alert[0]) {\r\n          var w = parseInt($content.css(\"width\"), 10); // Width specified\r\n\r\n          if (w > 0) $content.first().css(\"width\", \"auto\");\r\n          var $toast = toast({\r\n            class: \"ew-toast bg-\" + value,\r\n            title: $heading[0] ? $heading.html() : ew.language.phrase(value),\r\n            body: $alert.html(),\r\n            autohide: value == \"success\" ? ew.autoHideSuccessMessage : false,\r\n            // Autohide for success message\r\n            delay: value == \"success\" ? ew.autoHideSuccessMessageDelay : 500\r\n          });\r\n          if (w > 0) $toast.css(\"max-width\", w); // Override bootstrap .toast max-width\r\n\r\n          return;\r\n        }\r\n      });\r\n    }\r\n\r\n    if ($__default['default'].isString(arg)) {\r\n      return swal.fire(_objectSpread(_objectSpread({}, ew.sweetAlertSettings), {}, {\r\n        html: arg\r\n      }));\r\n    }\r\n  } // Random number\r\n\r\n  function random() {\r\n    return Math.floor(Math.random() * 100001) + 100000;\r\n  } // File upload\r\n\r\n  function upload(input) {\r\n    var $input = $__default['default'](input);\r\n    if ($input.data(\"blueimpFileupload\")) return;\r\n    var id = $input.attr(\"name\"),\r\n        nid = id.replace(/\\$/g, \"\\\\$\"),\r\n        tbl = $input.data(\"table\"),\r\n        multiple = $input.is(\"[multiple]\"),\r\n        $p = $input.closest(\".form-group, [id^='el']\"),\r\n        readonly = $input.prop(\"disabled\") || $input.closest(\"form\").find(\"#confirm\").val() == \"confirm\",\r\n        $ft = $p.find(\"#ft_\" + nid),\r\n        $fn = $p.find(\"#fn_\" + nid),\r\n        $fa = $p.find(\"#fa_\" + nid),\r\n        $fs = $p.find(\"#fs_\" + nid),\r\n        $exts = $p.find(\"#fx_\" + nid),\r\n        $maxsize = $p.find(\"#fm_\" + nid),\r\n        $maxfilecount = $p.find(\"#fc_\" + nid),\r\n        $label = $p.find(\".custom-file-label\"),\r\n        label = $label.html();\r\n\r\n    var _done = function _done(e, data) {\r\n      if (data.result.files[0].error) return;\r\n      var name = data.result.files[0].name;\r\n      var ar = multiple ? $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [] : [];\r\n      ar.push(name);\r\n      $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n      $fa.val(\"0\");\r\n      if (!multiple) // Remove other entries if not multiple upload\r\n        $ft.children(\"tr:not(:last-child)\").remove();\r\n    };\r\n\r\n    var _deleted = function _deleted(e, data) {\r\n      var url = $__default['default'](e.originalEvent.target).data(\"url\"),\r\n          param = new URLSearchParams(url.split(\"?\")[1]),\r\n          fid = param.get(\"id\"),\r\n          name = param.get(fid);\r\n\r\n      if (name) {\r\n        var ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n        var index = ar.indexOf(name);\r\n        if (index > -1) ar.splice(index, 1);\r\n        $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n        $fa.val(\"0\");\r\n      }\r\n    };\r\n\r\n    var _change = function _change(e, data) {\r\n      var _data$files;\r\n\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files = data.files) === null || _data$files === void 0 ? void 0 : _data$files.length) > 0);\r\n      var ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n\r\n      for (var i = 0; i < data.files.length; i++) {\r\n        ar.push(data.files[i].name);\r\n      }\r\n\r\n      var cnt = parseInt($maxfilecount.val(), 10);\r\n\r\n      if ($__default['default'].isNumber(cnt) && cnt > 0 && ar.length > cnt) {\r\n        _alert(ew.language.phrase(\"UploadErrMsgMaxNumberOfFiles\"));\r\n\r\n        return false;\r\n      }\r\n\r\n      var l = parseInt($fs.val(), 10);\r\n\r\n      if ($__default['default'].isNumber(l) && l > 0 && ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR).length > l) {\r\n        _alert(ew.language.phrase(\"UploadErrMsgMaxFileLength\"));\r\n\r\n        return false;\r\n      }\r\n    };\r\n\r\n    var _confirmDelete = function _confirmDelete(e) {\r\n      if (!multiple && $fn.val()) {\r\n        if (!confirm(ew.language.phrase(\"UploadOverwrite\"))) {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }\r\n      }\r\n    };\r\n\r\n    var _changed = function _changed(e, data) {\r\n      var _data$files2, _data$result, _data$result$files;\r\n\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files2 = data.files) === null || _data$files2 === void 0 ? void 0 : _data$files2.length) > 0 || ((_data$result = data.result) === null || _data$result === void 0 ? void 0 : (_data$result$files = _data$result.files) === null || _data$result$files === void 0 ? void 0 : _data$result$files.length) > 0);\r\n      var ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n      $label.html(ar.join(\", \") || label);\r\n    }; // var _clicked = function() {\r\n    //     $input.closest(\"span.fileinput-button\").tooltip(\"hide\");\r\n    // };\r\n    // var _process = function(e, data) {\r\n    //     $ft.toggleClass(\"ew-has-rows\", data.files?.length > 0);\r\n    // };\r\n\r\n    var _downloadTemplate = $__default['default'].templates(\"#template-download\"),\r\n        _uploadTemplate = $__default['default'].templates(\"#template-upload\");\r\n\r\n    var _completed = function _completed(e, data) {\r\n      // After download template rendered\r\n      var e = {\r\n        target: data.context\r\n      };\r\n      initLightboxes(e);\r\n      initPdfObjects(e);\r\n      ew.updateDropdownPosition();\r\n      data.context.find(\"img\").on(\"load\", ew.updateDropdownPosition);\r\n    };\r\n\r\n    var _added = function _added(e, data) {\r\n      var _data$files3;\r\n\r\n      // After upload template rendered\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files3 = data.files) === null || _data$files3 === void 0 ? void 0 : _data$files3.length) > 0);\r\n      data.context.find(\".start\").click(_confirmDelete);\r\n    }; // Hide input button if readonly\r\n\r\n    var form = getForm(input),\r\n        $form = $__default['default'](form),\r\n        readonly = $form.find(\"#confirm\").val() == \"confirm\" || $input.attr(\"readonly\");\r\n    if (readonly) $input.prop(\"disabled\", true); // $form.find(\"span.fileinput-button\").hide();\r\n\r\n    var cnt = parseInt($maxfilecount.val(), 10);\r\n    var uploadUrl = getApiUrl(ew.API_JQUERY_UPLOAD_ACTION);\r\n    var formData = {\r\n      id: id,\r\n      table: tbl,\r\n      session: ew.SESSION_ID,\r\n      replace: multiple ? \"0\" : \"1\",\r\n      exts: $exts.val(),\r\n      maxsize: $maxsize.val(),\r\n      maxfilecount: $maxfilecount.val()\r\n    };\r\n    $input.fileupload({\r\n      url: uploadUrl,\r\n      type: \"POST\",\r\n      multipart: true,\r\n      autoUpload: true,\r\n      // Comment out to disable auto upload\r\n      loadImageFileTypes: /^image\\/(gif|jpe?g|png)$/i,\r\n      loadVideoFileTypes: /^video\\/mp4$/i,\r\n      loadAudioFileTypes: /^audio\\/(mpeg|mp3)$/i,\r\n      acceptFileTypes: $exts.val() ? new RegExp('\\\\.(' + $exts.val().replace(/,/g, '|') + ')$', 'i') : null,\r\n      maxFileSize: parseInt($maxsize.val(), 10),\r\n      maxNumberOfFiles: cnt > 1 ? cnt : null,\r\n      filesContainer: $ft,\r\n      formData: formData,\r\n      uploadTemplateId: null,\r\n      downloadTemplateId: null,\r\n      uploadTemplate: _uploadTemplate.render.bind(_uploadTemplate),\r\n      downloadTemplate: _downloadTemplate.render.bind(_downloadTemplate),\r\n      previewMaxWidth: ew.UPLOAD_THUMBNAIL_WIDTH,\r\n      previewMaxHeight: ew.UPLOAD_THUMBNAIL_HEIGHT,\r\n      dropZone: $p,\r\n      pasteZone: $p,\r\n      messages: {\r\n        acceptFileTypes: ew.language.phrase(\"UploadErrMsgAcceptFileTypes\"),\r\n        maxFileSize: ew.language.phrase(\"UploadErrMsgMaxFileSize\"),\r\n        maxNumberOfFiles: ew.language.phrase(\"UploadErrMsgMaxNumberOfFiles\"),\r\n        minFileSize: ew.language.phrase(\"UploadErrMsgMinFileSize\")\r\n      },\r\n      readonly: readonly // Custom\r\n\r\n    }).on(\"fileuploaddone\", _done).on(\"fileuploaddestroy\", _deleted).on(\"fileuploadchange\", _change).on(\"fileuploadadded fileuploadfinished fileuploaddestroyed\", _changed) //.on(\"fileuploadprocess\", _process)\r\n    .on('fileuploadadded', _added).on('fileuploadcompleted', _completed); // .click(_clicked);\r\n\r\n    if ($fn.val()) {\r\n      $__default['default'].ajax({\r\n        url: uploadUrl,\r\n        data: {\r\n          id: id,\r\n          table: tbl,\r\n          session: ew.SESSION_ID\r\n        },\r\n        dataType: \"json\",\r\n        context: this,\r\n        success: function success(result) {\r\n          if (result && result[id]) {\r\n            var done = $input.fileupload(\"option\", \"done\");\r\n            if (done) done.call(input, $__default['default'].Event(), {\r\n              result: {\r\n                files: result[id]\r\n              }\r\n            }); // Use \"files\"\r\n          }\r\n\r\n          if (readonly) // Hide delete button if readonly\r\n            $ft.find(\"td.delete\").hide();\r\n        }\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Convert data to number\r\n   *\r\n   * @param {*} data - Data being converted\r\n   * @param {Object} [config] - Configuration\r\n   * @param {string} config.decimalSeparator - Decimal separator\r\n   * @param {string} config.thousandsSeparator - Thousands separator\r\n   * @returns {(number|null)}\r\n   */\r\n\r\n  function parseNumber(data, config) {\r\n    if ($__default['default'].isString(data)) {\r\n      config = config || {\r\n        \"thousandsSeparator\": ew.THOUSANDS_SEP,\r\n        \"decimalSeparator\": ew.DECIMAL_POINT\r\n      };\r\n      var regexBits = [],\r\n          regex,\r\n          separator = config.thousandsSeparator,\r\n          decimal = config.decimalSeparator;\r\n      if (separator) regexBits.push(escapeRegExChars(separator) + \"(?=\\\\d)\");\r\n      regex = new RegExp(\"(?:\" + regexBits.join(\"|\") + \")\", \"g\");\r\n      if (decimal === \".\") decimal = null;\r\n      data = data.replace(regex, \"\");\r\n      data = decimal ? data.replace(decimal, \".\") : data;\r\n    }\r\n\r\n    if ($__default['default'].isString(data) && data.trim() !== \"\") data = +data;\r\n    if (!$__default['default'].isNumber || !isFinite(data)) // Catch NaN and Infinity\r\n      data = null;\r\n    return data;\r\n  }\r\n  /**\r\n   * Format a Number to string for display\r\n   *\r\n   * @param {*} data - Data being converted\r\n   * @param {Object} [config] - Configuration\r\n   * @param {number} config.decimalPlaces - Number of decimal places to round. Must be a number 0 to 20.\r\n   * @param {string} config.decimalSeparator - Decimal separator\r\n   * @param {string} config.thousandsSeparator - Thousands separator\r\n   * @returns {string} Note: null, undefined, NaN and \"\" returns as \"\".\r\n   */\r\n\r\n  function formatNumber(data, config) {\r\n    if ($__default['default'].isNumber(data)) {\r\n      config = config || {\r\n        \"thousandsSeparator\": ew.THOUSANDS_SEP,\r\n        \"decimalSeparator\": ew.DECIMAL_POINT\r\n      };\r\n      var isNeg = data < 0,\r\n          output = data + \"\",\r\n          decPlaces = config.decimalPlaces,\r\n          decSep = config.decimalSeparator || \".\",\r\n          thouSep = config.thousandsSeparator,\r\n          decIndex,\r\n          newOutput,\r\n          count,\r\n          i;\r\n      if ($__default['default'].isNumber(decPlaces) && decPlaces >= 0 && decPlaces <= 20) // Decimal precision\r\n        output = data.toFixed(decPlaces);\r\n      if (decSep !== \".\") // Decimal separator\r\n        output = output.replace(\".\", decSep);\r\n\r\n      if (thouSep) {\r\n        // Add the thousands separator\r\n        decIndex = output.lastIndexOf(decSep); // Find the dot or where it would be\r\n\r\n        decIndex = decIndex > -1 ? decIndex : output.length;\r\n        newOutput = output.substring(decIndex); // Start with the dot and everything to the right\r\n\r\n        for (count = 0, i = decIndex; i > 0; i--) {\r\n          // Working left, every third time add a separator, every time add a digit\r\n          if (count % 3 === 0 && i !== decIndex && (!isNeg || i > 1)) newOutput = thouSep + newOutput;\r\n          newOutput = output.charAt(i - 1) + newOutput;\r\n          count++;\r\n        }\r\n\r\n        output = newOutput;\r\n      }\r\n\r\n      return output;\r\n    } else {\r\n      // Not a Number, return as string\r\n      return $__default['default'].isValue(data) && data.toString ? data.toString() : \"\";\r\n    }\r\n  }\r\n  /**\r\n   * Convert data to Moment object (see http://momentjs.com/docs/)\r\n   *\r\n   * @param {*} data - Data being converted\r\n   * @param {number} format - Date format matching server side FormatDateTime()\r\n   * @returns {Moment}\r\n   */\r\n\r\n  function parseDate(data, format) {\r\n    var args = $__default['default'].makeArray(arguments);\r\n\r\n    if ($__default['default'].isNumber(format) && format >= 0 && format <= 17) {\r\n      var f,\r\n          def = ew.DATE_FORMAT.toUpperCase(),\r\n          sep = ew.DATE_SEPARATOR,\r\n          timesep = ew.TIME_SEPARATOR;\r\n\r\n      switch (format) {\r\n        case 0:\r\n        case 1:\r\n        case 2:\r\n        case 8:\r\n          f = def + \" HH\" + timesep + \"mm\" + timesep + \"ss\";\r\n          break;\r\n        // ew.DATE_FORMAT + \" %H:%M:%S\"\r\n\r\n        case 3:\r\n          f = \"hh:mm:ss A\";\r\n          break;\r\n        // \"%I:%M:%S %p\"\r\n\r\n        case 4:\r\n          f = \"HH:mm:ss\";\r\n          break;\r\n        // \"%H:%M:%S\"\r\n\r\n        case 5:\r\n          f = \"YYYY\" + sep + \"MM\" + sep + \"DD\";\r\n          break;\r\n        // \"%Y\" + sep + \"%m\" + sep + \"%d\"\r\n\r\n        case 6:\r\n          f = \"MM\" + sep + \"DD\" + sep + \"YYYY\";\r\n          break;\r\n        // \"%m\" + sep + \"%d\" + sep + \"%Y\"\r\n\r\n        case 7:\r\n          f = \"DD\" + sep + \"MM\" + sep + \"YYYY\";\r\n          break;\r\n        // \"%d\" + sep + \"%m\" + sep + \"%Y\"\r\n\r\n        case 9:\r\n          f = \"YYYY\" + sep + \"MM\" + sep + \"DD HH\" + timesep + \"mm\" + timesep + \"ss\";\r\n          break;\r\n        // \"%Y\" + sep + \"%m\" + sep + \"%d %H:%M:%S\"\r\n\r\n        case 10:\r\n          f = \"MM\" + sep + \"DD\" + sep + \"YYYY HH\" + timesep + \"mm\" + timesep + \"ss\";\r\n          break;\r\n        // \"%m\" + sep + \"%d\" + sep + \"%Y %H:%M:%S\"\r\n\r\n        case 11:\r\n          f = \"DD\" + sep + \"MM\" + sep + \"YYYY HH\" + timesep + \"mm\" + timesep + \"ss\";\r\n          break;\r\n        // \"%d\" + sep + \"%m\" + sep + \"%Y %H:%M:%S\"\r\n\r\n        case 12:\r\n          f = \"YY\" + sep + \"MM\" + sep + \"DD\";\r\n          break;\r\n        // \"%y\" + sep + \"%m\" + sep + \"%d\"\r\n\r\n        case 13:\r\n          f = \"MM\" + sep + \"DD\" + sep + \"YY\";\r\n          break;\r\n        // \"%m\" + sep + \"%d\" + sep + \"%y\"\r\n\r\n        case 14:\r\n          f = \"DD\" + sep + \"MM\" + sep + \"YY\";\r\n          break;\r\n        // \"%d\" + sep + \"%m\" + sep + \"%y\"\r\n\r\n        case 15:\r\n          f = \"YY\" + sep + \"MM\" + sep + \"DD HH\" + timesep + \"mm\" + timesep + \"ss\";\r\n          break;\r\n        // \"%y\" + sep + \"%m\" + sep + \"%d %H:%M:%S\"\r\n\r\n        case 16:\r\n          f = \"MM\" + sep + \"DD\" + sep + \"YY HH\" + timesep + \"mm\" + timesep + \"ss\";\r\n          break;\r\n        // \"%m\" + sep + \"%d\" + sep + \"%y %H:%M:%S\"\r\n\r\n        case 17:\r\n          f = \"DD\" + sep + \"MM\" + sep + \"YY HH\" + timesep + \"mm\" + timesep + \"ss\";\r\n          break;\r\n        // \"%d\" + sep + \"%m\" + sep + \"%y %H:%M:%S\"\r\n      }\r\n\r\n      args[1] = [f, \"YYYY-MM-DD HH\" + timesep + \"mm\" + timesep + \"ss\"];\r\n    }\r\n\r\n    return moment.apply(this, args);\r\n  }\r\n  /**\r\n   * Format date time\r\n   *\r\n   * @param {*} data - Date being formatted\r\n   * @param {string} format - Date format (see http://momentjs.com/docs/#/displaying/format/)\r\n   * @returns {string}\r\n   */\r\n\r\n  function formatDate(data, format) {\r\n    return moment(data).format(format || ew.DATE_FORMAT.toUpperCase());\r\n  }\r\n  /**\r\n   * Init page\r\n   *\r\n   * @param {Event|undefined} e - Event\r\n   */\r\n\r\n  function initPage(e) {\r\n    var el = e && e.target ? e.target : document,\r\n        $el = $__default['default'](el),\r\n        $tables = $el.find(\"table.ew-table:not(.ew-export-table)\");\r\n    Array.prototype.forEach.call(el.querySelectorAll(\".ew-grid-upper-panel, .ew-grid-lower-panel\"), ew.initGridPanel); // Init grid panels\r\n\r\n    ew.renderJsTemplates(e);\r\n    lazyLoad(e);\r\n    initForms(e);\r\n    initTooltips(e);\r\n    initPasswordOptions(e);\r\n    initIcons(e);\r\n    initLightboxes(e);\r\n    initPdfObjects(e);\r\n    $el.find(\"[data-widget='treeview']\").each(function () {\r\n      adminlte.Treeview._jQueryInterface.call($__default['default'](this), \"init\");\r\n    });\r\n    $tables.each(setupTable); // Init tables\r\n\r\n    $el.find(\".ew-btn-dropdown\").on(\"shown.bs.dropdown\", function () {\r\n      var $this = $__default['default'](this).removeClass(\"dropup\"),\r\n          $window = $__default['default'](window),\r\n          $menu = $this.find(\"> .dropdown-menu\");\r\n      $this.toggleClass(\"dropup\", $menu.offset().top + $menu.height() > $window.scrollTop() + $window.height());\r\n    });\r\n    $el.find(\"input[name=pageno]\").on(\"keydown\", function (e) {\r\n      if (e.key == \"Enter\") {\r\n        currentUrl.searchParams.set(this.name, parseInt(this.value));\r\n        window.location = sanitizeUrl(currentUrl.toString());\r\n        return false;\r\n      }\r\n    });\r\n\r\n    if (!ew.IS_SCREEN_SM_MIN) {\r\n      $el.find(\".\" + ew.RESPONSIVE_TABLE_CLASS + \" [data-toggle='dropdown']\").parent().on(\"shown.bs.dropdown\", function () {\r\n        var $this = $__default['default'](this),\r\n            $menu = $this.find(\".dropdown-menu\"),\r\n            div = $this.closest(\".\" + ew.RESPONSIVE_TABLE_CLASS)[0];\r\n\r\n        if (div.scrollHeight - div.clientHeight) {\r\n          var d = $menu.offset().top + $menu.outerHeight() - $__default['default'](div).offset().top - div.clientHeight;\r\n          if (d > 0) $menu.css(ew.CSS_FLIP ? \"right\" : \"left\", \"100%\").css(\"top\", parseFloat($menu.css(\"top\")) - d);\r\n        }\r\n      });\r\n    }\r\n\r\n    initExportLinks(e);\r\n    initMultiSelectCheckboxes(e); // Report\r\n\r\n    var $rpt = $el.find(\".ew-report\");\r\n\r\n    if ($rpt[0]) {\r\n      $rpt.find(\".card\").on(\"collapsed.lte.widget\", function () {\r\n        // Fix min-height when .lte.widget is collapsed\r\n        var $card = $__default['default'](this),\r\n            $div = $card.closest(\"[class^='col-']\"),\r\n            mh = $div.css(\"min-height\");\r\n        if (mh) $div.data(\"min-height\", mh);\r\n        $div.css(\"min-height\", 0);\r\n      }).on(\"expanded.lte.widget\", function () {\r\n        // Fix min-height when .lte.widget is expanded\r\n        var $card = $__default['default'](this),\r\n            $div = $card.closest(\"[class^='col-']\"),\r\n            mh = $div.css(\"min-height\");\r\n        if (mh) $div.css(\"min-height\", mh); // Restore min-height\r\n      }); // Group expand/collapse button\r\n\r\n      $rpt.find(\"span.ew-group-toggle\").on(\"click\", function () {\r\n        ew.toggleGroup(this);\r\n      });\r\n    } // Show message\r\n\r\n    if (typeof ew.USE_JAVASCRIPT_MESSAGE != \"undefined\" && ew.USE_JAVASCRIPT_MESSAGE) showMessage(e);\r\n  } // Redirect by HTTP GET or POST\r\n\r\n  function redirect(url, f, method) {\r\n    var newUrl = new URL(url),\r\n        params = newUrl.searchParams;\r\n    params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // PHP\r\n\r\n    params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // PHP\r\n\r\n    if (sameText(method, \"post\")) {\r\n      // POST\r\n      var $form = f ? $__default['default'](f) : $__default['default'](\"<form></form>\").appendTo(\"body\");\r\n      $form.attr({\r\n        action: ar[0],\r\n        method: \"post\"\r\n      });\r\n      params.forEach(function (value, key) {\r\n        $__default['default']('<input type=\"hidden\">').attr({\r\n          name: key,\r\n          value: ew.sanitize(value)\r\n        }).appendTo($form);\r\n      });\r\n      $form.trigger(\"submit\");\r\n    } else {\r\n      // GET\r\n      window.location = sanitizeUrl(newUrl.toString());\r\n    }\r\n  } // Show/Hide password\r\n\r\n  function togglePassword(e) {\r\n    var $btn = $__default['default'](e.currentTarget),\r\n        $input = $btn.closest(\".input-group\").find(\"input\"),\r\n        $i = $btn.find(\"i\");\r\n\r\n    if ($input.attr(\"type\") == \"text\") {\r\n      $input.attr(\"type\", \"password\");\r\n      $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    } else if ($input.attr(\"type\") == \"password\") {\r\n      $input.attr(\"type\", \"text\");\r\n      $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    }\r\n  } // Export with charts\r\n\r\n  function exportWithCharts(e, url, exportId, f) {\r\n    var el = e.target,\r\n        exportUrl = new URL(window.location.href),\r\n        ar = url.split(\"?\"),\r\n        $el = $__default['default'](el),\r\n        method = f ? \"post\" : \"get\";\r\n    exportId += \"_\" + Date.now();\r\n    exportUrl.pathname = ar[0];\r\n    exportUrl.search = ar[1];\r\n    exportUrl.searchParams.set(\"exportid\", exportId);\r\n    if ($el.is(\".dropdown-menu a\")) $el = $el.closest(\".btn-group\");\r\n\r\n    var _export = function _export() {\r\n      var params = exportUrl.searchParams,\r\n          custom = params.get(\"custom\") == \"1\";\r\n\r\n      if (f && !custom) {\r\n        // Not custom\r\n        var data = $__default['default'](f).serialize(); // Add token\r\n\r\n        $__default['default'].post(exportUrl, data, function (result) {\r\n          showMessage(result);\r\n        });\r\n      } else {\r\n        // Custom\r\n        var exp = params.get(\"export\");\r\n\r\n        if (custom && [\"word\", \"excel\", \"pdf\", \"email\"].includes(exp)) {\r\n          if (exp == \"email\") {\r\n            params.delete(\"export\"); // Remove duplicate export=email (exists in form)\r\n\r\n            exportUrl.search = params.toString() + \"&\" + $__default['default'](f).serialize();\r\n          }\r\n\r\n          $__default['default'](\"iframe.ew-export\").remove();\r\n          $__default['default'](\"<iframe></iframe>\").addClass(\"ew-export d-none\").attr(\"src\", exportUrl.toString()).appendTo($body.css(\"cursor\", \"wait\"));\r\n          setTimeout(function () {\r\n            $body.css(\"cursor\", \"default\");\r\n          }, 5000);\r\n        } else if (exp == \"print\") {\r\n          redirect(exportUrl.toString(), f, method);\r\n        } else {\r\n          fileDownload(exportUrl.toString(), null);\r\n        }\r\n      }\r\n\r\n      return false;\r\n    };\r\n\r\n    var keys = Object.keys(window.exportCharts);\r\n    if (keys.length == 0) // No charts, just submit the form\r\n      return _export(); // Success callback\r\n\r\n    var success = function success(result) {\r\n      if ($__default['default'].isString(result)) result = parseJson(result);\r\n\r\n      if (result.success) {\r\n        _export();\r\n      } else {\r\n        ew.alert(result.error);\r\n      }\r\n    }; // Failure callback\r\n\r\n    var fail = function fail(xhr, status, error) {\r\n      ew.alert(error + \": \" + xhr.responseText); // Show detailed export error message\r\n    }; // Export charts\r\n\r\n    $body.css(\"cursor\", \"wait\");\r\n    var charts = [];\r\n\r\n    for (var i = 0; i < keys.length; i++) {\r\n      var id = keys[i],\r\n          o = window.exportCharts[id],\r\n          params = \"exportfilename=\" + exportId + \"_\" + id + \".png|exportformat=png|exportaction=download|exportparameters=undefined\";\r\n      if (o && o.toBase64Image) // Chart.js chart\r\n        charts.push({\r\n          \"chart_engine\": \"Chart.js\",\r\n          \"stream_type\": \"base64\",\r\n          \"stream\": o.toBase64Image(),\r\n          \"parameters\": params\r\n        });\r\n    }\r\n\r\n    $__default['default'].ajax({\r\n      \"url\": getApiUrl(ew.API_EXPORT_CHART_ACTION),\r\n      \"data\": {\r\n        \"charts\": JSON.stringify(charts)\r\n      },\r\n      \"cache\": false,\r\n      \"type\": \"POST\"\r\n    }).done(success).fail(fail).always(function () {\r\n      $body.css(\"cursor\", \"default\");\r\n    });\r\n    return false;\r\n  } // Layout\r\n\r\n  var _fixLayoutHeightTimer; // Fix layout height\r\n\r\n  function fixLayoutHeight() {\r\n    if (_fixLayoutHeightTimer) _fixLayoutHeightTimer.cancel(); // Clear timer\r\n\r\n    _fixLayoutHeightTimer = $__default['default'].later(50, null, function () {\r\n      var layout = $body.data(\"lte.layout\");\r\n      if (layout) layout.fixLayoutHeight();\r\n    });\r\n  } // Add user event handlers\r\n\r\n  function addEventHandlers(tblVar) {\r\n    var fields = ew.events[tblVar];\r\n\r\n    if (fields) {\r\n      for (var _i = 0, _Object$entries = Object.entries(fields); _i < _Object$entries.length; _i++) {\r\n        var _Object$entries$_i = _Object$entries[_i],\r\n            fldVar = _Object$entries$_i[0],\r\n            events = _Object$entries$_i[1];\r\n        $__default['default']('[data-table=' + tblVar + '][data-field=' + fldVar + ']').on(events);\r\n      }\r\n    }\r\n  }\n\n  var functions = {\n    __proto__: null,\n    currentUrl: currentUrl,\n    forms: forms,\n    AjaxLookup: AjaxLookup,\n    AutoSuggest: AutoSuggest,\n    Form: Form,\n    SelectionListOption: SelectionListOption,\n    removeSpinner: removeSpinner,\n    createSelect: createSelect,\n    initIcons: initIcons,\n    initPasswordOptions: initPasswordOptions,\n    getApiUrl: getApiUrl,\n    sanitizeUrl: sanitizeUrl,\n    setSessionTimer: setSessionTimer,\n    initExportLinks: initExportLinks,\n    initMultiSelectCheckboxes: initMultiSelectCheckboxes,\n    fileDownload: fileDownload,\n    lazyLoad: lazyLoad,\n    updateDropdownPosition: updateDropdownPosition,\n    initLightboxes: initLightboxes,\n    initPdfObjects: initPdfObjects,\n    initTooltips: initTooltips,\n    parseJson: parseJson,\n    searchOperatorChanged: searchOperatorChanged,\n    isFunction: isFunction,\n    prompt: _prompt,\n    toast: toast,\n    showToast: showToast,\n    getForm: getForm,\n    hasFormData: hasFormData,\n    setSearchType: setSearchType,\n    updateOptions: updateOptions,\n    getUserParams: getUserParams,\n    applyTemplate: applyTemplate,\n    toggleGroup: toggleGroup,\n    convertToBool: convertToBool,\n    valueChanged: valueChanged,\n    setLanguage: setLanguage,\n    submitAction: submitAction,\n    'export': _export,\n    removeSpaces: removeSpaces,\n    isHiddenTextArea: isHiddenTextArea,\n    isModalLookup: isModalLookup,\n    isAutoSuggest: isAutoSuggest,\n    alert: _alert,\n    clearError: clearError,\n    onError: onError,\n    setFocus: setFocus,\n    setInvalid: setInvalid,\n    hasValue: hasValue,\n    isMaskedPassword: isMaskedPassword,\n    sort: sort,\n    confirmDelete: confirmDelete,\n    keySelected: keySelected,\n    selectAllKey: selectAllKey,\n    selectAll: selectAll,\n    updateSelected: updateSelected,\n    setColor: setColor,\n    clearSelected: clearSelected,\n    clearDelete: clearDelete,\n    clickDelete: clickDelete,\n    clickMultiCheckbox: clickMultiCheckbox,\n    setupTable: setupTable,\n    setupGrid: setupGrid,\n    addGridRow: addGridRow,\n    deleteGridRow: deleteGridRow,\n    htmlEncode: htmlEncode,\n    getElements: getElements,\n    getElement: getElement,\n    getAncestorBy: getAncestorBy,\n    isHidden: isHidden,\n    sameText: sameText,\n    sameString: sameString,\n    getValue: getValue,\n    getOptionValues: getOptionValues,\n    getOptionTexts: getOptionTexts,\n    clearOptions: clearOptions,\n    getId: getId,\n    valueSeparator: valueSeparator,\n    displayValue: displayValue,\n    optionHtml: optionHtml,\n    optionsHtml: optionsHtml,\n    newOption: newOption,\n    selectOption: selectOption,\n    executeScript: executeScript,\n    stripScript: stripScript,\n    addScript: addScript,\n    removeScript: removeScript,\n    getContent: getContent,\n    getOptions: getOptions,\n    addOptionDialogShow: addOptionDialogShow,\n    modalDialogHide: modalDialogHide,\n    modalDialogShow: modalDialogShow,\n    modalLookupShow: modalLookupShow,\n    importDialogShow: importDialogShow,\n    autoFill: autoFill,\n    tooltip: tooltip,\n    emailDialogShow: emailDialogShow,\n    showDrillDown: showDrillDown,\n    ajax: ajax,\n    currentPage: currentPage,\n    toggleSearchOperator: toggleSearchOperator,\n    checkUSDate: checkUSDate,\n    checkShortUSDate: checkShortUSDate,\n    checkDate: checkDate,\n    checkShortDate: checkShortDate,\n    checkEuroDate: checkEuroDate,\n    checkShortEuroDate: checkShortEuroDate,\n    checkDateDef: checkDateDef,\n    checkDateEx: checkDateEx,\n    unformatYear: unformatYear,\n    checkDay: checkDay,\n    checkInteger: checkInteger,\n    checkNumber: checkNumber,\n    stringToFloat: stringToFloat,\n    stringToDate: stringToDate,\n    escapeRegExChars: escapeRegExChars,\n    checkRange: checkRange,\n    checkTime: checkTime,\n    checkPhone: checkPhone,\n    checkZip: checkZip,\n    checkCreditCard: checkCreditCard,\n    checkSsn: checkSsn,\n    checkEmails: checkEmails,\n    checkEmail: checkEmail,\n    checkGuid: checkGuid,\n    checkByRegEx: checkByRegEx,\n    showMessage: showMessage,\n    random: random,\n    upload: upload,\n    parseNumber: parseNumber,\n    formatNumber: formatNumber,\n    parseDate: parseDate,\n    formatDate: formatDate,\n    initPage: initPage,\n    redirect: redirect,\n    togglePassword: togglePassword,\n    exportWithCharts: exportWithCharts,\n    fixLayoutHeight: fixLayoutHeight,\n    addEventHandlers: addEventHandlers\n  };\n\n  ew.IS_SCREEN_SM_MIN = window.matchMedia(\"(min-width: 768px)\").matches; // Should matches $screen-sm-min\r\n\r\n  ew.MOBILE_DETECT = new MobileDetect(window.navigator.userAgent);\r\n  ew.IS_MOBILE = !!ew.MOBILE_DETECT.mobile();\r\n  ew.IS_IE = ew.MOBILE_DETECT.version(\"MSIE\") > 0; // Charts\r\n\r\n  window.exportCharts = {}; // Per window\r\n\r\n  window.drillDownCharts = {}; // Per window\r\n  // Init spinner\r\n\r\n  ew.addSpinner(); // Extend\r\n\r\n  Object.assign(ew, {\r\n    MultiPage: MultiPage,\r\n    Form: Form,\r\n    Validators: Validators\r\n  }, functions);\r\n  var $document = $__default['default'](document); // Init document\r\n\r\n  loadjs.ready(\"load\", function () {\r\n    $__default['default'].views.settings.debugMode(ew.DEBUG);\r\n    ew.setSessionTimer();\r\n    ew.initPage();\r\n    $__default['default'](\"#ew-modal-dialog\").on(\"load.ew\", ew.initPage);\r\n    $__default['default'](\"#ew-add-opt-dialog\").on(\"load.ew\", ew.initPage);\r\n    var hash = ew.currentUrl.searchParams.get(\"hash\");\r\n    if (hash) $__default['default'](\"html, body\").animate({\r\n      scrollTop: $__default['default'](\"#\" + hash).offset().top\r\n    }, 800);\r\n    ew.removeSpinner();\r\n    $document.trigger(\"load\");\r\n  }); // Default \"addoption\" event (fired before adding new option to selection list)\r\n\r\n  $document.on(\"addoption\", function (e, args) {\r\n    var row = args.data; // New row to be validated\r\n\r\n    var arp = args.parents; // Parent field values\r\n\r\n    for (var i = 0, cnt = arp.length; i < cnt; i++) {\r\n      // Iterate parent values\r\n      var p = arp[i];\r\n      if (!p.length) // Empty parent\r\n        //continue; // Allow\r\n        return args.valid = false; // Disallow\r\n\r\n      var val = row[\"ff\" + (i > 0 ? i + 1 : \"\")]; // Filter fields start from the 6th field\r\n\r\n      if (!$__default['default'].isUndefined(val) && !p.includes(String(val))) // Filter field value not in parent field values\r\n        return args.valid = false; // Returns false if invalid\r\n    }\r\n  }); // Fix z-index of multiple modals\r\n\r\n  $document.on(\"show.bs.modal\", \".modal\", function () {\r\n    var zIndex = 1050 + $__default['default'](\".modal:visible\").length;\r\n    $__default['default'](this).css(\"z-index\", zIndex);\r\n    setTimeout(function () {\r\n      $__default['default'](\".modal-backdrop\").not(\".modal-stack\").css(\"z-index\", zIndex - 1).addClass(\"modal-stack\");\r\n    }, 0);\r\n  }); // Fix scrolling of multiple modals\r\n\r\n  $document.on(\"hidden.bs.modal\", \".modal\", function () {\r\n    $__default['default'](\".modal:visible\").length && $__default['default'](\"body\").addClass(\"modal-open\");\r\n  });\n\n  $__default['default'].extend({\r\n    isBoolean: function isBoolean(o) {\r\n      return typeof o === 'boolean';\r\n    },\r\n    isNull: function isNull(o) {\r\n      return o === null;\r\n    },\r\n    isNumber: function isNumber(o) {\r\n      return typeof o === 'number' && isFinite(o);\r\n    },\r\n    isObject: function isObject(o) {\r\n      return o && (typeof o === 'object' || this.isFunction(o)) || false;\r\n    },\r\n    isString: function isString(o) {\r\n      return typeof o === 'string';\r\n    },\r\n    isUndefined: function isUndefined(o) {\r\n      return typeof o === 'undefined';\r\n    },\r\n    isValue: function isValue(o) {\r\n      return this.isObject(o) || this.isString(o) || this.isNumber(o) || this.isBoolean(o);\r\n    },\r\n    isDate: function isDate(o) {\r\n      return this.type(o) === 'date' && o.toString() !== 'Invalid Date' && !isNaN(o);\r\n    },\r\n    later: function later(when, o, fn, data, periodic) {\r\n      when = when || 0;\r\n      o = o || {};\r\n      var m = fn,\r\n          d = data,\r\n          f,\r\n          r;\r\n      if (this.isString(fn)) m = o[fn];\r\n      if (!m) return;\r\n      if (!this.isUndefined(data) && !this.isArray(d)) d = [data];\r\n\r\n      f = function f() {\r\n        m.apply(o, d || []);\r\n      };\r\n\r\n      r = periodic ? setInterval(f, when) : setTimeout(f, when);\r\n      return {\r\n        interval: periodic,\r\n        cancel: function cancel() {\r\n          if (this.interval) {\r\n            clearInterval(r);\r\n          } else {\r\n            clearTimeout(r);\r\n          }\r\n        }\r\n      };\r\n    }\r\n  });\n\n  /**\r\n   * jQuery.fields() plugin\r\n   *\r\n   * @param {string|undefined} fldvar - Field variable name or undefined\r\n   *  If field variable name, returns jQuery object of the specified field element(s).\r\n   *  If unspecified, returns object of jQuery objects of all fields.\r\n   * @returns jQuery object\r\n   */\r\n\r\n  $__default['default'].fn.fields = function (fldvar) {\r\n    // Note: fldvar has NO \"x_\" prefix\r\n    var rec = {},\r\n        id = this.attr(\"id\"),\r\n        obj = this[0],\r\n        m = id.match(/^[xy](\\d*)_/),\r\n        f,\r\n        tbl,\r\n        infix;\r\n\r\n    if (m) {\r\n      // \"this\" is input element\r\n      f = ew.getForm(obj); // form\r\n\r\n      tbl = this.data(\"table\"); // table var\r\n\r\n      infix = m[1]; // row index\r\n    } else if (obj && obj.htmlForm) {\r\n      // \"this\" is form\r\n      f = obj.$element; // form\r\n\r\n      tbl = obj.id.replace(new RegExp(\"^f|\" + obj.pageId + \"$\", \"g\"), \"\"); // table var\r\n\r\n      infix = $__default['default'](obj.htmlForm).data(\"rowindex\"); // row index\r\n    }\r\n\r\n    var selector = \"[data-table\" + (tbl ? \"=\" + tbl : \"\") + \"][data-field\" + (fldvar ? \"=x_\" + fldvar : \"\") + \"]\";\r\n    if ($__default['default'].isValue(infix)) selector += \"[name^=x\" + infix + \"_]\";\r\n\r\n    if (f && selector) {\r\n      $__default['default'](f).find(selector).each(function () {\r\n        var key = this.getAttribute(\"data-field\").substr(2),\r\n            name = this.getAttribute(\"name\");\r\n        key = /^y_/.test(name) ? \"y_\" + key : key; // Use \"y_fldvar\" as key for 2nd search input\r\n\r\n        rec[key] = rec[key] ? rec[key].add(this) : $__default['default'](this); // Create jQuery object for each field\r\n      });\r\n    }\r\n\r\n    return fldvar ? rec[fldvar] : rec;\r\n  };\r\n\r\n  $__default['default'].fn.extend({\r\n    // Get jQuery object of the row (<div> or <tr>)\r\n    row: function row() {\r\n      var _this$data;\r\n\r\n      var $row = this.closest(\"#r_\" + ((_this$data = this.data(\"field\")) === null || _this$data === void 0 ? void 0 : _this$data.substr(2)));\r\n      if (!$row[0]) $row = this.closest(\".ew-table > tbody > tr\"); // Grid page\r\n\r\n      return $row;\r\n    },\r\n    // Show/Hide field\r\n    visible: function visible(v) {\r\n      var _this$data2;\r\n\r\n      var $p = this.closest(\"#r_\" + ((_this$data2 = this.data(\"field\")) === null || _this$data2 === void 0 ? void 0 : _this$data2.substr(2))); // Find the row\r\n\r\n      if (!$p[0]) $p = this.closest(\"[id^=el]\"); // Find the span\r\n\r\n      if (typeof v != \"undefined\") {\r\n        $p.toggle(v);\r\n        return this;\r\n      } else {\r\n        return $el.is(\":visible\");\r\n      }\r\n    },\r\n    // Get/Set field \"readonly\" attribute\r\n    // Note: This attribute is ignored if the value of the type attribute is hidden, range, color, checkbox, radio, file, or a button type\r\n    readonly: function readonly(v) {\r\n      if (typeof v != \"undefined\") {\r\n        this.prop(\"readOnly\", v);\r\n        return this;\r\n      } else {\r\n        return this.prop(\"readOnly\");\r\n      }\r\n    },\r\n    // Get/Set field \"disabled\" attribute\r\n    // Note: A disabled control's value isn't submitted with the form\r\n    disabled: function disabled(v) {\r\n      if (typeof v != \"undefined\") {\r\n        this.prop(\"disabled\", v);\r\n        return this;\r\n      } else {\r\n        return this.prop(\"disabled\");\r\n      }\r\n    },\r\n    // Get/Set field value(s)\r\n    // Note: Return array if select-multiple\r\n    value: function value(v) {\r\n      var type = this.attr(\"type\");\r\n\r\n      if (typeof v != \"undefined\") {\r\n        if (!Array.isArray(v)) v = [v];\r\n        var type = this.attr(\"type\");\r\n        var el = type == \"radio\" || type == \"checkbox\" ? this.get() : this[0];\r\n\r\n        if (ew.isHiddenTextArea(this)) {\r\n          this.val(v).data(\"editor\").save();\r\n        } else {\r\n          ew.selectOption(el, v);\r\n\r\n          if (this.hasClass(\"select2-hidden-accessible\")) {\r\n            // Select2\r\n            this.trigger(\"change\");\r\n          }\r\n        }\r\n\r\n        return this;\r\n      } else {\r\n        if (type == \"checkbox\") {\r\n          var val = ew.getOptionValues(this.get());\r\n          return this.length == 1 ? val.join() : val;\r\n        } else if (type == \"radio\") {\r\n          return ew.getOptionValues(this.get()).join();\r\n        } else if (ew.isHiddenTextArea(this)) {\r\n          this.data(\"editor\").save();\r\n          return this.val();\r\n        } else {\r\n          return this.val();\r\n        }\r\n      }\r\n    },\r\n    // Get field value as number\r\n    toNumber: function toNumber() {\r\n      return ew.parseNumber(this.value());\r\n    },\r\n    // Get field value as moment object\r\n    toDate: function toDate() {\r\n      return ew.parseDate(this.value(), this.data(\"format\"));\r\n    },\r\n    // Get field value as native Date object\r\n    toJsDate: function toJsDate() {\r\n      return ew.parseDate(this.value(), this.data(\"format\")).toDate();\r\n    }\r\n  });\n\n  $__default['default'](window).off(\"load.lte.treeview\"); // Treeview\r\n\r\n  var Treeview = adminlte.Treeview;\r\n  Treeview.prototype._toggle = Treeview.prototype.toggle;\r\n\r\n  Treeview.prototype.toggle = function toggle(event) {\r\n    var $currentTarget = $__default['default'](event.currentTarget),\r\n        treeviewMenu = $currentTarget.next(),\r\n        href = $currentTarget.attr(\"href\"),\r\n        isText = event.target.tagName == \"P\";\r\n    if (!treeviewMenu.is(\".nav-treeview\") || isText && href && href != \"#\" && href != \"javascript:void(0);\") // Menu text with href\r\n      return;\r\n\r\n    this._toggle(event);\r\n\r\n    event.stopImmediatePropagation();\r\n  }; // Dropdown menu parent item with href // Override AdminLTE\r\n\r\n  $__default['default'](\"ul.dropdown-menu [data-toggle=dropdown]\").on(\"click\", function (e) {\r\n    var href = $__default['default'](this).attr(\"href\");\r\n    if (href && href != \"#\" && e.target.nodeName == \"SPAN\") window.location = href;\r\n  });\n\n}(jQuery));\n"]}